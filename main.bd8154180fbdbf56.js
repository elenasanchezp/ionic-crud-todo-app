(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(un,yt,V)=>{"use strict";V.d(yt,{nm:()=>ki});var u=V(5813);V(4650),V(5867);var at=V(5861),Ye=V(9681),G=V(4859),Me=V(2090),Ne=V(1877);const Q=new Map,tt={activated:!1,tokenObservers:[]},Le={initialized:!1,enabled:!1};function ke(st){return Q.get(st)||tt}function $e(st,Fe){Q.set(st,Fe)}function nt(){return Le}const We="https://content-firebaseappcheck.googleapis.com/v1",Ie="exchangeDebugToken",De={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class et{constructor(Fe,vt,Ut,Jt,gn){if(this.operation=Fe,this.retryPolicy=vt,this.getWaitDuration=Ut,this.lowerBound=Jt,this.upperBound=gn,this.pending=null,this.nextErrorWaitInterval=Jt,Jt>gn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Fe){var vt=this;return(0,at.Z)(function*(){vt.stop();try{vt.pending=new Me.BH,yield function He(st){return new Promise(Fe=>{setTimeout(Fe,st)})}(vt.getNextRun(Fe)),vt.pending.resolve(),yield vt.pending.promise,vt.pending=new Me.BH,yield vt.operation(),vt.pending.resolve(),yield vt.pending.promise,vt.process(!0).catch(()=>{})}catch(Ut){vt.retryPolicy(Ut)?vt.process(!1).catch(()=>{}):vt.stop()}})()}getNextRun(Fe){if(Fe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const vt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),vt}}}const Ze=new Me.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function An(st,Fe){return bn.apply(this,arguments)}function bn(){return(bn=(0,at.Z)(function*({url:st,body:Fe},vt){var Ut,Jt;const gn={"Content-Type":"application/json"},qn=vt.getImmediate({optional:!0});if(qn){const us=yield qn.getHeartbeatsHeader();us&&(gn["X-Firebase-Client"]=us)}const vi={method:"POST",body:JSON.stringify(Fe),headers:gn};let Kn,hs;try{Kn=yield fetch(st,vi)}catch(us){throw Ze.create("fetch-network-error",{originalErrorMessage:null===(Ut=us)||void 0===Ut?void 0:Ut.message})}if(200!==Kn.status)throw Ze.create("fetch-status-error",{httpStatus:Kn.status});try{hs=yield Kn.json()}catch(us){throw Ze.create("fetch-parse-error",{originalErrorMessage:null===(Jt=us)||void 0===Jt?void 0:Jt.message})}const ai=hs.ttl.match(/^([\d.]+)(s)$/);if(!ai||!ai[2]||isNaN(Number(ai[1])))throw Ze.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${hs.ttl}`});const Ji=1e3*Number(ai[1]),es=Date.now();return{token:hs.token,expireTimeMillis:es+Ji,issuedAtTimeMillis:es}})).apply(this,arguments)}const gr="firebase-app-check-database",Gn=1,Ir="firebase-app-check-store";let Dr=null;function sr(st,Fe){return wn.apply(this,arguments)}function wn(){return(wn=(0,at.Z)(function*(st,Fe){const Ut=(yield function qt(){return Dr||(Dr=new Promise((st,Fe)=>{var vt;try{const Ut=indexedDB.open(gr,Gn);Ut.onsuccess=Jt=>{st(Jt.target.result)},Ut.onerror=Jt=>{var gn;Fe(Ze.create("storage-open",{originalErrorMessage:null===(gn=Jt.target.error)||void 0===gn?void 0:gn.message}))},Ut.onupgradeneeded=Jt=>{0===Jt.oldVersion&&Jt.target.result.createObjectStore(Ir,{keyPath:"compositeKey"})}}catch(Ut){Fe(Ze.create("storage-open",{originalErrorMessage:null===(vt=Ut)||void 0===vt?void 0:vt.message}))}}),Dr)}()).transaction(Ir,"readwrite"),gn=Ut.objectStore(Ir).put({compositeKey:st,value:Fe});return new Promise((qn,vi)=>{gn.onsuccess=Kn=>{qn()},Ut.onerror=Kn=>{var hs;vi(Ze.create("storage-set",{originalErrorMessage:null===(hs=Kn.target.error)||void 0===hs?void 0:hs.message}))}})})).apply(this,arguments)}const mr=new Ne.Yd("@firebase/app-check");function oi(st,Fe){return(0,Me.hl)()?function Or(st,Fe){return sr(function Vn(st){return`${st.options.appId}-${st.name}`}(st),Fe)}(st,Fe).catch(vt=>{mr.warn(`Failed to write token to IndexedDB. Error: ${vt}`)}):Promise.resolve()}function Yn(){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,at.Z)(function*(){const st=nt();if(st.enabled&&st.token)return st.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Se={error:"UNKNOWN_ERROR"};function Ge(st){return Me.US.encodeString(JSON.stringify(st),!1)}function Ue(st){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,at.Z)(function*(st,Fe=!1){const vt=st.app;!function Ot(st){if(!ke(st).activated)throw Ze.create("use-before-activation",{appName:st.name})}(vt);const Ut=ke(vt);let gn,Jt=Ut.token;if(!Jt){const Kn=yield Ut.cachedTokenPromise;Kn&&pn(Kn)&&(Jt=Kn)}if(!Fe&&Jt&&pn(Jt))return{token:Jt.token};let vi,qn=!1;if(function Ii(){return nt().enabled}()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=An(function Ht(st,Fe){const{projectId:vt,appId:Ut,apiKey:Jt}=st.options;return{url:`${We}/projects/${vt}/apps/${Ut}:${Ie}?key=${Jt}`,body:{debug_token:Fe}}}(vt,yield Yn()),st.heartbeatServiceProvider).then(hs=>(Ut.exchangeTokenPromise=void 0,hs)),qn=!0);const Kn=yield Ut.exchangeTokenPromise;return yield oi(vt,Kn),$e(vt,Object.assign(Object.assign({},Ut),{token:Kn})),{token:Kn.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().then(Kn=>(Ut.exchangeTokenPromise=void 0,Kn)),qn=!0),Jt=yield Ut.exchangeTokenPromise}catch(Kn){"appCheck/throttled"===Kn.code?mr.warn(Kn.message):mr.error(Kn),gn=Kn}return Jt?(vi={token:Jt.token},$e(vt,Object.assign(Object.assign({},Ut),{token:Jt})),yield oi(vt,Jt)):vi=function br(st){return{token:Ge(Se),error:st}}(gn),qn&&function Wn(st,Fe){const vt=ke(st).tokenObservers;for(const Ut of vt)try{"EXTERNAL"===Ut.type&&null!=Fe.error?Ut.error(Fe.error):Ut.next(Fe)}catch(Jt){}}(vt,vi),vi})).apply(this,arguments)}function dn(st,Fe){const vt=ke(st),Ut=vt.tokenObservers.filter(Jt=>Jt.next!==Fe);0===Ut.length&&vt.tokenRefresher&&vt.tokenRefresher.isRunning()&&vt.tokenRefresher.stop(),$e(st,Object.assign(Object.assign({},vt),{tokenObservers:Ut}))}function ir(st){const{app:Fe}=st,vt=ke(Fe);let Ut=vt.tokenRefresher;Ut||(Ut=function zn(st){const{app:Fe}=st;return new et((0,at.Z)(function*(){let Ut;if(Ut=ke(Fe).token?yield Ue(st,!0):yield Ue(st),Ut.error)throw Ut.error}),()=>!0,()=>{const vt=ke(Fe);if(vt.token){let Ut=vt.token.issuedAtTimeMillis+.5*(vt.token.expireTimeMillis-vt.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,vt.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},De.RETRIAL_MIN_WAIT,De.RETRIAL_MAX_WAIT)}(st),$e(Fe,Object.assign(Object.assign({},vt),{tokenRefresher:Ut}))),!Ut.isRunning()&&vt.isTokenAutoRefreshEnabled&&Ut.start()}function pn(st){return st.expireTimeMillis-Date.now()>0}class Gr{constructor(Fe,vt){this.app=Fe,this.heartbeatServiceProvider=vt}_delete(){const{tokenObservers:Fe}=ke(this.app);for(const vt of Fe)dn(this.app,vt.next);return Promise.resolve()}}const cn="app-check-internal";!function Un(){(0,Ye._registerComponent)(new G.wA("app-check",st=>function ri(st,Fe){return new Gr(st,Fe)}(st.getProvider("app").getImmediate(),st.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((st,Fe,vt)=>{st.getProvider(cn).initialize()})),(0,Ye._registerComponent)(new G.wA(cn,st=>function ut(st){return{getToken:Fe=>Ue(st,Fe),addTokenListener:Fe=>function Qt(st,Fe,vt,Ut){const{app:Jt}=st,gn=ke(Jt),qn={next:vt,error:Ut,type:Fe};if($e(Jt,Object.assign(Object.assign({},gn),{tokenObservers:[...gn.tokenObservers,qn]})),gn.token&&pn(gn.token)){const vi=gn.token;Promise.resolve().then(()=>{vt({token:vi.token}),ir(st)}).catch(()=>{})}gn.cachedTokenPromise.then(()=>ir(st))}(st,"INTERNAL",Fe),removeTokenListener:Fe=>dn(st.app,Fe)}}(st.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ye.registerVersion)("@firebase/app-check","0.5.12")}();class ki{constructor(){return(0,u.vb)("app-check")}}typeof window<"u"&&window},1205:(un,yt,V)=>{"use strict";V.d(yt,{zQ:()=>We,ww:()=>gt,rT:()=>Le,f7:()=>$e,L6:()=>Q,_Q:()=>tt,lh:()=>ke,Qv:()=>Ne,nw:()=>nt});var u=V(4650),J=V(7579),H=V(9646),xe=V(9751),Re=V(8996),Pe=V(6451),me=V(5363),Te=V(3900),Ve=V(4004),_e=V(6063);class ce extends J.x{constructor(Ie=1/0,De=1/0,we=_e.l){super(),this._bufferSize=Ie,this._windowTime=De,this._timestampProvider=we,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=De===1/0,this._bufferSize=Math.max(1,Ie),this._windowTime=Math.max(1,De)}next(Ie){const{isStopped:De,_buffer:we,_infiniteTimeWindow:et,_timestampProvider:He,_windowTime:rt}=this;De||(we.push(Ie),!et&&we.push(He.now()+rt)),this._trimBuffer(),super.next(Ie)}_subscribe(Ie){this._throwIfClosed(),this._trimBuffer();const De=this._innerSubscribe(Ie),{_infiniteTimeWindow:we,_buffer:et}=this,He=et.slice();for(let rt=0;rt<He.length&&!Ie.closed;rt+=we?1:2)Ie.next(He[rt]);return this._checkFinalizedStatuses(Ie),De}_trimBuffer(){const{_bufferSize:Ie,_timestampProvider:De,_buffer:we,_infiniteTimeWindow:et}=this,He=(et?1:2)*Ie;if(Ie<1/0&&He<we.length&&we.splice(0,we.length-He),!et){const rt=De.now();let Ze=0;for(let Pt=1;Pt<we.length&&we[Pt]<=rt;Pt+=2)Ze=Pt;Ze&&we.splice(0,Ze+1)}}}var de=V(3099);function Ae(ot,Ie,De){let we,et=!1;return ot&&"object"==typeof ot?({bufferSize:we=1/0,windowTime:Ie=1/0,refCount:et=!1,scheduler:De}=ot):we=null!=ot?ot:1/0,(0,de.B)({connector:()=>new ce(we,Ie,De),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:et})}var je=V(590),it=V(576);function bt(ot,Ie){return(0,it.m)(Ie)?(0,Te.w)(()=>ot,Ie):(0,Te.w)(()=>ot)}var Ce=V(9468),ve=V(9300),ae=V(5813),lt=V(2011),at=V(6895),Ye=V(440),G=V(127);const Ne=new u.OlP("angularfire2.auth.use-emulator"),Q=new u.OlP("angularfire2.auth.settings"),tt=new u.OlP("angularfire2.auth.tenant-id"),Le=new u.OlP("angularfire2.auth.langugage-code"),ke=new u.OlP("angularfire2.auth.use-device-language"),$e=new u.OlP("angularfire.auth.persistence"),nt=(ot,Ie,De,we,et,He,rt,Ze)=>(0,lt.cc)(`${ot.name}.auth`,"AngularFireAuth",ot.name,()=>{const Pt=Ie.runOutsideAngular(()=>ot.auth());if(De&&Pt.useEmulator(...De),we&&(Pt.tenantId=we),Pt.languageCode=et,He&&Pt.useDeviceLanguage(),rt)for(const[Ot,kt]of Object.entries(rt))Pt.settings[Ot]=kt;return Ze&&Pt.setPersistence(Ze),Pt},[De,we,et,He,rt,Ze]);let We=(()=>{class ot{constructor(De,we,et,He,rt,Ze,Pt,Ot,kt,Ct,An,bn){const Cn=new J.x,xn=(0,H.of)(void 0).pipe((0,me.Q)(rt.outsideAngular),(0,Te.w)(()=>He.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1451)))),(0,Ve.U)(()=>(0,lt.on)(De,He,we)),(0,Ve.U)(Ht=>nt(Ht,He,Ze,Ot,kt,Ct,Pt,An)),Ae({bufferSize:1,refCount:!1}));if((0,at.PM)(et))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,H.of)(null);else{xn.pipe((0,je.P)()).subscribe();const gr=xn.pipe((0,Te.w)(Dn=>Dn.getRedirectResult().then(Dr=>Dr,()=>null)),ae.iC,Ae({bufferSize:1,refCount:!1})),Gn=xn.pipe((0,Te.w)(Dn=>new xe.y(Dr=>({unsubscribe:He.runOutsideAngular(()=>Dn.onAuthStateChanged(qt=>Dr.next(qt),qt=>Dr.error(qt),()=>Dr.complete()))})))),Ir=xn.pipe((0,Te.w)(Dn=>new xe.y(Dr=>({unsubscribe:He.runOutsideAngular(()=>Dn.onIdTokenChanged(qt=>Dr.next(qt),qt=>Dr.error(qt),()=>Dr.complete()))}))));this.authState=gr.pipe(bt(Gn),(0,Ce.R)(rt.outsideAngular),(0,me.Q)(rt.insideAngular)),this.user=gr.pipe(bt(Ir),(0,Ce.R)(rt.outsideAngular),(0,me.Q)(rt.insideAngular)),this.idToken=this.user.pipe((0,Te.w)(Dn=>Dn?(0,Re.D)(Dn.getIdToken()):(0,H.of)(null))),this.idTokenResult=this.user.pipe((0,Te.w)(Dn=>Dn?(0,Re.D)(Dn.getIdTokenResult()):(0,H.of)(null))),this.credential=(0,Pe.T)(gr,Cn,this.authState.pipe((0,ve.h)(Dn=>!Dn))).pipe((0,Ve.U)(Dn=>null!=Dn&&Dn.user?Dn:null),(0,Ce.R)(rt.outsideAngular),(0,me.Q)(rt.insideAngular))}return(0,lt.pX)(this,xn,He,{spy:{apply:(Ht,gr,Gn)=>{(Ht.startsWith("signIn")||Ht.startsWith("createUser"))&&Gn.then(Ir=>Cn.next(Ir))}}})}}return ot.\u0275fac=function(De){return new(De||ot)(u.LFG(lt.Dh),u.LFG(lt.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ae.HU),u.LFG(Ne,8),u.LFG(Q,8),u.LFG(tt,8),u.LFG(Le,8),u.LFG(ke,8),u.LFG($e,8),u.LFG(Ye.nm,8))},ot.\u0275prov=u.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"any"}),ot})(),gt=(()=>{class ot{constructor(){G.Z.registerVersion("angularfire",ae.q4.full,"auth-compat")}}return ot.\u0275fac=function(De){return new(De||ot)},ot.\u0275mod=u.oAB({type:ot}),ot.\u0275inj=u.cJS({providers:[We]}),ot})()},7407:(un,yt,V)=>{"use strict";V.d(yt,{ST:()=>Ev,yb:()=>u_});var u=V(4650),J=V(4986),H=V(9751),xe=V(8996),Re=V(9646),Pe=V(5813),me=V(8675),Te=V(4482),Ve=V(5403);function _e(){return(0,Te.e)((i,e)=>{let t,s=!1;i.subscribe((0,Ve.x)(e,h=>{const v=t;t=h,s&&e.next([v,h]),s=!0}))})}var Q,ce=V(4004),de=V(5026),Ae=V(1884),je=V(9300),it=V(2011),bt=V(6895),ve=(V(1451),V(3942)),ae=V(5861),lt=V(9681),at=V(4859),Ye=V(1877),G=V(2090),Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={},tt=tt||{},Le=Me||self;function ke(){}function $e(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function nt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var gt="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function Ie(i,e,t){return i.call.apply(i.bind,arguments)}function De(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,s),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function we(i,e,t){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ie:De).apply(null,arguments)}function et(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function He(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,h,v){for(var C=Array(arguments.length-2),k=2;k<arguments.length;k++)C[k-2]=arguments[k];return e.prototype[h].apply(s,C)}}function rt(){this.s=this.s,this.o=this.o}var Pt={};rt.prototype.s=!1,rt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function We(i){return Object.prototype.hasOwnProperty.call(i,gt)&&i[gt]||(i[gt]=++ot)}(this);delete Pt[i]}},rt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ot=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},kt=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,h="string"==typeof i?i.split(""):i;for(let v=0;v<s;v++)v in h&&e.call(t,h[v],v,i)};function An(i){return Array.prototype.concat.apply([],arguments)}function bn(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Cn(i){return/^[\s\xa0]*$/.test(i)}var Gn,xn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ht(i,e){return-1!=i.indexOf(e)}function gr(i,e){return i<e?-1:i>e?1:0}e:{var Ir=Le.navigator;if(Ir){var Dn=Ir.userAgent;if(Dn){Gn=Dn;break e}}Gn=""}function Dr(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function qt(i){const e={};for(const t in i)e[t]=i[t];return e}var Vr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Or(i,e){let t,s;for(let h=1;h<arguments.length;h++){for(t in s=arguments[h],s)i[t]=s[t];for(let v=0;v<Vr.length;v++)t=Vr[v],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function hr(i){return hr[" "](i),i}hr[" "]=ke;var Sr,i,sr=Ht(Gn,"Opera"),wn=Ht(Gn,"Trident")||Ht(Gn,"MSIE"),fn=Ht(Gn,"Edge"),vn=fn||wn,Vn=Ht(Gn,"Gecko")&&!(Ht(Gn.toLowerCase(),"webkit")&&!Ht(Gn,"Edge"))&&!(Ht(Gn,"Trident")||Ht(Gn,"MSIE"))&&!Ht(Gn,"Edge"),mr=Ht(Gn.toLowerCase(),"webkit")&&!Ht(Gn,"Edge");function Gt(){var i=Le.document;return i?i.documentMode:void 0}e:{var oi="",Gi=(i=Gn,Vn?/rv:([^\);]+)(\)|;)/.exec(i):fn?/Edge\/([\d\.]+)/.exec(i):wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):mr?/WebKit\/(\S+)/.exec(i):sr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Gi&&(oi=Gi?Gi[1]:""),wn){var Er=Gt();if(null!=Er&&Er>parseFloat(oi)){Sr=String(Er);break e}}Sr=oi}var Ii={};var Se=Le.document&&wn&&(Gt()||parseInt(Sr,10))||void 0,Ge=function(){if(!Le.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Le.addEventListener("test",ke,e),Le.removeEventListener("test",ke,e)}catch(t){}return i}();function Ue(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Lt(i,e){if(Ue.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Vn){e:{try{hr(e.nodeName);var h=!0;break e}catch(v){}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Qt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Lt.Z.h.call(this)}}Ue.prototype.h=function(){this.defaultPrevented=!0},He(Lt,Ue);var Qt={2:"touch",3:"pen",4:"mouse"};Lt.prototype.h=function(){Lt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var dn="closure_listenable_"+(1e6*Math.random()|0),ir=0;function zn(i,e,t,s,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=h,this.key=++ir,this.ca=this.fa=!1}function Wn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function pn(i){this.src=i,this.g={},this.h=0}function br(i,e){var t=e.type;if(t in i.g){var v,s=i.g[t],h=Ot(s,e);(v=0<=h)&&Array.prototype.splice.call(s,h,1),v&&(Wn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Gr(i,e,t,s){for(var h=0;h<i.length;++h){var v=i[h];if(!v.ca&&v.listener==e&&v.capture==!!t&&v.ia==s)return h}return-1}pn.prototype.add=function(i,e,t,s,h){var v=i.toString();(i=this.g[v])||(i=this.g[v]=[],this.h++);var C=Gr(i,e,s,h);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new zn(e,this.src,v,!!s,h)).fa=t,i.push(e)),e};var ri="closure_lm_"+(1e6*Math.random()|0),ut={};function Je(i,e,t,s,h){if(s&&s.once)return Bt(i,e,t,s,h);if(Array.isArray(e)){for(var v=0;v<e.length;v++)Je(i,e[v],t,s,h);return null}return t=Pi(t),i&&i[dn]?i.N(e,t,nt(s)?!!s.capture:!!s,h):ge(i,e,t,!1,s,h)}function ge(i,e,t,s,h,v){if(!e)throw Error("Invalid event type");var C=nt(h)?!!h.capture:!!h,k=Bi(i);if(k||(i[ri]=k=new pn(i)),(t=k.add(e,t,s,C,v)).proxy)return t;if(s=function _t(){var e=di;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Ge||(h=C),void 0===h&&(h=!1),i.addEventListener(e.toString(),s,h);else if(i.attachEvent)i.attachEvent(Pr(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function Bt(i,e,t,s,h){if(Array.isArray(e)){for(var v=0;v<e.length;v++)Bt(i,e[v],t,s,h);return null}return t=Pi(t),i&&i[dn]?i.O(e,t,nt(s)?!!s.capture:!!s,h):ge(i,e,t,!0,s,h)}function nn(i,e,t,s,h){if(Array.isArray(e))for(var v=0;v<e.length;v++)nn(i,e[v],t,s,h);else s=nt(s)?!!s.capture:!!s,t=Pi(t),i&&i[dn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Gr(v=i.g[e],t,s,h))&&(Wn(v[t]),Array.prototype.splice.call(v,t,1),0==v.length&&(delete i.g[e],i.h--))):i&&(i=Bi(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Gr(e,t,s,h)),(t=-1<i?e[i]:null)&&Ln(t))}function Ln(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[dn])br(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Pr(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Bi(e))?(br(t,i),0==t.h&&(t.src=null,e[ri]=null)):Wn(i)}}}function Pr(i){return i in ut?ut[i]:ut[i]="on"+i}function di(i,e){if(i.ca)i=!0;else{e=new Lt(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&Ln(i),i=t.call(s,e)}return i}function Bi(i){return(i=i[ri])instanceof pn?i:null}var bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pi(i){return"function"==typeof i?i:(i[bi]||(i[bi]=function(e){return i.handleEvent(e)}),i[bi])}function or(){rt.call(this),this.i=new pn(this),this.P=this,this.I=null}function kr(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Ue(e,i);else if(e instanceof Ue)e.target=e.target||i;else{var h=e;Or(e=new Ue(s,i),h)}if(h=!0,t)for(var v=t.length-1;0<=v;v--){var C=e.g=t[v];h=wr(C,s,!0,e)&&h}if(h=wr(C=e.g=i,s,!0,e)&&h,h=wr(C,s,!1,e)&&h,t)for(v=0;v<t.length;v++)h=wr(C=e.g=t[v],s,!1,e)&&h}function wr(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,v=0;v<e.length;++v){var C=e[v];if(C&&!C.ca&&C.capture==t){var k=C.listener,z=C.ia||C.src;C.fa&&br(i.i,C),h=!1!==k.call(z,s)&&h}}return h&&!s.defaultPrevented}He(or,rt),or.prototype[dn]=!0,or.prototype.removeEventListener=function(i,e,t,s){nn(this,i,e,t,s)},or.prototype.M=function(){if(or.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Wn(t[s]);delete i.g[e],i.h--}}this.I=null},or.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},or.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var hi=Le.JSON.stringify;function fi(){var i=Ci;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Kr,qr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Br,i=>i.reset());class Br{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ii(i){Le.setTimeout(()=>{throw i},0)}function $r(i,e){Kr||function ls(){var i=Le.Promise.resolve(void 0);Kr=function(){i.then(cn)}}(),Qi||(Kr(),Qi=!0),Ci.add(i,e)}var Qi=!1,Ci=new class Bn{constructor(){this.h=this.g=null}add(e,t){const s=qr.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function cn(){for(var i;i=fi();){try{i.h.call(i.g)}catch(t){ii(t)}var e=qr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Qi=!1}function Un(i,e){or.call(this),this.h=i||1,this.g=e||Le,this.j=we(this.kb,this),this.l=Date.now()}function Ur(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function ei(i,e,t){if("function"==typeof i)t&&(i=we(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=we(i.handleEvent,i)}return 2147483647<Number(e)?-1:Le.setTimeout(i,e||0)}function ki(i){i.g=ei(()=>{i.g=null,i.i&&(i.i=!1,ki(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}He(Un,or),(Q=Un.prototype).da=!1,Q.S=null,Q.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kr(this,"tick"),this.da&&(Ur(this),this.start()))}},Q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){Un.Z.M.call(this),Ur(this),delete this.g};class ne extends rt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ki(this)}M(){super.M(),this.g&&(Le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(i){rt.call(this),this.h=i,this.g={}}He(he,rt);var qe=[];function pt(i,e,t,s){Array.isArray(t)||(t&&(qe[0]=t.toString()),t=qe);for(var h=0;h<t.length;h++){var v=Je(e,t[h],s||i.handleEvent,!1,i.h||i);if(!v)break;i.g[v.key]=v}}function Mt(i){Dr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Ln(e)},i),i.g={}}function le(){this.g=!0}function Dt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Kt(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var h=s[1];if(Array.isArray(h)&&!(1>h.length)){var v=h[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var C=1;C<h.length;C++)h[C]=""}}}return hi(t)}catch(k){return e}}(i,t)+(s?" "+s:"")})}he.prototype.M=function(){he.Z.M.call(this),Mt(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},le.prototype.Aa=function(){this.g=!1},le.prototype.info=function(){};var mn={},jn=null;function ar(){return jn=jn||new or}function xr(i){Ue.call(this,mn.Ma,i)}function st(i){const e=ar();kr(e,new xr(e,i))}function Fe(i,e){Ue.call(this,mn.STAT_EVENT,i),this.stat=e}function vt(i){const e=ar();kr(e,new Fe(e,i))}function Ut(i,e){Ue.call(this,mn.Na,i),this.size=e}function Jt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Le.setTimeout(function(){i()},e)}mn.Ma="serverreachability",He(xr,Ue),mn.STAT_EVENT="statevent",He(Fe,Ue),mn.Na="timingevent",He(Ut,Ue);var gn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vi(){}function hs(){}vi.prototype.h=null;var us,ai={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ji(){Ue.call(this,"d")}function es(){Ue.call(this,"c")}function As(){}function xi(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new he(this),this.P=Qo,this.W=new Un(i=vn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}He(Ji,Ue),He(es,Ue),He(As,vi),As.prototype.g=function(){return new XMLHttpRequest},As.prototype.i=function(){return{}},us=new As;var Qo=45e3,Is={},Di={};function xs(i,e,t){i.K=1,i.v=uo(Wi(e)),i.s=t,i.U=!0,Eo(i,null)}function Eo(i,e){i.F=Date.now(),fs(i),i.A=Wi(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),Gs(t.h,"t",s),i.C=0,t=i.l.H,i.h=new Xo,i.g=wl(i.l,t?e:null,!i.s),0<i.O&&(i.L=new ne(we(i.Ia,i,i.g),i.O)),pt(i.V,i.g,"readystatechange",i.gb),e=i.H?qt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),st(1),function Qe(i,e,t,s,h,v){i.info(function(){if(i.g)if(v)for(var C="",k=v.split("&"),z=0;z<k.length;z++){var X=k[z].split("=");if(1<X.length){var pe=X[0];X=X[1];var Ke=pe.split("_");C=2<=Ke.length&&"type"==Ke[1]?C+(pe+"=")+X+"&":C+(pe+"=redacted&")}}else C=null;else C=v;return"XMLHTTP REQ ("+s+") [attempt "+h+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ro(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function da(i,e,t){let h,s=!0;for(;!i.I&&i.C<t.length;){if(h=wo(i,t),h==Di){4==e&&(i.o=4,vt(14),s=!1),Dt(i.j,i.m,null,"[Incomplete Response]");break}if(h==Is){i.o=4,vt(15),Dt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Dt(i.j,i.m,h,null),bo(i,h)}Ro(i)&&h!=Di&&h!=Is&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,vt(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),li(e),e.L=!0,vt(11))):(Dt(i.j,i.m,t,"[Invalid Chunked Response]"),bs(i),Io(i))}function wo(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Di:(t=Number(e.substring(t,s)),isNaN(t)?Is:(s+=1)+t>e.length?Di:(e=e.substr(s,t),i.C=s+t,e))}function fs(i){i.Y=Date.now()+i.P,Ms(i,i.P)}function Ms(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Jt(we(i.eb,i),e)}function zi(i){i.B&&(Le.clearTimeout(i.B),i.B=null)}function Io(i){0==i.l.G||i.I||Fl(i.l,i)}function bs(i){zi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ur(i.W),Mt(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function bo(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Qs(t.i,i)))if(t.I=i.N,!i.J&&Qs(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(X){s=null}if(Array.isArray(s)&&3==s.length){var h=s;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Zi(t),ta(t)}Ds(t),vt(18)}}else t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=Jt(we(t.ab,t),6e3));if(1>=Va(t.i)&&t.ka){try{t.ka()}catch(X){}t.ka=void 0}}else va(t,11)}else if((i.J||t.g==i)&&Zi(t),!Cn(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let X=h[e];if(t.U=X[0],X=X[1],2==t.G)if("c"==X[0]){t.J=X[1],t.la=X[2];const pe=X[3];null!=pe&&(t.ma=pe,t.h.info("VER="+t.ma));const Ke=X[4];null!=Ke&&(t.za=Ke,t.h.info("SVER="+t.za));const Rt=X[5];null!=Rt&&"number"==typeof Rt&&0<Rt&&(t.K=s=1.5*Rt,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const Wt=i.g;if(Wt){const tn=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tn){var v=s.i;!v.g&&(Ht(tn,"spdy")||Ht(tn,"quic")||Ht(tn,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(So(v,v.h),v.h=null))}if(s.D){const kn=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;kn&&(s.sa=kn,Xr(s.F,s.D,kn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((s=t).oa=_a(s,s.H?s.la:null,s.W),C.J){Ua(s.i,C);var k=C,z=s.K;z&&k.setTimeout(z),k.B&&(zi(k),fs(k)),s.g=C}else mi(s);0<t.l.length&&Yi(t)}else"stop"!=X[0]&&"close"!=X[0]||va(t,7);else 3==t.G&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?va(t,7):$i(t):"noop"!=X[0]&&t.j&&t.j.wa(X),t.A=0)}st(4)}catch(X){}}function js(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if($e(i)||"string"==typeof i)kt(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if($e(i)||"string"==typeof i){t=[];for(var s=i.length,h=0;h<s;h++)t.push(h)}else for(h in t=[],s=0,i)t[s++]=h;s=function ps(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if($e(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),h=s.length;for(var v=0;v<h;v++)e.call(void 0,s[v],t&&t[v],i)}}function Zs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Zs)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function Co(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];cs(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var h={};for(t=e=0;e<i.g.length;)cs(h,s=i.g[e])||(i.g[t++]=s,h[s]=1),e++;i.g.length=t}}function cs(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Q=xi.prototype).setTimeout=function(i){this.P=i},Q.gb=function(i){i=i.target;const e=this.L;e&&3==Lo(i)?e.l():this.Ia(i)},Q.Ia=function(i){try{if(i==this.g)e:{const pe=Lo(this.g);var e=this.g.Da();const Ke=this.g.ba();if(!(3>pe)&&(3!=pe||vn||this.g&&(this.h.h||this.g.ga()||Js(this.g)))){this.I||4!=pe||7==e||st(8==e||0>=Ke?3:2),zi(this);var t=this.g.ba();this.N=t;t:if(Ro(this)){var s=Js(this.g);i="";var h=s.length,v=4==Lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bs(this),Io(this);var C="";break t}this.h.i=new Le.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:v&&e==h-1});s.splice(0,h),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function ht(i,e,t,s,h,v,C){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+v+" "+C})}(this.j,this.u,this.A,this.m,this.X,pe,t),this.i){if(this.$&&!this.J){t:{if(this.g){var k,z=this.g;if((k=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cn(k)){var X=k;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,vt(12),bs(this),Io(this);break e}Dt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bo(this,t)}this.U?(da(this,pe,C),vn&&this.i&&3==pe&&(pt(this.V,this.W,"tick",this.fb),this.W.start())):(Dt(this.j,this.m,C,null),bo(this,C)),4==pe&&bs(this),this.i&&!this.I&&(4==pe?Fl(this.l,this):(this.i=!1,fs(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,vt(12)):(this.o=0,vt(13)),bs(this),Io(this)}}}catch(pe){}},Q.fb=function(){if(this.g){var i=Lo(this.g),e=this.g.ga();this.C<e.length&&(zi(this),da(this,i,e),this.i&&4!=i&&fs(this))}},Q.cancel=function(){this.I=!0,bs(this)},Q.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Ft(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(st(3),vt(17)),bs(this),this.o=2,Io(this)):Ms(this,this.Y-i)},(Q=Zs.prototype).R=function(){Co(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Q.T=function(){return Co(this),this.g.concat()},Q.get=function(i,e){return cs(this.h,i)?this.h[i]:e},Q.set=function(i,e){cs(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Q.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var h=t[s],v=this.get(h);i.call(e,v,h,this)}};var Oo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rs(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Rs){this.g=void 0!==e?e:i.g,ds(this,i.j),this.s=i.s,ks(this,i.i),ms(this,i.m),this.l=i.l,e=i.h;var t=new Do;t.i=e.i,e.g&&(t.g=new Zs(e.g),t.h=e.h),Ns(this,t),this.o=i.o}else i&&(t=String(i).match(Oo))?(this.g=!!e,ds(this,t[1]||"",!0),this.s=yr(t[2]||""),ks(this,t[3]||"",!0),ms(this,t[4]),this.l=yr(t[5]||"",!0),Ns(this,t[6]||"",!0),this.o=yr(t[7]||"")):(this.g=!!e,this.h=new Do(null,this.g))}function Wi(i){return new Rs(i)}function ds(i,e,t){i.j=t?yr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ks(i,e,t){i.i=t?yr(e,!0):e}function ms(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ns(i,e,t){e instanceof Do?(i.h=e,function Os(i,e){e&&!i.j&&(qi(i),i.i=null,i.g.forEach(function(t,s){var h=s.toLowerCase();s!=h&&(Ri(this,s),Gs(this,h,t))},i)),i.j=e}(i.h,i.g)):(t||(e=ys(e,Mi)),i.h=new Do(e,i.g))}function Xr(i,e,t){i.h.set(e,t)}function uo(i){return Xr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function yr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ys(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Po),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Po(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Rs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ys(e,Zr,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ys(e,Zr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(ys(t,"/"==t.charAt(0)?Hs:Jo,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ys(t,ha)),i.join("")};var Zr=/[#\/\?@]/g,Jo=/[#\?:]/g,Hs=/[#\?]/g,Mi=/[#\?@]/g,ha=/#/g;function Do(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function qi(i){i.g||(i.g=new Zs,i.h=0,i.i&&function gs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),h=null;if(0<=s){var v=i[t].substring(0,s);h=i[t].substring(s+1)}else v=i[t];e(v,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ri(i,e){qi(i),e=zs(i,e),cs(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,cs((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Co(i)))}function vs(i,e){return qi(i),e=zs(i,e),cs(i.g.h,e)}function Gs(i,e,t){Ri(i,e),0<t.length&&(i.i=null,i.g.set(zs(i,e),bn(t)),i.h+=t.length)}function zs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(Q=Do.prototype).add=function(i,e){qi(this),this.i=null,i=zs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(i,e){qi(this),this.g.forEach(function(t,s){kt(t,function(h){i.call(e,h,s,this)},this)},this)},Q.T=function(){qi(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var h=i[s],v=0;v<h.length;v++)t.push(e[s]);return t},Q.R=function(i){qi(this);var e=[];if("string"==typeof i)vs(this,i)&&(e=An(e,this.g.get(zs(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=An(e,i[t])}return e},Q.set=function(i,e){return qi(this),this.i=null,vs(this,i=zs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Q.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],h=encodeURIComponent(String(s));s=this.R(s);for(var v=0;v<s.length;v++){var C=h;""!==s[v]&&(C+="="+encodeURIComponent(String(s[v]))),i.push(C)}}return this.i=i.join("&")};var ko=class{constructor(i,e){this.h=i,this.g=e}};function ea(i){this.l=i||er,i=Le.PerformanceNavigationTiming?0<(i=Le.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Le.g&&Le.g.Ea&&Le.g.Ea()&&Le.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var er=10;function Ma(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Va(i){return i.h?1:i.g?i.g.size:0}function Qs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function So(i,e){i.g?i.g.add(e):i.h=e}function Ua(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function ja(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return bn(i.i)}function co(){}function m(){this.g=new co}function w(i,e,t){const s=t||"";try{js(i,function(h,v){let C=h;nt(h)&&(C=hi(h)),e.push(s+v+"="+encodeURIComponent(C))})}catch(h){throw e.push(s+"type="+encodeURIComponent("_badmap")),h}}function S(i,e,t,s,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(s)}catch(v){}}function W(i){this.l=i.$b||null,this.j=i.ib||!1}function ze(i,e){or.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=zt,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ea.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},co.prototype.stringify=function(i){return Le.JSON.stringify(i,void 0)},co.prototype.parse=function(i){return Le.JSON.parse(i,void 0)},He(W,vi),W.prototype.g=function(){return new ze(this.l,this.j)},W.prototype.i=function(i){return function(){return i}}({}),He(ze,or);var zt=0;function ln(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Sn(i){i.readyState=4,i.l=null,i.j=null,i.A=null,lr(i)}function lr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Q=ze.prototype).open=function(i,e){if(this.readyState!=zt)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,lr(this)},Q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Le).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sn(this)),this.readyState=zt},Q.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,lr(this)),this.g&&(this.readyState=3,lr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Le.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ln(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Q.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Sn(this):lr(this),3==this.readyState&&ln(this)}},Q.Ua=function(i){this.g&&(this.response=this.responseText=i,Sn(this))},Q.Ta=function(i){this.g&&(this.response=i,Sn(this))},Q.ha=function(){this.g&&Sn(this)},Q.setRequestHeader=function(i,e){this.v.append(i,e)},Q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(ze.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ti=Le.JSON.parse;function $n(i){or.call(this),this.headers=new Zs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ts,this.K=this.L=!1}He($n,or);var ts="",Cs=/^https?$/i,ni=["POST","PUT"];function No(i){return"content-type"==i.toLowerCase()}function fa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ho(i),pa(i)}function ho(i){i.D||(i.D=!0,kr(i,"complete"),kr(i,"error"))}function To(i){if(i.h&&typeof tt<"u"&&(!i.C[1]||4!=Lo(i)||2!=i.ba()))if(i.v&&4==Lo(i))ei(i.Fa,0,i);else if(kr(i,"readystatechange"),4==Lo(i)){i.h=!1;try{const k=i.ba();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===k){var h=String(i.H).match(Oo)[1]||null;if(!h&&Le.self&&Le.self.location){var v=Le.self.location.protocol;h=v.substr(0,v.length-1)}s=!Cs.test(h?h.toLowerCase():"")}t=s}if(t)kr(i,"complete"),kr(i,"success");else{i.m=6;try{var C=2<Lo(i)?i.g.statusText:""}catch(z){C=""}i.j=C+" ["+i.ba()+"]",ho(i)}}finally{pa(i)}}}function pa(i,e){if(i.g){Fo(i);const t=i.g,s=i.C[0]?ke:null;i.g=null,i.C=null,e||kr(i,"ready");try{t.onreadystatechange=s}catch(h){}}}function Fo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Le.clearTimeout(i.A),i.A=null)}function Lo(i){return i.g?i.g.readyState:0}function Js(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ts:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function fo(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function ga(i){let e="";return Dr(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Xr(i,e,t))}function po(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ru(i){this.za=0,this.l=[],this.h=new le,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=po("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=po("baseRetryDelayMs",5e3,i),this.$a=po("retryDelaySeedMs",1e4,i),this.Ya=po("forwardChannelMaxRetries",2,i),this.ra=po("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ea(i&&i.concurrentRequestLimit),this.Ca=new m,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function $i(i){if(iu(i),3==i.G){var e=i.V++,t=Wi(i.F);Xr(t,"SID",i.J),Xr(t,"RID",e),Xr(t,"TYPE","terminate"),na(i,t),(e=new xi(i,i.h,e,void 0)).K=2,e.v=uo(Wi(t)),t=!1,Le.navigator&&Le.navigator.sendBeacon&&(t=Le.navigator.sendBeacon(e.v.toString(),"")),!t&&Le.Image&&((new Image).src=e.v,t=!0),t||(e.g=wl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fs(e)}Ll(i)}function ta(i){i.g&&(li(i),i.g.cancel(),i.g=null)}function iu(i){ta(i),i.u&&(Le.clearTimeout(i.u),i.u=null),Zi(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Le.clearTimeout(i.m),i.m=null)}function eo(i,e){i.l.push(new ko(i.Za++,e)),3==i.G&&Yi(i)}function Yi(i){Ma(i.i)||i.m||(i.m=!0,$r(i.Ha,i),i.C=0)}function ma(i,e){var t;t=e?e.m:i.V++;const s=Wi(i.F);Xr(s,"SID",i.J),Xr(s,"RID",t),Xr(s,"AID",i.U),na(i,s),i.o&&i.s&&fo(s,i.o,i.s),t=new xi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Bo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),So(i.i,t),xs(t,s,e)}function na(i,e){i.j&&js({},function(t,s){Xr(e,s,t)})}function Bo(i,e,t){t=Math.min(i.l.length,t);var s=i.j?we(i.j.Oa,i.j,i):null;e:{var h=i.l;let v=-1;for(;;){const C=["count="+t];-1==v?0<t?(v=h[0].h,C.push("ofs="+v)):v=0:C.push("ofs="+v);let k=!0;for(let z=0;z<t;z++){let X=h[z].h;const pe=h[z].g;if(X-=v,0>X)v=Math.max(0,h[z].h-100),k=!1;else try{w(pe,C,"req"+X+"_")}catch(Ke){s&&s(pe)}}if(k){s=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function mi(i){i.g||i.u||(i.Y=1,$r(i.Ga,i),i.A=0)}function Ds(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Jt(we(i.Ga,i),_s(i,i.A)),i.A++,0))}function li(i){null!=i.B&&(Le.clearTimeout(i.B),i.B=null)}function ya(i){i.g=new xi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Wi(i.oa);Xr(e,"RID","rpc"),Xr(e,"SID",i.J),Xr(e,"CI",i.N?"0":"1"),Xr(e,"AID",i.U),na(i,e),Xr(e,"TYPE","xmlhttp"),i.o&&i.s&&fo(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=uo(Wi(e)),t.s=null,t.U=!0,Eo(t,i)}function Zi(i){null!=i.v&&(Le.clearTimeout(i.v),i.v=null)}function Fl(i,e){var t=null;if(i.g==e){Zi(i),li(i),i.g=null;var s=2}else{if(!Qs(i.i,e))return;t=e.D,Ua(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;kr(s=ar(),new Ut(s,t,e,h)),Yi(i)}else mi(i);else if(3==(h=e.o)||0==h&&0<i.I||!(1==s&&function lc(i,e){return!(Va(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Jt(we(i.Ha,i,e),_s(i,i.C)),i.C++,0)))}(i,e)||2==s&&Ds(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),h){case 1:va(i,5);break;case 4:va(i,10);break;case 3:va(i,6);break;default:va(i,2)}}function _s(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function va(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=we(i.jb,i);t||(t=new Rs("//www.google.com/images/cleardot.gif"),Le.location&&"http"==Le.location.protocol||ds(t,"https"),uo(t)),function f(i,e){const t=new le;if(Le.Image){const s=new Image;s.onload=et(S,t,s,"TestLoadImage: loaded",!0,e),s.onerror=et(S,t,s,"TestLoadImage: error",!1,e),s.onabort=et(S,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=et(S,t,s,"TestLoadImage: timeout",!1,e),Le.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else vt(2);i.G=0,i.j&&i.j.va(e),Ll(i),iu(i)}function Ll(i){i.G=0,i.I=-1,i.j&&((0!=ja(i.i).length||0!=i.l.length)&&(i.i.i.length=0,bn(i.l),i.l.length=0),i.j.ua())}function _a(i,e,t){let s=function Xs(i){return i instanceof Rs?Wi(i):new Rs(i,void 0)}(t);if(""!=s.i)e&&ks(s,e+"."+s.i),ms(s,s.m);else{const h=Le.location;s=function xa(i,e,t,s){var h=new Rs(null,void 0);return i&&ds(h,i),e&&ks(h,e),t&&ms(h,t),s&&(h.l=s),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return i.aa&&Dr(i.aa,function(h,v){Xr(s,v,h)}),t=i.sa,(e=i.D)&&t&&Xr(s,e,t),Xr(s,"VER",i.ma),na(i,s),s}function wl(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $n(t&&i.Ba&&!i.qa?new W({ib:!0}):i.qa)).L=i.H,e}function N(){}function q(){if(wn&&!(10<=Number(Se)))throw Error("Environmental error: no available transport.")}function B(i,e){or.call(this),this.g=new ru(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Cn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Et(this)}function ie(i){Ji.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ee(){es.call(this),this.status=1}function Et(i){this.g=i}(Q=$n.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():us.g(),this.C=function Kn(i){return i.h||(i.h=i.i())}(this.u?this.u:us),this.g.onreadystatechange=we(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(v){return void fa(this,v)}i=t||"";const h=new Zs(this.headers);s&&js(s,function(v,C){h.set(C,v)}),s=function Ct(i){e:{var e=No;const t=i.length,s="string"==typeof i?i.split(""):i;for(let h=0;h<t;h++)if(h in s&&e.call(void 0,s[h],h,i)){e=h;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(h.T()),t=Le.FormData&&i instanceof Le.FormData,!(0<=Ot(ni,e))||s||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(v,C){this.g.setRequestHeader(C,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fo(this),0<this.B&&((this.K=function Ki(i){return wn&&function Yn(){return function yi(i){var e=Ii;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=xn(String(Sr)).split("."),t=xn("9").split("."),s=Math.max(e.length,t.length);for(let C=0;0==i&&C<s;C++){var h=e[C]||"",v=t[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==h[0].length&&0==v[0].length)break;i=gr(0==h[1].length?0:parseInt(h[1],10),0==v[1].length?0:parseInt(v[1],10))||gr(0==h[2].length,0==v[2].length)||gr(h[2],v[2]),h=h[3],v=v[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=we(this.pa,this)):this.A=ei(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(v){fa(this,v)}},Q.pa=function(){typeof tt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kr(this,"timeout"),this.abort(8))},Q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,kr(this,"complete"),kr(this,"abort"),pa(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pa(this,!0)),$n.Z.M.call(this)},Q.Fa=function(){this.s||(this.F||this.v||this.l?To(this):this.cb())},Q.cb=function(){To(this)},Q.ba=function(){try{return 2<Lo(this)?this.g.status:-1}catch(i){return-1}},Q.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Q.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ti(e)}},Q.Da=function(){return this.m},Q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=ru.prototype).ma=8,Q.G=1,Q.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Q.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const h=new xi(this,this.h,i,void 0);let v=this.s;if(this.P&&(v?(v=qt(v),Or(v,this.P)):v=this.P),null===this.o&&(h.H=v),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Bo(this,h,e),Xr(t=Wi(this.F),"RID",i),Xr(t,"CVER",22),this.D&&Xr(t,"X-HTTP-Session-Id",this.D),na(this,t),this.o&&v&&fo(t,this.o,v),So(this.i,h),this.Ra&&Xr(t,"TYPE","init"),this.ja?(Xr(t,"$req",e),Xr(t,"SID","null"),h.$=!0,xs(h,t,null)):xs(h,t,e),this.G=2}}else 3==this.G&&(i?ma(this,i):0==this.l.length||Ma(this.i)||ma(this))},Q.Ga=function(){if(this.u=null,ya(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Jt(we(this.bb,this),i)}},Q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vt(10),ta(this),ya(this))},Q.ab=function(){null!=this.v&&(this.v=null,ta(this),Ds(this),vt(19))},Q.jb=function(i){i?(this.h.info("Successfully pinged google.com"),vt(2)):(this.h.info("Failed to ping google.com"),vt(1))},(Q=N.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Oa=function(){},q.prototype.g=function(i,e){return new B(i,e)},He(B,or),B.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),$r(we(i.hb,i,e))),vt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=_a(i,null,i.W),Yi(i)},B.prototype.close=function(){$i(this.g)},B.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,eo(this.g,e)}else this.v?((e={}).__data__=hi(i),eo(this.g,e)):eo(this.g,i)},B.prototype.M=function(){this.g.j=null,delete this.j,$i(this.g),delete this.g,B.Z.M.call(this)},He(ie,Ji),He(Ee,es),He(Et,N),Et.prototype.xa=function(){kr(this.g,"a")},Et.prototype.wa=function(i){kr(this.g,new ie(i))},Et.prototype.va=function(i){kr(this.g,new Ee(i))},Et.prototype.ua=function(){kr(this.g,"b")},q.prototype.createWebChannel=q.prototype.g,B.prototype.send=B.prototype.u,B.prototype.open=B.prototype.m,B.prototype.close=B.prototype.close,gn.NO_ERROR=0,gn.TIMEOUT=8,gn.HTTP_ERROR=6,qn.COMPLETE="complete",hs.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",or.prototype.listen=or.prototype.N,$n.prototype.listenOnce=$n.prototype.O,$n.prototype.getLastError=$n.prototype.La,$n.prototype.getLastErrorCode=$n.prototype.Da,$n.prototype.getStatus=$n.prototype.ba,$n.prototype.getResponseJson=$n.prototype.Qa,$n.prototype.getResponseText=$n.prototype.ga,$n.prototype.send=$n.prototype.ea;var $t=Ne.createWebChannelTransport=function(){return new q},Pn=Ne.getStatEventTarget=function(){return ar()},vr=Ne.ErrorCode=gn,Mr=Ne.EventType=qn,jr=Ne.Event=mn,_r=Ne.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ni=Ne.FetchXmlHttpFactory=W,ur=Ne.WebChannel=hs,Vi=Ne.XhrIo=$n;const to="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let ns="9.9.1";const rs=new Ye.Yd("@firebase/firestore");function ra(){return rs.logLevel}function Xt(i,...e){if(rs.logLevel<=Ye.in.DEBUG){const t=e.map(no);rs.debug(`Firestore (${ns}): ${i}`,...t)}}function _i(i,...e){if(rs.logLevel<=Ye.in.ERROR){const t=e.map(no);rs.error(`Firestore (${ns}): ${i}`,...t)}}function Ea(i,...e){if(rs.logLevel<=Ye.in.WARN){const t=e.map(no);rs.warn(`Firestore (${ns}): ${i}`,...t)}}function no(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Tn(i="Unexpected state"){const e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+i;throw _i(e),new Error(e)}function Xn(i,e){i||Tn()}function _n(i,e){return i}const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends G.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Il{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class su{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bl{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let h=this.i;const v=X=>this.i!==h?(h=this.i,t(X)):Promise.resolve();let C=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Fi,e.enqueueRetryable(()=>v(this.currentUser))};const k=()=>{const X=C;e.enqueueRetryable((0,ae.Z)(function*(){yield X.promise,yield v(s.currentUser)}))},z=X=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(X=>z(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?z(X):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Fi)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xn("string"==typeof s.accessToken),new Il(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xn(null===e||"string"==typeof e),new si(e)}}class Ra{constructor(e,t,s){this.type="FirstParty",this.user=si.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class ou{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Ra(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wa{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=v=>{null!=v.error&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const C=v.token!==this.p;return this.p=v.token,Xt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>s(v))};const h=v=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.appCheck.addTokenListener(this.o)};this.g.onInit(v=>h(v)),setTimeout(()=>{if(!this.appCheck){const v=this.g.getImmediate({optional:!0});v?h(v):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xn("string"==typeof t.token),this.p=t.token,new xu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ro(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Ia{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const h=ro(40);for(let v=0;v<h.length;++v)s.length<20&&h[v]<t&&(s+=e.charAt(h[v]%e.length))}return s}}function Qn(i,e){return i<e?-1:i>e?1:0}function il(i,e,t){return i.length===e.length&&i.every((s,h)=>t(s,e[h]))}function ia(i){return i+"\0"}class pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pi.fromMillis(Date.now())}static fromDate(e){return pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new pi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qn(this.nanoseconds,e.nanoseconds):Qn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hn(e)}static min(){return new Hn(new pi(0,0))}static max(){return new Hn(new pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cl{constructor(e,t,s){void 0===t?t=0:t>e.length&&Tn(),void 0===s?s=e.length-t:s>e.length-t&&Tn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let h=0;h<s;h++){const v=e.get(h),C=t.get(h);if(v<C)return-1;if(v>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends Cl{construct(e,t,s){return new Qr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Zt(At.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(h=>h.length>0))}return new Qr(t)}static emptyPath(){return new Qr([])}}const Dl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Cl{construct(e,t,s){return new Li(e,t,s)}static isValidIdentifier(e){return Dl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const t=[];let s="",h=0;const v=()=>{if(0===s.length)throw new Zt(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let C=!1;for(;h<e.length;){const k=e[h];if("\\"===k){if(h+1===e.length)throw new Zt(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const z=e[h+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new Zt(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=z,h+=2}else"`"===k?(C=!C,h++):"."!==k||C?(s+=k,h++):(v(),h++)}if(v(),C)throw new Zt(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(t)}static emptyPath(){return new Li([])}}class rn{constructor(e){this.path=e}static fromPath(e){return new rn(Qr.fromString(e))}static fromName(e){return new rn(Qr.fromString(e).popFirst(5))}static empty(){return new rn(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rn(new Qr(e.slice()))}}class Oa{constructor(e,t,s,h){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=h}}function $o(i){return i.fields.find(e=>2===e.kind)}function ba(i){return i.fields.filter(e=>2!==e.kind)}Oa.UNKNOWN_ID=-1;class Ca{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vo(0,Uo.min())}}function sl(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,h=Hn.fromTimestamp(1e9===s?new pi(t+1,0):new pi(t,s));return new Uo(h,rn.empty(),e)}function Ha(i){return new Uo(i.readTime,i.key,-1)}class Uo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Uo(Hn.min(),rn.empty(),-1)}static max(){return new Uo(Hn.max(),rn.empty(),-1)}}function lu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=rn.comparator(i.documentKey,e.documentKey),0!==t?t:Qn(i.largestBatchId,e.largestBatchId))}const gi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jo(i){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,ae.Z)(function*(i){if(i.code!==At.FAILED_PRECONDITION||i.message!==gi)throw i;Xt("LocalStore","Unexpectedly lost primary lease")}),Ru.apply(this,arguments)}class xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xt((s,h)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(s,h)},this.catchCallback=v=>{this.wrapFailure(t,v).next(s,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xt?t:xt.resolve(t)}catch(t){return xt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xt.reject(t)}static resolve(e){return new xt((t,s)=>{t(e)})}static reject(e){return new xt((t,s)=>{s(e)})}static waitFor(e){return new xt((t,s)=>{let h=0,v=0,C=!1;e.forEach(k=>{++h,k.next(()=>{++v,C&&v===h&&t()},z=>s(z))}),C=!0,v===h&&t()})}static or(e){let t=xt.resolve(!1);for(const s of e)t=t.next(h=>h?xt.resolve(h):s());return t}static forEach(e,t){const s=[];return e.forEach((h,v)=>{s.push(t.call(this,h,v))}),this.waitFor(s)}static mapArray(e,t){return new xt((s,h)=>{const v=e.length,C=new Array(v);let k=0;for(let z=0;z<v;z++){const X=z;t(e[X]).next(pe=>{C[X]=pe,++k,k===v&&s(C)},pe=>h(pe))}})}static doWhile(e,t){return new xt((s,h)=>{const v=()=>{!0===e()?t().next(()=>{v()},h):s()};v()})}}class Sl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Fi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new sa(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const h=Nr(s.target.error);this.T.reject(new sa(e,h))}}static open(e,t,s,h){try{return new Sl(t,e.transaction(h,s))}catch(v){throw new sa(t,v)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ol(t)}}class go{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===go.v((0,G.z$)())&&_i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xt("SimpleDb","Removing database:",e),ui(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,G.hl)())return!1;if(go.S())return!0;const e=(0,G.z$)(),t=go.v(e),s=0<t&&t<10,h=go.D(e),v=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||v)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,ae.Z)(function*(){return t.db||(Xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,h)=>{const v=indexedDB.open(t.name,t.version);v.onsuccess=C=>{s(C.target.result)},v.onblocked=()=>{h(new sa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=C=>{const k=C.target.error;h("VersionError"===k.name?new Zt(At.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new Zt(At.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new sa(e,k))},v.onupgradeneeded=C=>{Xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.P.O(C.target.result,v.transaction,C.oldVersion,t.version).next(()=>{Xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,h){var v=this;return(0,ae.Z)(function*(){const C="readonly"===t;let k=0;for(;;){++k;try{v.db=yield v.k(e);const z=Sl.open(v.db,e,C?"readonly":"readwrite",s),X=h(z).next(pe=>(z.R(),pe)).catch(pe=>(z.abort(pe),xt.reject(pe))).toPromise();return X.catch(()=>{}),yield z.A,X}catch(z){const X=z,pe="FirebaseError"!==X.name&&k<3;if(Xt("SimpleDb","Transaction failed with error:",X.message,"Retrying:",pe),v.close(),!pe)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Id{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ui(this.$.delete())}}class sa extends Zt{constructor(e,t){super(At.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ao(i){return"IndexedDbTransactionError"===i.name}class ol{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Xt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ui(s)}add(e){return Xt("SimpleDb","ADD",this.store.name,e,e),ui(this.store.add(e))}get(e){return ui(this.store.get(e)).next(t=>(void 0===t&&(t=null),Xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Xt("SimpleDb","DELETE",this.store.name,e),ui(this.store.delete(e))}count(){return Xt("SimpleDb","COUNT",this.store.name),ui(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const h=this.cursor(s),v=[];return this.G(h,(C,k)=>{v.push(k)}).next(()=>v)}{const h=this.store.getAll(s.range);return new xt((v,C)=>{h.onerror=k=>{C(k.target.error)},h.onsuccess=k=>{v(k.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new xt((h,v)=>{s.onerror=C=>{v(C.target.error)},s.onsuccess=C=>{h(C.target.result)}})}W(e,t){Xt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const h=this.cursor(s);return this.G(h,(v,C,k)=>k.delete())}J(e,t){let s;t?s=e:(s={},t=e);const h=this.cursor(s);return this.G(h,t)}Y(e){const t=this.cursor({});return new xt((s,h)=>{t.onerror=v=>{const C=Nr(v.target.error);h(C)},t.onsuccess=v=>{const C=v.target.result;C?e(C.primaryKey,C.value).next(k=>{k?C.continue():s()}):s()}})}G(e,t){const s=[];return new xt((h,v)=>{e.onerror=C=>{v(C.target.error)},e.onsuccess=C=>{const k=C.target.result;if(!k)return void h();const z=new Id(k),X=t(k.primaryKey,k.value,z);if(X instanceof xt){const pe=X.catch(Ke=>(z.done(),xt.reject(Ke)));s.push(pe)}z.isDone?h():null===z.U?k.continue():k.continue(z.U)}}).next(()=>xt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ui(i){return new xt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const h=Nr(s.target.error);t(h)}})}let ci=!1;function Nr(i){const e=go.v((0,G.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ci||(ci=!0,setTimeout(()=>{throw s},0)),s}}return i}class Fr{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{Xt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){Ao(s)?Xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield jo(s)}yield t.Z(1)}))}}class Xi{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let h=t,v=!0;return xt.doWhile(()=>!0===v&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!s.has(C))return Xt("IndexBackiller",`Processing collection: ${C}`),this.nt(e,C,h).next(k=>{h-=k,s.add(C)});v=!1})).next(()=>t-h)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,s).next(v=>{const C=v.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.st(h,v)).next(k=>(Xt("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>C.size)}))}st(e,t){let s=e;return t.changes.forEach((h,v)=>{const C=Ha(v);lu(C,s)>0&&(s=C)}),new Uo(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class cr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function al(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ho(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function mo(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}cr.ot=-1;class is{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new is(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const h=this.comparator(e,s.key);if(0===h)return t+s.left.size;h<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Si(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Si(this.root,e,this.comparator,!1)}getReverseIterator(){return new Si(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Si(this.root,e,this.comparator,!0)}}class Si{constructor(e,t,s,h){this.isReverse=h,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=t?s(e.key,t):1,t&&h&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zn{constructor(e,t,s,h,v){this.key=e,this.value=t,this.color=null!=s?s:Zn.RED,this.left=null!=h?h:Zn.EMPTY,this.right=null!=v?v:Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,h,v){return new Zn(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=h?h:this.left,null!=v?v:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let h=this;const v=s(e,h.key);return h=v<0?h.copy(null,null,null,h.left.insert(e,t,s),null):0===v?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,s)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return Zn.EMPTY;s=h.right.min(),h=h.copy(s.key,s.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tn();const e=this.left.check();if(e!==this.right.check())throw Tn();return e+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1,Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Tn()}get value(){throw Tn()}get color(){throw Tn()}get left(){throw Tn()}get right(){throw Tn()}copy(i,e,t,s,h){return this}insert(i,e,t){return new Zn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tr{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const h=s.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new io(this.data.getIterator())}getIteratorFrom(e){return new io(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,v=s.getNext().key;if(0!==this.comparator(h,v))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tr(this.comparator);return t.data=e,t}}class io{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function A(i){return i.hasNext()?i.getNext():void 0}class x{constructor(e){this.fields=e,e.sort(Li.comparator)}static empty(){return new x([])}unionWith(e){let t=new Tr(Li.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new x(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class O{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new O(t)}static fromUint8Array(e){const t=function(s){let h="";for(let v=0;v<s.length;++v)h+=String.fromCharCode(s[v]);return h}(e);return new O(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}O.EMPTY_BYTE_STRING=new O("");const U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ee(i){if(Xn(!!i),"string"==typeof i){let e=0;const t=U.exec(i);if(Xn(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:re(i.seconds),nanos:re(i.nanos)}}function re(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Xe(i){return"string"==typeof i?O.fromBase64String(i):O.fromUint8Array(i)}function St(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function an(i){const e=i.mapValue.fields.__previous_value__;return St(e)?an(e):e}function En(i){const e=ee(i.mapValue.fields.__local_write_time__.timestampValue);return new pi(e.seconds,e.nanos)}class In{constructor(e,t,s,h,v,C,k,z){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=h,this.ssl=v,this.forceLongPolling=C,this.autoDetectLongPolling=k,this.useFetchStreams=z}}class zr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}function F(i){return null==i}function j(i){return 0===i&&1/i==-1/0}function te(i){return"number"==typeof i&&Number.isInteger(i)&&!j(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const fe={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dt={nullValue:"NULL_VALUE"};function It(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?St(i)?4:oa(i)?9007199254740991:10:Tn()}function jt(i,e){if(i===e)return!0;const t=It(i);if(t!==It(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return En(i).isEqual(En(e));case 3:return function(s,h){if("string"==typeof s.timestampValue&&"string"==typeof h.timestampValue&&s.timestampValue.length===h.timestampValue.length)return s.timestampValue===h.timestampValue;const v=ee(s.timestampValue),C=ee(h.timestampValue);return v.seconds===C.seconds&&v.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,Xe(i.bytesValue).isEqual(Xe(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,h){return re(s.geoPointValue.latitude)===re(h.geoPointValue.latitude)&&re(s.geoPointValue.longitude)===re(h.geoPointValue.longitude)}(i,e);case 2:return function(s,h){if("integerValue"in s&&"integerValue"in h)return re(s.integerValue)===re(h.integerValue);if("doubleValue"in s&&"doubleValue"in h){const v=re(s.doubleValue),C=re(h.doubleValue);return v===C?j(v)===j(C):isNaN(v)&&isNaN(C)}return!1}(i,e);case 9:return il(i.arrayValue.values||[],e.arrayValue.values||[],jt);case 10:return function(s,h){const v=s.mapValue.fields||{},C=h.mapValue.fields||{};if(al(v)!==al(C))return!1;for(const k in v)if(v.hasOwnProperty(k)&&(void 0===C[k]||!jt(v[k],C[k])))return!1;return!0}(i,e);default:return Tn()}var h}function en(i,e){return void 0!==(i.values||[]).find(t=>jt(t,e))}function Fn(i,e){if(i===e)return 0;const t=It(i),s=It(e);if(t!==s)return Qn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qn(i.booleanValue,e.booleanValue);case 2:return function(h,v){const C=re(h.integerValue||h.doubleValue),k=re(v.integerValue||v.doubleValue);return C<k?-1:C>k?1:C===k?0:isNaN(C)?isNaN(k)?0:-1:1}(i,e);case 3:return Jn(i.timestampValue,e.timestampValue);case 4:return Jn(En(i),En(e));case 5:return Qn(i.stringValue,e.stringValue);case 6:return function(h,v){const C=Xe(h),k=Xe(v);return C.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(h,v){const C=h.split("/"),k=v.split("/");for(let z=0;z<C.length&&z<k.length;z++){const X=Qn(C[z],k[z]);if(0!==X)return X}return Qn(C.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,v){const C=Qn(re(h.latitude),re(v.latitude));return 0!==C?C:Qn(re(h.longitude),re(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,v){const C=h.values||[],k=v.values||[];for(let z=0;z<C.length&&z<k.length;++z){const X=Fn(C[z],k[z]);if(X)return X}return Qn(C.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,v){if(h===fe.mapValue&&v===fe.mapValue)return 0;if(h===fe.mapValue)return 1;if(v===fe.mapValue)return-1;const C=h.fields||{},k=Object.keys(C),z=v.fields||{},X=Object.keys(z);k.sort(),X.sort();for(let pe=0;pe<k.length&&pe<X.length;++pe){const Ke=Qn(k[pe],X[pe]);if(0!==Ke)return Ke;const Rt=Fn(C[k[pe]],z[X[pe]]);if(0!==Rt)return Rt}return Qn(k.length,X.length)}(i.mapValue,e.mapValue);default:throw Tn()}}function Jn(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Qn(i,e);const t=ee(i),s=ee(e),h=Qn(t.seconds,s.seconds);return 0!==h?h:Qn(t.nanos,s.nanos)}function dr(i){return Rn(i)}function Rn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const h=ee(s);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Xe(i.bytesValue).toBase64():"referenceValue"in i?rn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let h="[",v=!0;for(const C of s.values||[])v?v=!1:h+=",",h+=Rn(C);return h+"]"}(i.arrayValue):"mapValue"in i?function(s){const h=Object.keys(s.fields||{}).sort();let v="{",C=!0;for(const k of h)C?C=!1:v+=",",v+=`${k}:${Rn(s.fields[k])}`;return v+"}"}(i.mapValue):Tn();var e}function ss(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function yo(i){return!!i&&"integerValue"in i}function Da(i){return!!i&&"arrayValue"in i}function $l(i){return!!i&&"nullValue"in i}function Tl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ou(i){return!!i&&"mapValue"in i}function ll(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ho(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ll(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(i.arrayValue.values[t]);return e}return Object.assign({},i)}function oa(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pa(i){return"nullValue"in i?dt:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ss(zr.empty(),rn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Tn()}function Al(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ss(zr.empty(),rn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?fe:Tn()}function $c(i,e){const t=Fn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Vc(i,e){const t=Fn(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Go{constructor(e){this.value=e}static empty(){return new Go({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=Li.emptyPath(),s={},h=[];e.forEach((C,k)=>{if(!t.isImmediateParentOf(k)){const z=this.getFieldsMap(t);this.applyChanges(z,s,h),s={},h=[],t=k.popLast()}C?s[k.lastSegment()]=ll(C):h.push(k.lastSegment())});const v=this.getFieldsMap(t);this.applyChanges(v,s,h)}delete(e){const t=this.field(e.popLast());Ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let h=t.mapValue.fields[e.get(s)];Ou(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,s){Ho(t,(h,v)=>e[h]=v);for(const h of s)delete e[h]}clone(){return new Go(ll(this.value))}}function Ui(i){const e=[];return Ho(i.fields,(t,s)=>{const h=new Li([t]);if(Ou(s)){const v=Ui(s.mapValue).fields;if(0===v.length)e.push(h);else for(const C of v)e.push(h.child(C))}else e.push(h)}),new x(e)}class os{constructor(e,t,s,h,v,C){this.key=e,this.documentType=t,this.version=s,this.readTime=h,this.data=v,this.documentState=C}static newInvalidDocument(e){return new os(e,0,Hn.min(),Hn.min(),Go.empty(),0)}static newFoundDocument(e,t,s){return new os(e,1,t,Hn.min(),s,0)}static newNoDocument(e,t){return new os(e,2,t,Hn.min(),Go.empty(),0)}static newUnknownDocument(e,t){return new os(e,3,t,Hn.min(),Go.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Go.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rp{constructor(e,t=null,s=[],h=[],v=null,C=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=h,this.limit=v,this.startAt=C,this.endAt=k,this.ut=null}}function uu(i,e=null,t=[],s=[],h=null,v=null,C=null){return new rp(i,e,t,s,h,v,C)}function ul(i){const e=_n(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(h=s).field.canonicalString()+h.op.toString()+dr(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),F(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>dr(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>dr(s)).join(",")),e.ut=t}return e.ut}function Ga(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!Wh(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(s=e.filters[h]).op||!t.field.isEqual(s.field)||!jt(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Vl(i.startAt,e.startAt)&&Vl(i.endAt,e.endAt)}function xl(i){return rn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Lr(i,e){return i.filters.filter(t=>t instanceof zo&&t.field.isEqual(e))}function ip(i,e,t){let s=dt,h=!0;for(const v of Lr(i,e)){let C=dt,k=!0;switch(v.op){case"<":case"<=":C=Pa(v.value);break;case"==":case"in":case">=":C=v.value;break;case">":C=v.value,k=!1;break;case"!=":case"not-in":C=dt}$c({value:s,inclusive:h},{value:C,inclusive:k})<0&&(s=C,h=k)}if(null!==t)for(let v=0;v<i.orderBy.length;++v)if(i.orderBy[v].field.isEqual(e)){const C=t.position[v];$c({value:s,inclusive:h},{value:C,inclusive:t.inclusive})<0&&(s=C,h=t.inclusive);break}return{value:s,inclusive:h}}function jc(i,e,t){let s=fe,h=!0;for(const v of Lr(i,e)){let C=fe,k=!0;switch(v.op){case">=":case">":C=Al(v.value),k=!1;break;case"==":case"in":case"<=":C=v.value;break;case"<":C=v.value,k=!1;break;case"!=":case"not-in":C=fe}Vc({value:s,inclusive:h},{value:C,inclusive:k})>0&&(s=C,h=k)}if(null!==t)for(let v=0;v<i.orderBy.length;++v)if(i.orderBy[v].field.isEqual(e)){const C=t.position[v];Vc({value:s,inclusive:h},{value:C,inclusive:t.inclusive})>0&&(s=C,h=t.inclusive);break}return{value:s,inclusive:h}}class zo extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new Es(e,t,s):"array-contains"===t?new Pu(e,s):"in"===t?new bd(e,s):"not-in"===t?new Cd(e,s):"array-contains-any"===t?new cl(e,s):new zo(e,t,s)}static ct(e,t,s){return"in"===t?new sh(e,s):new zh(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Fn(t,this.value)):null!==t&&It(this.value)===It(t)&&this.at(Fn(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Es extends zo{constructor(e,t,s){super(e,t,s),this.key=rn.fromName(s.referenceValue)}matches(e){const t=rn.comparator(e.key,this.key);return this.at(t)}}class sh extends zo{constructor(e,t){super(e,"in",t),this.keys=uc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zh extends zo{constructor(e,t){super(e,"not-in",t),this.keys=uc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>rn.fromName(s.referenceValue))}class Pu extends zo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Da(t)&&en(t.arrayValue,this.value)}}class bd extends zo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&en(this.value.arrayValue,t)}}class Cd extends zo{constructor(e,t){super(e,"not-in",t)}matches(e){if(en(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!en(this.value.arrayValue,t)}}class cl extends zo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Da(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>en(this.value.arrayValue,s))}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function cc(i,e,t){let s=0;for(let h=0;h<i.position.length;h++){const v=e[h],C=i.position[h];if(s=v.field.isKeyField()?rn.comparator(rn.fromName(C.referenceValue),t.key):Fn(C,t.data.field(v.field)),"desc"===v.dir&&(s*=-1),0!==s)break}return s}function Vl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!jt(i.position[t],e.position[t]))return!1;return!0}class aa{constructor(e,t=null,s=[],h=[],v=null,C="F",k=null,z=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=h,this.limit=v,this.limitType=C,this.startAt=k,this.endAt=z,this.lt=null,this.ft=null}}function dc(i,e,t,s,h,v,C,k){return new aa(i,e,t,s,h,v,C,k)}function Nu(i){return new aa(i)}function Ul(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function oh(i){for(const e of i.filters)if(e.ht())return e.field;return null}function Ws(i){return null!==i.collectionGroup}function jl(i){const e=_n(i);if(null===e.lt){e.lt=[];const t=oh(e),s=Ul(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new ku(t)),e.lt.push(new ku(Li.keyField(),"asc"));else{let h=!1;for(const v of e.explicitOrderBy)e.lt.push(v),v.field.isKeyField()&&(h=!0);if(!h){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ku(Li.keyField(),v))}}}return e.lt}function ka(i){const e=_n(i);if(!e.ft)if("F"===e.limitType)e.ft=uu(e.path,e.collectionGroup,jl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const v of jl(e))t.push(new ku(v.field,"desc"===v.dir?"asc":"desc"));const s=e.endAt?new cu(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new cu(e.startAt.position,e.startAt.inclusive):null;e.ft=uu(e.path,e.collectionGroup,t,e.filters,e.limit,s,h)}return e.ft}function Sd(i,e,t){return new aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ps(i,e){return Ga(ka(i),ka(e))&&i.limitType===e.limitType}function Hc(i){return`${ul(ka(i))}|lt:${i.limitType}`}function za(i){return`Query(target=${function Uc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${dr(s.value)}`;var s}).join(", ")}]`),F(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>dr(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>dr(t)).join(",")),`Target(${e})`}(ka(i))}; limitType=${i.limitType})`}function Td(i,e){return e.isFoundDocument()&&function(t,s){const h=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):rn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,s){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===s.data.field(h.field))return!1;return!0}(i,e)&&function(t,s){for(const h of t.filters)if(!h.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(h,v,C){const k=cc(h,v,C);return h.inclusive?k<=0:k<0}(t.startAt,jl(t),s)||t.endAt&&!function(h,v,C){const k=cc(h,v,C);return h.inclusive?k>=0:k>0}(t.endAt,jl(t),s)));var t,s}function Gc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hc(i){return(e,t)=>{let s=!1;for(const h of jl(i)){const v=qh(h,e,t);if(0!==v)return v;s=s||h.field.isKeyField()}return 0}}function qh(i,e,t){const s=i.field.isKeyField()?rn.comparator(e.key,t.key):function(h,v,C){const k=v.data.field(h),z=C.data.field(h);return null!==k&&null!==z?Fn(k,z):Tn()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Tn()}}function du(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j(e)?"-0":e}}function Kh(i){return{integerValue:""+i}}function fc(i,e){return te(e)?Kh(e):du(i,e)}class dl{constructor(){this._=void 0}}function ah(i,e,t){return i instanceof gc?function(s,h){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return h&&(v.fields.__previous_value__=h),{mapValue:v}}(t,e):i instanceof Wa?Yh(i,e):i instanceof Fu?Ad(i,e):function(s,h){const v=pc(s,h),C=Lu(v)+Lu(s._t);return yo(v)&&yo(s._t)?Kh(C):du(s.wt,C)}(i,e)}function zc(i,e,t){return i instanceof Wa?Yh(i,e):i instanceof Fu?Ad(i,e):t}function pc(i,e){return i instanceof qs?yo(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class gc extends dl{}class Wa extends dl{constructor(e){super(),this.elements=e}}function Yh(i,e){const t=Hl(e);for(const s of i.elements)t.some(h=>jt(h,s))||t.push(s);return{arrayValue:{values:t}}}class Fu extends dl{constructor(e){super(),this.elements=e}}function Ad(i,e){let t=Hl(e);for(const s of i.elements)t=t.filter(h=>!jt(h,s));return{arrayValue:{values:t}}}class qs extends dl{constructor(e,t){super(),this.wt=e,this._t=t}}function Lu(i){return re(i.integerValue||i.doubleValue)}function Hl(i){return Da(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Gl{constructor(e,t){this.field=e,this.transform=t}}class $u{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Sa{}function Zh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ml(i.key,Ti.none()):new hl(i.key,i.data,Ti.none());{const t=i.data,s=Go.empty();let h=new Tr(Li.comparator);for(let v of e.fields)if(!h.has(v)){let C=t.field(v);null===C&&v.length>1&&(v=v.popLast(),C=t.field(v)),null===C?s.delete(v):s.set(v,C),h=h.add(v)}return new Ta(i.key,s,new x(h.toArray()),Ti.none())}}function sp(i,e,t){i instanceof hl?function(s,h,v){const C=s.value.clone(),k=ql(s.fieldTransforms,h,v.transformResults);C.setAll(k),h.convertToFoundDocument(v.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Ta?function(s,h,v){if(!zl(s.precondition,h))return void h.convertToUnknownDocument(v.version);const C=ql(s.fieldTransforms,h,v.transformResults),k=h.data;k.setAll(Wc(s)),k.setAll(C),h.convertToFoundDocument(v.version,k).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wl(i,e,t,s){return i instanceof hl?function(h,v,C,k){if(!zl(h.precondition,v))return C;const z=h.value.clone(),X=hu(h.fieldTransforms,k,v);return z.setAll(X),v.convertToFoundDocument(v.version,z).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ta?function(h,v,C,k){if(!zl(h.precondition,v))return C;const z=hu(h.fieldTransforms,k,v),X=v.data;return X.setAll(Wc(h)),X.setAll(z),v.convertToFoundDocument(v.version,X).setHasLocalMutations(),null===C?null:C.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(pe=>pe.field))}(i,e,t,s):(C=t,zl(i.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):C);var v,C}function Xh(i,e){let t=null;for(const s of i.fieldTransforms){const h=e.data.field(s.field),v=pc(s.transform,h||null);null!=v&&(null===t&&(t=Go.empty()),t.set(s.field,v))}return t||null}function lh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&il(t,s,(h,v)=>function Bu(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Wa&&s instanceof Wa||t instanceof Fu&&s instanceof Fu?il(t.elements,s.elements,jt):t instanceof qs&&s instanceof qs?jt(t._t,s._t):t instanceof gc&&s instanceof gc);var t,s}(h,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class hl extends Sa{constructor(e,t,s,h=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Ta extends Sa{constructor(e,t,s,h,v=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=h,this.fieldTransforms=v,this.type=1}getFieldMask(){return this.fieldMask}}function Wc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function ql(i,e,t){const s=new Map;Xn(i.length===t.length);for(let h=0;h<t.length;h++){const v=i[h],C=v.transform,k=e.data.field(v.field);s.set(v.field,zc(C,k,t[h]))}return s}function hu(i,e,t){const s=new Map;for(const h of i){const v=h.transform,C=t.data.field(h.field);s.set(h.field,ah(v,C,e))}return s}class Ml extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xd extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ei{constructor(e){this.count=e}}var Ai,Jr;function qc(i){switch(i){default:return Tn();case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0}}function Md(i){if(void 0===i)return _i("GRPC error has no .code"),At.UNKNOWN;switch(i){case Ai.OK:return At.OK;case Ai.CANCELLED:return At.CANCELLED;case Ai.UNKNOWN:return At.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return At.INTERNAL;case Ai.UNAVAILABLE:return At.UNAVAILABLE;case Ai.UNAUTHENTICATED:return At.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case Ai.NOT_FOUND:return At.NOT_FOUND;case Ai.ALREADY_EXISTS:return At.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return At.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case Ai.ABORTED:return At.ABORTED;case Ai.OUT_OF_RANGE:return At.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return At.UNIMPLEMENTED;case Ai.DATA_LOSS:return At.DATA_LOSS;default:return Tn()}}(Jr=Ai||(Ai={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";class la{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[h,v]of s)if(this.equalsFn(h,e))return v}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),h=this.inner[s];if(void 0===h)return this.inner[s]=[[e,t]],void this.innerSize++;for(let v=0;v<h.length;v++)if(this.equalsFn(h[v][0],e))return void(h[v]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let h=0;h<s.length;h++)if(this.equalsFn(s[h][0],e))return 1===s.length?delete this.inner[t]:s.splice(h,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(t,s)=>{for(const[h,v]of s)e(h,v)})}isEmpty(){return mo(this.inner)}size(){return this.innerSize}}const fu=new is(rn.comparator);function Wo(){return fu}const qa=new is(rn.comparator);function pu(...i){let e=qa;for(const t of i)e=e.insert(t.key,t);return e}function Ls(i){let e=qa;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function qo(){return gu()}function Kl(){return gu()}function gu(){return new la(i=>i.toString(),(i,e)=>i.isEqual(e))}const Rd=new is(rn.comparator),Kc=new Tr(rn.comparator);function Hr(...i){let e=Kc;for(const t of i)e=e.add(t);return e}const Od=new Tr(Qn);function mu(){return Od}class Ka{constructor(e,t,s,h,v){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=h,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ka(Hn.min(),s,mu(),Wo(),Hr())}}class yu{constructor(e,t,s,h,v){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=h,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,t){return new yu(O.EMPTY_BYTE_STRING,t,Hr(),Hr(),Hr())}}class Yc{constructor(e,t,s,h){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=h}}class Qh{constructor(e,t){this.targetId=e,this.It=t}}class Jh{constructor(e,t,s=O.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=h}}class Pd{constructor(){this.Tt=0,this.Et=mc(),this.At=O.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Hr(),t=Hr(),s=Hr();return this.Et.forEach((h,v)=>{switch(v){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:s=s.add(h);break;default:Tn()}}),new yu(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=mc()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class ua{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Wo(),this.Bt=Vu(),this.Lt=new Tr(Qn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:Tn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,h)=>{this.jt(h)&&t(h)})}zt(e){const t=e.targetId,s=e.It.count,h=this.Ht(t);if(h){const v=h.target;if(xl(v))if(0===s){const C=new rn(v.path);this.Kt(t,C,os.newNoDocument(C,Hn.min()))}else Xn(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((v,C)=>{const k=this.Ht(C);if(k){if(v.current&&xl(k.target)){const z=new rn(k.target.path);null!==this.$t.get(z)||this.Xt(C,z)||this.Kt(C,z,os.newNoDocument(z,e))}v.vt&&(t.set(C,v.St()),v.Dt())}});let s=Hr();this.Bt.forEach((v,C)=>{let k=!0;C.forEachWhile(z=>{const X=this.Ht(z);return!X||2===X.purpose||(k=!1,!1)}),k&&(s=s.add(v))}),this.$t.forEach((v,C)=>C.setReadTime(e));const h=new Ka(e,t,this.Lt,this.$t,s);return this.$t=Wo(),this.Bt=Vu(),this.Lt=new Tr(Qn),h}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const h=this.Qt(e);this.Xt(e,t)?h.Ct(t,1):h.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Pd,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Tr(Qn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Xt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Pd),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Vu(){return new is(rn.comparator)}function mc(){return new is(rn.comparator)}const Yl={asc:"ASCENDING",desc:"DESCENDING"},fl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yc{constructor(e,t){this.databaseId=e,this.dt=t}}function vu(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uh(i,e){return i.dt?e.toBase64():e.toUint8Array()}function Zc(i,e){return vu(i,e.toTimestamp())}function Bs(i){return Xn(!!i),Hn.fromTimestamp(function(e){const t=ee(e);return new pi(t.seconds,t.nanos)}(i))}function Xc(i,e){return(t=i,new Qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Qc(i){const e=Qr.fromString(i);return Xn(Hu(e)),e}function Uu(i,e){return Xc(i.databaseId,e.path)}function Ya(i,e){const t=Qc(e);if(t.get(1)!==i.databaseId.projectId)throw new Zt(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Zt(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new rn(M(t))}function D(i,e){return Xc(i.databaseId,e)}function y(i){const e=Qc(i);return 4===e.length?Qr.emptyPath():M(e)}function E(i){return new Qr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function M(i){return Xn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Y(i,e,t){return{name:Uu(i,e),fields:t.value.mapValue.fields}}function ue(i,e,t){const s=Ya(i,e.name),h=Bs(e.updateTime),v=new Go({mapValue:{fields:e.fields}}),C=os.newFoundDocument(s,h,v);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function on(i,e){let t;if(e instanceof hl)t={update:Y(i,e.key,e.value)};else if(e instanceof Ml)t={delete:Uu(i,e.key)};else if(e instanceof Ta)t={update:Y(i,e.key,e.data),updateMask:Za(e.fieldMask)};else{if(!(e instanceof xd))return Tn();t={verify:Uu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(h,v){const C=v.transform;if(C instanceof gc)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Wa)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Fu)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof qs)return{fieldPath:v.field.canonicalString(),increment:C._t};throw Tn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Zc(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Tn()),t;var h}function Mn(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ti.updateTime(Bs(h.updateTime)):void 0!==h.exists?Ti.exists(h.exists):Ti.none():Ti.none(),s=e.updateTransforms?e.updateTransforms.map(h=>function(v,C){let k=null;"setToServerValue"in C?(Xn("REQUEST_TIME"===C.setToServerValue),k=new gc):"appendMissingElements"in C?k=new Wa(C.appendMissingElements.values||[]):"removeAllFromArray"in C?k=new Fu(C.removeAllFromArray.values||[]):"increment"in C?k=new qs(v,C.increment):Tn();const z=Li.fromServerFormat(C.fieldPath);return new Gl(z,k)}(i,h)):[];var h;if(e.update){const h=Ya(i,e.update.name),v=new Go({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new x((e.updateMask.fieldPaths||[]).map(X=>Li.fromServerFormat(X)));return new Ta(h,v,C,t,s)}return new hl(h,v,t,s)}if(e.delete){const h=Ya(i,e.delete);return new Ml(h,t)}if(e.verify){const h=Ya(i,e.verify);return new xd(h,t)}return Tn()}function tr(i,e){return{documents:[D(i,e.path)]}}function so(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=D(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=D(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const h=function(z){if(0===z.length)return;const X=z.map(pe=>function(Ke){if("=="===Ke.op){if(Tl(Ke.value))return{unaryFilter:{field:ju(Ke.field),op:"IS_NAN"}};if($l(Ke.value))return{unaryFilter:{field:ju(Ke.field),op:"IS_NULL"}}}else if("!="===Ke.op){if(Tl(Ke.value))return{unaryFilter:{field:ju(Ke.field),op:"IS_NOT_NAN"}};if($l(Ke.value))return{unaryFilter:{field:ju(Ke.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(Ke.field),op:tf(Ke.op),value:Ke.value}}}(pe));return 1===X.length?X[0]:{compositeFilter:{op:"AND",filters:X}}}(e.filters);h&&(t.structuredQuery.where=h);const v=function(z){if(0!==z.length)return z.map(X=>{return{field:ju((pe=X).field),direction:kd(pe.dir)};var pe})}(e.orderBy);v&&(t.structuredQuery.orderBy=v);const C=(X=e.limit,i.dt||F(X)?X:{value:X});var X,k,z;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(z=e.endAt).inclusive,values:z.position}),t}function pl(i){let e=y(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let h=null;if(s>0){Xn(1===s);const pe=t.from[0];pe.allDescendants?h=pe.collectionId:e=e.child(pe.collectionId)}let v=[];t.where&&(v=ef(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(pe=>{return new ku(Zl((Ke=pe).field),function(Rt){switch(Rt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ke.direction));var Ke}));let k=null;t.limit&&(k=function(pe){let Ke;return Ke="object"==typeof pe?pe.value:pe,F(Ke)?null:Ke}(t.limit));let z=null;var pe;t.startAt&&(z=new cu((pe=t.startAt).values||[],!!pe.before));let X=null;return t.endAt&&(X=function(pe){return new cu(pe.values||[],!pe.before)}(t.endAt)),dc(e,h,C,v,k,"F",z,X)}function ef(i){return i?void 0!==i.unaryFilter?[Jc(i)]:void 0!==i.fieldFilter?[nf(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>ef(e)).reduce((e,t)=>e.concat(t)):Tn():[]}function kd(i){return Yl[i]}function tf(i){return fl[i]}function ju(i){return{fieldPath:i.canonicalString()}}function Zl(i){return Li.fromServerFormat(i.fieldPath)}function nf(i){return zo.create(Zl(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tn()}}(i.fieldFilter.op),i.fieldFilter.value)}function Jc(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Zl(i.unaryFilter.field);return zo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Zl(i.unaryFilter.field);return zo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zl(i.unaryFilter.field);return zo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Zl(i.unaryFilter.field);return zo.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Tn()}}function Za(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hu(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function xo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Nd(e)),e=Gu(i.get(t),e);return Nd(e)}function Gu(i,e){let t=e;const s=i.length;for(let h=0;h<s;h++){const v=i.charAt(h);switch(v){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=v}}return t}function Nd(i){return i+"\x01\x01"}function zu(i){const e=i.length;if(Xn(e>=2),2===e)return Xn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qr.emptyPath();const t=e-2,s=[];let h="";for(let v=0;v<e;){const C=i.indexOf("\x01",v);switch((C<0||C>t)&&Tn(),i.charAt(C+1)){case"\x01":const k=i.substring(v,C);let z;0===h.length?z=k:(h+=k,z=h,h=""),s.push(z);break;case"\x10":h+=i.substring(v,C),h+="\0";break;case"\x11":h+=i.substring(v,C+1);break;default:Tn()}v=C+2}return new Qr(s)}const am=["userId","batchId"];function op(i,e){return[i,xo(e)]}function Fd(i,e,t){return[i,xo(e),t]}const dh={},py=["prefixPath","collectionGroup","readTime","documentId"],gy=["prefixPath","collectionGroup","documentId"],ap=["collectionGroup","readTime","prefixPath","documentId"],vc=["canonicalId","targetId"],cg=["targetId","path"],dg=["path","targetId"],_c=["collectionId","parent"],hh=["indexId","uid"],ed=["uid","sequenceNumber"],lm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lp=["indexId","uid","orderedDocumentKey"],um=["userId","collectionPath","documentId"],oo=["userId","collectionPath","largestBatchId"],up=["userId","collectionGroup","largestBatchId"],hg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wu=[...hg,"documentOverlays"],td=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fg=td,cm=[...fg,"indexConfiguration","indexState","indexEntries"];class cp extends Mu{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ao(i,e){const t=_n(i);return go.N(t.ee,e)}class rf{constructor(e,t,s,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=h}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const v=this.mutations[h];v.key.isEqual(e.key)&&sp(v,e,s[h])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Wl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Wl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Kl();return this.mutations.forEach(h=>{const v=e.get(h.key),C=v.overlayedDocument;let k=this.applyToLocalView(C,v.mutatedFields);k=t.has(h.key)?null:k;const z=Zh(C,k);null!==z&&s.set(h.key,z),C.isValidDocument()||C.convertToNoDocument(Hn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Hr())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,(t,s)=>lh(t,s))&&il(this.baseMutations,e.baseMutations,(t,s)=>lh(t,s))}}class dp{constructor(e,t,s,h){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=h}static from(e,t,s){Xn(e.mutations.length===s.length);let h=Rd;const v=e.mutations;for(let C=0;C<v.length;C++)h=h.insert(v[C].key,s[C].version);return new dp(e,t,s,h)}}class pg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gl{constructor(e,t,s,h,v=Hn.min(),C=Hn.min(),k=O.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=h,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=k}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class fh{constructor(e){this.ne=e}}function hp(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_u(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Uu(h=i.ne,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:vu(h,v.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:nd(e.version)};else{if(!e.isUnknownDocument())return Tn();s.unknownDocument={path:t.path.toArray(),version:nd(e.version)}}var h,v;return s}function _u(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function nd(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ec(i){const e=new pi(i.seconds,i.nanoseconds);return Hn.fromTimestamp(e)}function qu(i,e){const t=(e.baseMutations||[]).map(v=>Mn(i.ne,v));for(let v=0;v<e.mutations.length-1;++v)v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(e.mutations[v].updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v);const s=e.mutations.map(v=>Mn(i.ne,v)),h=pi.fromMillis(e.localWriteTimeMs);return new rf(e.batchId,h,t,s)}function Eu(i){const e=Ec(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ec(i.lastLimboFreeSnapshotVersion):Hn.min();let s;var h;return void 0!==i.query.documents?(Xn(1===(h=i.query).documents.length),s=ka(Nu(y(h.documents[0])))):s=ka(pl(i.query)),new gl(s,i.targetId,0,i.lastListenSequenceNumber,e,t,O.fromBase64String(i.resumeToken))}function rd(i,e){const t=nd(e.snapshotVersion),s=nd(e.lastLimboFreeSnapshotVersion);let h;h=xl(e.target)?tr(i.ne,e.target):so(i.ne,e.target);const v=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ul(e.target),readTime:t,resumeToken:v,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:h}}function sf(i){const e=pl({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Sd(e,e.limit,"L"):e}function id(i,e){return new pg(e.largestBatchId,Mn(i.ne,e.overlayMutation))}function af(i,e){const t=e.path.lastSegment();return[i,xo(e.path.popLast()),t]}function lf(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:nd(s.readTime),documentKey:xo(s.documentKey.path),largestBatchId:s.largestBatchId}}class Ld{getBundleMetadata(e,t){return fp(e).get(t).next(s=>{if(s)return{id:(h=s).bundleId,createTime:Ec(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return fp(e).put({bundleId:(s=t).id,createTime:nd(Bs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return wc(e).get(t).next(s=>{if(s)return{name:(h=s).name,query:sf(h.bundledQuery),readTime:Ec(h.readTime)};var h})}saveNamedQuery(e,t){return wc(e).put({name:(s=t).name,readTime:nd(Bs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fp(i){return ao(i,"bundles")}function wc(i){return ao(i,"namedQueries")}class uf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new uf(e,t.uid||"")}getOverlay(e,t){return Ku(e).get(af(this.userId,t)).next(s=>s?id(this.wt,s):null)}getOverlays(e,t){const s=qo();return xt.forEach(t,h=>this.getOverlay(e,h).next(v=>{null!==v&&s.set(h,v)})).next(()=>s)}saveOverlays(e,t,s){const h=[];return s.forEach((v,C)=>{const k=new pg(t,C);h.push(this.ie(e,k))}),xt.waitFor(h)}removeOverlaysForBatchId(e,t,s){const h=new Set;t.forEach(C=>h.add(xo(C.getCollectionPath())));const v=[];return h.forEach(C=>{const k=IDBKeyRange.bound([this.userId,C,s],[this.userId,C,s+1],!1,!0);v.push(Ku(e).W("collectionPathOverlayIndex",k))}),xt.waitFor(v)}getOverlaysForCollection(e,t,s){const h=qo(),v=xo(t),C=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,Number.POSITIVE_INFINITY],!0);return Ku(e).K("collectionPathOverlayIndex",C).next(k=>{for(const z of k){const X=id(this.wt,z);h.set(X.getKey(),X)}return h})}getOverlaysForCollectionGroup(e,t,s,h){const v=qo();let C;const k=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ku(e).J({index:"collectionGroupOverlayIndex",range:k},(z,X,pe)=>{const Ke=id(this.wt,X);v.size()<h||Ke.largestBatchId===C?(v.set(Ke.getKey(),Ke),C=Ke.largestBatchId):pe.done()}).next(()=>v)}ie(e,t){return Ku(e).put(function(s,h,v){const[C,k,z]=af(h,v.mutation.key);return{userId:h,collectionPath:k,documentId:z,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:on(s.ne,v.mutation)}}(this.wt,this.userId,t))}}function Ku(i){return ao(i,"documentOverlays")}class Rl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(re(e.integerValue));else if("doubleValue"in e){const s=re(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),j(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Xe(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?oa(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Tn()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const h of Object.keys(s))this.le(h,t),this.oe(s[h],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const h of s)this.oe(h,t)}_e(e,t){this.ce(t,37),rn.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function dm(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function gh(i){const e=64-function(t){let s=0;for(let h=0;h<8;++h){const v=dm(255&t[h]);if(s+=v,8!==v)break}return s}(i);return Math.ceil(e/8)}Rl.ye=new Rl;class cf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const h=t.codePointAt(0);this.Ie(240|h>>>18),this.Ie(128|63&h>>>12),this.Ie(128|63&h>>>6),this.Ie(128|63&h)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}ve(e){const t=this.Ve(e),s=gh(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let h=t.length-s;h<t.length;++h)this.buffer[this.position++]=255&t[h]}De(e){const t=this.Ve(e),s=gh(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let h=t.length-s;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(h){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,h,!1),new Uint8Array(v.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let h=1;h<t.length;++h)t[h]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const h=new Uint8Array(s);h.set(this.buffer),this.buffer=h}}class sd{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class pp{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Yu{constructor(){this.Me=new cf,this.Fe=new sd(this.Me),this.$e=new pp(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Zu{constructor(e,t,s,h){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=h}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Zu(this.indexId,this.documentKey,this.arrayValue,s)}}function Xu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Bd(i.arrayValue,e.arrayValue),0!==t?t:(t=Bd(i.directionalValue,e.directionalValue),0!==t?t:rn.comparator(i.documentKey,e.documentKey)))}function Bd(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Ol{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=$o(e);if(void 0!==t&&!this.Qe(t))return!1;const s=ba(e);let h=0,v=0;for(;h<s.length&&this.Qe(s[h]);++h);if(h===s.length)return!0;if(void 0!==this.Ke){const C=s[h];if(!this.je(this.Ke,C)||!this.We(this.Ue[v++],C))return!1;++h}for(;h<s.length;++h)if(v>=this.Ue.length||!this.We(this.Ue[v++],s[h]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gp{constructor(){this.ze=new df}addToCollectionParentIndex(e,t){return this.ze.add(t),xt.resolve()}getCollectionParents(e,t){return xt.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return xt.resolve()}deleteFieldIndex(e,t){return xt.resolve()}getDocumentsMatchingTarget(e,t){return xt.resolve(null)}getIndexType(e,t){return xt.resolve(0)}getFieldIndexes(e,t){return xt.resolve([])}getNextCollectionGroupToUpdate(e){return xt.resolve(null)}getMinOffset(e,t){return xt.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return xt.resolve(Uo.min())}updateCollectionGroup(e,t,s){return xt.resolve()}updateIndexEntries(e,t){return xt.resolve()}}class df{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),h=this.index[t]||new Tr(Qr.comparator),v=!h.has(s);return this.index[t]=h.add(s),v}has(e){const t=e.lastSegment(),s=e.popLast(),h=this.index[t];return h&&h.has(s)}getEntries(e){return(this.index[e]||new Tr(Qr.comparator)).toArray()}}const hf=new Uint8Array(0);class $d{constructor(e,t){this.user=e,this.databaseId=t,this.He=new df,this.Je=new la(s=>ul(s),(s,h)=>Ga(s,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const v={collectionId:s,parent:xo(h)};return mp(e).put(v)}return xt.resolve()}getCollectionParents(e,t){const s=[],h=IDBKeyRange.bound([t,""],[ia(t),""],!1,!0);return mp(e).K(h).next(v=>{for(const C of v){if(C.collectionId!==t)break;s.push(zu(C.parent))}return s})}addFieldIndex(e,t){const s=Ic(e),h={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var C;delete h.indexId;const v=s.add(h);if(t.indexState){const C=bc(e);return v.next(k=>{C.put(lf(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return v.next()}deleteFieldIndex(e,t){const s=Ic(e),h=bc(e),v=Vd(e);return s.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>v.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Vd(e);let h=!0;const v=new Map;return xt.forEach(this.Ye(t),C=>this.Xe(e,C).next(k=>{h&&(h=!!k),v.set(C,k)})).next(()=>{if(h){let C=Hr();const k=[];return xt.forEach(v,(z,X)=>{var pe;Xt("IndexedDbIndexManager",`Using index ${pe=z,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(ws=>`${ws.fieldPath}:${ws.kind}`).join(",")}`} to execute ${ul(t)}`);const Ke=function(ws,Zo){const Vs=$o(Zo);if(void 0===Vs)return null;for(const lo of Lr(ws,Vs.fieldPath))switch(lo.op){case"array-contains-any":return lo.value.arrayValue.values||[];case"array-contains":return[lo.value]}return null}(X,z),Rt=function(ws,Zo){const Vs=new Map;for(const lo of ba(Zo))for(const nl of Lr(ws,lo.fieldPath))switch(nl.op){case"==":case"in":Vs.set(lo.fieldPath.canonicalString(),nl.value);break;case"not-in":case"!=":return Vs.set(lo.fieldPath.canonicalString(),nl.value),Array.from(Vs.values())}return null}(X,z),Wt=function(ws,Zo){const Vs=[];let lo=!0;for(const nl of ba(Zo)){const lg=0===nl.kind?ip(ws,nl.fieldPath,ws.startAt):jc(ws,nl.fieldPath,ws.startAt);Vs.push(lg.value),lo&&(lo=lg.inclusive)}return new cu(Vs,lo)}(X,z),tn=function(ws,Zo){const Vs=[];let lo=!0;for(const nl of ba(Zo)){const lg=0===nl.kind?jc(ws,nl.fieldPath,ws.endAt):ip(ws,nl.fieldPath,ws.endAt);Vs.push(lg.value),lo&&(lo=lg.inclusive)}return new cu(Vs,lo)}(X,z),kn=this.Ze(z,X,Wt),nr=this.Ze(z,X,tn),Hi=this.tn(z,X,Rt),$s=this.en(z.indexId,Ke,kn,Wt.inclusive,nr,tn.inclusive,Hi);return xt.forEach($s,ws=>s.j(ws,t.limit).next(Zo=>{Zo.forEach(Vs=>{const lo=rn.fromSegments(Vs.documentKey);C.has(lo)||(C=C.add(lo),k.push(lo))})}))}).next(()=>k)}return xt.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,h,v,C,k){const z=(null!=t?t.length:1)*Math.max(s.length,v.length),X=z/(null!=t?t.length:1),pe=[];for(let Ke=0;Ke<z;++Ke){const Rt=t?this.nn(t[Ke/X]):hf,Wt=this.sn(e,Rt,s[Ke%X],h),tn=this.rn(e,Rt,v[Ke%X],C),kn=k.map(nr=>this.sn(e,Rt,nr,!0));pe.push(...this.createRange(Wt,tn,kn))}return pe}sn(e,t,s,h){const v=new Zu(e,rn.empty(),t,s);return h?v:v.Le()}rn(e,t,s,h){const v=new Zu(e,rn.empty(),t,s);return h?v.Le():v}Xe(e,t){const s=new Ol(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(v=>{let C=null;for(const k of v)s.Ge(k)&&(!C||k.fields.length>C.fields.length)&&(C=k);return C})}getIndexType(e,t){let s=2;return xt.forEach(this.Ye(t),h=>this.Xe(e,h).next(v=>{v?0!==s&&v.fields.length<function(C){let k=new Tr(Li.comparator),z=!1;for(const X of C.filters){const pe=X;pe.field.isKeyField()||("array-contains"===pe.op||"array-contains-any"===pe.op?z=!0:k=k.add(pe.field))}for(const X of C.orderBy)X.field.isKeyField()||(k=k.add(X.field));return k.size+(z?1:0)}(h)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Yu;for(const h of ba(e)){const v=t.data.field(h.fieldPath);if(null==v)return null;const C=s.Be(h.kind);Rl.ye.re(v,C)}return s.Oe()}nn(e){const t=new Yu;return Rl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Yu;return Rl.ye.re(ss(this.databaseId,t),s.Be(function(h){const v=ba(h);return 0===v.length?0:v[v.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let h=[];h.push(new Yu);let v=0;for(const C of ba(e)){const k=s[v++];for(const z of h)if(this.cn(t,C.fieldPath)&&Da(k))h=this.an(h,C,k);else{const X=z.Be(C.kind);Rl.ye.re(k,X)}}return this.hn(h)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const h=[...e],v=[];for(const C of s.arrayValue.values||[])for(const k of h){const z=new Yu;z.seed(k.Oe()),Rl.ye.re(C,z.Be(t.kind)),v.push(z)}return v}cn(e,t){return!!e.filters.find(s=>s instanceof zo&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Ic(e),h=bc(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(v=>{const C=[];return xt.forEach(v,k=>h.get([k.indexId,this.uid]).next(z=>{C.push(function(X,pe){const Ke=pe?new Vo(pe.sequenceNumber,new Uo(Ec(pe.readTime),new rn(zu(pe.documentKey)),pe.largestBatchId)):Vo.empty(),Rt=X.fields.map(([Wt,tn])=>new Ca(Li.fromServerFormat(Wt),tn));return new Oa(X.indexId,X.collectionGroup,Rt,Ke)}(k,z))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,h)=>{const v=s.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==v?v:Qn(s.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const h=Ic(e),v=bc(e);return this.ln(e).next(C=>h.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>xt.forEach(k,z=>v.put(lf(z.indexId,this.user,C,s)))))}updateIndexEntries(e,t){const s=new Map;return xt.forEach(t,(h,v)=>{const C=s.get(h.collectionGroup);return(C?xt.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next(k=>(s.set(h.collectionGroup,k),xt.forEach(k,z=>this.fn(e,h,z).next(X=>{const pe=this.dn(v,z);return X.isEqual(pe)?xt.resolve():this._n(e,v,z,X,pe)}))))})}wn(e,t,s,h){return Vd(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,h){return Vd(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const h=Vd(e);let v=new Tr(Xu);return h.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(C,k)=>{v=v.add(new Zu(s.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>v)}dn(e,t){let s=new Tr(Xu);const h=this.on(t,e);if(null==h)return s;const v=$o(t);if(null!=v){const C=e.data.field(v.fieldPath);if(Da(C))for(const k of C.arrayValue.values||[])s=s.add(new Zu(t.indexId,e.key,this.nn(k),h))}else s=s.add(new Zu(t.indexId,e.key,hf,h));return s}_n(e,t,s,h,v){Xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(k,z,X,pe,Ke){const Rt=k.getIterator(),Wt=z.getIterator();let tn=A(Rt),kn=A(Wt);for(;tn||kn;){let nr=!1,Hi=!1;if(tn&&kn){const $s=X(tn,kn);$s<0?Hi=!0:$s>0&&(nr=!0)}else null!=tn?Hi=!0:nr=!0;nr?(pe(kn),kn=A(Wt)):Hi?(Ke(tn),tn=A(Rt)):(tn=A(Rt),kn=A(Wt))}}(h,v,Xu,k=>{C.push(this.wn(e,t,s,k))},k=>{C.push(this.mn(e,t,s,k))}),xt.waitFor(C)}ln(e){let t=1;return bc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,h,v)=>{v.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((C,k)=>Xu(C,k)).filter((C,k,z)=>!k||0!==Xu(C,z[k-1]));const h=[];h.push(e);for(const C of s){const k=Xu(C,e),z=Xu(C,t);if(0===k)h[0]=e.Le();else if(k>0&&z<0)h.push(C),h.push(C.Le());else if(z>0)break}h.push(t);const v=[];for(let C=0;C<h.length;C+=2)v.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,hf,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,hf,[]]));return v}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hm)}getMinOffset(e,t){return xt.mapArray(this.Ye(t),s=>this.Xe(e,s).next(h=>h||Tn())).next(hm)}}function mp(i){return ao(i,"collectionParents")}function Vd(i){return ao(i,"indexEntries")}function Ic(i){return ao(i,"indexConfiguration")}function bc(i){return ao(i,"indexState")}function hm(i){Xn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const h=i[s].indexState.offset;lu(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new Uo(e.readTime,e.documentKey,t)}const gg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ko{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ko(e,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ff(i,e,t){const s=i.store("mutations"),h=i.store("documentMutations"),v=[],C=IDBKeyRange.only(t.batchId);let k=0;const z=s.J({range:C},(pe,Ke,Rt)=>(k++,Rt.delete()));v.push(z.next(()=>{Xn(1===k)}));const X=[];for(const pe of t.mutations){const Ke=Fd(e,pe.key.path,t.batchId);v.push(h.delete(Ke)),X.push(pe.key)}return xt.waitFor(v).next(()=>X)}function Pl(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Tn();e=i.noDocument}return JSON.stringify(e).length}Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(41943040,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);class Qu{constructor(e,t,s,h){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=h,this.gn={}}static se(e,t,s,h){Xn(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new Qu(v,t,s,h)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).J({index:"userMutationsIndex",range:s},(h,v,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,s,h){const v=Na(e),C=ml(e);return C.add({}).next(k=>{Xn("number"==typeof k);const z=new rf(k,t,s,h),X=function(Rt,Wt,tn){const kn=tn.baseMutations.map(Hi=>on(Rt.ne,Hi)),nr=tn.mutations.map(Hi=>on(Rt.ne,Hi));return{userId:Wt,batchId:tn.batchId,localWriteTimeMs:tn.localWriteTime.toMillis(),baseMutations:kn,mutations:nr}}(this.wt,this.userId,z),pe=[];let Ke=new Tr((Rt,Wt)=>Qn(Rt.canonicalString(),Wt.canonicalString()));for(const Rt of h){const Wt=Fd(this.userId,Rt.key.path,k);Ke=Ke.add(Rt.key.path.popLast()),pe.push(C.put(X)),pe.push(v.put(Wt,dh))}return Ke.forEach(Rt=>{pe.push(this.indexManager.addToCollectionParentIndex(e,Rt))}),e.addOnCommittedListener(()=>{this.gn[k]=z.keys()}),xt.waitFor(pe).next(()=>z)})}lookupMutationBatch(e,t){return ml(e).get(t).next(s=>s?(Xn(s.userId===this.userId),qu(this.wt,s)):null)}yn(e,t){return this.gn[t]?xt.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const h=s.keys();return this.gn[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,h=IDBKeyRange.lowerBound([this.userId,s]);let v=null;return ml(e).J({index:"userMutationsIndex",range:h},(C,k,z)=>{k.userId===this.userId&&(Xn(k.batchId>=s),v=qu(this.wt,k)),z.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ml(e).J({index:"userMutationsIndex",range:t,reverse:!0},(h,v,C)=>{s=v.batchId,C.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).K("userMutationsIndex",t).next(s=>s.map(h=>qu(this.wt,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=op(this.userId,t.path),h=IDBKeyRange.lowerBound(s),v=[];return Na(e).J({range:h},(C,k,z)=>{const[X,pe,Ke]=C,Rt=zu(pe);if(X===this.userId&&t.path.isEqual(Rt))return ml(e).get(Ke).next(Wt=>{if(!Wt)throw Tn();Xn(Wt.userId===this.userId),v.push(qu(this.wt,Wt))});z.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tr(Qn);const h=[];return t.forEach(v=>{const C=op(this.userId,v.path),k=IDBKeyRange.lowerBound(C),z=Na(e).J({range:k},(X,pe,Ke)=>{const[Rt,Wt,tn]=X,kn=zu(Wt);Rt===this.userId&&v.path.isEqual(kn)?s=s.add(tn):Ke.done()});h.push(z)}),xt.waitFor(h).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,h=s.length+1,v=op(this.userId,s),C=IDBKeyRange.lowerBound(v);let k=new Tr(Qn);return Na(e).J({range:C},(z,X,pe)=>{const[Ke,Rt,Wt]=z,tn=zu(Rt);Ke===this.userId&&s.isPrefixOf(tn)?tn.length===h&&(k=k.add(Wt)):pe.done()}).next(()=>this.pn(e,k))}pn(e,t){const s=[],h=[];return t.forEach(v=>{h.push(ml(e).get(v).next(C=>{if(null===C)throw Tn();Xn(C.userId===this.userId),s.push(qu(this.wt,C))}))}),xt.waitFor(h).next(()=>s)}removeMutationBatch(e,t){return ff(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),xt.forEach(s,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),h=[];return Na(e).J({range:s},(v,C,k)=>{if(v[0]===this.userId){const z=zu(v[1]);h.push(z)}else k.done()}).next(()=>{Xn(0===h.length)})})}containsKey(e,t){return mg(e,this.userId,t)}Tn(e){return Ud(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mg(i,e,t){const s=op(e,t.path),h=s[1],v=IDBKeyRange.lowerBound(s);let C=!1;return Na(i).J({range:v,H:!0},(k,z,X)=>{const[pe,Ke,Rt]=k;pe===e&&Ke===h&&(C=!0),X.done()}).next(()=>C)}function ml(i){return ao(i,"mutations")}function Na(i){return ao(i,"documentMutations")}function Ud(i){return ao(i,"mutationQueues")}class od{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new od(0)}static Rn(){return new od(-1)}}class yp{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new od(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Hn.fromTimestamp(new pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(h=>(h.highestListenSequenceNumber=t,s&&(h.lastRemoteSnapshotVersion=s.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Pn(e,h)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ju(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(Xn(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let h=0;const v=[];return Ju(e).J((C,k)=>{const z=Eu(k);z.sequenceNumber<=t&&null===s.get(z.targetId)&&(h++,v.push(this.removeTargetData(e,z)))}).next(()=>xt.waitFor(v)).next(()=>h)}forEachTarget(e,t){return Ju(e).J((s,h)=>{const v=Eu(h);t(v)})}bn(e){return Cc(e).get("targetGlobalKey").next(t=>(Xn(null!==t),t))}Pn(e,t){return Cc(e).put("targetGlobalKey",t)}vn(e,t){return Ju(e).put(rd(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ul(t),h=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let v=null;return Ju(e).J({range:h,index:"queryTargetsIndex"},(C,k,z)=>{const X=Eu(k);Ga(t,X.target)&&(v=X,z.done())}).next(()=>v)}addMatchingKeys(e,t,s){const h=[],v=Xa(e);return t.forEach(C=>{const k=xo(C.path);h.push(v.put({targetId:s,path:k})),h.push(this.referenceDelegate.addReference(e,s,C))}),xt.waitFor(h)}removeMatchingKeys(e,t,s){const h=Xa(e);return xt.forEach(t,v=>{const C=xo(v.path);return xt.waitFor([h.delete([s,C]),this.referenceDelegate.removeReference(e,s,v)])})}removeMatchingKeysForTargetId(e,t){const s=Xa(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(h)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),h=Xa(e);let v=Hr();return h.J({range:s,H:!0},(C,k,z)=>{const X=zu(C[1]),pe=new rn(X);v=v.add(pe)}).next(()=>v)}containsKey(e,t){const s=xo(t.path),h=IDBKeyRange.bound([s],[ia(s)],!1,!0);let v=0;return Xa(e).J({index:"documentTargetsIndex",H:!0,range:h},([C,k],z,X)=>{0!==C&&(v++,X.done())}).next(()=>v>0)}te(e,t){return Ju(e).get(t).next(s=>s?Eu(s):null)}}function Ju(i){return ao(i,"targets")}function Cc(i){return ao(i,"targetGlobal")}function Xa(i){return ao(i,"targetDocuments")}function yg([i,e],[t,s]){const h=Qn(i,t);return 0===h?Qn(e,s):h}class Qa{constructor(e){this.Sn=e,this.buffer=new Tr(yg),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();yg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jd{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Ao(s)?Xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield jo(s)}yield t.kn(3e5)}))}}class fm{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return xt.resolve(cr.ot);const s=new Qa(t);return this.On.forEachTarget(e,h=>s.xn(h.sequenceNumber)).next(()=>this.On.Fn(e,h=>s.xn(h))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(gg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gg):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,h,v,C,k,z,X;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ke=>(Ke>this.params.maximumSequenceNumbersToCollect?(Xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ke}`),h=this.params.maximumSequenceNumbersToCollect):h=Ke,C=Date.now(),this.nthSequenceNumber(e,h))).next(Ke=>(s=Ke,k=Date.now(),this.removeTargets(e,s,t))).next(Ke=>(v=Ke,z=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ke=>(X=Date.now(),ra()<=Ye.in.DEBUG&&Xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-pe}ms\n\tDetermined least recently used ${h} in `+(k-C)+`ms\n\tRemoved ${v} targets in `+(z-k)+`ms\n\tRemoved ${Ke} documents in `+(X-z)+`ms\nTotal Duration: ${X-pe}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:v,documentsRemoved:Ke})))}}class pf{constructor(e,t){this.db=e,this.garbageCollector=new fm(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(h=>s+h))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,h)=>t(h))}addReference(e,t,s){return mh(e,s)}removeReference(e,t,s){return mh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return mh(e,t)}Un(e,t){return function(s,h){let v=!1;return Ud(s).Y(C=>mg(s,C,h).next(k=>(k&&(v=!0),xt.resolve(!k)))).next(()=>v)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let v=0;return this.Ln(e,(C,k)=>{if(k<=t){const z=this.Un(e,C).next(X=>{if(!X)return v++,s.getEntry(e,C).next(()=>(s.removeEntry(C,Hn.min()),Xa(e).delete([0,xo(C.path)])))});h.push(z)}}).next(()=>xt.waitFor(h)).next(()=>s.apply(e)).next(()=>v)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return mh(e,t)}Ln(e,t){const s=Xa(e);let h,v=cr.ot;return s.J({index:"documentTargetsIndex"},([C,k],{path:z,sequenceNumber:X})=>{0===C?(v!==cr.ot&&t(new rn(zu(h)),v),v=X,h=z):v=cr.ot}).next(()=>{v!==cr.ot&&t(new rn(zu(h)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mh(i,e){return Xa(i).put((s=i.currentSequenceNumber,{targetId:0,path:xo(e.path),sequenceNumber:s}));var s}class yl{constructor(){this.changes=new la(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,os.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?xt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vg{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Fa(e).put(s)}removeEntry(e,t,s){return Fa(e).delete(function(h,v){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],_u(v),C[C.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=os.newInvalidDocument(t);return Fa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(h,v)=>{s=this.Kn(t,v)}).next(()=>s)}Gn(e,t){let s={size:0,document:os.newInvalidDocument(t)};return Fa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(h,v)=>{s={document:this.Kn(t,v),size:Pl(v)}}).next(()=>s)}getEntries(e,t){let s=Wo();return this.Qn(e,t,(h,v)=>{const C=this.Kn(h,v);s=s.insert(h,C)}).next(()=>s)}jn(e,t){let s=Wo(),h=new is(rn.comparator);return this.Qn(e,t,(v,C)=>{const k=this.Kn(v,C);s=s.insert(v,k),h=h.insert(v,Pl(C))}).next(()=>({documents:s,Wn:h}))}Qn(e,t,s){if(t.isEmpty())return xt.resolve();let h=new Tr(vh);t.forEach(z=>h=h.add(z));const v=IDBKeyRange.bound(yh(h.first()),yh(h.last())),C=h.getIterator();let k=C.getNext();return Fa(e).J({index:"documentKeyIndex",range:v},(z,X,pe)=>{const Ke=rn.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;k&&vh(k,Ke)<0;)s(k,null),k=C.getNext();k&&k.isEqual(Ke)&&(s(k,X),k=C.hasNext()?C.getNext():null),k?pe.q(yh(k)):pe.done()}).next(()=>{for(;k;)s(k,null),k=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,s){const h=[t.popLast().toArray(),t.lastSegment(),_u(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],v=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fa(e).K(IDBKeyRange.bound(h,v,!0)).next(C=>{let k=Wo();for(const z of C){const X=this.Kn(rn.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);k=k.insert(X.key,X)}return k})}getAllFromCollectionGroup(e,t,s,h){let v=Wo();const C=vp(t,s),k=vp(t,Uo.max());return Fa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,k,!0)},(z,X,pe)=>{const Ke=this.Kn(rn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);v=v.insert(Ke.key,Ke),v.size===h&&pe.done()}).next(()=>v)}newChangeBuffer(e){return new Eg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ad(e).get("remoteDocumentGlobalKey").next(t=>(Xn(!!t),t))}qn(e,t){return ad(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function ph(i,e){let t;if(e.document)t=ue(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=rn.fromSegments(e.noDocument.path),h=Ec(e.noDocument.readTime);t=os.newNoDocument(s,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Tn();{const s=rn.fromSegments(e.unknownDocument.path),h=Ec(e.unknownDocument.version);t=os.newUnknownDocument(s,h)}}return e.readTime&&t.setReadTime(function(s){const h=new pi(s[0],s[1]);return Hn.fromTimestamp(h)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(Hn.min()))return s}return os.newInvalidDocument(e)}}function _g(i){return new vg(i)}class Eg extends yl{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new la(s=>s.toString(),(s,h)=>s.isEqual(h))}applyChanges(e){const t=[];let s=0,h=new Tr((v,C)=>Qn(v.canonicalString(),C.canonicalString()));return this.changes.forEach((v,C)=>{const k=this.Hn.get(v);if(t.push(this.zn.removeEntry(e,v,k.readTime)),C.isValidDocument()){const z=hp(this.zn.wt,C);h=h.add(v.path.popLast());const X=Pl(z);s+=X-k.size,t.push(this.zn.addEntry(e,v,z))}else if(s-=k.size,this.trackRemovals){const z=hp(this.zn.wt,C.convertToNoDocument(Hn.min()));t.push(this.zn.addEntry(e,v,z))}}),h.forEach(v=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,v))}),t.push(this.zn.updateMetadata(e,s)),xt.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:h})=>(h.forEach((v,C)=>{this.Hn.set(v,{size:C,readTime:s.get(v).readTime})}),s))}}function ad(i){return ao(i,"remoteDocumentGlobal")}function Fa(i){return ao(i,"remoteDocumentsV14")}function yh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vp(i,e){const t=e.documentKey.path.toArray();return[i,_u(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vh(i,e){const t=i.path.toArray(),s=e.path.toArray();let h=0;for(let v=0;v<t.length-2&&v<s.length-2;++v)if(h=Qn(t[v],s[v]),h)return h;return h=Qn(t.length,s.length),h||(h=Qn(t[t.length-2],s[s.length-2]),h||Qn(t[t.length-1],s[s.length-1]))}class pm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gf{constructor(e,t,s,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=h}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(s=h,this.getBaseDocument(e,t,s))).next(h=>(null!==s&&Wl(s.mutation,h,x.empty(),pi.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Hr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Hr()){const h=qo();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,s).next(v=>{let C=pu();return v.forEach((k,z)=>{C=C.insert(k,z.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const s=qo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Hr()))}populateOverlays(e,t,s){const h=[];return s.forEach(v=>{t.has(v)||h.push(v)}),this.documentOverlayCache.getOverlays(e,h).next(v=>{v.forEach((C,k)=>{t.set(C,k)})})}computeViews(e,t,s,h){let v=Wo();const C=gu(),k=gu();return t.forEach((z,X)=>{const pe=s.get(X.key);h.has(X.key)&&(void 0===pe||pe.mutation instanceof Ta)?v=v.insert(X.key,X):void 0!==pe&&(C.set(X.key,pe.mutation.getFieldMask()),Wl(pe.mutation,X,pe.mutation.getFieldMask(),pi.now()))}),this.recalculateAndSaveOverlays(e,v).next(z=>(z.forEach((X,pe)=>C.set(X,pe)),t.forEach((X,pe)=>{var Ke;return k.set(X,new pm(pe,null!==(Ke=C.get(X))&&void 0!==Ke?Ke:null))}),k))}recalculateAndSaveOverlays(e,t){const s=gu();let h=new is((C,k)=>C-k),v=Hr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const k of C)k.keys().forEach(z=>{const X=t.get(z);if(null===X)return;let pe=s.get(z)||x.empty();pe=k.applyToLocalView(X,pe),s.set(z,pe);const Ke=(h.get(k.batchId)||Hr()).add(z);h=h.insert(k.batchId,Ke)})}).next(()=>{const C=[],k=h.getReverseIterator();for(;k.hasNext();){const z=k.getNext(),X=z.key,pe=z.value,Ke=Kl();pe.forEach(Rt=>{if(!v.has(Rt)){const Wt=Zh(t.get(Rt),s.get(Rt));null!==Wt&&Ke.set(Rt,Wt),v=v.add(Rt)}}),C.push(this.documentOverlayCache.saveOverlays(e,X,Ke))}return xt.waitFor(C)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return rn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ws(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var h}getNextDocuments(e,t,s,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,h).next(v=>{const C=h-v.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,h-v.size):xt.resolve(qo());let k=-1,z=v;return C.next(X=>xt.forEach(X,(pe,Ke)=>(k<Ke.largestBatchId&&(k=Ke.largestBatchId),v.get(pe)?xt.resolve():this.getBaseDocument(e,pe,Ke).next(Rt=>{z=z.insert(pe,Rt)}))).next(()=>this.populateOverlays(e,X,v)).next(()=>this.computeViews(e,z,X,Hr())).next(pe=>({batchId:k,changes:Ls(pe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rn(t)).next(s=>{let h=pu();return s.isFoundDocument()&&(h=h.insert(s.key,s)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const h=t.collectionGroup;let v=pu();return this.indexManager.getCollectionParents(e,h).next(C=>xt.forEach(C,k=>{const z=(X=t,pe=k.child(h),new aa(pe,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,pe;return this.getDocumentsMatchingCollectionQuery(e,z,s).next(X=>{X.forEach((pe,Ke)=>{v=v.insert(pe,Ke)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,t,s){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(v=>(h=v,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(v=>{v.forEach((k,z)=>{const X=z.getKey();null===h.get(X)&&(h=h.insert(X,os.newInvalidDocument(X)))});let C=pu();return h.forEach((k,z)=>{const X=v.get(k);void 0!==X&&Wl(X.mutation,z,x.empty(),pi.now()),Td(t,z)&&(C=C.insert(k,z))}),C})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):xt.resolve(os.newInvalidDocument(t))}}class my{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return xt.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:Bs(s.createTime)}),xt.resolve()}getNamedQuery(e,t){return xt.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:sf(s.bundledQuery),readTime:Bs(s.readTime)}),xt.resolve();var s}}class mf{constructor(){this.overlays=new is(rn.comparator),this.Xn=new Map}getOverlay(e,t){return xt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qo();return xt.forEach(t,h=>this.getOverlay(e,h).next(v=>{null!==v&&s.set(h,v)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((h,v)=>{this.ie(e,t,v)}),xt.resolve()}removeOverlaysForBatchId(e,t,s){const h=this.Xn.get(s);return void 0!==h&&(h.forEach(v=>this.overlays=this.overlays.remove(v)),this.Xn.delete(s)),xt.resolve()}getOverlaysForCollection(e,t,s){const h=qo(),v=t.length+1,C=new rn(t.child("")),k=this.overlays.getIteratorFrom(C);for(;k.hasNext();){const z=k.getNext().value,X=z.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===v&&z.largestBatchId>s&&h.set(z.getKey(),z)}return xt.resolve(h)}getOverlaysForCollectionGroup(e,t,s,h){let v=new is((X,pe)=>X-pe);const C=this.overlays.getIterator();for(;C.hasNext();){const X=C.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>s){let pe=v.get(X.largestBatchId);null===pe&&(pe=qo(),v=v.insert(X.largestBatchId,pe)),pe.set(X.getKey(),X)}}const k=qo(),z=v.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((X,pe)=>k.set(X,pe)),!(k.size()>=h)););return xt.resolve(k)}ie(e,t,s){const h=this.overlays.get(s.key);if(null!==h){const C=this.Xn.get(h.largestBatchId).delete(s.key);this.Xn.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(s.key,new pg(t,s));let v=this.Xn.get(t);void 0===v&&(v=Hr(),this.Xn.set(t,v)),this.Xn.set(t,v.add(s.key))}}class ld{constructor(){this.Zn=new Tr(Yo.ts),this.es=new Tr(Yo.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Yo(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Yo(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new rn(new Qr([])),s=new Yo(t,e),h=new Yo(t,e+1),v=[];return this.es.forEachInRange([s,h],C=>{this.rs(C),v.push(C.key)}),v}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new rn(new Qr([])),s=new Yo(t,e),h=new Yo(t,e+1);let v=Hr();return this.es.forEachInRange([s,h],C=>{v=v.add(C.key)}),v}containsKey(e){const t=new Yo(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Yo{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return rn.comparator(e.key,t.key)||Qn(e.ls,t.ls)}static ns(e,t){return Qn(e.ls,t.ls)||rn.comparator(e.key,t.key)}}class yf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Tr(Yo.ts)}checkEmpty(e){return xt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,h){const v=this.fs;this.fs++;const C=new rf(v,t,s,h);this.mutationQueue.push(C);for(const k of h)this.ds=this.ds.add(new Yo(k.key,v)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return xt.resolve(C)}lookupMutationBatch(e,t){return xt.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ws(t+1),v=h<0?0:h;return xt.resolve(this.mutationQueue.length>v?this.mutationQueue[v]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Yo(t,0),h=new Yo(t,Number.POSITIVE_INFINITY),v=[];return this.ds.forEachInRange([s,h],C=>{const k=this._s(C.ls);v.push(k)}),xt.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tr(Qn);return t.forEach(h=>{const v=new Yo(h,0),C=new Yo(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([v,C],k=>{s=s.add(k.ls)})}),xt.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,h=s.length+1;let v=s;rn.isDocumentKey(v)||(v=v.child(""));const C=new Yo(new rn(v),0);let k=new Tr(Qn);return this.ds.forEachWhile(z=>{const X=z.key.path;return!!s.isPrefixOf(X)&&(X.length===h&&(k=k.add(z.ls)),!0)},C),xt.resolve(this.gs(k))}gs(e){const t=[];return e.forEach(s=>{const h=this._s(s);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){Xn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return xt.forEach(t.mutations,h=>{const v=new Yo(h.key,t.batchId);return s=s.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new Yo(t,0),h=this.ds.firstAfterOrEqual(s);return xt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return xt.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gm{constructor(e){this.ps=e,this.docs=new is(rn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,h=this.docs.get(s),v=h?h.size:0,C=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:C}),this.size+=C-v,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return xt.resolve(s?s.document.mutableCopy():os.newInvalidDocument(t))}getEntries(e,t){let s=Wo();return t.forEach(h=>{const v=this.docs.get(h);s=s.insert(h,v?v.document.mutableCopy():os.newInvalidDocument(h))}),xt.resolve(s)}getAllFromCollection(e,t,s){let h=Wo();const v=new rn(t.child("")),C=this.docs.getIteratorFrom(v);for(;C.hasNext();){const{key:k,value:{document:z}}=C.getNext();if(!t.isPrefixOf(k.path))break;k.path.length>t.length+1||lu(Ha(z),s)<=0||(h=h.insert(z.key,z.mutableCopy()))}return xt.resolve(h)}getAllFromCollectionGroup(e,t,s,h){Tn()}Is(e,t){return xt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new mm(this)}getSize(e){return xt.resolve(this.size)}}class mm extends yl{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,h)=>{h.isValidDocument()?t.push(this.zn.addEntry(e,h)):this.zn.removeEntry(s)}),xt.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Xl{constructor(e){this.persistence=e,this.Ts=new la(t=>ul(t),Ga),this.lastRemoteSnapshotVersion=Hn.min(),this.highestTargetId=0,this.Es=0,this.As=new ld,this.targetCount=0,this.Rs=od.An()}forEachTarget(e,t){return this.Ts.forEach((s,h)=>t(h)),xt.resolve()}getLastRemoteSnapshotVersion(e){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xt.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),xt.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new od(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,xt.resolve()}updateTargetData(e,t){return this.vn(t),xt.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,xt.resolve()}removeTargets(e,t,s){let h=0;const v=[];return this.Ts.forEach((C,k)=>{k.sequenceNumber<=t&&null===s.get(k.targetId)&&(this.Ts.delete(C),v.push(this.removeMatchingKeysForTargetId(e,k.targetId)),h++)}),xt.waitFor(v).next(()=>h)}getTargetCount(e){return xt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return xt.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),xt.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const h=this.persistence.referenceDelegate,v=[];return h&&t.forEach(C=>{v.push(h.markPotentiallyOrphaned(e,C))}),xt.waitFor(v)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),xt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return xt.resolve(s)}containsKey(e,t){return xt.resolve(this.As.containsKey(t))}}class _p{constructor(e,t){this.bs={},this.overlays={},this.Ps=new cr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Xl(this),this.indexManager=new gp,this.remoteDocumentCache=new gm(s=>this.referenceDelegate.Ss(s)),this.wt=new fh(t),this.Ds=new my(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new yf(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){Xt("MemoryPersistence","Starting transaction:",e);const h=new wg(this.Ps.next());return this.referenceDelegate.Cs(),s(h).next(v=>this.referenceDelegate.xs(h).next(()=>v)).toPromise().then(v=>(h.raiseOnCommittedEvent(),v))}Ns(e,t){return xt.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class wg extends Mu{constructor(e){super(),this.currentSequenceNumber=e}}class vf{constructor(e){this.persistence=e,this.ks=new ld,this.Os=null}static Ms(e){return new vf(e)}get Fs(){if(this.Os)return this.Os;throw Tn()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),xt.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),xt.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),xt.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(h=>this.Fs.add(h.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(v=>this.Fs.add(v.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.Fs,s=>{const h=rn.fromPath(s);return this.$s(e,h).next(v=>{v||t.removeEntry(h,Hn.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return xt.or([()=>xt.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class ym{constructor(e){this.wt=e}O(e,t,s,h){const v=new Sl("createOrUpgrade",t);var k;s<1&&h>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0}),k.createObjectStore("documentMutations"),_f(e),function(k){k.createObjectStore("remoteDocuments")}(e));let C=xt.resolve();return s<3&&h>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),_f(e)),C=C.next(()=>function(k){const z=k.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hn.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",X)}(v))),s<4&&h>=4&&(0!==s&&(C=C.next(()=>function(k,z){return z.store("mutations").K().next(X=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",am,{unique:!0});const pe=z.store("mutations"),Ke=X.map(Rt=>pe.put(Rt));return xt.waitFor(Ke)})}(e,v))),C=C.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&h>=5&&(C=C.next(()=>this.Bs(v))),s<6&&h>=6&&(C=C.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(v)))),s<7&&h>=7&&(C=C.next(()=>this.Us(v))),s<8&&h>=8&&(C=C.next(()=>this.qs(e,v))),s<9&&h>=9&&(C=C.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&h>=10&&(C=C.next(()=>this.Ks(v))),s<11&&h>=11&&(C=C.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&h>=12&&(C=C.next(()=>{!function(k){const z=k.createObjectStore("documentOverlays",{keyPath:um});z.createIndex("collectionPathOverlayIndex",oo,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",up,{unique:!1})}(e)})),s<13&&h>=13&&(C=C.next(()=>function(k){const z=k.createObjectStore("remoteDocumentsV14",{keyPath:py});z.createIndex("documentKeyIndex",gy),z.createIndex("collectionGroupIndex",ap)}(e)).next(()=>this.Gs(e,v)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&h>=14&&(C=C.next(()=>this.Qs(e,v))),s<15&&h>=15&&(C=C.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:hh}).createIndex("sequenceNumberIndex",ed,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:lm}).createIndex("documentKeyIndex",lp,{unique:!1})}(e))),C}Ls(e){let t=0;return e.store("remoteDocuments").J((s,h)=>{t+=Pl(h)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(h=>xt.forEach(h,v=>{const C=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",C).next(k=>xt.forEach(k,z=>{Xn(z.userId===v.userId);const X=qu(this.wt,z);return ff(e,v.userId,X).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const v=[];return s.J((C,k)=>{const z=new Qr(C),X=[0,xo(z)];v.push(t.get(X).next(pe=>pe?xt.resolve():t.put({targetId:0,path:xo(z),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>xt.waitFor(v))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:_c});const s=t.store("collectionParents"),h=new df,v=C=>{if(h.add(C)){const k=C.lastSegment(),z=C.popLast();return s.put({collectionId:k,parent:xo(z)})}};return t.store("remoteDocuments").J({H:!0},(C,k)=>{const z=new Qr(C);return v(z.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([C,k,z],X)=>{const pe=zu(k);return v(pe.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,h)=>{const v=Eu(h),C=rd(this.wt,v);return t.put(C)})}Gs(e,t){const s=t.store("remoteDocuments"),h=[];return s.J((v,C)=>{const k=t.store("remoteDocumentsV14"),z=(X=C,X.document?new rn(Qr.fromString(X.document.name).popFirst(5)):X.noDocument?rn.fromSegments(X.noDocument.path):X.unknownDocument?rn.fromSegments(X.unknownDocument.path):Tn()).path.toArray();var X;const pe={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push(k.put(pe))}).next(()=>xt.waitFor(h))}Qs(e,t){const s=t.store("mutations"),h=_g(this.wt),v=new _p(vf.Ms,this.wt.ne);return s.K().next(C=>{const k=new Map;return C.forEach(z=>{var X;let pe=null!==(X=k.get(z.userId))&&void 0!==X?X:Hr();qu(this.wt,z).keys().forEach(Ke=>pe=pe.add(Ke)),k.set(z.userId,pe)}),xt.forEach(k,(z,X)=>{const pe=new si(X),Ke=uf.se(this.wt,pe),Rt=v.getIndexManager(pe),Wt=Qu.se(pe,this.wt,Rt,v.referenceDelegate);return new gf(h,Wt,Ke,Rt).recalculateAndSaveOverlaysForDocumentKeys(new cp(t,cr.ot),z).next()})})}}function _f(i){i.createObjectStore("targetDocuments",{keyPath:cg}).createIndex("documentTargetsIndex",dg,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vc,{unique:!0}),i.createObjectStore("targetGlobal")}const Ef="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wf{constructor(e,t,s,h,v,C,k,z,X,pe,Ke=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=v,this.window=C,this.document=k,this.Ws=X,this.zs=pe,this.Hs=Ke,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Rt=>Promise.resolve(),!wf.V())throw new Zt(At.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pf(this,h),this.ei=t+"main",this.wt=new fh(z),this.ni=new go(this.ei,this.Hs,new ym(this.wt)),this.Vs=new yp(this.referenceDelegate,this.wt),this.remoteDocumentCache=_g(this.wt),this.Ds=new Ld,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===pe&&_i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zt(At.FAILED_PRECONDITION,Ef);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new cr(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,ae.Z)(function*(h){if(t.started)return e(h)});return function(h){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ae.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Ao(e))return Xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Ql(e).get("owner").next(t=>xt.resolve(this.di(t)))}_i(e){return Jl(e).delete(this.clientId)}wi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const h=ao(s,"clientMetadata");return h.K().next(v=>{const C=e.gi(v,18e5),k=v.filter(z=>-1===C.indexOf(z));return xt.forEach(k,z=>h.delete(z.clientId)).next(()=>k)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?xt.resolve(!0):Ql(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Zt(At.FAILED_PRECONDITION,Ef);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jl(e).K().next(s=>void 0===this.gi(s,5e3).find(h=>!(this.clientId===h.clientId||!(!this.networkEnabled&&h.networkEnabled||!this.inForeground&&h.inForeground&&this.networkEnabled===h.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new cp(t,cr.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Jl(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Qu.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $d(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return uf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){Xt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",v=15===(C=this.Hs)?cm:14===C?fg:13===C?td:12===C?Wu:11===C?hg:void Tn();var C;let k;return this.ni.runTransaction(e,h,v,z=>(k=new cp(z,this.Ps?this.Ps.next():cr.ot),"readwrite-primary"===t?this.ai(k).next(X=>!!X||this.hi(k)).next(X=>{if(!X)throw _i(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Zt(At.FAILED_PRECONDITION,gi);return s(k)}).next(X=>this.fi(k).next(()=>X)):this.bi(k).next(()=>s(k)))).then(z=>(k.raiseOnCommittedEvent(),z))}bi(e){return Ql(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Zt(At.FAILED_PRECONDITION,Ef)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ql(e).put("owner",t)}static V(){return go.V()}li(e){const t=Ql(e);return t.get("owner").next(s=>this.di(s)?(Xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xt.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(_i(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,G.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Xt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return _i("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){_i("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ql(i){return ao(i,"owner")}function Jl(i){return ao(i,"clientMetadata")}function Ep(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Rr{constructor(e,t,s,h){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=h}static Vi(e,t){let s=Hr(),h=Hr();for(const v of t.docChanges)switch(v.type){case 0:s=s.add(v.doc.key);break;case 1:h=h.add(v.doc.key)}return new Rr(e,t.fromCache,s,h)}}class Hd{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,h){return this.Ci(e,t).next(v=>v||this.xi(e,t,h,s)).next(v=>v||this.Ni(e,t))}Ci(e,t){return xt.resolve(null)}xi(e,t,s,h){return function Dd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||h.isEqual(Hn.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(v=>{const C=this.ki(t,v);return this.Oi(t,C,s,h)?this.Ni(e,t):(ra()<=Ye.in.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),za(t)),this.Mi(e,C,t,sl(h,-1)))})}ki(e,t){let s=new Tr(hc(e));return t.forEach((h,v)=>{Td(e,v)&&(s=s.add(v))}),s}Oi(e,t,s,h){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const v="F"===e.limitType?t.last():t.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(h)>0)}Ni(e,t){return ra()<=Ye.in.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",za(t)),this.Di.getDocumentsMatchingQuery(e,t,Uo.min())}Mi(e,t,s,h){return this.Di.getDocumentsMatchingQuery(e,s,h).next(v=>(t.forEach(C=>{v=v.insert(C.key,C)}),v))}}class Ig{constructor(e,t,s,h){this.persistence=e,this.Fi=t,this.wt=h,this.$i=new is(Qn),this.Bi=new la(v=>ul(v),Ga),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gf(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Dc(i,e,t,s){return new Ig(i,e,t,s)}function bg(i,e){return If.apply(this,arguments)}function If(){return If=(0,ae.Z)(function*(i,e){const t=_n(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let h;return t.mutationQueue.getAllMutationBatches(s).next(v=>(h=v,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(v=>{const C=[],k=[];let z=Hr();for(const X of h){C.push(X.batchId);for(const pe of X.mutations)z=z.add(pe.key)}for(const X of v){k.push(X.batchId);for(const pe of X.mutations)z=z.add(pe.key)}return t.localDocuments.getDocuments(s,z).next(X=>({Ki:X,removedBatchIds:C,addedBatchIds:k}))})})}),If.apply(this,arguments)}function Ip(i){const e=_n(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function bf(i,e,t){let s=Hr(),h=Hr();return t.forEach(v=>s=s.add(v)),e.getEntries(i,s).next(v=>{let C=Wo();return t.forEach((k,z)=>{const X=v.get(k);z.isFoundDocument()!==X.isFoundDocument()&&(h=h.add(k)),z.isNoDocument()&&z.version.isEqual(Hn.min())?(e.removeEntry(k,z.readTime),C=C.insert(k,z)):!X.isValidDocument()||z.version.compareTo(X.version)>0||0===z.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(z),C=C.insert(k,z)):Xt("LocalStore","Ignoring outdated watch update for ",k,". Current version:",X.version," Watch version:",z.version)}),{Gi:C,Qi:h}})}function bp(i,e){const t=_n(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Eh(i,e){const t=_n(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let h;return t.Vs.getTargetData(s,e).next(v=>v?(h=v,xt.resolve(h)):t.Vs.allocateTargetId(s).next(C=>(h=new gl(e,C,0,s.currentSequenceNumber),t.Vs.addTargetData(s,h).next(()=>h))))}).then(s=>{const h=t.$i.get(s.targetId);return(null===h||s.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function ud(i,e,t){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,ae.Z)(function*(i,e,t){const s=_n(i),h=s.$i.get(e),v=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",v,C=>s.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!Ao(C))throw C;Xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}s.$i=s.$i.remove(e),s.Bi.delete(h.target)}),Gd.apply(this,arguments)}function wu(i,e,t){const s=_n(i);let h=Hn.min(),v=Hr();return s.persistence.runTransaction("Execute query","readonly",C=>function(k,z,X){const pe=_n(k),Ke=pe.Bi.get(X);return void 0!==Ke?xt.resolve(pe.$i.get(Ke)):pe.Vs.getTargetData(z,X)}(s,C,ka(e)).next(k=>{if(k)return h=k.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(C,k.targetId).next(z=>{v=z})}).next(()=>s.Fi.getDocumentsMatchingQuery(C,e,t?h:Hn.min(),t?v:Hr())).next(k=>(Ih(s,Gc(e),k),{documents:k,ji:v})))}function Cp(i,e){const t=_n(i),s=_n(t.Vs),h=t.$i.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",v=>s.te(v,e).next(C=>C?C.target:null))}function wh(i,e){const t=_n(i),s=t.Li.get(e)||Hn.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Ui.getAllFromCollectionGroup(h,e,sl(s,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Ih(t,e,h),h))}function Ih(i,e,t){let s=Hn.min();t.forEach((h,v)=>{v.readTime.compareTo(s)>0&&(s=v.readTime)}),i.Li.set(e,s)}function La(){return La=(0,ae.Z)(function*(i,e,t,s){const h=_n(i);let v=Hr(),C=Wo();for(const X of t){const pe=e.Wi(X.metadata.name);X.document&&(v=v.add(pe));const Ke=e.zi(X);Ke.setReadTime(e.Hi(X.metadata.readTime)),C=C.insert(pe,Ke)}const k=h.Ui.newChangeBuffer({trackRemovals:!0}),z=yield Eh(h,(X=s,ka(Nu(Qr.fromString(`__bundle__/docs/${X}`)))));var X;return h.persistence.runTransaction("Apply bundle documents","readwrite",X=>bf(X,k,C).next(pe=>(k.apply(X),pe)).next(pe=>h.Vs.removeMatchingKeysForTargetId(X,z.targetId).next(()=>h.Vs.addMatchingKeys(X,v,z.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(X,pe.Gi,pe.Qi)).next(()=>pe.Gi)))}),La.apply(this,arguments)}function Dp(i,e){return ec.apply(this,arguments)}function ec(){return ec=(0,ae.Z)(function*(i,e,t=Hr()){const s=yield Eh(i,ka(sf(e.bundledQuery))),h=_n(i);return h.persistence.runTransaction("Save named query","readwrite",v=>{const C=Bs(e.readTime);if(s.snapshotVersion.compareTo(C)>=0)return h.Ds.saveNamedQuery(v,e);const k=s.withResumeToken(O.EMPTY_BYTE_STRING,C);return h.$i=h.$i.insert(k.targetId,k),h.Vs.updateTargetData(v,k).next(()=>h.Vs.removeMatchingKeysForTargetId(v,s.targetId)).next(()=>h.Vs.addMatchingKeys(v,t,s.targetId)).next(()=>h.Ds.saveNamedQuery(v,e))})}),ec.apply(this,arguments)}function bh(i,e){return`firestore_clients_${i}_${e}`}function Ja(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Sc(i,e){return`firestore_targets_${i}_${e}`}class Ch{constructor(e,t,s,h){this.user=e,this.batchId=t,this.state=s,this.error=h}static Ji(e,t,s){const h=JSON.parse(s);let v,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(v=new Zt(h.error.code,h.error.message))),C?new Ch(e,t,h.state,v):(_i("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let h,v="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return v&&s.error&&(v="string"==typeof s.error.message&&"string"==typeof s.error.code,v&&(h=new Zt(s.error.code,s.error.message))),v?new eu(e,s.state,h):(_i("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iu{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let h="object"==typeof s&&s.activeTargetIds instanceof Array,v=mu();for(let C=0;h&&C<s.activeTargetIds.length;++C)h=te(s.activeTargetIds[C]),v=v.add(s.activeTargetIds[C]);return h?new Iu(e,v):(_i("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sp{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Sp(t.clientId,t.onlineState):(_i("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zd{constructor(){this.activeTargetIds=mu()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tp{constructor(e,t,s,h,v){this.window=e,this.js=t,this.persistenceKey=s,this.tr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new is(Qn),this.started=!1,this.ir=[];const C=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.rr=bh(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new zd),this.cr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Ri();for(const h of t){if(h===e.tr)continue;const v=e.getItem(bh(e.persistenceKey,h));if(v){const C=Iu.Ji(h,v);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const s=e.storage.getItem(e.lr);if(s){const h=e.wr(s);h&&e.mr(h)}for(const h of e.ir)e.nr(h);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Sc(this.persistenceKey,e));if(s){const h=eu.Ji(e,s);h&&(t=h.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sc(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(h=>{this.pr(h)}),this.currentUser=e,s.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Xt("SharedClientState","READ",e,t),t}setItem(e,t){Xt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Xt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Xt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void _i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const h=t.Rr(s.key);return t.br(h,null)}{const h=t.Pr(s.key,s.newValue);if(h)return t.br(h.clientId,h)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const h=t.vr(s.key,s.newValue);if(h)return t.Vr(h)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const h=t.Sr(s.key,s.newValue);if(h)return t.Dr(h)}}else if(s.key===t.lr){if(null!==s.newValue){const h=t.wr(s.newValue);if(h)return t.mr(h)}}else if(s.key===t.ur){const h=function(v){let C=cr.ot;if(null!=v)try{const k=JSON.parse(v);Xn("number"==typeof k),C=k}catch(k){_i("SharedClientState","Failed to read sequence number from WebStorage",k)}return C}(s.newValue);h!==cr.ot&&t.sequenceNumberHandler(h)}else if(s.key===t.dr){const h=t.Cr(s.newValue);yield Promise.all(h.map(v=>t.syncEngine.Nr(v)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const h=new Ch(this.currentUser,e,t,s),v=Ja(this.persistenceKey,this.currentUser,e);this.setItem(v,h.Yi())}pr(e){const t=Ja(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const h=Sc(this.persistenceKey,e),v=new eu(e,t,s);this.setItem(h,v.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return Iu.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),h=Number(s[1]);return Ch.Ji(new si(void 0!==s[2]?s[2]:null),h,t)}Sr(e,t){const s=this.hr.exec(e),h=Number(s[1]);return eu.Ji(h,t)}wr(e){return Sp.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Xt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),h=this.gr(this.sr),v=this.gr(s),C=[],k=[];return v.forEach(z=>{h.has(z)||C.push(z)}),h.forEach(z=>{v.has(z)||k.push(z)}),this.syncEngine.Mr(C,k).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=mu();return e.forEach((s,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Dh{constructor(){this.Fr=new zd,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new zd,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vm{Br(e){}shutdown(){}}class Dg{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _m={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Em{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Cf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,h,v){const C=this.oo(e,t);Xt("RestConnection","Sending: ",C,s);const k={};return this.uo(k,h,v),this.co(e,C,k,s).then(z=>(Xt("RestConnection","Received: ",z),z),z=>{throw Ea("RestConnection",`${e} failed with error: `,z,"url: ",C,"request:",s),z})}ao(e,t,s,h,v,C){return this.ro(e,t,s,h,v)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,v)=>e[v]=h),s&&s.headers.forEach((h,v)=>e[v]=h)}oo(e,t){return`${this.so}/v1/${t}:${_m[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,h){return new Promise((v,C)=>{const k=new Vi;k.listenOnce(Mr.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case vr.NO_ERROR:const X=k.getResponseJson();Xt("Connection","XHR received:",JSON.stringify(X)),v(X);break;case vr.TIMEOUT:Xt("Connection",'RPC "'+e+'" timed out'),C(new Zt(At.DEADLINE_EXCEEDED,"Request time out"));break;case vr.HTTP_ERROR:const pe=k.getStatus();if(Xt("Connection",'RPC "'+e+'" failed with status:',pe,"response text:",k.getResponseText()),pe>0){const Ke=k.getResponseJson().error;if(Ke&&Ke.status&&Ke.message){const Rt=function(Wt){const tn=Wt.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(tn)>=0?tn:At.UNKNOWN}(Ke.status);C(new Zt(Rt,Ke.message))}else C(new Zt(At.UNKNOWN,"Server responded with status "+k.getStatus()))}else C(new Zt(At.UNAVAILABLE,"Connection failed."));break;default:Tn()}}finally{Xt("Connection",'RPC "'+e+'" completed.')}});const z=JSON.stringify(h);k.send(t,"POST",z,s,15)})}ho(e,t,s){const h=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=$t(),C=Pn(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new Ni({})),this.uo(k.initMessageHeaders,t,s),(0,G.uI)()||(0,G.b$)()||(0,G.d)()||(0,G.w1)()||(0,G.Mn)()||(0,G.ru)()||(k.httpHeadersOverwriteParam="$httpHeaders");const z=h.join("");Xt("Connection","Creating WebChannel: "+z,k);const X=v.createWebChannel(z,k);let pe=!1,Ke=!1;const Rt=new Em({jr:tn=>{Ke?Xt("Connection","Not sending because WebChannel is closed:",tn):(pe||(Xt("Connection","Opening WebChannel transport."),X.open(),pe=!0),Xt("Connection","WebChannel sending:",tn),X.send(tn))},Wr:()=>X.close()}),Wt=(tn,kn,nr)=>{tn.listen(kn,Hi=>{try{nr(Hi)}catch($s){setTimeout(()=>{throw $s},0)}})};return Wt(X,ur.EventType.OPEN,()=>{Ke||Xt("Connection","WebChannel transport opened.")}),Wt(X,ur.EventType.CLOSE,()=>{Ke||(Ke=!0,Xt("Connection","WebChannel transport closed"),Rt.eo())}),Wt(X,ur.EventType.ERROR,tn=>{Ke||(Ke=!0,Ea("Connection","WebChannel transport errored:",tn),Rt.eo(new Zt(At.UNAVAILABLE,"The operation could not be completed")))}),Wt(X,ur.EventType.MESSAGE,tn=>{var kn;if(!Ke){const nr=tn.data[0];Xn(!!nr);const $s=nr.error||(null===(kn=nr[0])||void 0===kn?void 0:kn.error);if($s){Xt("Connection","WebChannel received error:",$s);const ws=$s.status;let Zo=function(lo){const nl=Ai[lo];if(void 0!==nl)return Md(nl)}(ws),Vs=$s.message;void 0===Zo&&(Zo=At.INTERNAL,Vs="Unknown error status: "+ws+" with message "+$s.message),Ke=!0,Rt.eo(new Zt(Zo,Vs)),X.close()}else Xt("Connection","WebChannel received:",nr),Rt.no(nr)}}),Wt(C,jr.STAT_EVENT,tn=>{tn.stat===_r.PROXY?Xt("Connection","Detected buffering proxy"):tn.stat===_r.NOPROXY&&Xt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Rt.Zr()},0),Rt}}function Wd(){return typeof window<"u"?window:null}function Tc(){return typeof document<"u"?document:null}function Ac(i){return new yc(i,!0)}class Sh{constructor(e,t,s=1e3,h=1.5,v=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=h,this._o=v,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),h=Math.max(0,t-s);h>0&&Xt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,h,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Th{constructor(e,t,s,h,v,C,k,z){this.js=e,this.Ao=s,this.Ro=h,this.bo=v,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=k,this.listener=z,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Sh(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ae.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ae.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,ae.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===At.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===At.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,h])=>{this.Po===t&&this.Uo(s,h)},s=>{e(()=>{const h=new Zt(At.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(h)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(h=>{s(()=>this.qo(h))}),this.stream.onMessage(h=>{s(()=>this.onMessage(h))})}xo(){var e=this;this.state=5,this.So.Io((0,ae.Z)(function*(){e.state=0,e.start()}))}qo(e){return Xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wm extends Th{constructor(e,t,s,h,v,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,h,C),this.wt=v}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Nt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:Tn(),h=e.targetChange.targetIds||[],v=function(z,X){return z.dt?(Xn(void 0===X||"string"==typeof X),O.fromBase64String(X||"")):(Xn(void 0===X||X instanceof Uint8Array),O.fromUint8Array(X||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,k=C&&function(z){const X=void 0===z.code?At.UNKNOWN:Md(z.code);return new Zt(X,z.message||"")}(C);t=new Jh(s,h,v,k||null)}else if("documentChange"in e){const s=e.documentChange,h=Ya(i,s.document.name),v=Bs(s.document.updateTime),C=new Go({mapValue:{fields:s.document.fields}}),k=os.newFoundDocument(h,v,C);t=new Yc(s.targetIds||[],s.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const s=e.documentDelete,h=Ya(i,s.document),v=s.readTime?Bs(s.readTime):Hn.min(),C=os.newNoDocument(h,v);t=new Yc([],s.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const s=e.documentRemove,h=Ya(i,s.document);t=new Yc([],s.removedTargetIds||[],h,null)}else{if(!("filter"in e))return Tn();{const s=e.filter,v=new Ei(s.count||0);t=new Qh(s.targetId,v)}}var z;return t}(this.wt,e),s=function(h){if(!("targetChange"in h))return Hn.min();const v=h.targetChange;return v.targetIds&&v.targetIds.length?Hn.min():v.readTime?Bs(v.readTime):Hn.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=E(this.wt),t.addTarget=function(h,v){let C;const k=v.target;return C=xl(k)?{documents:tr(h,k)}:{query:so(h,k)},C.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?C.resumeToken=uh(h,v.resumeToken):v.snapshotVersion.compareTo(Hn.min())>0&&(C.readTime=vu(h,v.snapshotVersion.toTimestamp())),C}(this.wt,e);const s=function ch(i,e){const t=function(s,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=E(this.wt),t.removeTarget=e,this.Mo(t)}}class Df extends Th{constructor(e,t,s,h,v,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,h,C),this.wt=v,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function fr(i,e){return i&&i.length>0?(Xn(void 0!==e),i.map(t=>function(s,h){let v=Bs(s.updateTime?s.updateTime:h);return v.isEqual(Hn.min())&&(v=Bs(h)),new $u(v,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Bs(e.commitTime);return this.listener.Jo(s,t)}return Xn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=E(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>on(this.wt,s))};this.Mo(t)}}class Sg extends class{}{constructor(e,t,s,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=h,this.Zo=!1}tu(){if(this.Zo)throw new Zt(At.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.bo.ro(e,t,s,h,v)).catch(h=>{throw"FirebaseError"===h.name?(h.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Zt(At.UNKNOWN,h.toString())})}ao(e,t,s,h){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,C])=>this.bo.ao(e,t,s,v,C,h)).catch(v=>{throw"FirebaseError"===v.name?(v.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new Zt(At.UNKNOWN,v.toString())})}terminate(){this.Zo=!0}}class bu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(_i(t),this.su=!1):Xt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class cd{constructor(e,t,s,h,v){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=v,this.du.Br(k=>{s.enqueueAndForget((0,ae.Z)(function*(){var z;tu(C)&&(Xt("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,ae.Z)(function*(X){const pe=_n(X);pe.lu.add(4),yield dd(pe),pe._u.set("Unknown"),pe.lu.delete(4),yield qd(pe)}),function(X){return z.apply(this,arguments)})(C))}))}),this._u=new bu(s,h)}}function qd(i){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ae.Z)(function*(i){if(tu(i))for(const e of i.fu)yield e(!0)}),Ap.apply(this,arguments)}function dd(i){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,ae.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Sf.apply(this,arguments)}function Tf(i,e){const t=_n(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Ah(t)?hd(t):Kd(t).Co()&&Mc(t,e))}function xc(i,e){const t=_n(i),s=Kd(t);t.hu.delete(e),s.Co()&&Af(t,e),0===t.hu.size&&(s.Co()?s.ko():tu(t)&&t._u.set("Unknown"))}function Mc(i,e){i.wu.Nt(e.targetId),Kd(i).Qo(e)}function Af(i,e){i.wu.Nt(e),Kd(i).jo(e)}function hd(i){i.wu=new ua({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),Kd(i).start(),i._u.iu()}function Ah(i){return tu(i)&&!Kd(i).Do()&&i.hu.size>0}function tu(i){return 0===_n(i).lu.size}function xp(i){i.wu=void 0}function Mp(i){return xh.apply(this,arguments)}function xh(){return xh=(0,ae.Z)(function*(i){i.hu.forEach((e,t)=>{Mc(i,e)})}),xh.apply(this,arguments)}function Rp(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,ae.Z)(function*(i,e){xp(i),Ah(i)?(i._u.uu(e),hd(i)):i._u.set("Unknown")}),xf.apply(this,arguments)}function Op(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,ae.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Jh&&2===e.state&&e.cause)try{yield(s=(0,ae.Z)(function*(h,v){const C=v.cause;for(const k of v.targetIds)h.hu.has(k)&&(yield h.remoteSyncer.rejectListen(k,C),h.hu.delete(k),h.wu.removeTarget(k))}),function(h,v){return s.apply(this,arguments)})(i,e)}catch(s){Xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Mf(i,s)}else if(e instanceof Yc?i.wu.Ut(e):e instanceof Qh?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(Hn.min()))try{const s=yield Ip(i.localStore);t.compareTo(s)>=0&&(yield function(h,v){const C=h.wu.Yt(v);return C.targetChanges.forEach((k,z)=>{if(k.resumeToken.approximateByteSize()>0){const X=h.hu.get(z);X&&h.hu.set(z,X.withResumeToken(k.resumeToken,v))}}),C.targetMismatches.forEach(k=>{const z=h.hu.get(k);if(!z)return;h.hu.set(k,z.withResumeToken(O.EMPTY_BYTE_STRING,z.snapshotVersion)),Af(h,k);const X=new gl(z.target,k,1,z.sequenceNumber);Mc(h,X)}),h.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(s){Xt("RemoteStore","Failed to raise snapshot:",s),yield Mf(i,s)}var s}),Pp.apply(this,arguments)}function Mf(i,e,t){return Rf.apply(this,arguments)}function Rf(){return Rf=(0,ae.Z)(function*(i,e,t){if(!Ao(e))throw e;i.lu.add(1),yield dd(i),i._u.set("Offline"),t||(t=()=>Ip(i.localStore)),i.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){Xt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield qd(i)}))}),Rf.apply(this,arguments)}function Tg(i,e){return e().catch(t=>Mf(i,t,e))}function ca(i){return Of.apply(this,arguments)}function Of(){return Of=(0,ae.Z)(function*(i){const e=_n(i),t=Rc(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;kp(e);)try{const h=yield bp(e.localStore,s);if(null===h){0===e.au.length&&t.ko();break}s=h.batchId,Ag(e,h)}catch(h){yield Mf(e,h)}el(e)&&Pf(e)}),Of.apply(this,arguments)}function kp(i){return tu(i)&&i.au.length<10}function Ag(i,e){i.au.push(e);const t=Rc(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function el(i){return tu(i)&&!Rc(i).Do()&&i.au.length>0}function Pf(i){Rc(i).start()}function Im(i){return xg.apply(this,arguments)}function xg(){return xg=(0,ae.Z)(function*(i){Rc(i).Xo()}),xg.apply(this,arguments)}function Np(i){return kf.apply(this,arguments)}function kf(){return kf=(0,ae.Z)(function*(i){const e=Rc(i);for(const t of i.au)e.Ho(t.mutations)}),kf.apply(this,arguments)}function Mg(i,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ae.Z)(function*(i,e,t){const s=i.au.shift(),h=dp.from(s,e,t);yield Tg(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield ca(i)}),Fp.apply(this,arguments)}function bm(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ae.Z)(function*(i,e){var t;e&&Rc(i).zo&&(yield(t=(0,ae.Z)(function*(s,h){if(qc(v=h.code)&&v!==At.ABORTED){const C=s.au.shift();Rc(s).No(),yield Tg(s,()=>s.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield ca(s)}var v}),function(s,h){return t.apply(this,arguments)})(i,e)),el(i)&&Pf(i)}),Lp.apply(this,arguments)}function Rg(i,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,ae.Z)(function*(i,e){const t=_n(i);t.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const s=tu(t);t.lu.add(3),yield dd(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield qd(t)}),Bp.apply(this,arguments)}function Mh(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,ae.Z)(function*(i,e){const t=_n(i);e?(t.lu.delete(2),yield qd(t)):e||(t.lu.add(2),yield dd(t),t._u.set("Unknown"))}),$p.apply(this,arguments)}function Kd(i){return i.mu||(i.mu=function(e,t,s){const h=_n(e);return h.tu(),new wm(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,s)}(i.datastore,i.asyncQueue,{zr:Mp.bind(null,i),Jr:Rp.bind(null,i),Go:Op.bind(null,i)}),i.fu.push(function(){var e=(0,ae.Z)(function*(t){t?(i.mu.No(),Ah(i)?hd(i):i._u.set("Unknown")):(yield i.mu.stop(),xp(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Rc(i){return i.gu||(i.gu=function(e,t,s){const h=_n(e);return h.tu(),new Df(t,h.bo,h.authCredentials,h.appCheckCredentials,h.wt,s)}(i.datastore,i.asyncQueue,{zr:Im.bind(null,i),Jr:bm.bind(null,i),Yo:Np.bind(null,i),Jo:Mg.bind(null,i)}),i.fu.push(function(){var e=(0,ae.Z)(function*(t){t?(i.gu.No(),yield ca(i)):(yield i.gu.stop(),i.au.length>0&&(Xt("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Vp{constructor(e,t,s,h,v){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=h,this.removalCallback=v,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,s,h,v){const C=Date.now()+s,k=new Vp(e,t,C,h,v);return k.start(s),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zt(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(i,e){if(_i("AsyncQueue",`${e}: ${i}`),Ao(i))return new Zt(At.UNAVAILABLE,`${e}: ${i}`);throw i}class Ba{constructor(e){this.comparator=e?(t,s)=>e(t,s)||rn.comparator(t.key,s.key):(t,s)=>rn.comparator(t.key,s.key),this.keyedMap=pu(),this.sortedSet=new is(this.comparator)}static emptySet(e){return new Ba(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,v=s.getNext().key;if(!h.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ba;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Nf{constructor(){this.yu=new is(rn.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Tn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Rh{constructor(e,t,s,h,v,C,k,z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=h,this.mutatedKeys=v,this.fromCache=C,this.syncStateChanged=k,this.excludesMetadataChanges=z}static fromInitialDocuments(e,t,s,h){const v=[];return t.forEach(C=>{v.push({type:0,doc:C})}),new Rh(e,t,Ba.emptySet(t),v,s,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ps(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==s[h].type||!t[h].doc.isEqual(s[h].doc))return!1;return!0}}class yy{constructor(){this.Iu=void 0,this.listeners=[]}}class Og{constructor(){this.queries=new la(e=>Hc(e),Ps),this.onlineState="Unknown",this.Tu=new Set}}function Up(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,ae.Z)(function*(i,e){const t=_n(i),s=e.query;let h=!1,v=t.queries.get(s);if(v||(h=!0,v=new yy),h)try{v.Iu=yield t.onListen(s)}catch(C){const k=Yd(C,`Initialization of query '${za(e.query)}' failed`);return void e.onError(k)}t.queries.set(s,v),v.listeners.push(e),e.Eu(t.onlineState),v.Iu&&e.Au(v.Iu)&&Zd(t)}),jp.apply(this,arguments)}function Ff(i,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ae.Z)(function*(i,e){const t=_n(i),s=e.query;let h=!1;const v=t.queries.get(s);if(v){const C=v.listeners.indexOf(e);C>=0&&(v.listeners.splice(C,1),h=0===v.listeners.length)}if(h)return t.queries.delete(s),t.onUnlisten(s)}),Oh.apply(this,arguments)}function Cm(i,e){const t=_n(i);let s=!1;for(const h of e){const C=t.queries.get(h.query);if(C){for(const k of C.listeners)k.Au(h)&&(s=!0);C.Iu=h}}s&&Zd(t)}function Dm(i,e,t){const s=_n(i),h=s.queries.get(e);if(h)for(const v of h.listeners)v.onError(t);s.queries.delete(e)}function Zd(i){i.Tu.forEach(e=>{e.next()})}class kl{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const h of e.docChanges)3!==h.type&&s.push(h);e=new Rh(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class vo{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class vl{constructor(e){this.wt=e}Wi(e){return Ya(this.wt,e)}zi(e){return e.metadata.exists?ue(this.wt,e.document,!1):os.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Bs(e)}}class fd{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sm(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=Qr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new vl(this.wt);for(const h of e)if(h.metadata.queries){const v=s.Wi(h.metadata.name);for(const C of h.metadata.queries){const k=(t.get(C)||Hr()).add(v);t.set(C,k)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function Cg(i,e,t,s){return La.apply(this,arguments)}(e.localStore,new vl(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const h of e.queries)yield Dp(e.localStore,h,s.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Sm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Hp{constructor(e){this.key=e}}class Gp{constructor(e){this.key=e}}class zp{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Hr(),this.mutatedKeys=Hr(),this.Lu=hc(e),this.Uu=new Ba(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new Nf,h=t?t.Uu:this.Uu;let v=t?t.mutatedKeys:this.mutatedKeys,C=h,k=!1;const z="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,X="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((pe,Ke)=>{const Rt=h.get(pe),Wt=Td(this.query,Ke)?Ke:null,tn=!!Rt&&this.mutatedKeys.has(Rt.key),kn=!!Wt&&(Wt.hasLocalMutations||this.mutatedKeys.has(Wt.key)&&Wt.hasCommittedMutations);let nr=!1;Rt&&Wt?Rt.data.isEqual(Wt.data)?tn!==kn&&(s.track({type:3,doc:Wt}),nr=!0):this.Qu(Rt,Wt)||(s.track({type:2,doc:Wt}),nr=!0,(z&&this.Lu(Wt,z)>0||X&&this.Lu(Wt,X)<0)&&(k=!0)):!Rt&&Wt?(s.track({type:0,doc:Wt}),nr=!0):Rt&&!Wt&&(s.track({type:1,doc:Rt}),nr=!0,(z||X)&&(k=!0)),nr&&(Wt?(C=C.add(Wt),v=kn?v.add(pe):v.delete(pe)):(C=C.delete(pe),v=v.delete(pe)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const pe="F"===this.query.limitType?C.last():C.first();C=C.delete(pe.key),v=v.delete(pe.key),s.track({type:1,doc:pe})}return{Uu:C,Gu:s,Oi:k,mutatedKeys:v}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const h=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const v=e.Gu.pu();v.sort((X,pe)=>function(Ke,Rt){const Wt=tn=>{switch(tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tn()}};return Wt(Ke)-Wt(Rt)}(X.type,pe.type)||this.Lu(X.doc,pe.doc)),this.ju(s);const C=t?this.Wu():[],k=0===this.Bu.size&&this.current?1:0,z=k!==this.$u;return this.$u=k,0!==v.length||z?{snapshot:new Rh(this.query,e.Uu,h,v,e.mutatedKeys,0===k,z,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Nf,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Hr(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new Gp(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new Hp(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=Hr();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Rh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Pg{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Wp{constructor(e){this.key=e,this.Xu=!1}}class Cu{constructor(e,t,s,h,v,C){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=h,this.currentUser=v,this.maxConcurrentLimboResolutions=C,this.Zu={},this.tc=new la(k=>Hc(k),Ps),this.ec=new Map,this.nc=new Set,this.sc=new is(rn.comparator),this.ic=new Map,this.rc=new ld,this.oc={},this.uc=new Map,this.cc=od.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Ph(i,e){return pd.apply(this,arguments)}function pd(){return pd=(0,ae.Z)(function*(i,e){const t=_l(i);let s,h;const v=t.tc.get(e);if(v)s=v.targetId,t.sharedClientState.addLocalQueryTarget(s),h=v.view.Yu();else{const C=yield Eh(t.localStore,ka(e));t.isPrimaryClient&&Tf(t.remoteStore,C);const k=t.sharedClientState.addLocalQueryTarget(C.targetId);s=C.targetId,h=yield Oc(t,e,s,"current"===k)}return h}),pd.apply(this,arguments)}function Oc(i,e,t,s){return gd.apply(this,arguments)}function gd(){return gd=(0,ae.Z)(function*(i,e,t,s){i.hc=(pe,Ke,Rt)=>{return(Wt=(0,ae.Z)(function*(tn,kn,nr,Hi){let $s=kn.view.Ku(nr);$s.Oi&&($s=yield wu(tn.localStore,kn.query,!1).then(({documents:Vs})=>kn.view.Ku(Vs,$s)));const ws=Hi&&Hi.targetChanges.get(kn.targetId),Zo=kn.view.applyChanges($s,tn.isPrimaryClient,ws);return Vf(tn,kn.targetId,Zo.zu),Zo.snapshot}),function(tn,kn,nr,Hi){return Wt.apply(this,arguments)})(i,pe,Ke,Rt);var Wt};const h=yield wu(i.localStore,e,!0),v=new zp(e,h.ji),C=v.Ku(h.documents),k=yu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),z=v.applyChanges(C,i.isPrimaryClient,k);Vf(i,t,z.zu);const X=new Pg(e,t,v);return i.tc.set(e,X),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),z.snapshot}),gd.apply(this,arguments)}function kg(i,e){return kh.apply(this,arguments)}function kh(){return kh=(0,ae.Z)(function*(i,e){const t=_n(i),s=t.tc.get(e),h=t.ec.get(s.targetId);if(h.length>1)return t.ec.set(s.targetId,h.filter(v=>!Ps(v,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ud(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),xc(t.remoteStore,s.targetId),Pc(t,s.targetId)}).catch(jo))):(Pc(t,s.targetId),yield ud(t.localStore,s.targetId,!0))}),kh.apply(this,arguments)}function qp(){return qp=(0,ae.Z)(function*(i,e,t){const s=Su(i);try{const h=yield function(v,C){const k=_n(v),z=pi.now(),X=C.reduce((Rt,Wt)=>Rt.add(Wt.key),Hr());let pe,Ke;return k.persistence.runTransaction("Locally write mutations","readwrite",Rt=>{let Wt=Wo(),tn=Hr();return k.Ui.getEntries(Rt,X).next(kn=>{Wt=kn,Wt.forEach((nr,Hi)=>{Hi.isValidDocument()||(tn=tn.add(nr))})}).next(()=>k.localDocuments.getOverlayedDocuments(Rt,Wt)).next(kn=>{pe=kn;const nr=[];for(const Hi of C){const $s=Xh(Hi,pe.get(Hi.key).overlayedDocument);null!=$s&&nr.push(new Ta(Hi.key,$s,Ui($s.value.mapValue),Ti.exists(!0)))}return k.mutationQueue.addMutationBatch(Rt,z,nr,C)}).next(kn=>{Ke=kn;const nr=kn.applyToLocalDocumentSet(pe,tn);return k.documentOverlayCache.saveOverlays(Rt,kn.batchId,nr)})}).then(()=>({batchId:Ke.batchId,changes:Ls(pe)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(h.batchId),function(v,C,k){let z=v.oc[v.currentUser.toKey()];z||(z=new is(Qn)),z=z.insert(C,k),v.oc[v.currentUser.toKey()]=z}(s,h.batchId,t),yield a(s,h.changes),yield ca(s.remoteStore)}catch(h){const v=Yd(h,"Failed to persist write");t.reject(v)}}),qp.apply(this,arguments)}function md(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,ae.Z)(function*(i,e){const t=_n(i);try{const s=yield function _h(i,e){const t=_n(i),s=e.snapshotVersion;let h=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const C=t.Ui.newChangeBuffer({trackRemovals:!0});h=t.$i;const k=[];e.targetChanges.forEach((pe,Ke)=>{const Rt=h.get(Ke);if(!Rt)return;k.push(t.Vs.removeMatchingKeys(v,pe.removedDocuments,Ke).next(()=>t.Vs.addMatchingKeys(v,pe.addedDocuments,Ke)));let Wt=Rt.withSequenceNumber(v.currentSequenceNumber);var tn,kn,nr;e.targetMismatches.has(Ke)?Wt=Wt.withResumeToken(O.EMPTY_BYTE_STRING,Hn.min()).withLastLimboFreeSnapshotVersion(Hn.min()):pe.resumeToken.approximateByteSize()>0&&(Wt=Wt.withResumeToken(pe.resumeToken,s)),h=h.insert(Ke,Wt),kn=Wt,nr=pe,(0===(tn=Rt).resumeToken.approximateByteSize()||kn.snapshotVersion.toMicroseconds()-tn.snapshotVersion.toMicroseconds()>=3e8||nr.addedDocuments.size+nr.modifiedDocuments.size+nr.removedDocuments.size>0)&&k.push(t.Vs.updateTargetData(v,Wt))});let z=Wo(),X=Hr();if(e.documentUpdates.forEach(pe=>{e.resolvedLimboDocuments.has(pe)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(v,pe))}),k.push(bf(v,C,e.documentUpdates).next(pe=>{z=pe.Gi,X=pe.Qi})),!s.isEqual(Hn.min())){const pe=t.Vs.getLastRemoteSnapshotVersion(v).next(Ke=>t.Vs.setTargetsMetadata(v,v.currentSequenceNumber,s));k.push(pe)}return xt.waitFor(k).next(()=>C.apply(v)).next(()=>t.localDocuments.getLocalViewOfDocuments(v,z,X)).next(()=>z)}).then(v=>(t.$i=h,v))}(t.localStore,e);e.targetChanges.forEach((h,v)=>{const C=t.ic.get(v);C&&(Xn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.Xu=!0:h.modifiedDocuments.size>0?Xn(C.Xu):h.removedDocuments.size>0&&(Xn(C.Xu),C.Xu=!1))}),yield a(t,s,e)}catch(s){yield jo(s)}}),Lf.apply(this,arguments)}function Ng(i,e,t){const s=_n(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const h=[];s.tc.forEach((v,C)=>{const k=C.view.Eu(e);k.snapshot&&h.push(k.snapshot)}),function(v,C){const k=_n(v);k.onlineState=C;let z=!1;k.queries.forEach((X,pe)=>{for(const Ke of pe.listeners)Ke.Eu(C)&&(z=!0)}),z&&Zd(k)}(s.eventManager,e),h.length&&s.Zu.Go(h),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Am(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ae.Z)(function*(i,e,t){const s=_n(i);s.sharedClientState.updateQueryState(e,"rejected",t);const h=s.ic.get(e),v=h&&h.key;if(v){let C=new is(rn.comparator);C=C.insert(v,os.newNoDocument(v,Hn.min()));const k=Hr().add(v),z=new Ka(Hn.min(),new Map,new Tr(Qn),C,k);yield md(s,z),s.sc=s.sc.remove(v),s.ic.delete(e),c(s)}else yield ud(s.localStore,e,!1).then(()=>Pc(s,e,t)).catch(jo)}),Kp.apply(this,arguments)}function xm(i,e){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,ae.Z)(function*(i,e){const t=_n(i),s=e.batch.batchId;try{const h=yield function wp(i,e){const t=_n(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const h=e.batch.keys(),v=t.Ui.newChangeBuffer({trackRemovals:!0});return function(C,k,z,X){const pe=z.batch,Ke=pe.keys();let Rt=xt.resolve();return Ke.forEach(Wt=>{Rt=Rt.next(()=>X.getEntry(k,Wt)).next(tn=>{const kn=z.docVersions.get(Wt);Xn(null!==kn),tn.version.compareTo(kn)<0&&(pe.applyToRemoteDocument(tn,z),tn.isValidDocument()&&(tn.setReadTime(z.commitVersion),X.addEntry(tn)))})}),Rt.next(()=>C.mutationQueue.removeMutationBatch(k,pe))}(t,s,e,v).next(()=>v.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(C){let k=Hr();for(let z=0;z<C.mutationResults.length;++z)C.mutationResults[z].transformResults.length>0&&(k=k.add(C.batch.mutations[z].key));return k}(e))).next(()=>t.localDocuments.getDocuments(s,h))})}(t.localStore,e);Zp(t,s,null),Nh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield a(t,h)}catch(h){yield jo(h)}}),Bf.apply(this,arguments)}function Mm(i,e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,ae.Z)(function*(i,e,t){const s=_n(i);try{const h=yield function(v,C){const k=_n(v);return k.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let X;return k.mutationQueue.lookupMutationBatch(z,C).next(pe=>(Xn(null!==pe),X=pe.keys(),k.mutationQueue.removeMutationBatch(z,pe))).next(()=>k.mutationQueue.performConsistencyCheck(z)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(z,X,C)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,X)).next(()=>k.localDocuments.getDocuments(z,X))})}(s.localStore,e);Zp(s,e,t),Nh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield a(s,h)}catch(h){yield jo(h)}}),Yp.apply(this,arguments)}function $f(){return $f=(0,ae.Z)(function*(i,e){const t=_n(i);tu(t.remoteStore)||Xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(v){const C=_n(v);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>C.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===s)return void e.resolve();const h=t.uc.get(s)||[];h.push(e),t.uc.set(s,h)}catch(s){const h=Yd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),$f.apply(this,arguments)}function Nh(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function Zp(i,e,t){const s=_n(i);let h=s.oc[s.currentUser.toKey()];if(h){const v=h.get(e);v&&(t?v.reject(t):v.resolve(),h=h.remove(e)),s.oc[s.currentUser.toKey()]=h}}function Pc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||Lg(i,s)})}function Lg(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(xc(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),c(i))}function Vf(i,e,t){for(const s of t)s instanceof Hp?(i.rc.addReference(s.key,e),Rm(i,s)):s instanceof Gp?(Xt("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||Lg(i,s.key)):Tn()}function Rm(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(Xt("SyncEngine","New document in limbo: "+t),i.nc.add(s),c(i))}function c(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new rn(Qr.fromString(e)),s=i.cc.next();i.ic.set(s,new Wp(t)),i.sc=i.sc.insert(t,s),Tf(i.remoteStore,new gl(ka(Nu(t.path)),s,2,cr.ot))}}function a(i,e,t){return l.apply(this,arguments)}function l(){return l=(0,ae.Z)(function*(i,e,t){const s=_n(i),h=[],v=[],C=[];var k;s.tc.isEmpty()||(s.tc.forEach((k,z)=>{C.push(s.hc(z,e,t).then(X=>{if(X){s.isPrimaryClient&&s.sharedClientState.updateQueryState(z.targetId,X.fromCache?"not-current":"current"),h.push(X);const pe=Rr.Vi(z.targetId,X);v.push(pe)}}))}),yield Promise.all(C),s.Zu.Go(h),yield(k=(0,ae.Z)(function*(z,X){const pe=_n(z);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ke=>xt.forEach(X,Rt=>xt.forEach(Rt.Pi,Wt=>pe.persistence.referenceDelegate.addReference(Ke,Rt.targetId,Wt)).next(()=>xt.forEach(Rt.vi,Wt=>pe.persistence.referenceDelegate.removeReference(Ke,Rt.targetId,Wt)))))}catch(Ke){if(!Ao(Ke))throw Ke;Xt("LocalStore","Failed to update sequence numbers: "+Ke)}for(const Ke of X){const Rt=Ke.targetId;if(!Ke.fromCache){const Wt=pe.$i.get(Rt),kn=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);pe.$i=pe.$i.insert(Rt,kn)}}}),function(z,X){return k.apply(this,arguments)})(s.localStore,v))}),l.apply(this,arguments)}function g(i,e){return I.apply(this,arguments)}function I(){return I=(0,ae.Z)(function*(i,e){const t=_n(i);if(!t.currentUser.isEqual(e)){Xt("SyncEngine","User change. New user:",e.toKey());const s=yield bg(t.localStore,e);t.currentUser=e,(h=t).uc.forEach(C=>{C.forEach(k=>{k.reject(new Zt(At.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield a(t,s.Ki)}var h}),I.apply(this,arguments)}function R(i,e){const t=_n(i),s=t.ic.get(e);if(s&&s.Xu)return Hr().add(s.key);{let h=Hr();const v=t.ec.get(e);if(!v)return h;for(const C of v){const k=t.tc.get(C);h=h.unionWith(k.view.qu)}return h}}function $(i,e){return Z.apply(this,arguments)}function Z(){return Z=(0,ae.Z)(function*(i,e){const t=_n(i),s=yield wu(t.localStore,e.query,!0),h=e.view.Ju(s);return t.isPrimaryClient&&Vf(t,e.targetId,h.zu),h}),Z.apply(this,arguments)}function oe(i,e){return ye.apply(this,arguments)}function ye(){return ye=(0,ae.Z)(function*(i,e){const t=_n(i);return wh(t.localStore,e).then(s=>a(t,s))}),ye.apply(this,arguments)}function mt(i,e,t,s){return wt.apply(this,arguments)}function wt(){return wt=(0,ae.Z)(function*(i,e,t,s){const h=_n(i),v=yield function(C,k){const z=_n(C),X=_n(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",pe=>X.yn(pe,k).next(Ke=>Ke?z.localDocuments.getDocuments(pe,Ke):xt.resolve(null)))}(h.localStore,e);var k;null!==v?("pending"===t?yield ca(h.remoteStore):"acknowledged"===t||"rejected"===t?(Zp(h,e,s||null),Nh(h,e),k=e,_n(_n(h.localStore).mutationQueue).In(k)):Tn(),yield a(h,v)):Xt("SyncEngine","Cannot apply mutation batch with id: "+e)}),wt.apply(this,arguments)}function yn(){return yn=(0,ae.Z)(function*(i,e){const t=_n(i);if(_l(t),Su(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),h=yield On(t,s.toArray());t.ac=!0,yield Mh(t.remoteStore,!0);for(const v of h)Tf(t.remoteStore,v)}else if(!1===e&&!1!==t.ac){const s=[];let h=Promise.resolve();t.ec.forEach((v,C)=>{t.sharedClientState.isLocalQueryTarget(C)?s.push(C):h=h.then(()=>(Pc(t,C),ud(t.localStore,C,!0))),xc(t.remoteStore,C)}),yield h,yield On(t,s),function(v){const C=_n(v);C.ic.forEach((k,z)=>{xc(C.remoteStore,z)}),C.rc.cs(),C.ic=new Map,C.sc=new is(rn.comparator)}(t),t.ac=!1,yield Mh(t.remoteStore,!1)}}),yn.apply(this,arguments)}function On(i,e,t){return pr.apply(this,arguments)}function pr(){return pr=(0,ae.Z)(function*(i,e,t){const s=_n(i),h=[],v=[];for(const C of e){let k;const z=s.ec.get(C);if(z&&0!==z.length){k=yield Eh(s.localStore,ka(z[0]));for(const X of z){const pe=s.tc.get(X),Ke=yield $(s,pe);Ke.snapshot&&v.push(Ke.snapshot)}}else{const X=yield Cp(s.localStore,C);k=yield Eh(s.localStore,X),yield Oc(s,Wr(X),C,!1)}h.push(k)}return s.Zu.Go(v),h}),pr.apply(this,arguments)}function Wr(i){return dc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Oi(i){const e=_n(i);return _n(_n(e.localStore).persistence).Ri()}function Ss(i,e,t,s){return as.apply(this,arguments)}function as(){return as=(0,ae.Z)(function*(i,e,t,s){const h=_n(i);if(h.ac)return void Xt("SyncEngine","Ignoring unexpected query state notification.");const v=h.ec.get(e);if(v&&v.length>0)switch(t){case"current":case"not-current":{const C=yield wh(h.localStore,Gc(v[0])),k=Ka.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield a(h,C,k);break}case"rejected":yield ud(h.localStore,e,!0),Pc(h,e,s);break;default:Tn()}}),as.apply(this,arguments)}function ji(i,e,t){return Du.apply(this,arguments)}function Du(){return Du=(0,ae.Z)(function*(i,e,t){const s=_l(i);if(s.ac){for(const h of e){if(s.ec.has(h)){Xt("SyncEngine","Adding an already active target "+h);continue}const v=yield Cp(s.localStore,h),C=yield Eh(s.localStore,v);yield Oc(s,Wr(v),C.targetId,!1),Tf(s.remoteStore,C)}for(const h of t)s.ec.has(h)&&(yield ud(s.localStore,h,!1).then(()=>{xc(s.remoteStore,h),Pc(s,h)}).catch(jo))}}),Du.apply(this,arguments)}function _l(i){const e=_n(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=md.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Am.bind(null,e),e.Zu.Go=Cm.bind(null,e.eventManager),e.Zu.lc=Dm.bind(null,e.eventManager),e}function Su(i){const e=_n(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mm.bind(null,e),e}class tc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.wt=Ac(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Dc(this.persistence,new Hd,e.initialUser,this.wt)}_c(e){return new _p(vf.Ms,this.wt)}dc(e){return new Dh}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Fh extends tc{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield Su(s.yc.syncEngine),yield ca(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Dc(this.persistence,new Hd,e.initialUser,this.wt)}mc(e,t){return new jd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new Xi(t,this.persistence);return new Fr(e.asyncQueue,s)}_c(e){const t=Ep(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new wf(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Wd(),Tc(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Dh}}class Uf extends Fh{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ae.Z)(function*(){yield t().call(s,e);const h=s.yc.syncEngine;s.sharedClientState instanceof Tp&&(s.sharedClientState.syncEngine={kr:mt.bind(null,h),Or:Ss.bind(null,h),Mr:ji.bind(null,h),Ri:Oi.bind(null,h),Nr:oe.bind(null,h)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var v=(0,ae.Z)(function*(C){yield function Vt(i,e){return yn.apply(this,arguments)}(s.yc.syncEngine,C),s.gcScheduler&&(C&&!s.gcScheduler.started?s.gcScheduler.start():C||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(C&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():C||s.indexBackfillerScheduler.stop())});return function(C){return v.apply(this,arguments)}}())})()}dc(e){const t=Wd();if(!Tp.V(t))throw new Zt(At.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ep(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Xd{initialize(e,t){var s=this;return(0,ae.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=h=>Ng(s.syncEngine,h,1),s.remoteStore.remoteSyncer.handleCredentialChange=g.bind(null,s.syncEngine),yield Mh(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Og}createDatastore(e){const t=Ac(e.databaseInfo.databaseId),s=new Cf(e.databaseInfo);return new Sg(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,h=e.asyncQueue,v=k=>Ng(this.syncEngine,k,0),C=Dg.V()?new Dg:new vm,new cd(t,s,h,v,C);var t,s,h,v,C}createSyncEngine(e,t){return function(s,h,v,C,k,z,X){const pe=new Cu(s,h,v,C,k,z);return X&&(pe.ac=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const s=_n(t);Xt("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield dd(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Lh(i,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vy{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Fi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),h=Number(s);isNaN(h)&&e.Pc(`length string (${s}) is not valid number`);const v=yield e.vc(h);return new vo(JSON.parse(v),t.length+h)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ae.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class _y{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Zt(At.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(h=(0,ae.Z)(function*(v,C){const k=_n(v),z=E(k.wt)+"/documents",X={documents:C.map(Wt=>Uu(k.wt,Wt))},pe=yield k.ao("BatchGetDocuments",z,X,C.length),Ke=new Map;pe.forEach(Wt=>{const tn=function ct(i,e){return"found"in e?function(t,s){Xn(!!s.found);const h=Ya(t,s.found.name),v=Bs(s.found.updateTime),C=new Go({mapValue:{fields:s.found.fields}});return os.newFoundDocument(h,v,C)}(i,e):"missing"in e?function(t,s){Xn(!!s.missing),Xn(!!s.readTime);const h=Ya(t,s.missing),v=Bs(s.readTime);return os.newNoDocument(h,v)}(i,e):Tn()}(k.wt,Wt);Ke.set(tn.key.toString(),tn)});const Rt=[];return C.forEach(Wt=>{const tn=Ke.get(Wt.toString());Xn(!!tn),Rt.push(tn)}),Rt}),function(v,C){return h.apply(this,arguments)})(t.datastore,e);var h;return s.forEach(h=>t.recordVersion(h)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,h)=>{const v=rn.fromPath(h);e.mutations.push(new xd(v,e.precondition(v)))}),yield(s=(0,ae.Z)(function*(h,v){const C=_n(h),k=E(C.wt)+"/documents",z={writes:v.map(X=>on(C.wt,X))};yield C.ro("Commit",k,z)}),function(h,v){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tn();t=Hn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Zt(At.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hn.min()))throw new Zt(At.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ey{constructor(e,t,s,h,v){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=h,this.deferred=v,this.Dc=s.maxAttempts,this.So=new Sh(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ae.Z)(function*(){const t=new _y(e.datastore),s=e.xc(t);s&&s.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(v=>{e.Nc(v)}))}).catch(h=>{e.Nc(h)})}))}xc(e){try{const t=this.updateFunction(e);return!F(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!qc(t)}return!1}}class wy{constructor(e,t,s,h){var v=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=h,this.user=si.UNAUTHENTICATED,this.clientId=Ia.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var C=(0,ae.Z)(function*(k){Xt("FirestoreClient","Received user=",k.uid),yield v.authCredentialListener(k),v.user=k});return function(k){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(s,C=>(Xt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zt(At.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const h=Yd(s,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Om(i,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ae.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,ae.Z)(function*(v){s.isEqual(v)||(yield bg(e.localStore,v),s=v)});return function(v){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Bg.apply(this,arguments)}function Pm(i,e){return $g.apply(this,arguments)}function $g(){return $g=(0,ae.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Vg(i);Xt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(h=>Rg(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,v)=>Rg(e.remoteStore,v)),i.onlineComponents=e}),$g.apply(this,arguments)}function Vg(i){return km.apply(this,arguments)}function km(){return km=(0,ae.Z)(function*(i){return i.offlineComponents||(Xt("FirestoreClient","Using default OfflineComponentProvider"),yield Om(i,new tc)),i.offlineComponents}),km.apply(this,arguments)}function Ug(i){return jg.apply(this,arguments)}function jg(){return jg=(0,ae.Z)(function*(i){return i.onlineComponents||(Xt("FirestoreClient","Using default OnlineComponentProvider"),yield Pm(i,new Xd)),i.onlineComponents}),jg.apply(this,arguments)}function Iy(i){return Vg(i).then(e=>e.persistence)}function Nm(i){return Vg(i).then(e=>e.localStore)}function Hg(i){return Ug(i).then(e=>e.remoteStore)}function Xp(i){return Ug(i).then(e=>e.syncEngine)}function jf(i){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,ae.Z)(function*(i){const e=yield Ug(i),t=e.eventManager;return t.onListen=Ph.bind(null,e.syncEngine),t.onUnlisten=kg.bind(null,e.syncEngine),t}),Hf.apply(this,arguments)}function zg(i,e,t={}){const s=new Fi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(h,v,C,k,z){const X=new yd({next:Ke=>{v.enqueueAndForget(()=>Ff(h,pe));const Rt=Ke.docs.has(C);!Rt&&Ke.fromCache?z.reject(new Zt(At.UNAVAILABLE,"Failed to get document because the client is offline.")):Rt&&Ke.fromCache&&k&&"server"===k.source?z.reject(new Zt(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Ke)},error:Ke=>z.reject(Ke)}),pe=new kl(Nu(C.path),X,{includeMetadataChanges:!0,Du:!0});return Up(h,pe)}(yield jf(i),i.asyncQueue,e,t,s)})),s.promise}function Wg(i,e,t={}){const s=new Fi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(h,v,C,k,z){const X=new yd({next:Ke=>{v.enqueueAndForget(()=>Ff(h,pe)),Ke.fromCache&&"server"===k.source?z.reject(new Zt(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Ke)},error:Ke=>z.reject(Ke)}),pe=new kl(C,X,{includeMetadataChanges:!0,Du:!0});return Up(h,pe)}(yield jf(i),i.asyncQueue,e,t,s)})),s.promise}const qg=new Map;function Kg(i,e,t){if(!t)throw new Zt(At.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Dy(i,e,t,s){if(!0===e&&!0===s)throw new Zt(At.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function $m(i){if(!rn.isDocumentKey(i))throw new Zt(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Vm(i){if(rn.isDocumentKey(i))throw new Zt(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Qp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Tn()}function wi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Zt(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qp(i);throw new Zt(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Sy(i,e){if(e<=0)throw new Zt(At.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Um{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Zt(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zt(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Dy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,e instanceof zr?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Zt(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(h.options.projectId)}(e))}get app(){if(!this._app)throw new Zt(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zt(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bl;switch(t.type){case"gapi":const s=t.client;return Xn(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new ou(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Zt(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qg.get(e);t&&(Xt("ComponentProvider","Removing Datastore"),qg.delete(e),t.terminate())}(this),Promise.resolve()}}class Ts{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ts(this.firestore,e,this._key)}}class $a{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $a(this.firestore,e,this._query)}}class nc extends $a{constructor(e,t,s){super(e,t,Nu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ts(this.firestore,null,new rn(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function jm(i,e,...t){if(i=(0,G.m9)(i),Kg("collection","path",e),i instanceof Gf){const s=Qr.fromString(e,...t);return Vm(s),new nc(i,null,s)}{if(!(i instanceof Ts||i instanceof nc))throw new Zt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qr.fromString(e,...t));return Vm(s),new nc(i.firestore,null,s)}}function Jp(i,e,...t){if(i=(0,G.m9)(i),1===arguments.length&&(e=Ia.I()),Kg("doc","path",e),i instanceof Gf){const s=Qr.fromString(e,...t);return $m(s),new Ts(i,null,new rn(s))}{if(!(i instanceof Ts||i instanceof nc))throw new Zt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qr.fromString(e,...t));return $m(s),new Ts(i.firestore,i instanceof nc?i.converter:null,new rn(s))}}function Hm(i,e){return i=(0,G.m9)(i),e=(0,G.m9)(e),(i instanceof Ts||i instanceof nc)&&(e instanceof Ts||e instanceof nc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Gm(i,e){return i=(0,G.m9)(i),e=(0,G.m9)(e),i instanceof $a&&e instanceof $a&&i.firestore===e.firestore&&Ps(i._query,e._query)&&i.converter===e.converter}class xy{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Sh(this,"async_queue_retry"),this.Kc=()=>{const t=Tc();t&&Xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Tc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Tc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Fi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Ao(t))throw t;Xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,_i("INTERNAL UNHANDLED ERROR: ",function(v){let C=v.message||"";return v.stack&&(C=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),C}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const h=Vp.createAndSchedule(this,e,t,s,v=>this.Wc(v));return this.$c.push(h),h}Gc(){this.Bc&&Tn()}verifyOperationInProgress(){}zc(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function zf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const h of["next","error","complete"])if(h in s&&"function"==typeof s[h])return!0;return!1}(i)}class Qd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ks extends Gf{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new xy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ry(this),this._firestoreClient.terminate()}}function _o(i){return i._firestoreClient||Ry(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Ry(i){var e;const t=i._freezeSettings(),s=(v=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new In(i._databaseId,v,i._persistenceKey,(k=t).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var v,k;i._firestoreClient=new wy(i._authCredentials,i._appCheckCredentials,i._queue,s)}function kv(i,e,t){const s=new Fi;return i.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Om(i,t),yield Pm(i,e),s.resolve()}catch(h){const v=h;if(!("FirebaseError"===(C=v).name?C.code===At.FAILED_PRECONDITION||C.code===At.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw v;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+v),s.reject(v)}var C})).then(()=>s.promise)}function ky(i){if(i._initialized||i._terminated)throw new Zt(At.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Zt(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(O.fromBase64String(e))}catch(t){throw new Zt(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new rc(O.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jd{constructor(e){this._methodName=e}}class vd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zt(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zt(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qn(this._lat,e._lat)||Qn(this._long,e._long)}}const $v=/^__.*__$/;class Vv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}class Wm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ny(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tn()}}class eg{constructor(e,t,s,h,v,C){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=h,void 0===v&&this.Xc(),this.fieldTransforms=v||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:s,na:!1});return h.sa(e),h}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ta({path:s,na:!1});return h.Xc(),h}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Xg(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ny(this.Zc)&&$v.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class z_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||Ac(e)}aa(e,t,s,h=!1){return new eg({Zc:e,methodName:t,ca:s,path:Li.emptyPath(),na:!1,ua:h},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function eh(i){const e=i._freezeSettings(),t=Ac(i._databaseId);return new z_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function qf(i,e,t,s,h,v={}){const C=i.aa(v.merge||v.mergeFields?2:0,e,t,h);tg("Data must be an object, but it was:",C,s);const k=By(s,C);let z,X;if(v.merge)z=new x(C.fieldMask),X=C.fieldTransforms;else if(v.mergeFields){const pe=[];for(const Ke of v.mergeFields){const Rt=$h(e,Ke,t);if(!C.contains(Rt))throw new Zt(At.INVALID_ARGUMENT,`Field '${Rt}' is specified in your field mask but missing from your input data.`);Km(pe,Rt)||pe.push(Rt)}z=new x(pe),X=C.fieldTransforms.filter(Ke=>z.covers(Ke.field))}else z=null,X=C.fieldTransforms;return new Vv(new Go(k),z,X)}class Nl extends Jd{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nl}}function Fy(i,e,t){return new eg({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class qm extends Jd{_toFieldTransform(e){return new Gl(e.path,new gc)}isEqual(e){return e instanceof qm}}class Nc extends Jd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Fy(this,e,!0),s=this.ha.map(v=>Bh(v,t)),h=new Wa(s);return new Gl(e.path,h)}isEqual(e){return this===e}}class ic extends Jd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Fy(this,e,!0),s=this.ha.map(v=>Bh(v,t)),h=new Fu(s);return new Gl(e.path,h)}isEqual(e){return this===e}}class sc extends Jd{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new qs(e.wt,fc(e.wt,this.la));return new Gl(e.path,t)}isEqual(e){return this===e}}function Yg(i,e,t,s){const h=i.aa(1,e,t);tg("Data must be an object, but it was:",h,s);const v=[],C=Go.empty();Ho(s,(z,X)=>{const pe=ng(e,z,t);X=(0,G.m9)(X);const Ke=h.ia(pe);if(X instanceof Nl)v.push(pe);else{const Rt=Bh(X,Ke);null!=Rt&&(v.push(pe),C.set(pe,Rt))}});const k=new x(v);return new Wm(C,k,h.fieldTransforms)}function Zg(i,e,t,s,h,v){const C=i.aa(1,e,t),k=[$h(e,s,t)],z=[h];if(v.length%2!=0)throw new Zt(At.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Rt=0;Rt<v.length;Rt+=2)k.push($h(e,v[Rt])),z.push(v[Rt+1]);const X=[],pe=Go.empty();for(let Rt=k.length-1;Rt>=0;--Rt)if(!Km(X,k[Rt])){const Wt=k[Rt];let tn=z[Rt];tn=(0,G.m9)(tn);const kn=C.ia(Wt);if(tn instanceof Nl)X.push(Wt);else{const nr=Bh(tn,kn);null!=nr&&(X.push(Wt),pe.set(Wt,nr))}}const Ke=new x(X);return new Wm(pe,Ke,C.fieldTransforms)}function Ly(i,e,t,s=!1){return Bh(t,i.aa(s?4:3,e))}function Bh(i,e){if($y(i=(0,G.m9)(i)))return tg("Unsupported field value:",e,i),By(i,e);if(i instanceof Jd)return function(t,s){if(!Ny(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(s);h&&s.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const h=[];let v=0;for(const C of t){let k=Bh(C,s.ra(v));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),v++}return{arrayValue:{values:h}}}(i,e)}return function(t,s){if(null===(t=(0,G.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fc(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=pi.fromDate(t);return{timestampValue:vu(s.wt,h)}}if(t instanceof pi){const h=new pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vu(s.wt,h)}}if(t instanceof vd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rc)return{bytesValue:uh(s.wt,t._byteString)};if(t instanceof Ts){const h=s.databaseId,v=t.firestore._databaseId;if(!v.isEqual(h))throw s.oa(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Xc(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${Qp(t)}`)}(i,e)}function By(i,e){const t={};return mo(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(i,(s,h)=>{const v=Bh(h,e.ea(s));null!=v&&(t[s]=v)}),{mapValue:{fields:t}}}function $y(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof pi||i instanceof vd||i instanceof rc||i instanceof Ts||i instanceof Jd)}function tg(i,e,t){if(!$y(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Qp(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function $h(i,e,t){if((e=(0,G.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return ng(i,e);throw Xg("Field path arguments must be of type string or ",i,!1,void 0,t)}const Uv=new RegExp("[~\\*/\\[\\]]");function ng(i,e,t){if(e.search(Uv)>=0)throw Xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch(s){throw Xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Xg(i,e,t,s,h){const v=s&&!s.isEmpty(),C=void 0!==h;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let z="";return(v||C)&&(z+=" (found",v&&(z+=` in field ${s}`),C&&(z+=` in document ${h}`),z+=")"),new Zt(At.INVALID_ARGUMENT,k+i+z)}function Km(i,e){return i.some(t=>t.isEqual(e))}class Kf{constructor(e,t,s,h,v){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=h,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new Ts(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qg extends Kf{data(){return super.data()}}function Jg(i,e){return"string"==typeof e?ng(i,e):e instanceof kc?e._internalPath:e._delegate._internalPath}class th{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends Kf{constructor(e,t,s,h,v,C){super(e,t,s,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Jg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Yf extends Fc{data(e={}){return super.data(e)}}class oc{constructor(e,t,s,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new th(h.hasPendingWrites,h.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Yf(this._firestore,this._userDataWriter,s.key,s,new th(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Zt(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,h){if(s._snapshot.oldDocs.isEmpty()){let v=0;return s._snapshot.docChanges.map(C=>({type:"added",doc:new Yf(s._firestore,s._userDataWriter,C.doc.key,C.doc,new th(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:v++}))}{let v=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const k=new Yf(s._firestore,s._userDataWriter,C.doc.key,C.doc,new th(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter);let z=-1,X=-1;return 0!==C.type&&(z=v.indexOf(C.doc.key),v=v.delete(C.doc.key)),1!==C.type&&(v=v.add(C.doc),X=v.indexOf(C.doc.key)),{type:Vy(C.type),doc:k,oldIndex:z,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tn()}}function Ym(i,e){return i instanceof Fc&&e instanceof Fc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof oc&&e instanceof oc&&i._firestore===e._firestore&&Gm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Zm(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Zt(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zf{}function _d(i,...e){for(const t of e)i=t._apply(i);return i}class Uy extends Zf{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=eh(e.firestore),s=function(h,v,C,k,z,X,pe){let Ke;if(z.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new Zt(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){Yy(pe,X);const Wt=[];for(const tn of pe)Wt.push(Ky(k,h,tn));Ke={arrayValue:{values:Wt}}}else Ke=Ky(k,h,pe)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||Yy(pe,X),Ke=Ly(C,"where",pe,"in"===X||"not-in"===X);const Rt=zo.create(z,X,Ke);return function(Wt,tn){if(tn.ht()){const nr=oh(Wt);if(null!==nr&&!nr.isEqual(tn.field))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nr.toString()}' and '${tn.field.toString()}'`);const Hi=Ul(Wt);null!==Hi&&Zy(0,tn.field,Hi)}const kn=function(nr,Hi){for(const $s of nr.filters)if(Hi.indexOf($s.op)>=0)return $s.op;return null}(Wt,function(nr){switch(nr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(tn.op));if(null!==kn)throw new Zt(At.INVALID_ARGUMENT,kn===tn.op?`Invalid query. You cannot use more than one '${tn.op.toString()}' filter.`:`Invalid query. You cannot use '${tn.op.toString()}' filters with '${kn.toString()}' filters.`)}(h,Rt),Rt}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new $a(e.firestore,e.converter,function(h,v){const C=h.filters.concat([v]);return new aa(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,s))}}class Hy extends Zf{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,h,v){if(null!==s.startAt)throw new Zt(At.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Zt(At.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new ku(h,v);return function(k,z){if(null===Ul(k)){const X=oh(k);null!==X&&Zy(0,X,z.field)}}(s,C),C}(e._query,this.fa,this.wa);return new $a(e.firestore,e.converter,function(s,h){const v=s.explicitOrderBy.concat([h]);return new aa(s.path,s.collectionGroup,v,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Gy extends Zf{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new $a(e.firestore,e.converter,Sd(e._query,this.ma,this.ga))}}class zy extends Zf{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=qy(e,this.type,this.ya,this.pa);return new $a(e.firestore,e.converter,(h=t,new aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,h,s.endAt)));var s,h}}class Wy extends Zf{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=qy(e,this.type,this.ya,this.pa);return new $a(e.firestore,e.converter,(h=t,new aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,h)));var s,h}}function qy(i,e,t,s){if(t[0]=(0,G.m9)(t[0]),t[0]instanceof Kf)return function(h,v,C,k,z){if(!k)throw new Zt(At.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const X=[];for(const pe of jl(h))if(pe.field.isKeyField())X.push(ss(v,k.key));else{const Ke=k.data.field(pe.field);if(St(Ke))throw new Zt(At.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ke){const Rt=pe.field.canonicalString();throw new Zt(At.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Rt}' (used as the orderBy) does not exist.`)}X.push(Ke)}return new cu(X,z)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const h=eh(i.firestore);return function(v,C,k,z,X,pe){const Ke=v.explicitOrderBy;if(X.length>Ke.length)throw new Zt(At.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Rt=[];for(let Wt=0;Wt<X.length;Wt++){const tn=X[Wt];if(Ke[Wt].field.isKeyField()){if("string"!=typeof tn)throw new Zt(At.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof tn}`);if(!Ws(v)&&-1!==tn.indexOf("/"))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${tn}' contains a slash.`);const kn=v.path.child(Qr.fromString(tn));if(!rn.isDocumentKey(kn))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${kn}' is not because it contains an odd number of segments.`);const nr=new rn(kn);Rt.push(ss(C,nr))}else{const kn=Ly(k,z,tn);Rt.push(kn)}}return new cu(Rt,pe)}(i._query,i.firestore._databaseId,h,e,t,s)}}function Ky(i,e,t){if("string"==typeof(t=(0,G.m9)(t))){if(""===t)throw new Zt(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ws(e)&&-1!==t.indexOf("/"))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qr.fromString(t));if(!rn.isDocumentKey(s))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ss(i,new rn(s))}if(t instanceof Ts)return ss(i,t._key);throw new Zt(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qp(t)}.`)}function Yy(i,e){if(!Array.isArray(i)||0===i.length)throw new Zt(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Zt(At.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Zy(i,e,t){if(!t.isEqual(e))throw new Zt(At.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Yv={maxAttempts:5};class Xm{convertValue(e,t="none"){switch(It(e)){case 0:return null;case 1:return e.booleanValue;case 2:return re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tn()}}convertObject(e,t){const s={};return Ho(e.fields,(h,v)=>{s[h]=this.convertValue(v,t)}),s}convertGeoPoint(e){return new vd(re(e.latitude),re(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=an(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(En(e));default:return null}}convertTimestamp(e){const t=ee(e);return new pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qr.fromString(e);Xn(Hu(s));const h=new zr(s.get(1),s.get(3)),v=new rn(s.popFirst(5));return h.isEqual(t)||_i(`Document ${v} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),v}}function em(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Zv extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,t)}}class Qm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eh(e)}set(e,t,s){this._verifyNotCommitted();const h=Ed(e,this._firestore),v=em(h.converter,t,s),C=qf(this._dataReader,"WriteBatch.set",h._key,v,null!==h.converter,s);return this._mutations.push(C.toMutation(h._key,Ti.none())),this}update(e,t,s,...h){this._verifyNotCommitted();const v=Ed(e,this._firestore);let C;return C="string"==typeof(t=(0,G.m9)(t))||t instanceof kc?Zg(this._dataReader,"WriteBatch.update",v._key,t,s,h):Yg(this._dataReader,"WriteBatch.update",v._key,t),this._mutations.push(C.toMutation(v._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ed(e,this._firestore);return this._mutations=this._mutations.concat(new Ml(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zt(At.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ed(i,e){if((i=(0,G.m9)(i)).firestore!==e)throw new Zt(At.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class nh extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,t)}}function Jm(i,e,t){i=wi(i,Ts);const s=wi(i.firestore,Ks),h=em(i.converter,e,t);return rg(s,[qf(eh(s),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,Ti.none())])}function ey(i,e,t,...s){i=wi(i,Ts);const h=wi(i.firestore,Ks),v=eh(h);let C;return C="string"==typeof(e=(0,G.m9)(e))||e instanceof kc?Zg(v,"updateDoc",i._key,e,t,s):Yg(v,"updateDoc",i._key,e),rg(h,[C.toMutation(i._key,Ti.exists(!0))])}function rv(i,...e){var t,s,h;i=(0,G.m9)(i);let v={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||zf(e[C])||(v=e[C],C++);const k={includeMetadataChanges:v.includeMetadataChanges};if(zf(e[C])){const Ke=e[C];e[C]=null===(t=Ke.next)||void 0===t?void 0:t.bind(Ke),e[C+1]=null===(s=Ke.error)||void 0===s?void 0:s.bind(Ke),e[C+2]=null===(h=Ke.complete)||void 0===h?void 0:h.bind(Ke)}let z,X,pe;if(i instanceof Ts)X=wi(i.firestore,Ks),pe=Nu(i._key.path),z={next:Ke=>{e[C]&&e[C](ig(X,i,Ke))},error:e[C+1],complete:e[C+2]};else{const Ke=wi(i,$a);X=wi(Ke.firestore,Ks),pe=Ke._query;const Rt=new nh(X);z={next:Wt=>{e[C]&&e[C](new oc(X,Rt,Ke,Wt))},error:e[C+1],complete:e[C+2]},Zm(i._query)}return function(Ke,Rt,Wt,tn){const kn=new yd(tn),nr=new kl(Rt,kn,Wt);return Ke.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Up(yield jf(Ke),nr)})),()=>{kn.Tc(),Ke.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Ff(yield jf(Ke),nr)}))}}(_o(X),pe,k,z)}function rg(i,e){return function(t,s){const h=new Fi;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function Tm(i,e,t){return qp.apply(this,arguments)}(yield Xp(t),s,h)})),h.promise}(_o(i),e)}function ig(i,e,t){const s=t.docs.get(e._key),h=new nh(i);return new Fc(i,h,e._key,s,new th(t.hasPendingWrites,t.fromCache),e.converter)}class W_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=eh(e)}get(e){const t=Ed(e,this._firestore),s=new Zv(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return Tn();const v=h[0];if(v.isFoundDocument())return new Kf(this._firestore,s,v.key,v,t.converter);if(v.isNoDocument())return new Kf(this._firestore,s,t._key,null,t.converter);throw Tn()})}set(e,t,s){const h=Ed(e,this._firestore),v=em(h.converter,t,s),C=qf(this._dataReader,"Transaction.set",h._key,v,null!==h.converter,s);return this._transaction.set(h._key,C),this}update(e,t,s,...h){const v=Ed(e,this._firestore);let C;return C="string"==typeof(t=(0,G.m9)(t))||t instanceof kc?Zg(this._dataReader,"Transaction.update",v._key,t,s,h):Yg(this._dataReader,"Transaction.update",v._key,t),this._transaction.update(v._key,C),this}delete(e){const t=Ed(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ed(e,this._firestore),s=new nh(this._firestore);return super.get(e).then(h=>new Fc(this._firestore,s,t._key,h._document,new th(!1,!1),t.converter))}}!function(i,e=!0){ns=lt.SDK_VERSION,(0,lt._registerComponent)(new at.wA("firestore",(t,{options:s})=>{const h=t.getProvider("app").getImmediate(),v=new Ks(h,new Bl(t.getProvider("auth-internal")),new wa(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),v._setSettings(s),v},"PUBLIC")),(0,lt.registerVersion)(to,"3.4.13",i),(0,lt.registerVersion)(to,"3.4.13","esm2017")}();function Ys(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Zt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function e_(){if(typeof Uint8Array>"u")throw new Zt("unimplemented","Uint8Arrays are not available in this environment.")}function ty(){if(!function b(){return typeof atob<"u"}())throw new Zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Qf{constructor(e){this._delegate=e}static fromBase64String(e){return ty(),new Qf(rc.fromBase64String(e))}static fromUint8Array(e){return e_(),new Qf(rc.fromUint8Array(e))}toBase64(){return ty(),this._delegate.toBase64()}toUint8Array(){return e_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ny(i){return function av(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class lv{enableIndexedDbPersistence(e,t){return function zm(i,e){ky(i=wi(i,Ks));const t=_o(i),s=i._freezeSettings(),h=new Xd;return kv(t,h,new Fh(h,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function H_(i){ky(i=wi(i,Ks));const e=_o(i),t=i._freezeSettings(),s=new Xd;return kv(e,s,new Uf(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Nv(i){if(i._initialized&&!i._terminated)throw new Zt(At.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(s){if(!go.V())return Promise.resolve();const h=s+"main";yield go.delete(h)}),function(s){return t.apply(this,arguments)})(Ep(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ry{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Ty(i,e,t,s={}){var h;const v=(i=wi(i,Gf))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==e&&Ea("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},v),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let C,k;if("string"==typeof s.mockUserToken)C=s.mockUserToken,k=si.MOCK_USER;else{C=(0,G.Sg)(s.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const z=s.mockUserToken.sub||s.mockUserToken.user_id;if(!z)throw new Zt(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new si(z)}i._authCredentials=new su(new Il(C,k))}}(this._delegate,e,t,s)}enableNetwork(){return function Oy(i){return function Gg(i){return i.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Iy(i),t=yield Hg(i);return e.setNetworkEnabled(!0),function(s){const h=_n(s);return h.lu.delete(0),qd(h)}(t)}))}(_o(i=wi(i,Ks)))}(this._delegate)}disableNetwork(){return function Lv(i){return function Fm(i){return i.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield Iy(i),t=yield Hg(i);return e.setNetworkEnabled(!1),(s=(0,ae.Z)(function*(h){const v=_n(h);v.lu.add(0),yield dd(v),v._u.set("Offline")}),function(h){return s.apply(this,arguments)})(t);var s}))}(_o(i=wi(i,Ks)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Dy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Fv(i){return function(e){const t=new Fi;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function Fg(i,e){return $f.apply(this,arguments)}(yield Xp(e),t)})),t.promise}(_o(i=wi(i,Ks)))}(this._delegate)}onSnapshotsInSync(e){return function Xf(i,e){return function Ov(i,e){const t=new yd(e);return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield jf(i),h=t,_n(s).Tu.add(h),void h.next();var s,h})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return s=yield jf(i),h=t,void _n(s).Tu.delete(h);var s,h}))}}(_o(i=wi(i,Ks)),zf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lc(this,jm(this._delegate,e))}catch(t){throw El(t,"collection()","Firestore.collection()")}}doc(e){try{return new Au(this,Jp(this._delegate,e))}catch(t){throw El(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tl(this,function Ay(i,e){if(i=wi(i,Gf),Kg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Zt(At.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $a(i,null,(t=e,new aa(Qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw El(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function iv(i,e,t){i=wi(i,Ks);const s=Object.assign(Object.assign({},Yv),t);return function(h){if(h.maxAttempts<1)throw new Zt(At.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function Bm(i,e,t){const s=new Fi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const h=yield(v=i,Ug(v).then(C=>C.datastore));var v;new Ey(i.asyncQueue,h,t,e,s).run()})),s.promise}(_o(i),h=>e(new W_(i,h)),s)}(this._delegate,t=>e(new uv(this,t)))}batch(){return _o(this._delegate),new cv(new Qm(this._delegate,e=>rg(this._delegate,e)))}loadBundle(e){return function Py(i,e){const t=_o(i=wi(i,Ks)),s=new Qd;return function by(i,e,t,s){const h=function(v,C){let k;return k="string"==typeof v?(new TextEncoder).encode(v):v,z=function(z,X){if(z instanceof Uint8Array)return Lh(z,X);if(z instanceof ArrayBuffer)return Lh(new Uint8Array(z),X);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new vy(z,C);var z}(t,Ac(e));i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function Tu(i,e,t){const s=_n(i);var h;(h=(0,ae.Z)(function*(v,C,k){try{const z=yield C.getMetadata();if(yield function(Rt,Wt){const tn=_n(Rt),kn=Bs(Wt.createTime);return tn.persistence.runTransaction("hasNewerBundle","readonly",nr=>tn.Ds.getBundleMetadata(nr,Wt.id)).then(nr=>!!nr&&nr.createTime.compareTo(kn)>=0)}(v.localStore,z))return yield C.close(),k._completeWith({taskState:"Success",documentsLoaded:(Rt=z).totalDocuments,bytesLoaded:Rt.totalBytes,totalDocuments:Rt.totalDocuments,totalBytes:Rt.totalBytes}),Promise.resolve(new Set);k._updateProgress(Sm(z));const X=new fd(z,v.localStore,C.wt);let pe=yield C.fc();for(;pe;){const Rt=yield X.Nu(pe);Rt&&k._updateProgress(Rt),pe=yield C.fc()}const Ke=yield X.complete();return yield a(v,Ke.Mu,void 0),yield function(Rt,Wt){const tn=_n(Rt);return tn.persistence.runTransaction("Save bundle","readwrite",kn=>tn.Ds.saveBundleMetadata(kn,Wt))}(v.localStore,z),k._completeWith(Ke.progress),Promise.resolve(Ke.Ou)}catch(z){return Ea("SyncEngine",`Loading bundle failed with ${z}`),k._failWith(z),Promise.resolve(new Set)}var Rt}),function(v,C,k){return h.apply(this,arguments)})(s,e,t).then(h=>{s.sharedClientState.notifyBundleLoaded(h)})}(yield Xp(i),h,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Bv(i,e){return function Cy(i,e){return i.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,s){const h=_n(t);return h.persistence.runTransaction("Get named query","readonly",v=>h.Ds.getNamedQuery(v,s))}(yield Nm(i),e)}))}(_o(i=wi(i,Ks)),e).then(t=>t?new $a(i,null,t.query):null)}(this._delegate,e).then(t=>t?new tl(this,t):null)}}class og extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(new rc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Au.forKey(t,this.firestore,null)}}class uv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new og(e)}get(e){const t=jh(e);return this._delegate.get(t).then(s=>new Jf(this._firestore,new Fc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const h=jh(e);return s?(Ys("Transaction.set",s),this._delegate.set(h,t,s)):this._delegate.set(h,t),this}update(e,t,s,...h){const v=jh(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,s,...h),this}delete(e){const t=jh(e);return this._delegate.delete(t),this}}class cv{constructor(e){this._delegate=e}set(e,t,s){const h=jh(e);return s?(Ys("WriteBatch.set",s),this._delegate.set(h,t,s)):this._delegate.set(h,t),this}update(e,t,s,...h){const v=jh(e);return 2===arguments.length?this._delegate.update(v,t):this._delegate.update(v,t,s,...h),this}delete(e){const t=jh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ac{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Yf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ep(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=ac.INSTANCES;let h=s.get(e);h||(h=new WeakMap,s.set(e,h));let v=h.get(t);return v||(v=new ac(e,new og(e),t),h.set(t,v)),v}}ac.INSTANCES=new WeakMap;class Au{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new og(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Au(t,new Ts(t._delegate,s,new rn(e)))}static forKey(e,t,s){return new Au(t,new Ts(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Lc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lc(this.firestore,jm(this._delegate,e))}catch(t){throw El(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,G.m9)(e))instanceof Ts&&Hm(this._delegate,e)}set(e,t){t=Ys("DocumentReference.set",t);try{return t?Jm(this._delegate,e,t):Jm(this._delegate,e)}catch(s){throw El(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?ey(this._delegate,e):ey(this._delegate,e,t,...s)}catch(h){throw El(h,"updateDoc()","DocumentReference.update()")}}delete(){return function Vh(i){return rg(wi(i.firestore,Ks),[new Ml(i._key,Ti.none())])}(this._delegate)}onSnapshot(...e){const t=dv(e),s=ag(e,h=>new Jf(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return rv(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Qy(i){i=wi(i,Ts);const e=wi(i.firestore,Ks),t=_o(e),s=new nh(e);return function Rv(i,e){const t=new Fi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(h,v,C){try{const k=yield function(z,X){const pe=_n(z);return pe.persistence.runTransaction("read document","readonly",Ke=>pe.localDocuments.getDocument(Ke,X))}(h,v);k.isFoundDocument()?C.resolve(k):k.isNoDocument()?C.resolve(null):C.reject(new Zt(At.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const z=Yd(k,`Failed to get document '${v} from cache`);C.reject(z)}}),function(h,v,C){return s.apply(this,arguments)})(yield Nm(i),e,t);var s})),t.promise}(t,i._key).then(h=>new Fc(e,s,i._key,h,new th(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Jy(i){i=wi(i,Ts);const e=wi(i.firestore,Ks);return zg(_o(e),i._key,{source:"server"}).then(t=>ig(e,i,t))}(this._delegate):function Xy(i){i=wi(i,Ts);const e=wi(i.firestore,Ks);return zg(_o(e),i._key).then(t=>ig(e,i,t))}(this._delegate),t.then(s=>new Jf(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Au(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function El(i,e,t){return i.message=i.message.replace(e,t),i}function dv(i){for(const e of i)if("object"==typeof e&&!ny(e))return e;return{}}function ag(i,e){var t,s;let h;return h=ny(i[0])?i[0]:ny(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:v=>{h.next&&h.next(e(v))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(s=h.complete)||void 0===s?void 0:s.bind(h)}}class Jf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Au(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ym(this._delegate,e._delegate)}}class ep extends Jf{data(e){const t=this._delegate.data(e);return function rl(i,e){i||Tn()}(void 0!==t),t}}class tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new og(e)}where(e,t,s){try{return new tl(this.firestore,_d(this._delegate,function jy(i,e,t){const s=e,h=Jg("where",i);return new Uy(h,s,t)}(e,t,s)))}catch(h){throw El(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tl(this.firestore,_d(this._delegate,function jv(i,e="asc"){const t=e,s=Jg("orderBy",i);return new Hy(s,t)}(e,t)))}catch(s){throw El(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tl(this.firestore,_d(this._delegate,function Hv(i){return Sy("limit",i),new Gy("limit",i,"F")}(e)))}catch(t){throw El(t,"limit()","Query.limit()")}}limitToLast(e){try{return new tl(this.firestore,_d(this._delegate,function Gv(i){return Sy("limitToLast",i),new Gy("limitToLast",i,"L")}(e)))}catch(t){throw El(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new tl(this.firestore,_d(this._delegate,function zv(...i){return new zy("startAt",i,!0)}(...e)))}catch(t){throw El(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new tl(this.firestore,_d(this._delegate,function Wv(...i){return new zy("startAfter",i,!1)}(...e)))}catch(t){throw El(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new tl(this.firestore,_d(this._delegate,function qv(...i){return new Wy("endBefore",i,!1)}(...e)))}catch(t){throw El(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new tl(this.firestore,_d(this._delegate,function Kv(...i){return new Wy("endAt",i,!0)}(...e)))}catch(t){throw El(t,"endAt()","Query.endAt()")}}isEqual(e){return Gm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tv(i){i=wi(i,$a);const e=wi(i.firestore,Ks),t=_o(e),s=new nh(e);return function Lm(i,e){const t=new Fi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(s=(0,ae.Z)(function*(h,v,C){try{const k=yield wu(h,v,!0),z=new zp(v,k.ji),X=z.Ku(k.documents),pe=z.applyChanges(X,!1);C.resolve(pe.snapshot)}catch(k){const z=Yd(k,`Failed to execute query '${v} against cache`);C.reject(z)}}),function(h,v,C){return s.apply(this,arguments)})(yield Nm(i),e,t);var s})),t.promise}(t,i._query).then(h=>new oc(e,s,i,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function nv(i){i=wi(i,$a);const e=wi(i.firestore,Ks),t=_o(e),s=new nh(e);return Wg(t,i._query,{source:"server"}).then(h=>new oc(e,s,i,h))}(this._delegate):function ev(i){i=wi(i,$a);const e=wi(i.firestore,Ks),t=_o(e),s=new nh(e);return Zm(i._query),Wg(t,i._query).then(h=>new oc(e,s,i,h))}(this._delegate),t.then(s=>new Uh(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=dv(e),s=ag(e,h=>new Uh(this.firestore,new oc(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return rv(this._delegate,t,s)}withConverter(e){return new tl(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}class n_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ep(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Uh{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ep(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new n_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new ep(this._firestore,s))})}isEqual(e){return Ym(this._delegate,e._delegate)}}class Lc extends tl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Au(this.firestore,e):null}doc(e){try{return new Au(this.firestore,void 0===e?Jp(this._delegate):Jp(this._delegate,e))}catch(t){throw El(t,"doc()","CollectionReference.doc()")}}add(e){return function Xv(i,e){const t=wi(i.firestore,Ks),s=Jp(i),h=em(i.converter,e);return rg(t,[qf(eh(i.firestore),"addDoc",s._key,h,null!==i.converter,{}).toMutation(s._key,Ti.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Au(this.firestore,t))}isEqual(e){return Hm(this._delegate,e._delegate)}withConverter(e){return new Lc(this.firestore,this._delegate.withConverter(e?ac.getInstance(this.firestore,e):null))}}function jh(i){return wi(i,Ts)}class iy{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new iy(Li.keyField().canonicalString())}isEqual(e){return(e=(0,G.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q_(){return new qm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hh(e)}static delete(){const e=function sv(){return new Nl("deleteField")}();return e._methodName="FieldValue.delete",new Hh(e)}static arrayUnion(...e){const t=function Cr(...i){return new Nc("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Hh(t)}static arrayRemove(...e){const t=function Qv(...i){return new ic("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Hh(t)}static increment(e){const t=function Jv(i){return new sc("increment",i)}(e);return t._methodName="FieldValue.increment",new Hh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hv={Firestore:ry,GeoPoint:vd,Timestamp:pi,Blob:Qf,Transaction:uv,WriteBatch:cv,DocumentReference:Au,DocumentSnapshot:Jf,Query:tl,QueryDocumentSnapshot:ep,QuerySnapshot:Uh,CollectionReference:Lc,FieldPath:iy,FieldValue:Hh,setLogLevel:function t_(i){!function Fs(i){rs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function pv(i){(function fv(i,e){i.INTERNAL.registerComponent(new at.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(s,h)},"PUBLIC").setServiceProps(Object.assign({},hv)))})(i,(e,t)=>new ry(e,t,new lv)),i.registerVersion("@firebase/firestore-compat","0.1.22")}(ve.Z);var rh=V(1205),gv=V(440),r_=V(127);function s_(i,e){return function i_(i,e=J.z){return new H.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function mv(i,e){return s_(i,e).pipe((0,ce.U)(t=>({payload:t,type:"query"})))}function sy(i,e){return mv(i,e).pipe((0,me.O)(void 0),_e(),(0,ce.U)(([t,s])=>{const h=s.payload.docChanges(),v=h.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((C,k)=>{const z=h.find(pe=>pe.doc.ref.isEqual(C.ref)),X=null==t?void 0:t.payload.docs.find(pe=>pe.ref.isEqual(C.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(C.metadata)||!z&&X&&JSON.stringify(X.metadata)===JSON.stringify(C.metadata)||v.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:C}})}),v}))}function oy(i,e,t){return sy(i,t).pipe((0,de.R)((s,h)=>function rm(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function o_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ay(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ay(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ay(i,e.oldIndex,1)}return i}(i,s))}),i}(s,h.map(v=>v.payload),e),[]),(0,Ae.x)(),(0,ce.U)(s=>s.map(h=>({type:h.type,payload:h}))))}function ay(i,e,t,...s){const h=i.slice();return h.splice(e,t,...s),h}function ly(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class tp{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=sy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ce.U)(s=>s.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,me.O)(void 0),_e(),(0,je.h)(([s,h])=>h.length>0||!s),(0,ce.U)(([s,h])=>h),Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ly(e);return oy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return mv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Pe.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(Pe.iC)}add(e){return this.ref.add(e)}doc(e){return new yv(this.ref.doc(e),this.afs)}}class yv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:h,query:v}=uy(s,t);return new tp(h,v,this.afs)}snapshotChanges(){return function Y_(i,e){return s_(i,e).pipe((0,me.O)(void 0),_e(),(0,ce.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ce.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xe.D)(this.ref.get(e)).pipe(Pe.iC)}}class a_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,je.h)(t=>t.length>0),Pe.iC):sy(this.query,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ly(e);return oy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return mv(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(s=>s.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Pe.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(Pe.iC)}}const vv=new u.OlP("angularfire2.enableFirestorePersistence"),_v=new u.OlP("angularfire2.firestore.persistenceSettings"),Z_=new u.OlP("angularfire2.firestore.settings"),l_=new u.OlP("angularfire2.firestore.use-emulator");function uy(i,e=(t=>t)){return{query:e(i),ref:i}}let Ev=(()=>{class i{constructor(t,s,h,v,C,k,z,X,pe,Ke,Rt,Wt,tn,kn,nr,Hi,$s){this.schedulers=z;const ws=(0,it.on)(t,k,s),Zo=pe;Ke&&(0,rh.nw)(ws,k,Rt,tn,kn,nr,Wt,Hi),[this.firestore,this.persistenceEnabled$]=(0,it.cc)(`${ws.name}.firestore`,"AngularFirestore",ws.name,()=>{const Vs=k.runOutsideAngular(()=>ws.firestore());if(v&&Vs.settings(v),Zo&&Vs.useEmulator(...Zo),h&&!(0,bt.PM)(C)){const lo=()=>{try{return(0,xe.D)(Vs.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(nl){return typeof console<"u"&&console.warn(nl),(0,Re.of)(!1)}};return[Vs,k.runOutsideAngular(lo)]}return[Vs,(0,Re.of)(!1)]},[v,Zo,h])}collection(t,s){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:v,query:C}=uy(h,s),k=this.schedulers.ngZone.run(()=>v);return new tp(k,C,this)}collectionGroup(t,s){const h=s||(C=>C),v=this.firestore.collectionGroup(t);return new a_(h(v),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>s);return new yv(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(it.Dh),u.LFG(it.xv,8),u.LFG(vv,8),u.LFG(Z_,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Pe.HU),u.LFG(_v,8),u.LFG(l_,8),u.LFG(rh.zQ,8),u.LFG(rh.Qv,8),u.LFG(rh.L6,8),u.LFG(rh._Q,8),u.LFG(rh.rT,8),u.LFG(rh.lh,8),u.LFG(rh.f7,8),u.LFG(gv.nm,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),u_=(()=>{class i{constructor(){r_.Z.registerVersion("angularfire",Pe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:vv,useValue:!0},{provide:_v,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[Ev]}),i})()},2011:(un,yt,V)=>{"use strict";V.d(yt,{Dh:()=>Te,GT:()=>Pe,cc:()=>je,hO:()=>Ae,on:()=>_e,pX:()=>Re,xv:()=>Ve});var u=V(4650),J=V(127),H=V(5813);un=V.hmd(un);const xe=["ngOnDestroy"],Re=(ve,ae,lt,at={})=>new Proxy(ve,{get:(Ye,G)=>lt.runOutsideAngular(()=>{var Me;if(ve[G])return!(null===(Me=null==at?void 0:at.spy)||void 0===Me)&&Me.get&&at.spy.get(G,ve[G]),ve[G];if(xe.indexOf(G)>-1)return()=>{};const Ne=ae.toPromise().then(Q=>{const tt=Q&&Q[G];return"function"==typeof tt?tt.bind(Q):tt&&tt.then?tt.then(Le=>lt.run(()=>Le)):lt.run(()=>tt)});return new Proxy(()=>{},{get:(Q,tt)=>Ne[tt],apply:(Q,tt,Le)=>Ne.then(ke=>{var $e;const nt=ke&&ke(...Le);return!(null===($e=null==at?void 0:at.spy)||void 0===$e)&&$e.apply&&at.spy.apply(G,Le,nt),nt})})})}),Pe=(ve,ae)=>{ae.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(at=>{Object.defineProperty(ve.prototype,at,Object.getOwnPropertyDescriptor(lt.prototype||lt,at))})})};class me{constructor(ae){return ae}}const Te=new u.OlP("angularfire2.app.options"),Ve=new u.OlP("angularfire2.app.name");function _e(ve,ae,lt){const Ye="object"==typeof lt&&lt||{};Ye.name=Ye.name||"string"==typeof lt&&lt||"[DEFAULT]";const Me=J.Z.apps.filter(Ne=>Ne&&Ne.name===Ye.name)[0]||ae.runOutsideAngular(()=>J.Z.initializeApp(ve,Ye));try{JSON.stringify(ve)!==JSON.stringify(Me.options)&&ce("error",`${Me.name} Firebase App already initialized with different options${un.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return new me(Me)}const ce=(ve,...ae)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ve](...ae)},de={provide:me,useFactory:_e,deps:[Te,u.R0b,[new u.FiY,Ve]]};let Ae=(()=>{class ve{constructor(lt){J.Z.registerVersion("angularfire",H.q4.full,"core"),J.Z.registerVersion("angularfire",H.q4.full,"app-compat"),J.Z.registerVersion("angular",u.q4F.full,lt.toString())}static initializeApp(lt,at){return{ngModule:ve,providers:[{provide:Te,useValue:lt},{provide:Ve,useValue:at}]}}}return ve.\u0275fac=function(lt){return new(lt||ve)(u.LFG(u.Lbi))},ve.\u0275mod=u.oAB({type:ve}),ve.\u0275inj=u.cJS({providers:[de]}),ve})();function je(ve,ae,lt,at,Ye){const[,G,Me]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===ve)||[];if(G)return function it(ve,ae){try{return ve.toString()===ae.toString()}catch(lt){return ve===ae}}(Ye,Me)||(Ce("error",`${ae} was already initialized on the ${lt} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ye,was:Me})),G;{const Ne=at();return globalThis.\u0275AngularfireInstanceCache.push([ve,Ne,Ye]),Ne}}const bt=!!un.hot,Ce=(ve,...ae)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ve](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(un,yt,V)=>{"use strict";V.d(yt,{q4:()=>ci,iC:()=>an,fc:()=>Xe,HU:()=>O,vb:()=>io,JM:()=>Tr});var u=V(4650),J=V(5867),H=V(5861),xe=V(9681),Re=V(2090),Pe=V(4859),me=V(1877),Te=V(8766);const Ve="@firebase/installations",_e="0.5.12",ce=1e4,de=`w:${_e}`,Ae="FIS_v2",je="https://firebaseinstallations.googleapis.com/v1",it=36e5,ae=new Re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(F){return F instanceof Re.ZR&&F.code.includes("request-failed")}function at({projectId:F}){return`${je}/projects/${F}/installations`}function Ye(F){return{token:F.token,requestStatus:2,expiresIn:ke(F.expiresIn),creationTime:Date.now()}}function G(F,j){return Me.apply(this,arguments)}function Me(){return(Me=(0,H.Z)(function*(F,j){const fe=(yield j.json()).error;return ae.create("request-failed",{requestName:F,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Ne({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function tt(F){return Le.apply(this,arguments)}function Le(){return(Le=(0,H.Z)(function*(F){const j=yield F();return j.status>=500&&j.status<600?F():j})).apply(this,arguments)}function ke(F){return Number(F.replace("s","000"))}function We(){return(We=(0,H.Z)(function*({appConfig:F,heartbeatServiceProvider:j},{fid:te}){const fe=at(F),dt=Ne(F),It=j.getImmediate({optional:!0});if(It){const Jn=yield It.getHeartbeatsHeader();Jn&&dt.append("x-firebase-client",Jn)}const en={method:"POST",headers:dt,body:JSON.stringify({fid:te,authVersion:Ae,appId:F.appId,sdkVersion:de})},Fn=yield tt(()=>fetch(fe,en));if(Fn.ok){const Jn=yield Fn.json();return{fid:Jn.fid||te,registrationStatus:2,refreshToken:Jn.refreshToken,authToken:Ye(Jn.authToken)}}throw yield G("Create Installation",Fn)})).apply(this,arguments)}function gt(F){return new Promise(j=>{setTimeout(j,F)})}const Ie=/^[cdef][\w-]{21}$/,De="";function we(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const te=function et(F){return function ot(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Ie.test(te)?te:De}catch(F){return De}}function He(F){return`${F.appName}!${F.appId}`}const rt=new Map;function Ze(F,j){const te=He(F);kt(te,j),function Ct(F,j){const te=function bn(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=F=>{kt(F.data.key,F.data.fid)}),An}();te&&te.postMessage({key:F,fid:j}),function Cn(){0===rt.size&&An&&(An.close(),An=null)}()}(te,j)}function kt(F,j){const te=rt.get(F);if(te)for(const fe of te)fe(j)}let An=null;const xn="firebase-installations-database",Ht=1,gr="firebase-installations-store";let Gn=null;function Ir(){return Gn||(Gn=(0,Te.X3)(xn,Ht,{upgrade:(F,j)=>{0===j&&F.createObjectStore(gr)}})),Gn}function Dn(F,j){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,H.Z)(function*(F,j){const te=He(F),dt=(yield Ir()).transaction(gr,"readwrite"),It=dt.objectStore(gr),jt=yield It.get(te);return yield It.put(j,te),yield dt.done,(!jt||jt.fid!==j.fid)&&Ze(F,j.fid),j})).apply(this,arguments)}function qt(F){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,H.Z)(function*(F){const j=He(F),fe=(yield Ir()).transaction(gr,"readwrite");yield fe.objectStore(gr).delete(j),yield fe.done})).apply(this,arguments)}function Or(F,j){return hr.apply(this,arguments)}function hr(){return(hr=(0,H.Z)(function*(F,j){const te=He(F),dt=(yield Ir()).transaction(gr,"readwrite"),It=dt.objectStore(gr),jt=yield It.get(te),en=j(jt);return void 0===en?yield It.delete(te):yield It.put(en,te),yield dt.done,en&&(!jt||jt.fid!==en.fid)&&Ze(F,en.fid),en})).apply(this,arguments)}function yi(F){return sr.apply(this,arguments)}function sr(){return sr=(0,H.Z)(function*(F){let j;const te=yield Or(F.appConfig,fe=>{const dt=function wn(F){return oi(F||{fid:we(),registrationStatus:0})}(fe),It=function fn(F,j){if(0===j.registrationStatus){if(!navigator.onLine)return{installationEntry:j,registrationPromise:Promise.reject(ae.create("app-offline"))};const te={fid:j.fid,registrationStatus:1,registrationTime:Date.now()},fe=function vn(F,j){return Vn.apply(this,arguments)}(F,te);return{installationEntry:te,registrationPromise:fe}}return 1===j.registrationStatus?{installationEntry:j,registrationPromise:mr(F)}:{installationEntry:j}}(F,dt);return j=It.registrationPromise,It.installationEntry});return te.fid===De?{installationEntry:yield j}:{installationEntry:te,registrationPromise:j}}),sr.apply(this,arguments)}function Vn(){return Vn=(0,H.Z)(function*(F,j){try{const te=yield function nt(F,j){return We.apply(this,arguments)}(F,j);return Dn(F.appConfig,te)}catch(te){throw lt(te)&&409===te.customData.serverCode?yield qt(F.appConfig):yield Dn(F.appConfig,{fid:j.fid,registrationStatus:0}),te}}),Vn.apply(this,arguments)}function mr(F){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,H.Z)(function*(F){let j=yield Sr(F.appConfig);for(;1===j.registrationStatus;)yield gt(100),j=yield Sr(F.appConfig);if(0===j.registrationStatus){const{installationEntry:te,registrationPromise:fe}=yield yi(F);return fe||te}return j})).apply(this,arguments)}function Sr(F){return Or(F,j=>{if(!j)throw ae.create("installation-not-found");return oi(j)})}function oi(F){return function Gi(F){return 1===F.registrationStatus&&F.registrationTime+ce<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function Ii(){return(Ii=(0,H.Z)(function*({appConfig:F,heartbeatServiceProvider:j},te){const fe=function Yn(F,{fid:j}){return`${at(F)}/${j}/authTokens:generate`}(F,te),dt=function Q(F,{refreshToken:j}){const te=Ne(F);return te.append("Authorization",function $e(F){return`${Ae} ${F}`}(j)),te}(F,te),It=j.getImmediate({optional:!0});if(It){const Jn=yield It.getHeartbeatsHeader();Jn&&dt.append("x-firebase-client",Jn)}const en={method:"POST",headers:dt,body:JSON.stringify({installation:{sdkVersion:de,appId:F.appId}})},Fn=yield tt(()=>fetch(fe,en));if(Fn.ok)return Ye(yield Fn.json());throw yield G("Generate Auth Token",Fn)})).apply(this,arguments)}function Oe(F){return Be.apply(this,arguments)}function Be(){return Be=(0,H.Z)(function*(F,j=!1){let te;const fe=yield Or(F.appConfig,It=>{if(!dn(It))throw ae.create("not-registered");const jt=It.authToken;if(!j&&function ir(F){return 2===F.requestStatus&&!function zn(F){const j=Date.now();return j<F.creationTime||F.creationTime+F.expiresIn<j+it}(F)}(jt))return It;if(1===jt.requestStatus)return te=function Se(F,j){return Ge.apply(this,arguments)}(F,j),It;{if(!navigator.onLine)throw ae.create("app-offline");const en=function Wn(F){const j={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:j})}(It);return te=function Lt(F,j){return Qt.apply(this,arguments)}(F,en),en}});return te?yield te:fe.authToken}),Be.apply(this,arguments)}function Ge(){return(Ge=(0,H.Z)(function*(F,j){let te=yield Ue(F.appConfig);for(;1===te.authToken.requestStatus;)yield gt(100),te=yield Ue(F.appConfig);const fe=te.authToken;return 0===fe.requestStatus?Oe(F,j):fe})).apply(this,arguments)}function Ue(F){return Or(F,j=>{if(!dn(j))throw ae.create("not-registered");return function pn(F){return 1===F.requestStatus&&F.requestTime+ce<Date.now()}(j.authToken)?Object.assign(Object.assign({},j),{authToken:{requestStatus:0}}):j})}function Qt(){return Qt=(0,H.Z)(function*(F,j){try{const te=yield function Er(F,j){return Ii.apply(this,arguments)}(F,j),fe=Object.assign(Object.assign({},j),{authToken:te});return yield Dn(F.appConfig,fe),te}catch(te){if(!lt(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const fe=Object.assign(Object.assign({},j),{authToken:{requestStatus:0}});yield Dn(F.appConfig,fe)}else yield qt(F.appConfig);throw te}}),Qt.apply(this,arguments)}function dn(F){return void 0!==F&&2===F.registrationStatus}function Gr(){return(Gr=(0,H.Z)(function*(F){const j=F,{installationEntry:te,registrationPromise:fe}=yield yi(j);return fe?fe.catch(console.error):Oe(j).catch(console.error),te.fid})).apply(this,arguments)}function ut(){return ut=(0,H.Z)(function*(F,j=!1){const te=F;return yield function Je(F){return ge.apply(this,arguments)}(te),(yield Oe(te,j)).token}),ut.apply(this,arguments)}function ge(){return(ge=(0,H.Z)(function*(F){const{registrationPromise:j}=yield yi(F);j&&(yield j)})).apply(this,arguments)}function Pi(F){return ae.create("missing-app-config-values",{valueName:F})}const or="installations",wr=F=>{const j=F.getProvider("app").getImmediate(),te=function bi(F){if(!F||!F.options)throw Pi("App Configuration");if(!F.name)throw Pi("App Name");const j=["projectId","apiKey","appId"];for(const te of j)if(!F.options[te])throw Pi(te);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(j);return{app:j,appConfig:te,heartbeatServiceProvider:(0,xe._getProvider)(j,"heartbeat"),_delete:()=>Promise.resolve()}},hi=F=>{const j=F.getProvider("app").getImmediate(),te=(0,xe._getProvider)(j,or).getImmediate();return{getId:()=>function br(F){return Gr.apply(this,arguments)}(te),getToken:dt=>function ri(F){return ut.apply(this,arguments)}(te,dt)}};(function fi(){(0,xe._registerComponent)(new Pe.wA(or,wr,"PUBLIC")),(0,xe._registerComponent)(new Pe.wA("installations-internal",hi,"PRIVATE"))})(),(0,xe.registerVersion)(Ve,_e),(0,xe.registerVersion)(Ve,_e,"esm2017");const Bn="@firebase/remote-config",Kr=new Re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mn{constructor(j,te,fe,dt){this.client=j,this.storage=te,this.storageCache=fe,this.logger=dt}isCachedDataFresh(j,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-te,dt=fe<=j;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${j}. Is cache hit: ${dt}.`),dt}fetch(j){var te=this;return(0,H.Z)(function*(){const[fe,dt]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(dt&&te.isCachedDataFresh(j.cacheMaxAgeMillis,fe))return dt;j.eTag=dt&&dt.eTag;const It=yield te.client.fetch(j),jt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===It.status&&jt.push(te.storage.setLastSuccessfulFetchResponse(It)),yield Promise.all(jt),It})()}}function jn(F=navigator){return F.languages&&F.languages[0]||F.language}class ar{constructor(j,te,fe,dt,It,jt){this.firebaseInstallations=j,this.sdkVersion=te,this.namespace=fe,this.projectId=dt,this.apiKey=It,this.appId=jt}fetch(j){var te=this;return(0,H.Z)(function*(){var fe,dt,It;const[jt,en]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Jn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,dr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":j.eTag||"*"},Rn={sdk_version:te.sdkVersion,app_instance_id:jt,app_instance_id_token:en,app_id:te.appId,language_code:jn()},ss={method:"POST",headers:dr,body:JSON.stringify(Rn)},yo=fetch(Jn,ss),Da=new Promise((Pa,Al)=>{j.signal.addEventListener(()=>{const $c=new Error("The operation was aborted.");$c.name="AbortError",Al($c)})});let $l;try{yield Promise.race([yo,Da]),$l=yield yo}catch(Pa){let Al="fetch-client-network";throw"AbortError"===(null===(fe=Pa)||void 0===fe?void 0:fe.name)&&(Al="fetch-timeout"),Kr.create(Al,{originalErrorMessage:null===(dt=Pa)||void 0===dt?void 0:dt.message})}let Tl=$l.status;const Ou=$l.headers.get("ETag")||void 0;let ll,oa;if(200===$l.status){let Pa;try{Pa=yield $l.json()}catch(Al){throw Kr.create("fetch-client-parse",{originalErrorMessage:null===(It=Al)||void 0===It?void 0:It.message})}ll=Pa.entries,oa=Pa.state}if("INSTANCE_STATE_UNSPECIFIED"===oa?Tl=500:"NO_CHANGE"===oa?Tl=304:("NO_TEMPLATE"===oa||"EMPTY_CONFIG"===oa)&&(ll={}),304!==Tl&&200!==Tl)throw Kr.create("fetch-status",{httpStatus:Tl});return{status:Tl,eTag:Ou,config:ll}})()}}class Fe{constructor(j,te){this.client=j,this.storage=te}fetch(j){var te=this;return(0,H.Z)(function*(){const fe=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(j,fe)})()}attemptFetch(j,{throttleEndTimeMillis:te,backoffCount:fe}){var dt=this;return(0,H.Z)(function*(){yield function xr(F,j){return new Promise((te,fe)=>{const dt=Math.max(j-Date.now(),0),It=setTimeout(te,dt);F.addEventListener(()=>{clearTimeout(It),fe(Kr.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}(j.signal,te);try{const It=yield dt.client.fetch(j);return yield dt.storage.deleteThrottleMetadata(),It}catch(It){if(!function st(F){if(!(F instanceof Re.ZR&&F.customData))return!1;const j=Number(F.customData.httpStatus);return 429===j||500===j||503===j||504===j}(It))throw It;const jt={throttleEndTimeMillis:Date.now()+(0,Re.$s)(fe),backoffCount:fe+1};return yield dt.storage.setThrottleMetadata(jt),dt.attemptFetch(j,jt)}})()}}class Jt{constructor(j,te,fe,dt,It){this.app=j,this._client=te,this._storageCache=fe,this._storage=dt,this._logger=It,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gn(F,j){var te;const fe=F.target.error||void 0;return Kr.create(j,{originalErrorMessage:fe&&(null===(te=fe)||void 0===te?void 0:te.message)})}const qn="app_namespace_store";class ai{constructor(j,te,fe,dt=function hs(){return new Promise((F,j)=>{var te;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=dt=>{j(gn(dt,"storage-open"))},fe.onsuccess=dt=>{F(dt.target.result)},fe.onupgradeneeded=dt=>{0===dt.oldVersion&&dt.target.result.createObjectStore(qn,{keyPath:"compositeKey"})}}catch(fe){j(Kr.create("storage-open",{originalErrorMessage:null===(te=fe)||void 0===te?void 0:te.message}))}})}()){this.appId=j,this.appName=te,this.namespace=fe,this.openDbPromise=dt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(j){return this.set("last_fetch_status",j)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(j){return this.set("last_successful_fetch_timestamp_millis",j)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(j){return this.set("last_successful_fetch_response",j)}getActiveConfig(){return this.get("active_config")}setActiveConfig(j){return this.set("active_config",j)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(j){return this.set("active_config_etag",j)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(j){return this.set("throttle_metadata",j)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(j){var te=this;return(0,H.Z)(function*(){const fe=yield te.openDbPromise;return new Promise((dt,It)=>{var jt;const Fn=fe.transaction([qn],"readonly").objectStore(qn),Jn=te.createCompositeKey(j);try{const dr=Fn.get(Jn);dr.onerror=Rn=>{It(gn(Rn,"storage-get"))},dr.onsuccess=Rn=>{const ss=Rn.target.result;dt(ss?ss.value:void 0)}}catch(dr){It(Kr.create("storage-get",{originalErrorMessage:null===(jt=dr)||void 0===jt?void 0:jt.message}))}})})()}set(j,te){var fe=this;return(0,H.Z)(function*(){const dt=yield fe.openDbPromise;return new Promise((It,jt)=>{var en;const Jn=dt.transaction([qn],"readwrite").objectStore(qn),dr=fe.createCompositeKey(j);try{const Rn=Jn.put({compositeKey:dr,value:te});Rn.onerror=ss=>{jt(gn(ss,"storage-set"))},Rn.onsuccess=()=>{It()}}catch(Rn){jt(Kr.create("storage-set",{originalErrorMessage:null===(en=Rn)||void 0===en?void 0:en.message}))}})})()}delete(j){var te=this;return(0,H.Z)(function*(){const fe=yield te.openDbPromise;return new Promise((dt,It)=>{var jt;const Fn=fe.transaction([qn],"readwrite").objectStore(qn),Jn=te.createCompositeKey(j);try{const dr=Fn.delete(Jn);dr.onerror=Rn=>{It(gn(Rn,"storage-delete"))},dr.onsuccess=()=>{dt()}}catch(dr){It(Kr.create("storage-delete",{originalErrorMessage:null===(jt=dr)||void 0===jt?void 0:jt.message}))}})})()}createCompositeKey(j){return[this.appId,this.appName,this.namespace,j].join()}}class Ji{constructor(j){this.storage=j}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var j=this;return(0,H.Z)(function*(){const te=j.storage.getLastFetchStatus(),fe=j.storage.getLastSuccessfulFetchTimestampMillis(),dt=j.storage.getActiveConfig(),It=yield te;It&&(j.lastFetchStatus=It);const jt=yield fe;jt&&(j.lastSuccessfulFetchTimestampMillis=jt);const en=yield dt;en&&(j.activeConfig=en)})()}setLastFetchStatus(j){return this.lastFetchStatus=j,this.storage.setLastFetchStatus(j)}setLastSuccessfulFetchTimestampMillis(j){return this.lastSuccessfulFetchTimestampMillis=j,this.storage.setLastSuccessfulFetchTimestampMillis(j)}setActiveConfig(j){return this.activeConfig=j,this.storage.setActiveConfig(j)}}function xi(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,H.Z)(function*(){if(!(0,Re.hl)())return!1;try{return yield(0,Re.eu)()}catch(F){return!1}})).apply(this,arguments)}!function es(){(0,xe._registerComponent)(new Pe.wA("remote-config",function F(j,{instanceIdentifier:te}){const fe=j.getProvider("app").getImmediate(),dt=j.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kr.create("registration-window");if(!(0,Re.hl)())throw Kr.create("indexed-db-unavailable");const{projectId:It,apiKey:jt,appId:en}=fe.options;if(!It)throw Kr.create("registration-project-id");if(!jt)throw Kr.create("registration-api-key");if(!en)throw Kr.create("registration-app-id");const Fn=new ai(en,fe.name,te=te||"firebase"),Jn=new Ji(Fn),dr=new me.Yd(Bn);dr.logLevel=me.in.ERROR;const Rn=new ar(dt,xe.SDK_VERSION,te,It,jt,en),ss=new Fe(Rn,Fn),yo=new mn(ss,Fn,Jn,dr),Da=new Jt(fe,yo,Jn,Fn,dr);return function he(F){const j=(0,Re.m9)(F);j._initializePromise||(j._initializePromise=j._storageCache.loadFromStorage().then(()=>{j._isInitializationComplete=!0}))}(Da),Da},"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(Bn,"0.3.11"),(0,xe.registerVersion)(Bn,"0.3.11","esm2017")}();const Qo="/firebase-messaging-sw.js",Is="/firebase-cloud-messaging-push-scope",Di="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xs="https://fcmregistrations.googleapis.com/v1",Eo="google.c.a.c_id",Ro="google.c.a.c_l",da="google.c.a.ts",wo="google.c.a.e";var Ms=(()=>{return(F=Ms||(Ms={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Ms;var F})();function zi(F){const j=new Uint8Array(F);return btoa(String.fromCharCode(...j)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Io(F){const te=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(te),dt=new Uint8Array(fe.length);for(let It=0;It<fe.length;++It)dt[It]=fe.charCodeAt(It);return dt}const bs="fcm_token_details_db",bo=5,ps="fcm_token_object_Store";function Zs(){return Zs=(0,H.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(It=>It.name).includes(bs))return null;let j=null;return(yield(0,Te.X3)(bs,bo,{upgrade:(fe=(0,H.Z)(function*(dt,It,jt,en){var Fn;if(It<2||!dt.objectStoreNames.contains(ps))return;const Jn=en.objectStore(ps),dr=yield Jn.index("fcmSenderId").get(F);if(yield Jn.clear(),dr)if(2===It){const Rn=dr;if(!Rn.auth||!Rn.p256dh||!Rn.endpoint)return;j={token:Rn.fcmToken,createTime:null!==(Fn=Rn.createTime)&&void 0!==Fn?Fn:Date.now(),subscriptionOptions:{auth:Rn.auth,p256dh:Rn.p256dh,endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:"string"==typeof Rn.vapidKey?Rn.vapidKey:zi(Rn.vapidKey)}}}else if(3===It){const Rn=dr;j={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:zi(Rn.auth),p256dh:zi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:zi(Rn.vapidKey)}}}else if(4===It){const Rn=dr;j={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:zi(Rn.auth),p256dh:zi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:zi(Rn.vapidKey)}}}}),function(It,jt,en,Fn){return fe.apply(this,arguments)})})).close(),yield(0,Te.Lj)(bs),yield(0,Te.Lj)("fcm_vapid_details_db"),yield(0,Te.Lj)("undefined"),function Co(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:j}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof j.auth&&j.auth.length>0&&"string"==typeof j.p256dh&&j.p256dh.length>0&&"string"==typeof j.endpoint&&j.endpoint.length>0&&"string"==typeof j.swScope&&j.swScope.length>0&&"string"==typeof j.vapidKey&&j.vapidKey.length>0}(j)?j:null;var fe}),Zs.apply(this,arguments)}const cs="firebase-messaging-database",Oo=1,gs="firebase-messaging-store";let Rs=null;function Wi(){return Rs||(Rs=(0,Te.X3)(cs,Oo,{upgrade:(F,j)=>{0===j&&F.createObjectStore(gs)}})),Rs}function ds(F){return ks.apply(this,arguments)}function ks(){return ks=(0,H.Z)(function*(F){const j=Xs(F),fe=yield(yield Wi()).transaction(gs).objectStore(gs).get(j);if(fe)return fe;{const dt=yield function js(F){return Zs.apply(this,arguments)}(F.appConfig.senderId);if(dt)return yield ms(F,dt),dt}}),ks.apply(this,arguments)}function ms(F,j){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,H.Z)(function*(F,j){const te=Xs(F),dt=(yield Wi()).transaction(gs,"readwrite");return yield dt.objectStore(gs).put(j,te),yield dt.done,j})).apply(this,arguments)}function uo(){return(uo=(0,H.Z)(function*(F){const j=Xs(F),fe=(yield Wi()).transaction(gs,"readwrite");yield fe.objectStore(gs).delete(j),yield fe.done})).apply(this,arguments)}function Xs({appConfig:F}){return F.appId}const yr=new Re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ys(F,j){return Po.apply(this,arguments)}function Po(){return(Po=(0,H.Z)(function*(F,j){var te;const fe=yield Do(F),dt=Ri(j),It={method:"POST",headers:fe,body:JSON.stringify(dt)};let jt;try{jt=yield(yield fetch(ha(F.appConfig),It)).json()}catch(en){throw yr.create("token-subscribe-failed",{errorInfo:null===(te=en)||void 0===te?void 0:te.toString()})}if(jt.error)throw yr.create("token-subscribe-failed",{errorInfo:jt.error.message});if(!jt.token)throw yr.create("token-subscribe-no-token");return jt.token})).apply(this,arguments)}function Jo(){return(Jo=(0,H.Z)(function*(F,j){var te;const fe=yield Do(F),dt=Ri(j.subscriptionOptions),It={method:"PATCH",headers:fe,body:JSON.stringify(dt)};let jt;try{jt=yield(yield fetch(`${ha(F.appConfig)}/${j.token}`,It)).json()}catch(en){throw yr.create("token-update-failed",{errorInfo:null===(te=en)||void 0===te?void 0:te.toString()})}if(jt.error)throw yr.create("token-update-failed",{errorInfo:jt.error.message});if(!jt.token)throw yr.create("token-update-no-token");return jt.token})).apply(this,arguments)}function Hs(F,j){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,H.Z)(function*(F,j){var te;const dt={method:"DELETE",headers:yield Do(F)};try{const jt=yield(yield fetch(`${ha(F.appConfig)}/${j}`,dt)).json();if(jt.error)throw yr.create("token-unsubscribe-failed",{errorInfo:jt.error.message})}catch(It){throw yr.create("token-unsubscribe-failed",{errorInfo:null===(te=It)||void 0===te?void 0:te.toString()})}})).apply(this,arguments)}function ha({projectId:F}){return`${xs}/projects/${F}/registrations`}function Do(F){return qi.apply(this,arguments)}function qi(){return(qi=(0,H.Z)(function*({appConfig:F,installations:j}){const te=yield j.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function Ri({p256dh:F,auth:j,endpoint:te,vapidKey:fe}){const dt={web:{endpoint:te,auth:j,p256dh:F}};return fe!==Di&&(dt.web.applicationPubKey=fe),dt}const vs=6048e5;function zs(){return zs=(0,H.Z)(function*(F){const j=yield function Qs(F,j){return So.apply(this,arguments)}(F.swRegistration,F.vapidKey),te={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:j.endpoint,auth:zi(j.getKey("auth")),p256dh:zi(j.getKey("p256dh"))},fe=yield ds(F.firebaseDependencies);if(fe){if(function Ua(F,j){return j.vapidKey===F.vapidKey&&j.endpoint===F.endpoint&&j.auth===F.auth&&j.p256dh===F.p256dh}(fe.subscriptionOptions,te))return Date.now()>=fe.createTime+vs?function ea(F,j){return er.apply(this,arguments)}(F,{token:fe.token,createTime:Date.now(),subscriptionOptions:te}):fe.token;try{yield Hs(F.firebaseDependencies,fe.token)}catch(dt){console.warn(dt)}return Ma(F.firebaseDependencies,te)}return Ma(F.firebaseDependencies,te)}),zs.apply(this,arguments)}function ko(){return ko=(0,H.Z)(function*(F){const j=yield ds(F.firebaseDependencies);j&&(yield Hs(F.firebaseDependencies,j.token),yield function Xr(F){return uo.apply(this,arguments)}(F.firebaseDependencies));const te=yield F.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()}),ko.apply(this,arguments)}function er(){return er=(0,H.Z)(function*(F,j){try{const te=yield function Zr(F,j){return Jo.apply(this,arguments)}(F.firebaseDependencies,j),fe=Object.assign(Object.assign({},j),{token:te,createTime:Date.now()});return yield ms(F.firebaseDependencies,fe),te}catch(te){throw yield function Os(F){return ko.apply(this,arguments)}(F),te}}),er.apply(this,arguments)}function Ma(F,j){return Va.apply(this,arguments)}function Va(){return(Va=(0,H.Z)(function*(F,j){const fe={token:yield ys(F,j),createTime:Date.now(),subscriptionOptions:j};return yield ms(F,fe),fe.token})).apply(this,arguments)}function So(){return(So=(0,H.Z)(function*(F,j){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Io(j)})})).apply(this,arguments)}function ja(F){const j={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function co(F,j){if(!j.notification)return;F.notification={};const te=j.notification.title;te&&(F.notification.title=te);const fe=j.notification.body;fe&&(F.notification.body=fe);const dt=j.notification.image;dt&&(F.notification.image=dt)}(j,F),function m(F,j){j.data&&(F.data=j.data)}(j,F),function w(F,j){var te,fe,dt,It,jt;if(!(j.fcmOptions||null!==(te=j.notification)&&void 0!==te&&te.click_action))return;F.fcmOptions={};const en=null!==(dt=null===(fe=j.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==dt?dt:null===(It=j.notification)||void 0===It?void 0:It.click_action;en&&(F.fcmOptions.link=en);const Fn=null===(jt=j.fcmOptions)||void 0===jt?void 0:jt.analytics_label;Fn&&(F.fcmOptions.analyticsLabel=Fn)}(j,F),j}function S(F,j){const te=[];for(let fe=0;fe<F.length;fe++)te.push(F.charAt(fe)),fe<j.length&&te.push(j.charAt(fe));return te.join("")}function ze(F){return yr.create("missing-app-config-values",{valueName:F})}S("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),S("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zt{constructor(j,te,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const dt=function W(F){if(!F||!F.options)throw ze("App Configuration Object");if(!F.name)throw ze("App Name");const j=["projectId","apiKey","appId","messagingSenderId"],{options:te}=F;for(const fe of j)if(!te[fe])throw ze(fe);return{appName:F.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(j);this.firebaseDependencies={app:j,appConfig:dt,installations:te,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function ln(F){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,H.Z)(function*(F){var j;try{F.swRegistration=yield navigator.serviceWorker.register(Qo,{scope:Is}),F.swRegistration.update().catch(()=>{})}catch(te){throw yr.create("failed-service-worker-registration",{browserErrorMessage:null===(j=te)||void 0===j?void 0:j.message})}})).apply(this,arguments)}function ti(){return(ti=(0,H.Z)(function*(F,j){if(!j&&!F.swRegistration&&(yield ln(F)),j||!F.swRegistration){if(!(j instanceof ServiceWorkerRegistration))throw yr.create("invalid-sw-registration");F.swRegistration=j}})).apply(this,arguments)}function ts(){return(ts=(0,H.Z)(function*(F,j){j?F.vapidKey=j:F.vapidKey||(F.vapidKey=Di)})).apply(this,arguments)}function ni(){return ni=(0,H.Z)(function*(F,j){if(!navigator)throw yr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yr.create("permission-blocked");return yield function $n(F,j){return ts.apply(this,arguments)}(F,null==j?void 0:j.vapidKey),yield function lr(F,j){return ti.apply(this,arguments)}(F,null==j?void 0:j.serviceWorkerRegistration),function Gs(F){return zs.apply(this,arguments)}(F)}),ni.apply(this,arguments)}function No(){return(No=(0,H.Z)(function*(F,j,te){const fe=function fa(F){switch(F){case Ms.NOTIFICATION_CLICKED:return"notification_open";case Ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(j);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:te[Eo],message_name:te[Ro],message_time:te[da],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function To(){return To=(0,H.Z)(function*(F,j){const te=j.data;if(!te.isFirebaseMessaging)return;F.onMessageHandler&&te.messageType===Ms.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(ja(te)):F.onMessageHandler.next(ja(te)));const fe=te.data;(function f(F){return"object"==typeof F&&!!F&&Eo in F})(fe)&&"1"===fe[wo]&&(yield function Ki(F,j,te){return No.apply(this,arguments)}(F,te.messageType,fe))}),To.apply(this,arguments)}const pa="@firebase/messaging",Lo=F=>{const j=new zt(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function ho(F,j){return To.apply(this,arguments)}(j,te)),j},Js=F=>{const j=F.getProvider("messaging").getImmediate();return{getToken:fe=>function Cs(F,j){return ni.apply(this,arguments)}(j,fe)}};function fo(){return po.apply(this,arguments)}function po(){return(po=(0,H.Z)(function*(){try{yield(0,Re.eu)()}catch(F){return!1}return typeof window<"u"&&(0,Re.hl)()&&(0,Re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ga(){(0,xe._registerComponent)(new Pe.wA("messaging",Lo,"PUBLIC")),(0,xe._registerComponent)(new Pe.wA("messaging-internal",Js,"PRIVATE")),(0,xe.registerVersion)(pa,"0.9.16"),(0,xe.registerVersion)(pa,"0.9.16","esm2017")}();const na="analytics",Bo="firebase_id",mi="origin",Ds=6e4,li="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ya="https://www.googletagmanager.com/gtag/js",Zi=new me.Yd("@firebase/analytics");function Fl(F){return Promise.all(F.map(j=>j.catch(te=>te)))}function _a(){return(_a=(0,H.Z)(function*(F,j,te,fe,dt,It){const jt=fe[dt];try{if(jt)yield j[jt];else{const Fn=(yield Fl(te)).find(Jn=>Jn.measurementId===dt);Fn&&(yield j[Fn.appId])}}catch(en){Zi.error(en)}F("config",dt,It)})).apply(this,arguments)}function N(){return(N=(0,H.Z)(function*(F,j,te,fe,dt){try{let It=[];if(dt&&dt.send_to){let jt=dt.send_to;Array.isArray(jt)||(jt=[jt]);const en=yield Fl(te);for(const Fn of jt){const Jn=en.find(Rn=>Rn.measurementId===Fn),dr=Jn&&j[Jn.appId];if(!dr){It=[];break}It.push(dr)}}0===It.length&&(It=Object.values(j)),yield Promise.all(It),F("event",fe,dt||{})}catch(It){Zi.error(It)}})).apply(this,arguments)}const Et=new Re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$t=30,Mr=new class vr{constructor(j={},te=1e3){this.throttleMetadata=j,this.intervalMillis=te}getThrottleMetadata(j){return this.throttleMetadata[j]}setThrottleMetadata(j,te){this.throttleMetadata[j]=te}deleteThrottleMetadata(j){delete this.throttleMetadata[j]}};function jr(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Ni(){return(Ni=(0,H.Z)(function*(F){var j;const{appId:te,apiKey:fe}=F,dt={method:"GET",headers:jr(fe)},It=li.replace("{app-id}",te),jt=yield fetch(It,dt);if(200!==jt.status&&304!==jt.status){let en="";try{const Fn=yield jt.json();null!==(j=Fn.error)&&void 0!==j&&j.message&&(en=Fn.error.message)}catch(Fn){}throw Et.create("config-fetch-failed",{httpStatus:jt.status,responseMessage:en})}return jt.json()})).apply(this,arguments)}function Vi(){return(Vi=(0,H.Z)(function*(F,j=Mr,te){const{appId:fe,apiKey:dt,measurementId:It}=F.options;if(!fe)throw Et.create("no-app-id");if(!dt){if(It)return{measurementId:It,appId:fe};throw Et.create("no-api-key")}const jt=j.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},en=new ra;return setTimeout((0,H.Z)(function*(){en.abort()}),void 0!==te?te:Ds),to({appId:fe,apiKey:dt,measurementId:It},jt,en,j)})).apply(this,arguments)}function to(F,j,te){return si.apply(this,arguments)}function si(){return si=(0,H.Z)(function*(F,{throttleEndTimeMillis:j,backoffCount:te},fe,dt=Mr){var It,jt;const{appId:en,measurementId:Fn}=F;try{yield function ns(F,j){return new Promise((te,fe)=>{const dt=Math.max(j-Date.now(),0),It=setTimeout(te,dt);F.addEventListener(()=>{clearTimeout(It),fe(Et.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}(fe,j)}catch(Jn){if(Fn)return Zi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fn} provided in the "measurementId" field in the local Firebase config. [${null===(It=Jn)||void 0===It?void 0:It.message}]`),{appId:en,measurementId:Fn};throw Jn}try{const Jn=yield function _r(F){return Ni.apply(this,arguments)}(F);return dt.deleteThrottleMetadata(en),Jn}catch(Jn){const dr=Jn;if(!function rs(F){if(!(F instanceof Re.ZR&&F.customData))return!1;const j=Number(F.customData.httpStatus);return 429===j||500===j||503===j||504===j}(dr)){if(dt.deleteThrottleMetadata(en),Fn)return Zi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fn} provided in the "measurementId" field in the local Firebase config. [${null==dr?void 0:dr.message}]`),{appId:en,measurementId:Fn};throw Jn}const Rn=503===Number(null===(jt=null==dr?void 0:dr.customData)||void 0===jt?void 0:jt.httpStatus)?(0,Re.$s)(te,dt.intervalMillis,$t):(0,Re.$s)(te,dt.intervalMillis),ss={throttleEndTimeMillis:Date.now()+Rn,backoffCount:te+1};return dt.setThrottleMetadata(en,ss),Zi.debug(`Calling attemptFetch again in ${Rn} millis`),to(F,ss,fe,dt)}}),si.apply(this,arguments)}class ra{constructor(){this.listeners=[]}addEventListener(j){this.listeners.push(j)}abort(){this.listeners.forEach(j=>j())}}let Fs,Fi;function _i(){return(_i=(0,H.Z)(function*(F,j,te,fe,dt){if(dt&&dt.global)F("event",te,fe);else{const It=yield j;F("event",te,Object.assign(Object.assign({},fe),{send_to:It}))}})).apply(this,arguments)}function Bl(){return(Bl=(0,H.Z)(function*(){var F;if(!(0,Re.hl)())return Zi.warn(Et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Re.eu)()}catch(j){return Zi.warn(Et.create("indexeddb-unavailable",{errorInfo:null===(F=j)||void 0===F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function ou(){return ou=(0,H.Z)(function*(F,j,te,fe,dt,It,jt){var en;const Fn=function ur(F){return Vi.apply(this,arguments)}(F);Fn.then(yo=>{te[yo.measurementId]=yo.appId,F.options.measurementId&&yo.measurementId!==F.options.measurementId&&Zi.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${yo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yo=>Zi.error(yo)),j.push(Fn);const Jn=function su(){return Bl.apply(this,arguments)}().then(yo=>{if(yo)return fe.getId()}),[dr,Rn]=yield Promise.all([Fn,Jn]);(function ie(){const F=window.document.getElementsByTagName("script");for(const j of Object.values(F))if(j.src&&j.src.includes(ya))return j;return null})()||function _s(F,j){const te=document.createElement("script");te.src=`${ya}?l=${F}&id=${j}`,te.async=!0,document.head.appendChild(te)}(It,dr.measurementId),Fi&&(dt("consent","default",Fi),function Il(F){Fi=F}(void 0)),dt("js",new Date);const ss=null!==(en=null==jt?void 0:jt.config)&&void 0!==en?en:{};return ss[mi]="firebase",ss.update=!0,null!=Rn&&(ss[Bo]=Rn),dt("config",dr.measurementId,ss),Fs&&(dt("set",Fs),function bl(F){Fs=F}(void 0)),dr.measurementId}),ou.apply(this,arguments)}class xu{constructor(j){this.app=j}_delete(){return delete wa[this.app.options.appId],Promise.resolve()}}let wa={},au=[];const ro={};let il,ia,Ia="dataLayer",Qn="gtag",pi=!1;function Qr(F,j,te){!function Cl(){const F=[];if((0,Re.ru)()&&F.push("This is a browser extension environment."),(0,Re.zI)()||F.push("Cookies are not available."),F.length>0){const j=F.map((fe,dt)=>`(${dt+1}) ${fe}`).join(" "),te=Et.create("invalid-analytics-context",{errorInfo:j});Zi.warn(te.message)}}();const fe=F.options.appId;if(!fe)throw Et.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw Et.create("no-api-key");Zi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wa[fe])throw Et.create("already-exists",{id:fe});if(!pi){!function va(F){let j=[];Array.isArray(window[F])?j=window[F]:window[F]=j}(Ia);const{wrappedGtag:It,gtagCore:jt}=function B(F,j,te,fe,dt){let It=function(...jt){window[fe].push(arguments)};return window[dt]&&"function"==typeof window[dt]&&(It=window[dt]),window[dt]=function q(F,j,te,fe){function It(){return It=(0,H.Z)(function*(jt,en,Fn){try{"event"===jt?yield function wl(F,j,te,fe,dt){return N.apply(this,arguments)}(F,j,te,en,Fn):"config"===jt?yield function Ll(F,j,te,fe,dt,It){return _a.apply(this,arguments)}(F,j,te,fe,en,Fn):"consent"===jt?F("consent","update",Fn):F("set",en)}catch(Jn){Zi.error(Jn)}}),It.apply(this,arguments)}return function dt(jt,en,Fn){return It.apply(this,arguments)}}(It,F,j,te),{gtagCore:It,wrappedGtag:window[dt]}}(wa,au,ro,Ia,Qn);ia=It,il=jt,pi=!0}return wa[fe]=function Ra(F,j,te,fe,dt,It,jt){return ou.apply(this,arguments)}(F,au,ro,j,il,Ia,te),new xu(F)}function rn(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,H.Z)(function*(){if((0,Re.ru)()||!(0,Re.zI)()||!(0,Re.hl)())return!1;try{return yield(0,Re.eu)()}catch(F){return!1}})).apply(this,arguments)}const lu="@firebase/analytics";!function Mu(){(0,xe._registerComponent)(new Pe.wA(na,(j,{options:te})=>Qr(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,xe._registerComponent)(new Pe.wA("analytics-internal",function F(j){try{const te=j.getProvider(na).getImmediate();return{logEvent:(fe,dt,It)=>function Ha(F,j,te,fe){F=(0,Re.m9)(F),function Xt(F,j,te,fe,dt){return _i.apply(this,arguments)}(ia,wa[F.app.options.appId],j,te,fe).catch(dt=>Zi.error(dt))}(te,fe,dt,It)}}catch(te){throw Et.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,xe.registerVersion)(lu,"0.8.0"),(0,xe.registerVersion)(lu,"0.8.0","esm2017")}();var jo=V(4408),xt=V(7565);const go=new class Sl extends xt.v{}(class Ru extends jo.o{constructor(j,te){super(j,te),this.scheduler=j,this.work=te}schedule(j,te=0){return te>0?super.schedule(j,te):(this.delay=te,this.state=j,this.scheduler.flush(this),this)}execute(j,te){return te>0||this.closed?super.execute(j,te):this._execute(j,te)}requestAsyncId(j,te,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(j,te,fe):(j.flush(this),0)}});var sa=V(4986),Ao=V(8505),ol=V(5363),ui=V(9468);const ci=new u.GfV("7.5.0"),Nr="__angularfire_symbol__analyticsIsSupportedValue",Fr="__angularfire_symbol__analyticsIsSupported",Xi="__angularfire_symbol__remoteConfigIsSupportedValue",cr="__angularfire_symbol__remoteConfigIsSupported",al="__angularfire_symbol__messagingIsSupportedValue",Ho="__angularfire_symbol__messagingIsSupported";function Tr(F,j,te){if(j){if(1===j.length)return j[0];const It=j.filter(jt=>jt.app===te);if(1===It.length)return It[0]}return te.container.getProvider(F).getImmediate({optional:!0})}globalThis[Fr]||(globalThis[Fr]=rn().then(F=>globalThis[Nr]=F).catch(()=>globalThis[Nr]=!1)),globalThis[Ho]||(globalThis[Ho]=fo().then(F=>globalThis[al]=F).catch(()=>globalThis[al]=!1)),globalThis[cr]||(globalThis[cr]=xi().then(F=>globalThis[Xi]=F).catch(()=>globalThis[Xi]=!1));const io=(F,j)=>{const te=j?[j]:(0,J.C6)(),fe=[];return te.forEach(dt=>{dt.container.getProvider(F).instances.forEach(jt=>{fe.includes(jt)||fe.push(jt)})}),fe};function A(){}class x{constructor(j,te=go){this.zone=j,this.delegate=te}now(){return this.delegate.now()}schedule(j,te,fe){const dt=this.zone;return this.delegate.schedule(function(jt){dt.runGuarded(()=>{j.apply(this,[jt])})},te,fe)}}class b{constructor(j){this.zone=j,this.task=null}call(j,te){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",A,{},A,A)),te.pipe((0,Ao.b)({next:fe,complete:fe,error:fe})).subscribe(j).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let O=(()=>{class F{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new x(Zone.current)),this.insideAngular=te.run(()=>new x(Zone.current,sa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(te){return new(te||F)(u.LFG(u.R0b))},F.\u0275prov=u.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function U(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function Xe(F){return F.pipe((0,ol.Q)(U().outsideAngular))}function an(F){return U(),function En(F){return function(te){return(te=te.lift(new b(F.ngZone))).pipe((0,ui.R)(F.outsideAngular),(0,ol.Q)(F.insideAngular))}}(U())(F)}},2090:(un,yt,V)=>{"use strict";V.d(yt,{$s:()=>Gi,BH:()=>Ae,DV:()=>Ot,Dv:()=>Or,G6:()=>Ne,GJ:()=>Ze,L:()=>Te,LL:()=>We,Mn:()=>G,Pz:()=>De,Sg:()=>je,UG:()=>Ce,UI:()=>Ct,US:()=>Pe,Wj:()=>sr,Yr:()=>Me,ZB:()=>ce,ZR:()=>nt,b$:()=>lt,cI:()=>Ie,d:()=>at,dS:()=>fn,eu:()=>tt,g5:()=>H,gK:()=>hr,gQ:()=>Gn,h$:()=>me,hl:()=>Q,hu:()=>J,jU:()=>ve,lb:()=>wn,m9:()=>Yn,ne:()=>Ir,p$:()=>_e,pd:()=>gr,r3:()=>Pt,ru:()=>ae,tV:()=>Ve,uI:()=>bt,ug:()=>vn,vZ:()=>An,w1:()=>Ye,w9:()=>rt,xO:()=>xn,xb:()=>kt,z$:()=>it,zI:()=>Le,zd:()=>Ht});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(Oe,Be){if(!Oe)throw H(Be)},H=function(Oe){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Oe)},xe=function(Oe){const Be=[];let Se=0;for(let Ge=0;Ge<Oe.length;Ge++){let Ue=Oe.charCodeAt(Ge);Ue<128?Be[Se++]=Ue:Ue<2048?(Be[Se++]=Ue>>6|192,Be[Se++]=63&Ue|128):55296==(64512&Ue)&&Ge+1<Oe.length&&56320==(64512&Oe.charCodeAt(Ge+1))?(Ue=65536+((1023&Ue)<<10)+(1023&Oe.charCodeAt(++Ge)),Be[Se++]=Ue>>18|240,Be[Se++]=Ue>>12&63|128,Be[Se++]=Ue>>6&63|128,Be[Se++]=63&Ue|128):(Be[Se++]=Ue>>12|224,Be[Se++]=Ue>>6&63|128,Be[Se++]=63&Ue|128)}return Be},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,Be){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Se=Be?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ge=[];for(let Ue=0;Ue<Oe.length;Ue+=3){const Lt=Oe[Ue],Qt=Ue+1<Oe.length,dn=Qt?Oe[Ue+1]:0,ir=Ue+2<Oe.length,zn=ir?Oe[Ue+2]:0;let br=(15&dn)<<2|zn>>6,Gr=63&zn;ir||(Gr=64,Qt||(br=64)),Ge.push(Se[Lt>>2],Se[(3&Lt)<<4|dn>>4],Se[br],Se[Gr])}return Ge.join("")},encodeString(Oe,Be){return this.HAS_NATIVE_SUPPORT&&!Be?btoa(Oe):this.encodeByteArray(xe(Oe),Be)},decodeString(Oe,Be){return this.HAS_NATIVE_SUPPORT&&!Be?atob(Oe):function(Oe){const Be=[];let Se=0,Ge=0;for(;Se<Oe.length;){const Ue=Oe[Se++];if(Ue<128)Be[Ge++]=String.fromCharCode(Ue);else if(Ue>191&&Ue<224){const Lt=Oe[Se++];Be[Ge++]=String.fromCharCode((31&Ue)<<6|63&Lt)}else if(Ue>239&&Ue<365){const ir=((7&Ue)<<18|(63&Oe[Se++])<<12|(63&Oe[Se++])<<6|63&Oe[Se++])-65536;Be[Ge++]=String.fromCharCode(55296+(ir>>10)),Be[Ge++]=String.fromCharCode(56320+(1023&ir))}else{const Lt=Oe[Se++],Qt=Oe[Se++];Be[Ge++]=String.fromCharCode((15&Ue)<<12|(63&Lt)<<6|63&Qt)}}return Be.join("")}(this.decodeStringToByteArray(Oe,Be))},decodeStringToByteArray(Oe,Be){this.init_();const Se=Be?this.charToByteMapWebSafe_:this.charToByteMap_,Ge=[];for(let Ue=0;Ue<Oe.length;){const Lt=Se[Oe.charAt(Ue++)],dn=Ue<Oe.length?Se[Oe.charAt(Ue)]:0;++Ue;const zn=Ue<Oe.length?Se[Oe.charAt(Ue)]:64;++Ue;const pn=Ue<Oe.length?Se[Oe.charAt(Ue)]:64;if(++Ue,null==Lt||null==dn||null==zn||null==pn)throw Error();Ge.push(Lt<<2|dn>>4),64!==zn&&(Ge.push(dn<<4&240|zn>>2),64!==pn&&Ge.push(zn<<6&192|pn))}return Ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}},me=function(Oe){const Be=xe(Oe);return Pe.encodeByteArray(Be,!0)},Te=function(Oe){return me(Oe).replace(/\./g,"")},Ve=function(Oe){try{return Pe.decodeString(Oe,!0)}catch(Be){console.error("base64Decode failed: ",Be)}return null};function _e(Oe){return ce(void 0,Oe)}function ce(Oe,Be){if(!(Be instanceof Object))return Be;switch(Be.constructor){case Date:return new Date(Be.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return Be}for(const Se in Be)!Be.hasOwnProperty(Se)||!de(Se)||(Oe[Se]=ce(Oe[Se],Be[Se]));return Oe}function de(Oe){return"__proto__"!==Oe}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Be,Se)=>{this.resolve=Be,this.reject=Se})}wrapCallback(Be){return(Se,Ge)=>{Se?this.reject(Se):this.resolve(Ge),"function"==typeof Be&&(this.promise.catch(()=>{}),1===Be.length?Be(Se):Be(Se,Ge))}}}function je(Oe,Be){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ge=Be||"demo-project",Ue=Oe.iat||0,Lt=Oe.sub||Oe.user_id;if(!Lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qt=Object.assign({iss:`https://securetoken.google.com/${Ge}`,aud:Ge,iat:Ue,exp:Ue+3600,auth_time:Ue,sub:Lt,user_id:Lt,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(Qt)),""].join(".")}function it(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Oe){return!1}}function ve(){return"object"==typeof self&&self.self===self}function ae(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function at(){return it().indexOf("Electron/")>=0}function Ye(){const Oe=it();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function G(){return it().indexOf("MSAppHost/")>=0}function Me(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ne(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){return"object"==typeof indexedDB}function tt(){return new Promise((Oe,Be)=>{try{let Se=!0;const Ge="validate-browser-context-for-indexeddb-analytics-module",Ue=self.indexedDB.open(Ge);Ue.onsuccess=()=>{Ue.result.close(),Se||self.indexedDB.deleteDatabase(Ge),Oe(!0)},Ue.onupgradeneeded=()=>{Se=!1},Ue.onerror=()=>{var Lt;Be((null===(Lt=Ue.error)||void 0===Lt?void 0:Lt.message)||"")}}catch(Se){Be(Se)}})}function Le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nt extends Error{constructor(Be,Se,Ge){super(Se),this.code=Be,this.customData=Ge,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(Be,Se,Ge){this.service=Be,this.serviceName=Se,this.errors=Ge}create(Be,...Se){const Ge=Se[0]||{},Ue=`${this.service}/${Be}`,Lt=this.errors[Be],Qt=Lt?function gt(Oe,Be){return Oe.replace(ot,(Se,Ge)=>{const Ue=Be[Ge];return null!=Ue?String(Ue):`<${Ge}?>`})}(Lt,Ge):"Error";return new nt(Ue,`${this.serviceName}: ${Qt} (${Ue}).`,Ge)}}const ot=/\{\$([^}]+)}/g;function Ie(Oe){return JSON.parse(Oe)}function De(Oe){return JSON.stringify(Oe)}const we=function(Oe){let Be={},Se={},Ge={},Ue="";try{const Lt=Oe.split(".");Be=Ie(Ve(Lt[0])||""),Se=Ie(Ve(Lt[1])||""),Ue=Lt[2],Ge=Se.d||{},delete Se.d}catch(Lt){}return{header:Be,claims:Se,data:Ge,signature:Ue}},rt=function(Oe){const Se=we(Oe).claims;return!!Se&&"object"==typeof Se&&Se.hasOwnProperty("iat")},Ze=function(Oe){const Be=we(Oe).claims;return"object"==typeof Be&&!0===Be.admin};function Pt(Oe,Be){return Object.prototype.hasOwnProperty.call(Oe,Be)}function Ot(Oe,Be){if(Object.prototype.hasOwnProperty.call(Oe,Be))return Oe[Be]}function kt(Oe){for(const Be in Oe)if(Object.prototype.hasOwnProperty.call(Oe,Be))return!1;return!0}function Ct(Oe,Be,Se){const Ge={};for(const Ue in Oe)Object.prototype.hasOwnProperty.call(Oe,Ue)&&(Ge[Ue]=Be.call(Se,Oe[Ue],Ue,Oe));return Ge}function An(Oe,Be){if(Oe===Be)return!0;const Se=Object.keys(Oe),Ge=Object.keys(Be);for(const Ue of Se){if(!Ge.includes(Ue))return!1;const Lt=Oe[Ue],Qt=Be[Ue];if(bn(Lt)&&bn(Qt)){if(!An(Lt,Qt))return!1}else if(Lt!==Qt)return!1}for(const Ue of Ge)if(!Se.includes(Ue))return!1;return!0}function bn(Oe){return null!==Oe&&"object"==typeof Oe}function xn(Oe){const Be=[];for(const[Se,Ge]of Object.entries(Oe))Array.isArray(Ge)?Ge.forEach(Ue=>{Be.push(encodeURIComponent(Se)+"="+encodeURIComponent(Ue))}):Be.push(encodeURIComponent(Se)+"="+encodeURIComponent(Ge));return Be.length?"&"+Be.join("&"):""}function Ht(Oe){const Be={};return Oe.replace(/^\?/,"").split("&").forEach(Ge=>{if(Ge){const[Ue,Lt]=Ge.split("=");Be[decodeURIComponent(Ue)]=decodeURIComponent(Lt)}}),Be}function gr(Oe){const Be=Oe.indexOf("?");if(!Be)return"";const Se=Oe.indexOf("#",Be);return Oe.substring(Be,Se>0?Se:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Be=1;Be<this.blockSize;++Be)this.pad_[Be]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Be,Se){Se||(Se=0);const Ge=this.W_;if("string"==typeof Be)for(let pn=0;pn<16;pn++)Ge[pn]=Be.charCodeAt(Se)<<24|Be.charCodeAt(Se+1)<<16|Be.charCodeAt(Se+2)<<8|Be.charCodeAt(Se+3),Se+=4;else for(let pn=0;pn<16;pn++)Ge[pn]=Be[Se]<<24|Be[Se+1]<<16|Be[Se+2]<<8|Be[Se+3],Se+=4;for(let pn=16;pn<80;pn++){const br=Ge[pn-3]^Ge[pn-8]^Ge[pn-14]^Ge[pn-16];Ge[pn]=4294967295&(br<<1|br>>>31)}let zn,Wn,Ue=this.chain_[0],Lt=this.chain_[1],Qt=this.chain_[2],dn=this.chain_[3],ir=this.chain_[4];for(let pn=0;pn<80;pn++){pn<40?pn<20?(zn=dn^Lt&(Qt^dn),Wn=1518500249):(zn=Lt^Qt^dn,Wn=1859775393):pn<60?(zn=Lt&Qt|dn&(Lt|Qt),Wn=2400959708):(zn=Lt^Qt^dn,Wn=3395469782);const br=(Ue<<5|Ue>>>27)+zn+ir+Wn+Ge[pn]&4294967295;ir=dn,dn=Qt,Qt=4294967295&(Lt<<30|Lt>>>2),Lt=Ue,Ue=br}this.chain_[0]=this.chain_[0]+Ue&4294967295,this.chain_[1]=this.chain_[1]+Lt&4294967295,this.chain_[2]=this.chain_[2]+Qt&4294967295,this.chain_[3]=this.chain_[3]+dn&4294967295,this.chain_[4]=this.chain_[4]+ir&4294967295}update(Be,Se){if(null==Be)return;void 0===Se&&(Se=Be.length);const Ge=Se-this.blockSize;let Ue=0;const Lt=this.buf_;let Qt=this.inbuf_;for(;Ue<Se;){if(0===Qt)for(;Ue<=Ge;)this.compress_(Be,Ue),Ue+=this.blockSize;if("string"==typeof Be){for(;Ue<Se;)if(Lt[Qt]=Be.charCodeAt(Ue),++Qt,++Ue,Qt===this.blockSize){this.compress_(Lt),Qt=0;break}}else for(;Ue<Se;)if(Lt[Qt]=Be[Ue],++Qt,++Ue,Qt===this.blockSize){this.compress_(Lt),Qt=0;break}}this.inbuf_=Qt,this.total_+=Se}digest(){const Be=[];let Se=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ue=this.blockSize-1;Ue>=56;Ue--)this.buf_[Ue]=255&Se,Se/=256;this.compress_(this.buf_);let Ge=0;for(let Ue=0;Ue<5;Ue++)for(let Lt=24;Lt>=0;Lt-=8)Be[Ge]=this.chain_[Ue]>>Lt&255,++Ge;return Be}}function Ir(Oe,Be){const Se=new Dn(Oe,Be);return Se.subscribe.bind(Se)}class Dn{constructor(Be,Se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Se,this.task.then(()=>{Be(this)}).catch(Ge=>{this.error(Ge)})}next(Be){this.forEachObserver(Se=>{Se.next(Be)})}error(Be){this.forEachObserver(Se=>{Se.error(Be)}),this.close(Be)}complete(){this.forEachObserver(Be=>{Be.complete()}),this.close()}subscribe(Be,Se,Ge){let Ue;if(void 0===Be&&void 0===Se&&void 0===Ge)throw new Error("Missing Observer.");Ue=function qt(Oe,Be){if("object"!=typeof Oe||null===Oe)return!1;for(const Se of Be)if(Se in Oe&&"function"==typeof Oe[Se])return!0;return!1}(Be,["next","error","complete"])?Be:{next:Be,error:Se,complete:Ge},void 0===Ue.next&&(Ue.next=Vr),void 0===Ue.error&&(Ue.error=Vr),void 0===Ue.complete&&(Ue.complete=Vr);const Lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ue.error(this.finalError):Ue.complete()}catch(Qt){}}),this.observers.push(Ue),Lt}unsubscribeOne(Be){void 0===this.observers||void 0===this.observers[Be]||(delete this.observers[Be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Be){if(!this.finalized)for(let Se=0;Se<this.observers.length;Se++)this.sendOne(Se,Be)}sendOne(Be,Se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Be])try{Se(this.observers[Be])}catch(Ge){typeof console<"u"&&console.error&&console.error(Ge)}})}close(Be){this.finalized||(this.finalized=!0,void 0!==Be&&(this.finalError=Be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vr(){}const Or=function(Oe,Be,Se,Ge){let Ue;if(Ge<Be?Ue="at least "+Be:Ge>Se&&(Ue=0===Se?"none":"no more than "+Se),Ue)throw new Error(Oe+" failed: Was called with "+Ge+(1===Ge?" argument.":" arguments.")+" Expects "+Ue+".")};function hr(Oe,Be){return`${Oe} failed: ${Be} argument `}function sr(Oe,Be,Se,Ge){if((!Ge||Se)&&"function"!=typeof Se)throw new Error(hr(Oe,Be)+"must be a valid function.")}function wn(Oe,Be,Se,Ge){if((!Ge||Se)&&("object"!=typeof Se||null===Se))throw new Error(hr(Oe,Be)+"must be a valid context object.")}const fn=function(Oe){const Be=[];let Se=0;for(let Ge=0;Ge<Oe.length;Ge++){let Ue=Oe.charCodeAt(Ge);if(Ue>=55296&&Ue<=56319){const Lt=Ue-55296;Ge++,J(Ge<Oe.length,"Surrogate pair missing trail surrogate."),Ue=65536+(Lt<<10)+(Oe.charCodeAt(Ge)-56320)}Ue<128?Be[Se++]=Ue:Ue<2048?(Be[Se++]=Ue>>6|192,Be[Se++]=63&Ue|128):Ue<65536?(Be[Se++]=Ue>>12|224,Be[Se++]=Ue>>6&63|128,Be[Se++]=63&Ue|128):(Be[Se++]=Ue>>18|240,Be[Se++]=Ue>>12&63|128,Be[Se++]=Ue>>6&63|128,Be[Se++]=63&Ue|128)}return Be},vn=function(Oe){let Be=0;for(let Se=0;Se<Oe.length;Se++){const Ge=Oe.charCodeAt(Se);Ge<128?Be++:Ge<2048?Be+=2:Ge>=55296&&Ge<=56319?(Be+=4,Se++):Be+=3}return Be},mr=1e3,Gt=2,Sr=144e5,oi=.5;function Gi(Oe,Be=mr,Se=Gt){const Ge=Be*Math.pow(Se,Oe),Ue=Math.round(oi*Ge*(Math.random()-.5)*2);return Math.min(Sr,Ge+Ue)}function Yn(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},2078:(un,yt,V)=>{"use strict";V.d(yt,{dr:()=>Gi,YG:()=>Ge,W2:()=>Gr,IJ:()=>Je,W4:()=>ge,Gu:()=>Ln,gu:()=>Pr,pK:()=>Pi,Ie:()=>or,u8:()=>hi,IK:()=>fi,td:()=>Bn,Q$:()=>qr,q_:()=>Br,jP:()=>ds,wd:()=>qn,sr:()=>Kn,Pc:()=>co,r4:()=>Qs,HT:()=>qi,SH:()=>Oo,as:()=>hr,YI:()=>uo,j9:()=>wn});var u=V(4650),J=V(433),H=V(655),xe=V(8421),Re=V(9751),Pe=V(5577),me=V(1144),Te=V(576),Ve=V(3268);const _e=["addListener","removeListener"],ce=["addEventListener","removeEventListener"],de=["on","off"];function Ae(m,w,f,S){if((0,Te.m)(f)&&(S=f,f=void 0),S)return Ae(m,w,f).pipe((0,Ve.Z)(S));const[W,ze]=function Ce(m){return(0,Te.m)(m.addEventListener)&&(0,Te.m)(m.removeEventListener)}(m)?ce.map(zt=>ln=>m[zt](w,ln,f)):function it(m){return(0,Te.m)(m.addListener)&&(0,Te.m)(m.removeListener)}(m)?_e.map(je(m,w)):function bt(m){return(0,Te.m)(m.on)&&(0,Te.m)(m.off)}(m)?de.map(je(m,w)):[];if(!W&&(0,me.z)(m))return(0,Pe.z)(zt=>Ae(zt,w,f))((0,xe.Xf)(m));if(!W)throw new TypeError("Invalid event target");return new Re.y(zt=>{const ln=(...Sn)=>zt.next(1<Sn.length?Sn:Sn[0]);return W(ln),()=>ze(ln)})}function je(m,w){return f=>S=>m[f](w,S)}var ve=V(7579),ae=V(1135),lt=V(2435),Ne=(V(181),V(6439),V(7838),V(1898),V(5179)),Q=V(5730),tt=V(5820),Le=V(1843),$e=(V(6369),V(3539)),gt=(V(3457),V(4349),V(1308)),we=V(9300),et=V(3900),He=V(1884),rt=V(6895);const Pt=Ne.i,Ct=["*"],gr=m=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(m):"function"==typeof requestAnimationFrame?requestAnimationFrame(m):setTimeout(m),Gn=m=>!!m.resolveComponentFactory;let Ir=(()=>{class m{constructor(f,S){this.injector=f,this.el=S,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(f){this.el.nativeElement.value=this.lastValue=null==f?"":f,Dn(this.el)}handleChangeEvent(f,S){f===this.el.nativeElement&&(S!==this.lastValue&&(this.lastValue=S,this.onChange(S)),Dn(this.el))}_handleBlurEvent(f){f===this.el.nativeElement&&(this.onTouched(),Dn(this.el))}registerOnChange(f){this.onChange=f}registerOnTouched(f){this.onTouched=f}setDisabledState(f){this.el.nativeElement.disabled=f}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let f;try{f=this.injector.get(J.a5)}catch(W){}if(!f)return;f.statusChanges&&(this.statusChanges=f.statusChanges.subscribe(()=>Dn(this.el)));const S=f.control;S&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(ze=>{if(typeof S[ze]<"u"){const zt=S[ze].bind(S);S[ze]=(...ln)=>{zt(...ln),Dn(this.el)}}})}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.zs3),u.Y36(u.SBq))},m.\u0275dir=u.lG2({type:m,hostBindings:function(f,S){1&f&&u.NdJ("ionBlur",function(ze){return S._handleBlurEvent(ze.target)})}}),m})();const Dn=m=>{gr(()=>{const w=m.nativeElement,f=null!=w.value&&w.value.toString().length>0,S=Dr(w);qt(w,S);const W=w.closest("ion-item");W&&qt(W,f?[...S,"item-has-value"]:S)})},Dr=m=>{const w=m.classList,f=[];for(let S=0;S<w.length;S++){const W=w.item(S);null!==W&&Vr(W,"ng-")&&f.push(`ion-${W.substring(3)}`)}return f},qt=(m,w)=>{const f=m.classList;f.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),f.add(...w)},Vr=(m,w)=>m.substring(0,w.length)===w;let hr=(()=>{class m extends Ir{constructor(f,S){super(f,S)}_handleIonChange(f){this.handleChangeEvent(f,f.value)}registerOnChange(f){super.registerOnChange(S=>{f(""===S?null:parseFloat(S))})}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.zs3),u.Y36(u.SBq))},m.\u0275dir=u.lG2({type:m,selectors:[["ion-input","type","number"]],hostBindings:function(f,S){1&f&&u.NdJ("ionChange",function(ze){return S._handleIonChange(ze.target)})},features:[u._Bn([{provide:J.JU,useExisting:m,multi:!0}]),u.qOj]}),m})(),wn=(()=>{class m extends Ir{constructor(f,S){super(f,S)}_handleInputEvent(f){this.handleChangeEvent(f,f.value)}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.zs3),u.Y36(u.SBq))},m.\u0275dir=u.lG2({type:m,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(f,S){1&f&&u.NdJ("ionChange",function(ze){return S._handleInputEvent(ze.target)})},features:[u._Bn([{provide:J.JU,useExisting:m,multi:!0}]),u.qOj]}),m})();const fn=(m,w)=>{const f=m.prototype;w.forEach(S=>{Object.defineProperty(f,S,{get(){return this.el[S]},set(W){this.z.runOutsideAngular(()=>this.el[S]=W)}})})},vn=(m,w)=>{const f=m.prototype;w.forEach(S=>{f[S]=function(){const W=arguments;return this.z.runOutsideAngular(()=>this.el[S].apply(this.el,W))}})},Vn=(m,w,f)=>{f.forEach(S=>m[S]=Ae(w,S))};function Gt(m){return function(f){const{defineCustomElementFn:S,inputs:W,methods:ze}=m;return void 0!==S&&S(),W&&fn(f,W),ze&&vn(f,ze),f}}let Gi=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-app"]],ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0})],m),m})(),Ge=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionFocus","ionBlur"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],m),m})(),Gr=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],m),m})(),Je=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],m),m})(),ge=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionFocus","ionBlur"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],m),m})(),Ln=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],m),m})(),Pr=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],m),m})(),Pi=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],m),m})(),or=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],m),m})(),hi=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],m),m})(),fi=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionSwipe"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["side"]})],m),m})(),Bn=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement,Vn(this,this.el,["ionDrag"])}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],m),m})(),qr=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],m),m})(),Br=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],m),m})(),qn=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","size"]})],m),m})(),Kn=(()=>{let m=class{constructor(f,S,W){this.z=W,f.detach(),this.el=S.nativeElement}};return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},m.\u0275cmp=u.Xpm({type:m,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ct,decls:1,vars:0,template:function(f,S){1&f&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,H.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode"]})],m),m})();class hs{constructor(w={}){this.data=w}get(w){return this.data[w]}}let ai=(()=>{class m{constructor(f,S){this.zone=f,this.appRef=S}create(f,S,W,ze){return new Ji(f,S,W,this.appRef,this.zone,ze)}}return m.\u0275fac=function(f){return new(f||m)(u.LFG(u.R0b),u.LFG(u.z2F))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})();class Ji{constructor(w,f,S,W,ze,zt){this.resolverOrInjector=w,this.injector=f,this.location=S,this.appRef=W,this.zone=ze,this.elementReferenceKey=zt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(w,f,S,W){return this.zone.run(()=>new Promise(ze=>{const zt=Object.assign({},S);void 0!==this.elementReferenceKey&&(zt[this.elementReferenceKey]=w),ze(es(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,w,f,zt,W))}))}removeViewFromDom(w,f){return this.zone.run(()=>new Promise(S=>{const W=this.elRefMap.get(f);if(W){W.destroy(),this.elRefMap.delete(f);const ze=this.elEventsMap.get(f);ze&&(ze(),this.elEventsMap.delete(f))}S()}))}}const es=(m,w,f,S,W,ze,zt,ln,Sn,lr,ti)=>{let $n;const ts=u.zs3.create({providers:Xo(lr),parent:f});if(w&&Gn(w)){const No=w.resolveComponentFactory(Sn);$n=S?S.createComponent(No,S.length,ts):No.create(ts)}else{if(!S)return null;$n=S.createComponent(Sn,{index:S.indexOf,injector:ts,environmentInjector:w})}const Cs=$n.instance,ni=$n.location.nativeElement;if(lr&&Object.assign(Cs,lr),ti)for(const No of ti)ni.classList.add(No);const Ki=As(m,Cs,ni);return ln.appendChild(ni),S||W.attachView($n.hostView),$n.changeDetectorRef.reattach(),ze.set(ni,$n),zt.set(ni,Ki),ni},us=[Le.L,Le.a,Le.b,Le.c,Le.d],As=(m,w,f)=>m.run(()=>{const S=us.filter(W=>"function"==typeof w[W]).map(W=>{const ze=zt=>w[W](zt.detail);return f.addEventListener(W,ze),()=>f.removeEventListener(W,ze)});return()=>S.forEach(W=>W())}),xi=new u.OlP("NavParamsToken"),Xo=m=>[{provide:xi,useValue:m},{provide:hs,useFactory:Qo,deps:[xi]}],Qo=m=>new hs(m),Di=(m,w)=>((m=m.filter(f=>f.stackId!==w.stackId)).push(w),m),Ro=(m,w)=>{const f=m.createUrlTree(["."],{relativeTo:w});return m.serializeUrl(f)},wo=(m,w)=>{if(!m)return;const f=fs(w);for(let S=0;S<f.length;S++){if(S>=m.length)return f[S];if(f[S]!==m[S])return}},fs=m=>m.split("/").map(w=>w.trim()).filter(w=>""!==w),Ms=m=>{m&&(m.ref.destroy(),m.unlistenEvents())};class zi{constructor(w,f,S,W,ze,zt){this.containerEl=f,this.router=S,this.navCtrl=W,this.zone=ze,this.location=zt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==w?fs(w):void 0}createView(w,f){var S;const W=Ro(this.router,f),ze=null===(S=null==w?void 0:w.location)||void 0===S?void 0:S.nativeElement,zt=As(this.zone,w.instance,ze);return{id:this.nextId++,stackId:wo(this.tabsPrefix,W),unlistenEvents:zt,element:ze,ref:w,url:W}}getExistingView(w){const f=Ro(this.router,w),S=this.views.find(W=>W.url===f);return S&&S.ref.changeDetectorRef.reattach(),S}setActive(w){var f,S;const W=this.navCtrl.consumeTransition();let{direction:ze,animation:zt,animationBuilder:ln}=W;const Sn=this.activeView,lr=((m,w)=>!w||m.stackId!==w.stackId)(w,Sn);lr&&(ze="back",zt=void 0);const ti=this.views.slice();let $n;const ts=this.router;ts.getCurrentNavigation?$n=ts.getCurrentNavigation():!(null===(f=ts.navigations)||void 0===f)&&f.value&&($n=ts.navigations.value),null!==(S=null==$n?void 0:$n.extras)&&void 0!==S&&S.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const Cs=this.views.includes(w),ni=this.insertView(w,ze);Cs||w.ref.changeDetectorRef.detectChanges();const Ki=w.animationBuilder;return void 0===ln&&"back"===ze&&!lr&&void 0!==Ki&&(ln=Ki),Sn&&(Sn.animationBuilder=ln),this.zone.runOutsideAngular(()=>this.wait(()=>(Sn&&Sn.ref.changeDetectorRef.detach(),w.ref.changeDetectorRef.reattach(),this.transition(w,Sn,zt,this.canGoBack(1),!1,ln).then(()=>Io(w,ni,ti,this.location,this.zone)).then(()=>({enteringView:w,direction:ze,animation:zt,tabSwitch:lr})))))}canGoBack(w,f=this.getActiveStackId()){return this.getStack(f).length>w}pop(w,f=this.getActiveStackId()){return this.zone.run(()=>{var S,W;const ze=this.getStack(f);if(ze.length<=w)return Promise.resolve(!1);const zt=ze[ze.length-w-1];let ln=zt.url;const Sn=zt.savedData;if(Sn){const ti=Sn.get("primary");null!==(W=null===(S=null==ti?void 0:ti.route)||void 0===S?void 0:S._routerState)&&void 0!==W&&W.snapshot.url&&(ln=ti.route._routerState.snapshot.url)}const{animationBuilder:lr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(ln,Object.assign(Object.assign({},zt.savedExtras),{animation:lr})).then(()=>!0)})}startBackTransition(){const w=this.activeView;if(w){const f=this.getStack(w.stackId),S=f[f.length-2],W=S.animationBuilder;return this.wait(()=>this.transition(S,w,"back",this.canGoBack(2),!0,W))}return Promise.resolve()}endBackTransition(w){w?(this.skipTransition=!0,this.pop(1)):this.activeView&&bs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(w){const f=this.getStack(w);return f.length>0?f[f.length-1]:void 0}getRootUrl(w){const f=this.getStack(w);return f.length>0?f[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Ms),this.activeView=void 0,this.views=[]}getStack(w){return this.views.filter(f=>f.stackId===w)}insertView(w,f){return this.activeView=w,this.views=((m,w,f)=>"root"===f?Di(m,w):"forward"===f?((m,w)=>(m.indexOf(w)>=0?m=m.filter(S=>S.stackId!==w.stackId||S.id<=w.id):m.push(w),m))(m,w):((m,w)=>m.indexOf(w)>=0?m.filter(S=>S.stackId!==w.stackId||S.id<=w.id):Di(m,w))(m,w))(this.views,w,f),this.views.slice()}transition(w,f,S,W,ze,zt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(f===w)return Promise.resolve(!1);const ln=w?w.element:void 0,Sn=f?f.element:void 0,lr=this.containerEl;return ln&&ln!==Sn&&(ln.classList.add("ion-page"),ln.classList.add("ion-page-invisible"),ln.parentElement!==lr&&lr.appendChild(ln),lr.commit)?lr.commit(ln,Sn,{deepWait:!0,duration:void 0===S?0:void 0,direction:S,showGoBack:W,progressAnimation:ze,animationBuilder:zt}):Promise.resolve(!1)}wait(w){return(0,H.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const f=this.runningTask=w();return f.finally(()=>this.runningTask=void 0),f})}}const Io=(m,w,f,S,W)=>"function"==typeof requestAnimationFrame?new Promise(ze=>{requestAnimationFrame(()=>{bs(m,w,f,S,W),ze()})}):Promise.resolve(),bs=(m,w,f,S,W)=>{W.run(()=>f.filter(ze=>!w.includes(ze)).forEach(Ms)),w.forEach(ze=>{const ln=S.path().split("?")[0].split("#")[0];if(ze!==m&&ze.url!==ln){const Sn=ze.element;Sn.setAttribute("aria-hidden","true"),Sn.classList.add("ion-page-hidden"),ze.ref.changeDetectorRef.detach()}})};let bo=(()=>{class m{get(f,S){const W=js();return W?W.get(f,S):null}getBoolean(f,S){const W=js();return!!W&&W.getBoolean(f,S)}getNumber(f,S){const W=js();return W?W.getNumber(f,S):0}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const ps=new u.OlP("USERCONFIG"),js=()=>{if(typeof window<"u"){const m=window.Ionic;if(null!=m&&m.config)return m.config}return null};let Zs=(()=>{class m{constructor(f,S){this.doc=f,this.backButton=new ve.x,this.keyboardDidShow=new ve.x,this.keyboardDidHide=new ve.x,this.pause=new ve.x,this.resume=new ve.x,this.resize=new ve.x,S.run(()=>{var W;let ze;this.win=f.defaultView,this.backButton.subscribeWithPriority=function(zt,ln){return this.subscribe(Sn=>Sn.register(zt,lr=>S.run(()=>ln(lr))))},cs(this.pause,f,"pause"),cs(this.resume,f,"resume"),cs(this.backButton,f,"ionBackButton"),cs(this.resize,this.win,"resize"),cs(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),cs(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(zt=>{ze=zt}),null!==(W=this.win)&&void 0!==W&&W.cordova?f.addEventListener("deviceready",()=>{ze("cordova")},{once:!0}):ze("dom")})}is(f){return(0,Ne.a)(this.win,f)}platforms(){return(0,Ne.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(f){return Co(this.win.location.href,f)}isLandscape(){return!this.isPortrait()}isPortrait(){var f,S;return null===(S=(f=this.win).matchMedia)||void 0===S?void 0:S.call(f,"(orientation: portrait)").matches}testUserAgent(f){const S=this.win.navigator;return!!(null!=S&&S.userAgent&&S.userAgent.indexOf(f)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return m.\u0275fac=function(f){return new(f||m)(u.LFG(rt.K0),u.LFG(u.R0b))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const Co=(m,w)=>{w=w.replace(/[[\]\\]/g,"\\$&");const S=new RegExp("[\\?&]"+w+"=([^&#]*)").exec(m);return S?decodeURIComponent(S[1].replace(/\+/g," ")):null},cs=(m,w,f)=>{w&&w.addEventListener(f,S=>{m.next(null!=S?S.detail:void 0)})};let Oo=(()=>{class m{constructor(f,S,W,ze){this.location=S,this.serializer=W,this.router=ze,this.direction=Rs,this.animated=Wi,this.guessDirection="forward",this.lastNavId=-1,ze&&ze.events.subscribe(zt=>{if(zt instanceof lt.OD){const ln=zt.restoredState?zt.restoredState.navigationId:zt.id;this.guessDirection=ln<this.lastNavId?"back":"forward",this.guessAnimation=zt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?zt.id:ln}}),f.backButton.subscribeWithPriority(0,zt=>{this.pop(),zt()})}navigateForward(f,S={}){return this.setDirection("forward",S.animated,S.animationDirection,S.animation),this.navigate(f,S)}navigateBack(f,S={}){return this.setDirection("back",S.animated,S.animationDirection,S.animation),this.navigate(f,S)}navigateRoot(f,S={}){return this.setDirection("root",S.animated,S.animationDirection,S.animation),this.navigate(f,S)}back(f={animated:!0,animationDirection:"back"}){return this.setDirection("back",f.animated,f.animationDirection,f.animation),this.location.back()}pop(){return(0,H.mG)(this,void 0,void 0,function*(){let f=this.topOutlet;for(;f&&!(yield f.pop());)f=f.parentOutlet})}setDirection(f,S,W,ze){this.direction=f,this.animated=gs(f,S,W),this.animationBuilder=ze}setTopOutlet(f){this.topOutlet=f}consumeTransition(){let S,f="root";const W=this.animationBuilder;return"auto"===this.direction?(f=this.guessDirection,S=this.guessAnimation):(S=this.animated,f=this.direction),this.direction=Rs,this.animated=Wi,this.animationBuilder=void 0,{direction:f,animation:S,animationBuilder:W}}navigate(f,S){if(Array.isArray(f))return this.router.navigate(f,S);{const W=this.serializer.parse(f.toString());return void 0!==S.queryParams&&(W.queryParams=Object.assign({},S.queryParams)),void 0!==S.fragment&&(W.fragment=S.fragment),this.router.navigateByUrl(W,S)}}}return m.\u0275fac=function(f){return new(f||m)(u.LFG(Zs),u.LFG(rt.Ye),u.LFG(lt.Hx),u.LFG(lt.F0,8))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const gs=(m,w,f)=>{if(!1!==w){if(void 0!==f)return f;if("forward"===m||"back"===m)return m;if("root"===m&&!0===w)return"forward"}},Rs="auto",Wi=void 0;let ds=(()=>{class m{constructor(f,S,W,ze,zt,ln,Sn,lr,ti,$n,ts,Cs,ni){this.parentContexts=f,this.location=S,this.config=zt,this.navCtrl=ln,this.componentFactoryResolver=Sn,this.parentOutlet=ni,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new ae.X(null),this.stackEvents=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.nativeEl=ti.nativeElement,this.name=W||lt.eC,this.tabsPrefix="true"===ze?Ro($n,Cs):void 0,this.stackCtrl=new zi(this.tabsPrefix,this.nativeEl,$n,ln,ts,lr),f.onChildOutletCreated(this.name,this)}set animation(f){this.nativeEl.animation=f}set animated(f){this.nativeEl.animated=f}set swipeGesture(f){this._swipeGesture=f,this.nativeEl.swipeHandler=f?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:S=>this.stackCtrl.endBackTransition(S)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const f=this.getContext();null!=f&&f.route&&this.activateWith(f.route,f.resolver||null)}new Promise(f=>(0,Q.c)(this.nativeEl,f)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(f,S){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const S=this.getContext();this.activatedView.savedData=new Map(S.children.contexts);const W=this.activatedView.savedData.get("primary");if(W&&S.route&&(W.route=Object.assign({},S.route)),this.activatedView.savedExtras={},S.route){const ze=S.route.snapshot;this.activatedView.savedExtras.queryParams=ze.queryParams,this.activatedView.savedExtras.fragment=ze.fragment}}const f=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(f)}}activateWith(f,S){var W;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=f;let ze,zt=this.stackCtrl.getExistingView(f);if(zt){ze=this.activated=zt.ref;const ln=zt.savedData;ln&&(this.getContext().children.contexts=ln),this.updateActivatedRouteProxy(ze.instance,f)}else{const ln=f._futureSnapshot;if(null==ln.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Sn=this.parentContexts.getOrCreateContext(this.name).children,lr=new ae.X(null),ti=this.createActivatedRouteProxy(lr,f),$n=new ks(ti,Sn,this.location.injector),ts=null!==(W=ln.routeConfig.component)&&void 0!==W?W:ln.component;if((S=S||this.componentFactoryResolver)&&Gn(S)){const Cs=S.resolveComponentFactory(ts);ze=this.activated=this.location.createComponent(Cs,this.location.length,$n)}else ze=this.activated=this.location.createComponent(ts,{index:this.location.length,injector:$n,environmentInjector:null!=S?S:this.environmentInjector});lr.next(ze.instance),zt=this.stackCtrl.createView(this.activated,f),this.proxyMap.set(ze.instance,ti),this.currentActivatedRoute$.next({component:ze.instance,activatedRoute:f})}this.activatedView=zt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(zt).then(ln=>{this.activateEvents.emit(ze.instance),this.stackEvents.emit(ln)})}canGoBack(f=1,S){return this.stackCtrl.canGoBack(f,S)}pop(f=1,S){return this.stackCtrl.pop(f,S)}getLastUrl(f){const S=this.stackCtrl.getLastUrl(f);return S?S.url:void 0}getLastRouteView(f){return this.stackCtrl.getLastUrl(f)}getRootView(f){return this.stackCtrl.getRootUrl(f)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(f,S){const W=new lt.gz;return W._futureSnapshot=S._futureSnapshot,W._routerState=S._routerState,W.snapshot=S.snapshot,W.outlet=S.outlet,W.component=S.component,W._paramMap=this.proxyObservable(f,"paramMap"),W._queryParamMap=this.proxyObservable(f,"queryParamMap"),W.url=this.proxyObservable(f,"url"),W.params=this.proxyObservable(f,"params"),W.queryParams=this.proxyObservable(f,"queryParams"),W.fragment=this.proxyObservable(f,"fragment"),W.data=this.proxyObservable(f,"data"),W}proxyObservable(f,S){return f.pipe((0,we.h)(W=>!!W),(0,et.w)(W=>this.currentActivatedRoute$.pipe((0,we.h)(ze=>null!==ze&&ze.component===W),(0,et.w)(ze=>ze&&ze.activatedRoute[S]),(0,He.x)())))}updateActivatedRouteProxy(f,S){const W=this.proxyMap.get(f);if(!W)throw new Error("Could not find activated route proxy for view");W._futureSnapshot=S._futureSnapshot,W._routerState=S._routerState,W.snapshot=S.snapshot,W.outlet=S.outlet,W.component=S.component,this.currentActivatedRoute$.next({component:f,activatedRoute:S})}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(lt.y6),u.Y36(u.s_b),u.$8M("name"),u.$8M("tabs"),u.Y36(bo),u.Y36(Oo),u.Y36(u._Vd,8),u.Y36(rt.Ye),u.Y36(u.SBq),u.Y36(lt.F0),u.Y36(u.R0b),u.Y36(lt.gz),u.Y36(m,12))},m.\u0275dir=u.lG2({type:m,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),m})();class ks{constructor(w,f,S){this.route=w,this.childContexts=f,this.parent=S}get(w,f){return w===lt.gz?this.route:w===lt.y6?this.childContexts:this.parent.get(w,f)}}let uo=(()=>{class m{constructor(f,S,W,ze,zt){this.locationStrategy=f,this.navCtrl=S,this.elementRef=W,this.router=ze,this.routerLink=zt,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var f;if(null!==(f=this.routerLink)&&void 0!==f&&f.urlTree){const S=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=S}}onClick(f){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),f.preventDefault()}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(rt.S$),u.Y36(Oo),u.Y36(u.SBq),u.Y36(lt.F0),u.Y36(lt.rH,8))},m.\u0275dir=u.lG2({type:m,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(f,S){1&f&&u.NdJ("click",function(ze){return S.onClick(ze)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[u.TTD]}),m})();class Mi{constructor(w){this.ctrl=w}create(w){return this.ctrl.create(w||{})}dismiss(w,f,S){return this.ctrl.dismiss(w,f,S)}getTop(){return this.ctrl.getTop()}}let qi=(()=>{class m extends Mi{constructor(){super($e.l)}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();class Gs{}let zs=(()=>{class m extends Mi{constructor(f,S,W,ze){super($e.m),this.angularDelegate=f,this.resolver=S,this.injector=W,this.environmentInjector=ze}create(f){var S;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(S=this.resolver)&&void 0!==S?S:this.environmentInjector,this.injector,void 0,"modal")}))}}return m.\u0275fac=function(f){return new(f||m)(u.LFG(ai),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(Gs,8))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})(),Os=(()=>{class m extends Mi{constructor(f,S,W,ze){super($e.c),this.angularDelegate=f,this.resolver=S,this.injector=W,this.environmentInjector=ze}create(f){var S;return super.create(Object.assign(Object.assign({},f),{delegate:this.angularDelegate.create(null!==(S=this.resolver)&&void 0!==S?S:this.environmentInjector,this.injector,void 0,"popover")}))}}return m.\u0275fac=function(f){return new(f||m)(u.LFG(ai),u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(Gs,8))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac}),m})();class Qs{shouldDetach(w){return!1}shouldAttach(w){return!1}store(w,f){}retrieve(w){return null}shouldReuseRoute(w,f){if(w.routeConfig!==f.routeConfig)return!1;const S=w.params,W=f.params,ze=Object.keys(S),zt=Object.keys(W);if(ze.length!==zt.length)return!1;for(const ln of ze)if(W[ln]!==S[ln])return!1;return!0}}const So=(m,w,f)=>()=>{if(w.defaultView&&typeof window<"u"){(0,tt.s)(Object.assign(Object.assign({},m),{_zoneGate:ze=>f.run(ze)}));const W="__zone_symbol__addEventListener"in w.body?"__zone_symbol__addEventListener":"addEventListener";return function Ze(){var m=[];if(typeof window<"u"){var w=window;(!w.customElements||w.Element&&(!w.Element.prototype.closest||!w.Element.prototype.matches||!w.Element.prototype.remove||!w.Element.prototype.getRootNode))&&m.push(V.e(6748).then(V.t.bind(V,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||w.NodeList&&!w.NodeList.prototype.forEach||!w.fetch||!function(){try{var S=new URL("b","http://a");return S.pathname="c%20d","http://a/c%20d"===S.href&&S.searchParams}catch(W){return!1}}()||typeof WeakMap>"u")&&m.push(V.e(2214).then(V.t.bind(V,4144,23)))}return Promise.all(m)}().then(()=>((m,w)=>typeof window>"u"?Promise.resolve():(0,gt.p)().then(()=>(Pt(),(0,gt.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),w))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:gr,jmp:ze=>f.runOutsideAngular(ze),ael(ze,zt,ln,Sn){ze[W](zt,ln,Sn)},rel(ze,zt,ln,Sn){ze.removeEventListener(zt,ln,Sn)}}))}};let co=(()=>{class m{static forRoot(f){return{ngModule:m,providers:[{provide:ps,useValue:f},{provide:u.ip1,useFactory:So,multi:!0,deps:[ps,rt.K0,u.R0b]}]}}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({providers:[ai,zs,Os],imports:[[rt.ez]]}),m})()},181:(un,yt,V)=>{"use strict";V.d(yt,{c:()=>bt});var u=V(5730),J=V(3457);let H;const Re=Ce=>Ce.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pe=Ce=>(void 0===H&&(H=void 0===Ce.style.animationName&&void 0!==Ce.style.webkitAnimationName?"-webkit-":""),H),me=(Ce,ve,ae)=>{const lt=ve.startsWith("animation")?Pe(Ce):"";Ce.style.setProperty(lt+ve,ae)},Te=(Ce,ve)=>{const ae=ve.startsWith("animation")?Pe(Ce):"";Ce.style.removeProperty(ae+ve)},ce=[],it=(Ce=[],ve)=>{if(void 0!==ve){const ae=Array.isArray(ve)?ve:[ve];return[...Ce,...ae]}return Ce},bt=Ce=>{let ve,ae,lt,at,Ye,G,Le,De,we,et,He,Ot,kt,Me=[],Ne=[],Q=[],tt=!1,ke={},$e=[],nt=[],We={},gt=0,ot=!1,Ie=!1,rt=!0,Ze=!1,Pt=!0,Ct=!1;const An=Ce,bn=[],Cn=[],xn=[],Ht=[],gr=[],Gn=[],Ir=[],Dn=[],Dr=[],qt=[],Vr="function"==typeof AnimationEffect||void 0!==J.w&&"function"==typeof J.w.AnimationEffect,Or="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Vr,yi=()=>qt,Vn=(le,Qe)=>((null!=Qe&&Qe.oneTimeCallback?Cn:bn).push({c:le,o:Qe}),kt),Gt=()=>{if(Or)qt.forEach(le=>{le.cancel()}),qt.length=0;else{const le=xn.slice();(0,u.r)(()=>{le.forEach(Qe=>{Te(Qe,"animation-name"),Te(Qe,"animation-duration"),Te(Qe,"animation-timing-function"),Te(Qe,"animation-iteration-count"),Te(Qe,"animation-delay"),Te(Qe,"animation-play-state"),Te(Qe,"animation-fill-mode"),Te(Qe,"animation-direction")})})}},Sr=()=>{gr.forEach(le=>{null!=le&&le.parentNode&&le.parentNode.removeChild(le)}),gr.length=0},dn=()=>void 0!==Ye?Ye:Le?Le.getFill():"both",ir=()=>void 0!==we?we:void 0!==G?G:Le?Le.getDirection():"normal",zn=()=>ot?"linear":void 0!==lt?lt:Le?Le.getEasing():"linear",Wn=()=>Ie?0:void 0!==et?et:void 0!==ae?ae:Le?Le.getDuration():0,pn=()=>void 0!==at?at:Le?Le.getIterations():1,br=()=>void 0!==He?He:void 0!==ve?ve:Le?Le.getDelay():0,or=()=>{0!==gt&&(gt--,0===gt&&((()=>{cn(),Dn.forEach(Ft=>Ft()),Dr.forEach(Ft=>Ft());const le=rt?1:0,Qe=$e,ht=nt,Dt=We;xn.forEach(Ft=>{const Kt=Ft.classList;Qe.forEach(mn=>Kt.add(mn)),ht.forEach(mn=>Kt.remove(mn));for(const mn in Dt)Dt.hasOwnProperty(mn)&&me(Ft,mn,Dt[mn])}),bn.forEach(Ft=>Ft.c(le,kt)),Cn.forEach(Ft=>Ft.c(le,kt)),Cn.length=0,Pt=!0,rt&&(Ze=!0),rt=!0})(),Le&&Le.animationFinish()))},kr=(le=!0)=>{Sr();const Qe=(Ce=>(Ce.forEach(ve=>{for(const ae in ve)if(ve.hasOwnProperty(ae)){const lt=ve[ae];if("easing"===ae)ve["animation-timing-function"]=lt,delete ve[ae];else{const at=Re(ae);at!==ae&&(ve[at]=lt,delete ve[ae])}}}),Ce))(Me);xn.forEach(ht=>{if(Qe.length>0){const Dt=((Ce=[])=>Ce.map(ve=>{const ae=ve.offset,lt=[];for(const at in ve)ve.hasOwnProperty(at)&&"offset"!==at&&lt.push(`${at}: ${ve[at]};`);return`${100*ae}% { ${lt.join(" ")} }`}).join(" "))(Qe);Ot=void 0!==Ce?Ce:(Ce=>{let ve=ce.indexOf(Ce);return ve<0&&(ve=ce.push(Ce)-1),`ion-animation-${ve}`})(Dt);const Ft=((Ce,ve,ae)=>{var lt;const at=(Ce=>{const ve=void 0!==Ce.getRootNode?Ce.getRootNode():Ce;return ve.head||ve})(ae),Ye=Pe(ae),G=at.querySelector("#"+Ce);if(G)return G;const Me=(null!==(lt=ae.ownerDocument)&&void 0!==lt?lt:document).createElement("style");return Me.id=Ce,Me.textContent=`@${Ye}keyframes ${Ce} { ${ve} } @${Ye}keyframes ${Ce}-alt { ${ve} }`,at.appendChild(Me),Me})(Ot,Dt,ht);gr.push(Ft),me(ht,"animation-duration",`${Wn()}ms`),me(ht,"animation-timing-function",zn()),me(ht,"animation-delay",`${br()}ms`),me(ht,"animation-fill-mode",dn()),me(ht,"animation-direction",ir());const Kt=pn()===1/0?"infinite":pn().toString();me(ht,"animation-iteration-count",Kt),me(ht,"animation-play-state","paused"),le&&me(ht,"animation-name",`${Ft.id}-alt`),(0,u.r)(()=>{me(ht,"animation-name",Ft.id||null)})}})},hi=(le=!0)=>{(()=>{Gn.forEach(Dt=>Dt()),Ir.forEach(Dt=>Dt());const le=Ne,Qe=Q,ht=ke;xn.forEach(Dt=>{const Ft=Dt.classList;le.forEach(Kt=>Ft.add(Kt)),Qe.forEach(Kt=>Ft.remove(Kt));for(const Kt in ht)ht.hasOwnProperty(Kt)&&me(Dt,Kt,ht[Kt])})})(),Me.length>0&&(Or?(xn.forEach(le=>{const Qe=le.animate(Me,{id:An,delay:br(),duration:Wn(),easing:zn(),iterations:pn(),fill:dn(),direction:ir()});Qe.pause(),qt.push(Qe)}),qt.length>0&&(qt[0].onfinish=()=>{or()})):kr(le)),tt=!0},fi=le=>{if(le=Math.min(Math.max(le,0),.9999),Or)qt.forEach(Qe=>{Qe.currentTime=Qe.effect.getComputedTiming().delay+Wn()*le,Qe.pause()});else{const Qe=`-${Wn()*le}ms`;xn.forEach(ht=>{Me.length>0&&(me(ht,"animation-delay",Qe),me(ht,"animation-play-state","paused"))})}},Bn=le=>{qt.forEach(Qe=>{Qe.effect.updateTiming({delay:br(),duration:Wn(),easing:zn(),iterations:pn(),fill:dn(),direction:ir()})}),void 0!==le&&fi(le)},qr=(le=!0,Qe)=>{(0,u.r)(()=>{xn.forEach(ht=>{me(ht,"animation-name",Ot||null),me(ht,"animation-duration",`${Wn()}ms`),me(ht,"animation-timing-function",zn()),me(ht,"animation-delay",void 0!==Qe?`-${Qe*Wn()}ms`:`${br()}ms`),me(ht,"animation-fill-mode",dn()||null),me(ht,"animation-direction",ir()||null);const Dt=pn()===1/0?"infinite":pn().toString();me(ht,"animation-iteration-count",Dt),le&&me(ht,"animation-name",`${Ot}-alt`),(0,u.r)(()=>{me(ht,"animation-name",Ot||null)})})})},Br=(le=!1,Qe=!0,ht)=>(le&&Ht.forEach(Dt=>{Dt.update(le,Qe,ht)}),Or?Bn(ht):qr(Qe,ht),kt),ls=()=>{tt&&(Or?qt.forEach(le=>{le.pause()}):xn.forEach(le=>{me(le,"animation-play-state","paused")}),Ct=!0)},Ci=()=>{De=void 0,or()},cn=()=>{De&&clearTimeout(De)},ne=le=>new Promise(Qe=>{null!=le&&le.sync&&(Ie=!0,Vn(()=>Ie=!1,{oneTimeCallback:!0})),tt||hi(),Ze&&(Or?(fi(0),Bn()):qr(),Ze=!1),Pt&&(gt=Ht.length+1,Pt=!1),Vn(()=>Qe(),{oneTimeCallback:!0}),Ht.forEach(ht=>{ht.play()}),Or?(qt.forEach(le=>{le.play()}),(0===Me.length||0===xn.length)&&or()):(()=>{if(cn(),(0,u.r)(()=>{xn.forEach(le=>{Me.length>0&&me(le,"animation-play-state","running")})}),0===Me.length||0===xn.length)or();else{const le=br()||0,Qe=Wn()||0,ht=pn()||1;isFinite(ht)&&(De=setTimeout(Ci,le+Qe*ht+100)),((Ce,ve)=>{let ae;const lt={passive:!0},Ye=G=>{Ce===G.target&&(ae&&ae(),cn(),(0,u.r)(()=>{xn.forEach(le=>{Te(le,"animation-duration"),Te(le,"animation-delay"),Te(le,"animation-play-state")}),(0,u.r)(or)}))};Ce&&(Ce.addEventListener("webkitAnimationEnd",Ye,lt),Ce.addEventListener("animationend",Ye,lt),ae=()=>{Ce.removeEventListener("webkitAnimationEnd",Ye,lt),Ce.removeEventListener("animationend",Ye,lt)})})(xn[0])}})(),Ct=!1}),qe=(le,Qe)=>{const ht=Me[0];return void 0===ht||void 0!==ht.offset&&0!==ht.offset?Me=[{offset:0,[le]:Qe},...Me]:ht[le]=Qe,kt};return kt={parentAnimation:Le,elements:xn,childAnimations:Ht,id:An,animationFinish:or,from:qe,to:(le,Qe)=>{const ht=Me[Me.length-1];return void 0===ht||void 0!==ht.offset&&1!==ht.offset?Me=[...Me,{offset:1,[le]:Qe}]:ht[le]=Qe,kt},fromTo:(le,Qe,ht)=>qe(le,Qe).to(le,ht),parent:le=>(Le=le,kt),play:ne,pause:()=>(Ht.forEach(le=>{le.pause()}),ls(),kt),stop:()=>{Ht.forEach(le=>{le.stop()}),tt&&(Gt(),tt=!1),ot=!1,Ie=!1,Pt=!0,we=void 0,et=void 0,He=void 0,gt=0,Ze=!1,rt=!0,Ct=!1},destroy:le=>(Ht.forEach(Qe=>{Qe.destroy(le)}),(le=>{Gt(),le&&Sr()})(le),xn.length=0,Ht.length=0,Me.length=0,bn.length=0,Cn.length=0,tt=!1,Pt=!0,kt),keyframes:le=>{const Qe=Me!==le;return Me=le,Qe&&(le=>{Or?yi().forEach(Qe=>{if(Qe.effect.setKeyframes)Qe.effect.setKeyframes(le);else{const ht=new KeyframeEffect(Qe.effect.target,le,Qe.effect.getTiming());Qe.effect=ht}}):kr()})(Me),kt},addAnimation:le=>{if(null!=le)if(Array.isArray(le))for(const Qe of le)Qe.parent(kt),Ht.push(Qe);else le.parent(kt),Ht.push(le);return kt},addElement:le=>{if(null!=le)if(1===le.nodeType)xn.push(le);else if(le.length>=0)for(let Qe=0;Qe<le.length;Qe++)xn.push(le[Qe]);else console.error("Invalid addElement value");return kt},update:Br,fill:le=>(Ye=le,Br(!0),kt),direction:le=>(G=le,Br(!0),kt),iterations:le=>(at=le,Br(!0),kt),duration:le=>(!Or&&0===le&&(le=1),ae=le,Br(!0),kt),easing:le=>(lt=le,Br(!0),kt),delay:le=>(ve=le,Br(!0),kt),getWebAnimations:yi,getKeyframes:()=>Me,getFill:dn,getDirection:ir,getDelay:br,getIterations:pn,getEasing:zn,getDuration:Wn,afterAddRead:le=>(Dn.push(le),kt),afterAddWrite:le=>(Dr.push(le),kt),afterClearStyles:(le=[])=>{for(const Qe of le)We[Qe]="";return kt},afterStyles:(le={})=>(We=le,kt),afterRemoveClass:le=>(nt=it(nt,le),kt),afterAddClass:le=>($e=it($e,le),kt),beforeAddRead:le=>(Gn.push(le),kt),beforeAddWrite:le=>(Ir.push(le),kt),beforeClearStyles:(le=[])=>{for(const Qe of le)ke[Qe]="";return kt},beforeStyles:(le={})=>(ke=le,kt),beforeRemoveClass:le=>(Q=it(Q,le),kt),beforeAddClass:le=>(Ne=it(Ne,le),kt),onFinish:Vn,isRunning:()=>0!==gt&&!Ct,progressStart:(le=!1,Qe)=>(Ht.forEach(ht=>{ht.progressStart(le,Qe)}),ls(),ot=le,tt||hi(),Br(!1,!0,Qe),kt),progressStep:le=>(Ht.forEach(Qe=>{Qe.progressStep(le)}),fi(le),kt),progressEnd:(le,Qe,ht)=>(ot=!1,Ht.forEach(Dt=>{Dt.progressEnd(le,Qe,ht)}),void 0!==ht&&(et=ht),Ze=!1,rt=!0,0===le?(we="reverse"===ir()?"normal":"reverse","reverse"===we&&(rt=!1),Or?(Br(),fi(1-Qe)):(He=(1-Qe)*Wn()*-1,Br(!1,!1))):1===le&&(Or?(Br(),fi(Qe)):(He=Qe*Wn()*-1,Br(!1,!1))),void 0!==le&&(Vn(()=>{et=void 0,we=void 0,He=void 0},{oneTimeCallback:!0}),Le||ne()),kt)}}},5820:(un,yt,V)=>{"use strict";V.d(yt,{E:()=>_e,a:()=>u,s:()=>Te});const u=ce=>{try{if(ce instanceof me)return ce.value;if(!xe()||"string"!=typeof ce||""===ce)return ce;if(ce.includes("onload="))return"";const de=document.createDocumentFragment(),Ae=document.createElement("div");de.appendChild(Ae),Ae.innerHTML=ce,Pe.forEach(Ce=>{const ve=de.querySelectorAll(Ce);for(let ae=ve.length-1;ae>=0;ae--){const lt=ve[ae];lt.parentNode?lt.parentNode.removeChild(lt):de.removeChild(lt);const at=H(lt);for(let Ye=0;Ye<at.length;Ye++)J(at[Ye])}});const je=H(de);for(let Ce=0;Ce<je.length;Ce++)J(je[Ce]);const it=document.createElement("div");it.appendChild(de);const bt=it.querySelector("div");return null!==bt?bt.innerHTML:it.innerHTML}catch(de){return console.error(de),""}},J=ce=>{if(ce.nodeType&&1!==ce.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ce.attributes instanceof NamedNodeMap))return void ce.remove();for(let Ae=ce.attributes.length-1;Ae>=0;Ae--){const je=ce.attributes.item(Ae),it=je.name;if(!Re.includes(it.toLowerCase())){ce.removeAttribute(it);continue}const bt=je.value,Ce=ce[it];(null!=bt&&bt.toLowerCase().includes("javascript:")||null!=Ce&&Ce.toLowerCase().includes("javascript:"))&&ce.removeAttribute(it)}const de=H(ce);for(let Ae=0;Ae<de.length;Ae++)J(de[Ae])},H=ce=>null!=ce.children?ce.children:ce.childNodes,xe=()=>{var ce;const de=window,Ae=null===(ce=null==de?void 0:de.Ionic)||void 0===ce?void 0:ce.config;return!Ae||(Ae.get?Ae.get("sanitizerEnabled",!0):!0===Ae.sanitizerEnabled||void 0===Ae.sanitizerEnabled)},Re=["class","id","href","src","name","slot"],Pe=["script","style","iframe","meta","link","object","embed"];class me{constructor(de){this.value=de}}const Te=ce=>{const de=window,Ae=de.Ionic;if(!Ae||!Ae.config||"Object"===Ae.config.constructor.name)return de.Ionic=de.Ionic||{},de.Ionic.config=Object.assign(Object.assign({},de.Ionic.config),ce),de.Ionic.config},_e=!0},4349:(un,yt,V)=>{"use strict";V.d(yt,{G:()=>Re});class J{constructor(me,Te,Ve,_e,ce){this.id=Te,this.name=Ve,this.disableScroll=ce,this.priority=1e6*_e+Te,this.ctrl=me}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const me=this.ctrl.capture(this.name,this.id,this.priority);return me&&this.disableScroll&&this.ctrl.disableScroll(this.id),me}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class H{constructor(me,Te,Ve,_e){this.id=Te,this.disable=Ve,this.disableScroll=_e,this.ctrl=me}block(){if(this.ctrl){if(this.disable)for(const me of this.disable)this.ctrl.disableGesture(me,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const me of this.disable)this.ctrl.enableGesture(me,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const xe="backdrop-no-scroll",Re=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(me){var Te;return new J(this,this.newID(),me.name,null!==(Te=me.priority)&&void 0!==Te?Te:0,!!me.disableScroll)}createBlocker(me={}){return new H(this,this.newID(),me.disable,!!me.disableScroll)}start(me,Te,Ve){return this.canStart(me)?(this.requestedStart.set(Te,Ve),!0):(this.requestedStart.delete(Te),!1)}capture(me,Te,Ve){if(!this.start(me,Te,Ve))return!1;const _e=this.requestedStart;let ce=-1e4;if(_e.forEach(de=>{ce=Math.max(ce,de)}),ce===Ve){this.capturedId=Te,_e.clear();const de=new CustomEvent("ionGestureCaptured",{detail:{gestureName:me}});return document.dispatchEvent(de),!0}return _e.delete(Te),!1}release(me){this.requestedStart.delete(me),this.capturedId===me&&(this.capturedId=void 0)}disableGesture(me,Te){let Ve=this.disabledGestures.get(me);void 0===Ve&&(Ve=new Set,this.disabledGestures.set(me,Ve)),Ve.add(Te)}enableGesture(me,Te){const Ve=this.disabledGestures.get(me);void 0!==Ve&&Ve.delete(Te)}disableScroll(me){this.disabledScroll.add(me),1===this.disabledScroll.size&&document.body.classList.add(xe)}enableScroll(me){this.disabledScroll.delete(me),0===this.disabledScroll.size&&document.body.classList.remove(xe)}canStart(me){return!(void 0!==this.capturedId||this.isDisabled(me))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(me){const Te=this.disabledGestures.get(me);return!!(Te&&Te.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(un,yt,V)=>{"use strict";V.r(yt),V.d(yt,{MENU_BACK_BUTTON_PRIORITY:()=>Re,OVERLAY_BACK_BUTTON_PRIORITY:()=>xe,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>H});var u=V(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},H=()=>{const Pe=document;let me=!1;Pe.addEventListener("backbutton",()=>{if(me)return;let Te=0,Ve=[];const _e=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ae,je){Ve.push({priority:Ae,handler:je,id:Te++})}}});Pe.dispatchEvent(_e);const ce=function(){var Ae=(0,u.Z)(function*(je){try{if(null!=je&&je.handler){const it=je.handler(de);null!=it&&(yield it)}}catch(it){console.error(it)}});return function(it){return Ae.apply(this,arguments)}}(),de=()=>{if(Ve.length>0){let Ae={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ve.forEach(je=>{je.priority>=Ae.priority&&(Ae=je)}),me=!0,Ve=Ve.filter(je=>je.id!==Ae.id),ce(Ae).then(()=>me=!1)}};de()})},xe=100,Re=99},5730:(un,yt,V)=>{"use strict";V.d(yt,{a:()=>me,b:()=>Te,c:()=>H,d:()=>je,e:()=>it,f:()=>Ae,g:()=>Ve,h:()=>at,i:()=>Pe,j:()=>xe,k:()=>de,l:()=>bt,m:()=>ce,n:()=>Ce,o:()=>lt,p:()=>ae,q:()=>Ye,r:()=>_e,s:()=>G,t:()=>u,u:()=>ve});const u=(Me,Ne=0)=>new Promise(Q=>{J(Me,Ne,Q)}),J=(Me,Ne=0,Q)=>{let tt,Le;const ke={passive:!0},nt=()=>{tt&&tt()},We=gt=>{(void 0===gt||Me===gt.target)&&(nt(),Q(gt))};return Me&&(Me.addEventListener("webkitTransitionEnd",We,ke),Me.addEventListener("transitionend",We,ke),Le=setTimeout(We,Ne+500),tt=()=>{Le&&(clearTimeout(Le),Le=void 0),Me.removeEventListener("webkitTransitionEnd",We,ke),Me.removeEventListener("transitionend",We,ke)}),nt},H=(Me,Ne)=>{Me.componentOnReady?Me.componentOnReady().then(Q=>Ne(Q)):_e(()=>Ne(Me))},xe=(Me,Ne=[])=>{const Q={};return Ne.forEach(tt=>{Me.hasAttribute(tt)&&(null!==Me.getAttribute(tt)&&(Q[tt]=Me.getAttribute(tt)),Me.removeAttribute(tt))}),Q},Re=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Pe=(Me,Ne)=>{let Q=Re;return Ne&&Ne.length>0&&(Q=Q.filter(tt=>!Ne.includes(tt))),xe(Me,Q)},me=(Me,Ne,Q,tt)=>{var Le;if(typeof window<"u"){const ke=window,$e=null===(Le=null==ke?void 0:ke.Ionic)||void 0===Le?void 0:Le.config;if($e){const nt=$e.get("_ael");if(nt)return nt(Me,Ne,Q,tt);if($e._ael)return $e._ael(Me,Ne,Q,tt)}}return Me.addEventListener(Ne,Q,tt)},Te=(Me,Ne,Q,tt)=>{var Le;if(typeof window<"u"){const ke=window,$e=null===(Le=null==ke?void 0:ke.Ionic)||void 0===Le?void 0:Le.config;if($e){const nt=$e.get("_rel");if(nt)return nt(Me,Ne,Q,tt);if($e._rel)return $e._rel(Me,Ne,Q,tt)}}return Me.removeEventListener(Ne,Q,tt)},Ve=(Me,Ne=Me)=>Me.shadowRoot||Ne,_e=Me=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Me):"function"==typeof requestAnimationFrame?requestAnimationFrame(Me):setTimeout(Me),ce=Me=>!!Me.shadowRoot&&!!Me.attachShadow,de=Me=>{const Ne=Me.closest("ion-item");return Ne?Ne.querySelector("ion-label"):null},Ae=Me=>{if(Me.focus(),Me.classList.contains("ion-focusable")){const Ne=Me.closest("ion-app");Ne&&Ne.setFocus([Me])}},je=(Me,Ne)=>{let Q;const tt=Me.getAttribute("aria-labelledby"),Le=Me.id;let ke=null!==tt&&""!==tt.trim()?tt:Ne+"-lbl",$e=null!==tt&&""!==tt.trim()?document.getElementById(tt):de(Me);return $e?(null===tt&&($e.id=ke),Q=$e.textContent,$e.setAttribute("aria-hidden","true")):""!==Le.trim()&&($e=document.querySelector(`label[for="${Le}"]`),$e&&(""!==$e.id?ke=$e.id:$e.id=ke=`${Le}-lbl`,Q=$e.textContent)),{label:$e,labelId:ke,labelText:Q}},it=(Me,Ne,Q,tt,Le)=>{if(Me||ce(Ne)){let ke=Ne.querySelector("input.aux-input");ke||(ke=Ne.ownerDocument.createElement("input"),ke.type="hidden",ke.classList.add("aux-input"),Ne.appendChild(ke)),ke.disabled=Le,ke.name=Q,ke.value=tt||""}},bt=(Me,Ne,Q)=>Math.max(Me,Math.min(Ne,Q)),Ce=(Me,Ne)=>{if(!Me){const Q="ASSERT: "+Ne;throw console.error(Q),new Error(Q)}},ve=Me=>Me.timeStamp||Date.now(),ae=Me=>{if(Me){const Ne=Me.changedTouches;if(Ne&&Ne.length>0){const Q=Ne[0];return{x:Q.clientX,y:Q.clientY}}if(void 0!==Me.pageX)return{x:Me.pageX,y:Me.pageY}}return{x:0,y:0}},lt=Me=>{const Ne="rtl"===document.dir;switch(Me){case"start":return Ne;case"end":return!Ne;default:throw new Error(`"${Me}" is not a valid value for [side]. Use "start" or "end" instead.`)}},at=(Me,Ne)=>{const Q=Me._original||Me;return{_original:Me,emit:Ye(Q.emit.bind(Q),Ne)}},Ye=(Me,Ne=0)=>{let Q;return(...tt)=>{clearTimeout(Q),Q=setTimeout(Me,Ne,...tt)}},G=(Me,Ne)=>{if(null!=Me||(Me={}),null!=Ne||(Ne={}),Me===Ne)return!0;const Q=Object.keys(Me);if(Q.length!==Object.keys(Ne).length)return!1;for(const tt of Q)if(!(tt in Ne)||Me[tt]!==Ne[tt])return!1;return!0}},1843:(un,yt,V)=>{"use strict";V.d(yt,{L:()=>xe,a:()=>Re,b:()=>Pe,c:()=>me,d:()=>Te,e:()=>Ne,g:()=>Le,l:()=>G,s:()=>Q,t:()=>ce});var u=V(5861),J=V(1308),H=V(5730);const xe="ionViewWillEnter",Re="ionViewDidEnter",Pe="ionViewWillLeave",me="ionViewDidLeave",Te="ionViewWillUnload",ce=ke=>new Promise(($e,nt)=>{(0,J.c)(()=>{de(ke),Ae(ke).then(We=>{We.animation&&We.animation.destroy(),je(ke),$e(We)},We=>{je(ke),nt(We)})})}),de=ke=>{const $e=ke.enteringEl,nt=ke.leavingEl;tt($e,nt,ke.direction),ke.showGoBack?$e.classList.add("can-go-back"):$e.classList.remove("can-go-back"),Q($e,!1),$e.style.setProperty("pointer-events","none"),nt&&(Q(nt,!1),nt.style.setProperty("pointer-events","none"))},Ae=function(){var ke=(0,u.Z)(function*($e){const nt=yield it($e);return nt&&J.B.isBrowser?bt(nt,$e):Ce($e)});return function(nt){return ke.apply(this,arguments)}}(),je=ke=>{const $e=ke.enteringEl,nt=ke.leavingEl;$e.classList.remove("ion-page-invisible"),$e.style.removeProperty("pointer-events"),void 0!==nt&&(nt.classList.remove("ion-page-invisible"),nt.style.removeProperty("pointer-events"))},it=function(){var ke=(0,u.Z)(function*($e){return $e.leavingEl&&$e.animated&&0!==$e.duration?$e.animationBuilder?$e.animationBuilder:"ios"===$e.mode?(yield Promise.resolve().then(V.bind(V,6439))).iosTransitionAnimation:(yield Promise.resolve().then(V.bind(V,7838))).mdTransitionAnimation:void 0});return function(nt){return ke.apply(this,arguments)}}(),bt=function(){var ke=(0,u.Z)(function*($e,nt){yield ve(nt,!0);const We=$e(nt.baseEl,nt);at(nt.enteringEl,nt.leavingEl);const gt=yield lt(We,nt);return nt.progressCallback&&nt.progressCallback(void 0),gt&&Ye(nt.enteringEl,nt.leavingEl),{hasCompleted:gt,animation:We}});return function(nt,We){return ke.apply(this,arguments)}}(),Ce=function(){var ke=(0,u.Z)(function*($e){const nt=$e.enteringEl,We=$e.leavingEl;return yield ve($e,!1),at(nt,We),Ye(nt,We),{hasCompleted:!0}});return function(nt){return ke.apply(this,arguments)}}(),ve=function(){var ke=(0,u.Z)(function*($e,nt){const gt=(void 0!==$e.deepWait?$e.deepWait:nt)?[Ne($e.enteringEl),Ne($e.leavingEl)]:[Me($e.enteringEl),Me($e.leavingEl)];yield Promise.all(gt),yield ae($e.viewIsReady,$e.enteringEl)});return function(nt,We){return ke.apply(this,arguments)}}(),ae=function(){var ke=(0,u.Z)(function*($e,nt){$e&&(yield $e(nt))});return function(nt,We){return ke.apply(this,arguments)}}(),lt=(ke,$e)=>{const nt=$e.progressCallback,We=new Promise(gt=>{ke.onFinish(ot=>gt(1===ot))});return nt?(ke.progressStart(!0),nt(ke)):ke.play(),We},at=(ke,$e)=>{G($e,Pe),G(ke,xe)},Ye=(ke,$e)=>{G(ke,Re),G($e,me)},G=(ke,$e)=>{if(ke){const nt=new CustomEvent($e,{bubbles:!1,cancelable:!1});ke.dispatchEvent(nt)}},Me=ke=>ke?new Promise($e=>(0,H.c)(ke,$e)):Promise.resolve(),Ne=function(){var ke=(0,u.Z)(function*($e){const nt=$e;if(nt){if(null!=nt.componentOnReady){if(null!=(yield nt.componentOnReady()))return}else if(null!=nt.__registerHost)return void(yield new Promise(gt=>(0,H.r)(gt)));yield Promise.all(Array.from(nt.children).map(Ne))}});return function(nt){return ke.apply(this,arguments)}}(),Q=(ke,$e)=>{$e?(ke.setAttribute("aria-hidden","true"),ke.classList.add("ion-page-hidden")):(ke.hidden=!1,ke.removeAttribute("aria-hidden"),ke.classList.remove("ion-page-hidden"))},tt=(ke,$e,nt)=>{void 0!==ke&&(ke.style.zIndex="back"===nt?"99":"101"),void 0!==$e&&($e.style.zIndex="100")},Le=ke=>ke.classList.contains("ion-page")?ke:ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ke},6369:(un,yt,V)=>{"use strict";V.d(yt,{m:()=>ce});var u=V(5861),J=V(7593),H=V(5730),xe=V(5179),Re=V(181);const Pe=de=>(0,Re.c)().duration(de?400:300),me=de=>{let Ae,je;const it=de.width+8,bt=(0,Re.c)(),Ce=(0,Re.c)();de.isEndSide?(Ae=it+"px",je="0px"):(Ae=-it+"px",je="0px"),bt.addElement(de.menuInnerEl).fromTo("transform",`translateX(${Ae})`,`translateX(${je})`);const ae="ios"===(0,xe.b)(de),lt=ae?.2:.25;return Ce.addElement(de.backdropEl).fromTo("opacity",.01,lt),Pe(ae).addAnimation([bt,Ce])},Te=de=>{let Ae,je;const it=(0,xe.b)(de),bt=de.width;de.isEndSide?(Ae=-bt+"px",je=bt+"px"):(Ae=bt+"px",je=-bt+"px");const Ce=(0,Re.c)().addElement(de.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),ve=(0,Re.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ae})`),ae=(0,Re.c)().addElement(de.backdropEl).fromTo("opacity",.01,.32);return Pe("ios"===it).addAnimation([Ce,ve,ae])},Ve=de=>{const Ae=(0,xe.b)(de),je=de.width*(de.isEndSide?-1:1)+"px",it=(0,Re.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return Pe("ios"===Ae).addAnimation(it)},ce=(()=>{const de=new Map,Ae=[],je=function(){var De=(0,u.Z)(function*(we){const et=yield at(we);return!!et&&et.open()});return function(et){return De.apply(this,arguments)}}(),it=function(){var De=(0,u.Z)(function*(we){const et=yield void 0!==we?at(we):Ye();return void 0!==et&&et.close()});return function(et){return De.apply(this,arguments)}}(),bt=function(){var De=(0,u.Z)(function*(we){const et=yield at(we);return!!et&&et.toggle()});return function(et){return De.apply(this,arguments)}}(),Ce=function(){var De=(0,u.Z)(function*(we,et){const He=yield at(et);return He&&(He.disabled=!we),He});return function(et,He){return De.apply(this,arguments)}}(),ve=function(){var De=(0,u.Z)(function*(we,et){const He=yield at(et);return He&&(He.swipeGesture=we),He});return function(et,He){return De.apply(this,arguments)}}(),ae=function(){var De=(0,u.Z)(function*(we){if(null!=we){const et=yield at(we);return void 0!==et&&et.isOpen()}return void 0!==(yield Ye())});return function(et){return De.apply(this,arguments)}}(),lt=function(){var De=(0,u.Z)(function*(we){const et=yield at(we);return!!et&&!et.disabled});return function(et){return De.apply(this,arguments)}}(),at=function(){var De=(0,u.Z)(function*(we){return yield Ie(),"start"===we||"end"===we?ot(rt=>rt.side===we&&!rt.disabled)||ot(rt=>rt.side===we):null!=we?ot(He=>He.menuId===we):ot(He=>!He.disabled)||(Ae.length>0?Ae[0].el:void 0)});return function(et){return De.apply(this,arguments)}}(),Ye=function(){var De=(0,u.Z)(function*(){return yield Ie(),nt()});return function(){return De.apply(this,arguments)}}(),G=function(){var De=(0,u.Z)(function*(){return yield Ie(),We()});return function(){return De.apply(this,arguments)}}(),Me=function(){var De=(0,u.Z)(function*(){return yield Ie(),gt()});return function(){return De.apply(this,arguments)}}(),Ne=(De,we)=>{de.set(De,we)},Le=De=>{const we=De.side;Ae.filter(et=>et.side===we&&et!==De).forEach(et=>et.disabled=!0)},ke=function(){var De=(0,u.Z)(function*(we,et,He){if(gt())return!1;if(et){const rt=yield Ye();rt&&we.el!==rt&&(yield rt.setOpen(!1,!1))}return we._setOpen(et,He)});return function(et,He,rt){return De.apply(this,arguments)}}(),nt=()=>ot(De=>De._isOpen),We=()=>Ae.map(De=>De.el),gt=()=>Ae.some(De=>De.isAnimating),ot=De=>{const we=Ae.find(De);if(void 0!==we)return we.el},Ie=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(De=>new Promise(we=>(0,H.c)(De,we))));return Ne("reveal",Ve),Ne("push",Te),Ne("overlay",me),typeof document<"u"&&document.addEventListener("ionBackButton",De=>{const we=nt();we&&De.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>we.close())}),{registerAnimation:Ne,get:at,getMenus:G,getOpen:Ye,isEnabled:lt,swipeGesture:ve,isAnimating:Me,isOpen:ae,enable:Ce,toggle:bt,close:it,open:je,_getOpenSync:nt,_createAnimation:(De,we)=>{const et=de.get(De);if(!et)throw new Error("animation not registered");return et(we)},_register:De=>{Ae.indexOf(De)<0&&(De.disabled||Le(De),Ae.push(De))},_unregister:De=>{const we=Ae.indexOf(De);we>-1&&Ae.splice(we,1)},_setOpen:ke,_setActiveMenu:Le}})()},3457:(un,yt,V)=>{"use strict";V.d(yt,{w:()=>u});const u=typeof window<"u"?window:void 0},1898:(un,yt,V)=>{"use strict";V.r(yt),V.d(yt,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>Ve});var u=V(4349);const J=(Ae,je,it,bt)=>{const Ce=H(Ae)?{capture:!!bt.capture,passive:!!bt.passive}:!!bt.capture;let ve,ae;return Ae.__zone_symbol__addEventListener?(ve="__zone_symbol__addEventListener",ae="__zone_symbol__removeEventListener"):(ve="addEventListener",ae="removeEventListener"),Ae[ve](je,it,Ce),()=>{Ae[ae](je,it,Ce)}},H=Ae=>{if(void 0===xe)try{const je=Object.defineProperty({},"passive",{get:()=>{xe=!0}});Ae.addEventListener("optsTest",()=>{},je)}catch(je){xe=!1}return!!xe};let xe;const me=Ae=>Ae instanceof Document?Ae:Ae.ownerDocument,Ve=Ae=>{let je=!1,it=!1,bt=!0,Ce=!1;const ve=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ae),ae=ve.canStart,lt=ve.onWillStart,at=ve.onStart,Ye=ve.onEnd,G=ve.notCaptured,Me=ve.onMove,Ne=ve.threshold,Q=ve.passive,tt=ve.blurOnStart,Le={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ke=((Ae,je,it)=>{const bt=it*(Math.PI/180),Ce="x"===Ae,ve=Math.cos(bt),ae=je*je;let lt=0,at=0,Ye=!1,G=0;return{start(Me,Ne){lt=Me,at=Ne,G=0,Ye=!0},detect(Me,Ne){if(!Ye)return!1;const Q=Me-lt,tt=Ne-at,Le=Q*Q+tt*tt;if(Le<ae)return!1;const ke=Math.sqrt(Le),$e=(Ce?Q:tt)/ke;return G=$e>ve?1:$e<-ve?-1:0,Ye=!1,!0},isGesture:()=>0!==G,getDirection:()=>G}})(ve.direction,ve.threshold,ve.maxAngle),$e=u.G.createGesture({name:Ae.gestureName,priority:Ae.gesturePriority,disableScroll:Ae.disableScroll}),gt=()=>{je&&(Ce=!1,Me&&Me(Le))},ot=()=>!!$e.capture()&&(je=!0,bt=!1,Le.startX=Le.currentX,Le.startY=Le.currentY,Le.startTime=Le.currentTime,lt?lt(Le).then(De):De(),!0),De=()=>{tt&&(()=>{if(typeof document<"u"){const Ze=document.activeElement;null!=Ze&&Ze.blur&&Ze.blur()}})(),at&&at(Le),bt=!0},we=()=>{je=!1,it=!1,Ce=!1,bt=!0,$e.release()},et=Ze=>{const Pt=je,Ot=bt;if(we(),Ot){if(_e(Le,Ze),Pt)return void(Ye&&Ye(Le));G&&G(Le)}},He=((Ae,je,it,bt,Ce)=>{let ve,ae,lt,at,Ye,G,Me,Ne=0;const Q=Ie=>{Ne=Date.now()+2e3,je(Ie)&&(!ae&&it&&(ae=J(Ae,"touchmove",it,Ce)),lt||(lt=J(Ie.target,"touchend",Le,Ce)),at||(at=J(Ie.target,"touchcancel",Le,Ce)))},tt=Ie=>{Ne>Date.now()||je(Ie)&&(!G&&it&&(G=J(me(Ae),"mousemove",it,Ce)),Me||(Me=J(me(Ae),"mouseup",ke,Ce)))},Le=Ie=>{$e(),bt&&bt(Ie)},ke=Ie=>{nt(),bt&&bt(Ie)},$e=()=>{ae&&ae(),lt&&lt(),at&&at(),ae=lt=at=void 0},nt=()=>{G&&G(),Me&&Me(),G=Me=void 0},We=()=>{$e(),nt()},gt=(Ie=!0)=>{Ie?(ve||(ve=J(Ae,"touchstart",Q,Ce)),Ye||(Ye=J(Ae,"mousedown",tt,Ce))):(ve&&ve(),Ye&&Ye(),ve=Ye=void 0,We())};return{enable:gt,stop:We,destroy:()=>{gt(!1),bt=it=je=void 0}}})(ve.el,Ze=>{const Pt=de(Ze);return!(it||!bt||(ce(Ze,Le),Le.startX=Le.currentX,Le.startY=Le.currentY,Le.startTime=Le.currentTime=Pt,Le.velocityX=Le.velocityY=Le.deltaX=Le.deltaY=0,Le.event=Ze,ae&&!1===ae(Le))||($e.release(),!$e.start()))&&(it=!0,0===Ne?ot():(ke.start(Le.startX,Le.startY),!0))},Ze=>{je?!Ce&&bt&&(Ce=!0,_e(Le,Ze),requestAnimationFrame(gt)):(_e(Le,Ze),ke.detect(Le.currentX,Le.currentY)&&(!ke.isGesture()||!ot())&&rt())},et,{capture:!1,passive:Q}),rt=()=>{we(),He.stop(),G&&G(Le)};return{enable(Ze=!0){Ze||(je&&et(void 0),we()),He.enable(Ze)},destroy(){$e.destroy(),He.destroy()}}},_e=(Ae,je)=>{if(!je)return;const it=Ae.currentX,bt=Ae.currentY,Ce=Ae.currentTime;ce(je,Ae);const ve=Ae.currentX,ae=Ae.currentY,at=(Ae.currentTime=de(je))-Ce;if(at>0&&at<100){const G=(ae-bt)/at;Ae.velocityX=(ve-it)/at*.7+.3*Ae.velocityX,Ae.velocityY=.7*G+.3*Ae.velocityY}Ae.deltaX=ve-Ae.startX,Ae.deltaY=ae-Ae.startY,Ae.event=je},ce=(Ae,je)=>{let it=0,bt=0;if(Ae){const Ce=Ae.changedTouches;if(Ce&&Ce.length>0){const ve=Ce[0];it=ve.clientX,bt=ve.clientY}else void 0!==Ae.pageX&&(it=Ae.pageX,bt=Ae.pageY)}je.currentX=it,je.currentY=bt},de=Ae=>Ae.timeStamp||Date.now()},1308:(un,yt,V)=>{"use strict";V.d(yt,{B:()=>ki,H:()=>xn,a:()=>rt,b:()=>bi,c:()=>ei,e:()=>Oe,f:()=>Ur,g:()=>Ze,h:()=>bn,i:()=>Yn,j:()=>ir,k:()=>Pi,p:()=>bt,r:()=>wr,s:()=>je});var u=V(5861);let H,xe,Re,Pe=!1,me=!1,Te=!1,Ve=!1,_e=!1;const ce=typeof window<"u"?window:{},de=ce.document||{head:{}},Ae={$flags$:0,$resourcesUrl$:"",jmp:ne=>ne(),raf:ne=>requestAnimationFrame(ne),ael:(ne,he,qe,pt)=>ne.addEventListener(he,qe,pt),rel:(ne,he,qe,pt)=>ne.removeEventListener(he,qe,pt),ce:(ne,he)=>new CustomEvent(ne,he)},je=ne=>{Object.assign(Ae,ne)},bt=ne=>Promise.resolve(ne),Ce=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ne){}return!1})(),ve=(ne,he,qe,pt)=>{qe&&qe.map(([Mt,le,Qe])=>{const ht=lt(ne,Mt),Dt=ae(he,Qe),Ft=at(Mt);Ae.ael(ht,le,Dt,Ft),(he.$rmListeners$=he.$rmListeners$||[]).push(()=>Ae.rel(ht,le,Dt,Ft))})},ae=(ne,he)=>qe=>{try{256&ne.$flags$?ne.$lazyInstance$[he](qe):(ne.$queuedListeners$=ne.$queuedListeners$||[]).push([he,qe])}catch(pt){Bn(pt)}},lt=(ne,he)=>4&he?de:8&he?ce:16&he?de.body:ne,at=ne=>0!=(2&ne),Q="s-id",tt="sty-id",$e="http://www.w3.org/1999/xlink",gt=new WeakMap,ot=(ne,he,qe)=>{let pt=ii.get(ne);Ce&&qe?(pt=pt||new CSSStyleSheet,"string"==typeof pt?pt=he:pt.replaceSync(he)):pt=he,ii.set(ne,pt)},Ie=(ne,he,qe,pt)=>{let Mt=we(he,qe);const le=ii.get(Mt);if(ne=11===ne.nodeType?ne:de,le)if("string"==typeof le){let ht,Qe=gt.get(ne=ne.head||ne);Qe||gt.set(ne,Qe=new Set),Qe.has(Mt)||(ne.host&&(ht=ne.querySelector(`[${tt}="${Mt}"]`))?ht.innerHTML=le:(ht=de.createElement("style"),ht.innerHTML=le,ne.insertBefore(ht,ne.querySelector("link"))),Qe&&Qe.add(Mt))}else ne.adoptedStyleSheets.includes(le)||(ne.adoptedStyleSheets=[...ne.adoptedStyleSheets,le]);return Mt},we=(ne,he)=>"sc-"+(he&&32&ne.$flags$?ne.$tagName$+"-"+he:ne.$tagName$),et=ne=>ne.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),rt=ne=>$r.push(ne),Ze=ne=>kr(ne).$modeName$,Pt={},An=ne=>"object"==(ne=typeof ne)||"function"===ne,bn=(ne,he,...qe)=>{let pt=null,Mt=null,le=null,Qe=!1,ht=!1;const Dt=[],Ft=mn=>{for(let jn=0;jn<mn.length;jn++)pt=mn[jn],Array.isArray(pt)?Ft(pt):null!=pt&&"boolean"!=typeof pt&&((Qe="function"!=typeof ne&&!An(pt))&&(pt=String(pt)),Qe&&ht?Dt[Dt.length-1].$text$+=pt:Dt.push(Qe?Cn(null,pt):pt),ht=Qe)};if(Ft(qe),he){he.key&&(Mt=he.key),he.name&&(le=he.name);{const mn=he.className||he.class;mn&&(he.class="object"!=typeof mn?mn:Object.keys(mn).filter(jn=>mn[jn]).join(" "))}}if("function"==typeof ne)return ne(null===he?{}:he,Dt,gr);const Kt=Cn(ne,null);return Kt.$attrs$=he,Dt.length>0&&(Kt.$children$=Dt),Kt.$key$=Mt,Kt.$name$=le,Kt},Cn=(ne,he)=>({$flags$:0,$tag$:ne,$text$:he,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),xn={},gr={forEach:(ne,he)=>ne.map(Gn).forEach(he),map:(ne,he)=>ne.map(Gn).map(he).map(Ir)},Gn=ne=>({vattrs:ne.$attrs$,vchildren:ne.$children$,vkey:ne.$key$,vname:ne.$name$,vtag:ne.$tag$,vtext:ne.$text$}),Ir=ne=>{if("function"==typeof ne.vtag){const qe=Object.assign({},ne.vattrs);return ne.vkey&&(qe.key=ne.vkey),ne.vname&&(qe.name=ne.vname),bn(ne.vtag,qe,...ne.vchildren||[])}const he=Cn(ne.vtag,ne.vtext);return he.$attrs$=ne.vattrs,he.$children$=ne.vchildren,he.$key$=ne.vkey,he.$name$=ne.vname,he},Dn=(ne,he,qe,pt,Mt,le)=>{if(qe!==pt){let Qe=fi(ne,he),ht=he.toLowerCase();if("class"===he){const Dt=ne.classList,Ft=qt(qe),Kt=qt(pt);Dt.remove(...Ft.filter(mn=>mn&&!Kt.includes(mn))),Dt.add(...Kt.filter(mn=>mn&&!Ft.includes(mn)))}else if("style"===he){for(const Dt in qe)(!pt||null==pt[Dt])&&(Dt.includes("-")?ne.style.removeProperty(Dt):ne.style[Dt]="");for(const Dt in pt)(!qe||pt[Dt]!==qe[Dt])&&(Dt.includes("-")?ne.style.setProperty(Dt,pt[Dt]):ne.style[Dt]=pt[Dt])}else if("key"!==he)if("ref"===he)pt&&pt(ne);else if(Qe||"o"!==he[0]||"n"!==he[1]){const Dt=An(pt);if((Qe||Dt&&null!==pt)&&!Mt)try{if(ne.tagName.includes("-"))ne[he]=pt;else{const Kt=null==pt?"":pt;"list"===he?Qe=!1:(null==qe||ne[he]!=Kt)&&(ne[he]=Kt)}}catch(Kt){}let Ft=!1;ht!==(ht=ht.replace(/^xlink\:?/,""))&&(he=ht,Ft=!0),null==pt||!1===pt?(!1!==pt||""===ne.getAttribute(he))&&(Ft?ne.removeAttributeNS($e,he):ne.removeAttribute(he)):(!Qe||4&le||Mt)&&!Dt&&(pt=!0===pt?"":pt,Ft?ne.setAttributeNS($e,he,pt):ne.setAttribute(he,pt))}else he="-"===he[2]?he.slice(3):fi(ce,ht)?ht.slice(2):ht[2]+he.slice(3),qe&&Ae.rel(ne,he,qe,!1),pt&&Ae.ael(ne,he,pt,!1)}},Dr=/\s/,qt=ne=>ne?ne.split(Dr):[],Vr=(ne,he,qe,pt)=>{const Mt=11===he.$elm$.nodeType&&he.$elm$.host?he.$elm$.host:he.$elm$,le=ne&&ne.$attrs$||Pt,Qe=he.$attrs$||Pt;for(pt in le)pt in Qe||Dn(Mt,pt,le[pt],void 0,qe,he.$flags$);for(pt in Qe)Dn(Mt,pt,le[pt],Qe[pt],qe,he.$flags$)},Or=(ne,he,qe,pt)=>{const Mt=he.$children$[qe];let Qe,ht,Dt,le=0;if(Pe||(Te=!0,"slot"===Mt.$tag$&&(H&&pt.classList.add(H+"-s"),Mt.$flags$|=Mt.$children$?2:1)),null!==Mt.$text$)Qe=Mt.$elm$=de.createTextNode(Mt.$text$);else if(1&Mt.$flags$)Qe=Mt.$elm$=de.createTextNode("");else{if(Ve||(Ve="svg"===Mt.$tag$),Qe=Mt.$elm$=de.createElementNS(Ve?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Mt.$flags$?"slot-fb":Mt.$tag$),Ve&&"foreignObject"===Mt.$tag$&&(Ve=!1),Vr(null,Mt,Ve),(ne=>null!=ne)(H)&&Qe["s-si"]!==H&&Qe.classList.add(Qe["s-si"]=H),Mt.$children$)for(le=0;le<Mt.$children$.length;++le)ht=Or(ne,Mt,le,Qe),ht&&Qe.appendChild(ht);"svg"===Mt.$tag$?Ve=!1:"foreignObject"===Qe.tagName&&(Ve=!0)}return Qe["s-hn"]=Re,3&Mt.$flags$&&(Qe["s-sr"]=!0,Qe["s-cr"]=xe,Qe["s-sn"]=Mt.$name$||"",Dt=ne&&ne.$children$&&ne.$children$[qe],Dt&&Dt.$tag$===Mt.$tag$&&ne.$elm$&&hr(ne.$elm$,!1)),Qe},hr=(ne,he)=>{Ae.$flags$|=1;const qe=ne.childNodes;for(let pt=qe.length-1;pt>=0;pt--){const Mt=qe[pt];Mt["s-hn"]!==Re&&Mt["s-ol"]&&(Vn(Mt).insertBefore(Mt,vn(Mt)),Mt["s-ol"].remove(),Mt["s-ol"]=void 0,Te=!0),he&&hr(Mt,he)}Ae.$flags$&=-2},yi=(ne,he,qe,pt,Mt,le)=>{let ht,Qe=ne["s-cr"]&&ne["s-cr"].parentNode||ne;for(Qe.shadowRoot&&Qe.tagName===Re&&(Qe=Qe.shadowRoot);Mt<=le;++Mt)pt[Mt]&&(ht=Or(null,qe,Mt,ne),ht&&(pt[Mt].$elm$=ht,Qe.insertBefore(ht,vn(he))))},sr=(ne,he,qe,pt,Mt)=>{for(;he<=qe;++he)(pt=ne[he])&&(Mt=pt.$elm$,Er(pt),me=!0,Mt["s-ol"]?Mt["s-ol"].remove():hr(Mt,!0),Mt.remove())},fn=(ne,he)=>ne.$tag$===he.$tag$&&("slot"===ne.$tag$?ne.$name$===he.$name$:ne.$key$===he.$key$),vn=ne=>ne&&ne["s-ol"]||ne,Vn=ne=>(ne["s-ol"]?ne["s-ol"]:ne).parentNode,mr=(ne,he)=>{const qe=he.$elm$=ne.$elm$,pt=ne.$children$,Mt=he.$children$,le=he.$tag$,Qe=he.$text$;let ht;null===Qe?(Ve="svg"===le||"foreignObject"!==le&&Ve,"slot"===le||Vr(ne,he,Ve),null!==pt&&null!==Mt?((ne,he,qe,pt)=>{let xr,st,Mt=0,le=0,Qe=0,ht=0,Dt=he.length-1,Ft=he[0],Kt=he[Dt],mn=pt.length-1,jn=pt[0],ar=pt[mn];for(;Mt<=Dt&&le<=mn;)if(null==Ft)Ft=he[++Mt];else if(null==Kt)Kt=he[--Dt];else if(null==jn)jn=pt[++le];else if(null==ar)ar=pt[--mn];else if(fn(Ft,jn))mr(Ft,jn),Ft=he[++Mt],jn=pt[++le];else if(fn(Kt,ar))mr(Kt,ar),Kt=he[--Dt],ar=pt[--mn];else if(fn(Ft,ar))("slot"===Ft.$tag$||"slot"===ar.$tag$)&&hr(Ft.$elm$.parentNode,!1),mr(Ft,ar),ne.insertBefore(Ft.$elm$,Kt.$elm$.nextSibling),Ft=he[++Mt],ar=pt[--mn];else if(fn(Kt,jn))("slot"===Ft.$tag$||"slot"===ar.$tag$)&&hr(Kt.$elm$.parentNode,!1),mr(Kt,jn),ne.insertBefore(Kt.$elm$,Ft.$elm$),Kt=he[--Dt],jn=pt[++le];else{for(Qe=-1,ht=Mt;ht<=Dt;++ht)if(he[ht]&&null!==he[ht].$key$&&he[ht].$key$===jn.$key$){Qe=ht;break}Qe>=0?(st=he[Qe],st.$tag$!==jn.$tag$?xr=Or(he&&he[le],qe,Qe,ne):(mr(st,jn),he[Qe]=void 0,xr=st.$elm$),jn=pt[++le]):(xr=Or(he&&he[le],qe,le,ne),jn=pt[++le]),xr&&Vn(Ft.$elm$).insertBefore(xr,vn(Ft.$elm$))}Mt>Dt?yi(ne,null==pt[mn+1]?null:pt[mn+1].$elm$,qe,pt,le,mn):le>mn&&sr(he,Mt,Dt)})(qe,pt,he,Mt):null!==Mt?(null!==ne.$text$&&(qe.textContent=""),yi(qe,null,he,Mt,0,Mt.length-1)):null!==pt&&sr(pt,0,pt.length-1),Ve&&"svg"===le&&(Ve=!1)):(ht=qe["s-cr"])?ht.parentNode.textContent=Qe:ne.$text$!==Qe&&(qe.data=Qe)},Gt=ne=>{const he=ne.childNodes;let qe,pt,Mt,le,Qe,ht;for(pt=0,Mt=he.length;pt<Mt;pt++)if(qe=he[pt],1===qe.nodeType){if(qe["s-sr"])for(Qe=qe["s-sn"],qe.hidden=!1,le=0;le<Mt;le++)if(ht=he[le].nodeType,he[le]["s-hn"]!==qe["s-hn"]||""!==Qe){if(1===ht&&Qe===he[le].getAttribute("slot")){qe.hidden=!0;break}}else if(1===ht||3===ht&&""!==he[le].textContent.trim()){qe.hidden=!0;break}Gt(qe)}},Sr=[],oi=ne=>{let he,qe,pt,Mt,le,Qe,ht=0;const Dt=ne.childNodes,Ft=Dt.length;for(;ht<Ft;ht++){if(he=Dt[ht],he["s-sr"]&&(qe=he["s-cr"])&&qe.parentNode)for(pt=qe.parentNode.childNodes,Mt=he["s-sn"],Qe=pt.length-1;Qe>=0;Qe--)qe=pt[Qe],!qe["s-cn"]&&!qe["s-nr"]&&qe["s-hn"]!==he["s-hn"]&&(Gi(qe,Mt)?(le=Sr.find(Kt=>Kt.$nodeToRelocate$===qe),me=!0,qe["s-sn"]=qe["s-sn"]||Mt,le?le.$slotRefNode$=he:Sr.push({$slotRefNode$:he,$nodeToRelocate$:qe}),qe["s-sr"]&&Sr.map(Kt=>{Gi(Kt.$nodeToRelocate$,qe["s-sn"])&&(le=Sr.find(mn=>mn.$nodeToRelocate$===qe),le&&!Kt.$slotRefNode$&&(Kt.$slotRefNode$=le.$slotRefNode$))})):Sr.some(Kt=>Kt.$nodeToRelocate$===qe)||Sr.push({$nodeToRelocate$:qe}));1===he.nodeType&&oi(he)}},Gi=(ne,he)=>1===ne.nodeType?null===ne.getAttribute("slot")&&""===he||ne.getAttribute("slot")===he:ne["s-sn"]===he||""===he,Er=ne=>{ne.$attrs$&&ne.$attrs$.ref&&ne.$attrs$.ref(null),ne.$children$&&ne.$children$.map(Er)},Yn=ne=>kr(ne).$hostElement$,Oe=(ne,he,qe)=>{const pt=Yn(ne);return{emit:Mt=>Be(pt,he,{bubbles:!!(4&qe),composed:!!(2&qe),cancelable:!!(1&qe),detail:Mt})}},Be=(ne,he,qe)=>{const pt=Ae.ce(he,qe);return ne.dispatchEvent(pt),pt},Se=(ne,he)=>{he&&!ne.$onRenderResolve$&&he["s-p"]&&he["s-p"].push(new Promise(qe=>ne.$onRenderResolve$=qe))},Ge=(ne,he)=>{if(ne.$flags$|=16,!(4&ne.$flags$))return Se(ne,ne.$ancestorComponent$),ei(()=>Ue(ne,he));ne.$flags$|=512},Ue=(ne,he)=>{const pt=ne.$lazyInstance$;let Mt;return he&&(ne.$flags$|=256,ne.$queuedListeners$&&(ne.$queuedListeners$.map(([le,Qe])=>Wn(pt,le,Qe)),ne.$queuedListeners$=null),Mt=Wn(pt,"componentWillLoad")),Mt=pn(Mt,()=>Wn(pt,"componentWillRender")),pn(Mt,()=>Lt(ne,pt,he))},Lt=function(){var ne=(0,u.Z)(function*(he,qe,pt){const Mt=he.$hostElement$,Qe=Mt["s-rc"];pt&&(ne=>{const he=ne.$cmpMeta$,qe=ne.$hostElement$,pt=he.$flags$,le=Ie(qe.shadowRoot?qe.shadowRoot:qe.getRootNode(),he,ne.$modeName$);10&pt&&(qe["s-sc"]=le,qe.classList.add(le+"-h"),2&pt&&qe.classList.add(le+"-s"))})(he);Qt(he,qe),Qe&&(Qe.map(Dt=>Dt()),Mt["s-rc"]=void 0);{const Dt=Mt["s-p"],Ft=()=>dn(he);0===Dt.length?Ft():(Promise.all(Dt).then(Ft),he.$flags$|=4,Dt.length=0)}});return function(qe,pt,Mt){return ne.apply(this,arguments)}}(),Qt=(ne,he,qe)=>{try{he=he.render&&he.render(),ne.$flags$&=-17,ne.$flags$|=2,((ne,he)=>{const qe=ne.$hostElement$,pt=ne.$cmpMeta$,Mt=ne.$vnode$||Cn(null,null),le=(ne=>ne&&ne.$tag$===xn)(he)?he:bn(null,null,he);if(Re=qe.tagName,pt.$attrsToReflect$&&(le.$attrs$=le.$attrs$||{},pt.$attrsToReflect$.map(([Qe,ht])=>le.$attrs$[ht]=qe[Qe])),le.$tag$=null,le.$flags$|=4,ne.$vnode$=le,le.$elm$=Mt.$elm$=qe.shadowRoot||qe,H=qe["s-sc"],xe=qe["s-cr"],Pe=0!=(1&pt.$flags$),me=!1,mr(Mt,le),Ae.$flags$|=1,Te){oi(le.$elm$);let Qe,ht,Dt,Ft,Kt,mn,jn=0;for(;jn<Sr.length;jn++)Qe=Sr[jn],ht=Qe.$nodeToRelocate$,ht["s-ol"]||(Dt=de.createTextNode(""),Dt["s-nr"]=ht,ht.parentNode.insertBefore(ht["s-ol"]=Dt,ht));for(jn=0;jn<Sr.length;jn++)if(Qe=Sr[jn],ht=Qe.$nodeToRelocate$,Qe.$slotRefNode$){for(Ft=Qe.$slotRefNode$.parentNode,Kt=Qe.$slotRefNode$.nextSibling,Dt=ht["s-ol"];Dt=Dt.previousSibling;)if(mn=Dt["s-nr"],mn&&mn["s-sn"]===ht["s-sn"]&&Ft===mn.parentNode&&(mn=mn.nextSibling,!mn||!mn["s-nr"])){Kt=mn;break}(!Kt&&Ft!==ht.parentNode||ht.nextSibling!==Kt)&&ht!==Kt&&(!ht["s-hn"]&&ht["s-ol"]&&(ht["s-hn"]=ht["s-ol"].parentNode.nodeName),Ft.insertBefore(ht,Kt))}else 1===ht.nodeType&&(ht.hidden=!0)}me&&Gt(le.$elm$),Ae.$flags$&=-2,Sr.length=0})(ne,he)}catch(pt){Bn(pt,ne.$hostElement$)}return null},dn=ne=>{const qe=ne.$hostElement$,Mt=ne.$lazyInstance$,le=ne.$ancestorComponent$;Wn(Mt,"componentDidRender"),64&ne.$flags$?Wn(Mt,"componentDidUpdate"):(ne.$flags$|=64,br(qe),Wn(Mt,"componentDidLoad"),ne.$onReadyResolve$(qe),le||zn()),ne.$onInstanceResolve$(qe),ne.$onRenderResolve$&&(ne.$onRenderResolve$(),ne.$onRenderResolve$=void 0),512&ne.$flags$&&Un(()=>Ge(ne,!1)),ne.$flags$&=-517},ir=ne=>{{const he=kr(ne),qe=he.$hostElement$.isConnected;return qe&&2==(18&he.$flags$)&&Ge(he,!1),qe}},zn=ne=>{br(de.documentElement),Un(()=>Be(ce,"appload",{detail:{namespace:"ionic"}}))},Wn=(ne,he,qe)=>{if(ne&&ne[he])try{return ne[he](qe)}catch(pt){Bn(pt)}},pn=(ne,he)=>ne&&ne.then?ne.then(he):he(),br=ne=>ne.classList.add("hydrated"),ri=(ne,he,qe,pt,Mt,le,Qe)=>{let ht,Dt,Ft,Kt;if(1===le.nodeType){for(ht=le.getAttribute("c-id"),ht&&(Dt=ht.split("."),(Dt[0]===Qe||"0"===Dt[0])&&(Ft={$flags$:0,$hostId$:Dt[0],$nodeId$:Dt[1],$depth$:Dt[2],$index$:Dt[3],$tag$:le.tagName.toLowerCase(),$elm$:le,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},he.push(Ft),le.removeAttribute("c-id"),ne.$children$||(ne.$children$=[]),ne.$children$[Ft.$index$]=Ft,ne=Ft,pt&&"0"===Ft.$depth$&&(pt[Ft.$index$]=Ft.$elm$))),Kt=le.childNodes.length-1;Kt>=0;Kt--)ri(ne,he,qe,pt,Mt,le.childNodes[Kt],Qe);if(le.shadowRoot)for(Kt=le.shadowRoot.childNodes.length-1;Kt>=0;Kt--)ri(ne,he,qe,pt,Mt,le.shadowRoot.childNodes[Kt],Qe)}else if(8===le.nodeType)Dt=le.nodeValue.split("."),(Dt[1]===Qe||"0"===Dt[1])&&(ht=Dt[0],Ft={$flags$:0,$hostId$:Dt[1],$nodeId$:Dt[2],$depth$:Dt[3],$index$:Dt[4],$elm$:le,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===ht?(Ft.$elm$=le.nextSibling,Ft.$elm$&&3===Ft.$elm$.nodeType&&(Ft.$text$=Ft.$elm$.textContent,he.push(Ft),le.remove(),ne.$children$||(ne.$children$=[]),ne.$children$[Ft.$index$]=Ft,pt&&"0"===Ft.$depth$&&(pt[Ft.$index$]=Ft.$elm$))):Ft.$hostId$===Qe&&("s"===ht?(Ft.$tag$="slot",le["s-sn"]=Dt[5]?Ft.$name$=Dt[5]:"",le["s-sr"]=!0,pt&&(Ft.$elm$=de.createElement(Ft.$tag$),Ft.$name$&&Ft.$elm$.setAttribute("name",Ft.$name$),le.parentNode.insertBefore(Ft.$elm$,le),le.remove(),"0"===Ft.$depth$&&(pt[Ft.$index$]=Ft.$elm$)),qe.push(Ft),ne.$children$||(ne.$children$=[]),ne.$children$[Ft.$index$]=Ft):"r"===ht&&(pt?le.remove():(Mt["s-cr"]=le,le["s-cn"]=!0))));else if(ne&&"style"===ne.$tag$){const mn=Cn(null,le.textContent);mn.$elm$=le,mn.$index$="0",ne.$children$=[mn]}},ut=(ne,he)=>{if(1===ne.nodeType){let qe=0;for(;qe<ne.childNodes.length;qe++)ut(ne.childNodes[qe],he);if(ne.shadowRoot)for(qe=0;qe<ne.shadowRoot.childNodes.length;qe++)ut(ne.shadowRoot.childNodes[qe],he)}else if(8===ne.nodeType){const qe=ne.nodeValue.split(".");"o"===qe[0]&&(he.set(qe[1]+"."+qe[2],ne),ne.nodeValue="",ne["s-en"]=qe[3])}},Bt=(ne,he,qe)=>{if(he.$members$){ne.watchers&&(he.$watchers$=ne.watchers);const pt=Object.entries(he.$members$),Mt=ne.prototype;if(pt.map(([le,[Qe]])=>{31&Qe||2&qe&&32&Qe?Object.defineProperty(Mt,le,{get(){return((ne,he)=>kr(this).$instanceValues$.get(he))(0,le)},set(ht){((ne,he,qe,pt)=>{const Mt=kr(ne),le=Mt.$hostElement$,Qe=Mt.$instanceValues$.get(he),ht=Mt.$flags$,Dt=Mt.$lazyInstance$;qe=((ne,he)=>null==ne||An(ne)?ne:4&he?"false"!==ne&&(""===ne||!!ne):2&he?parseFloat(ne):1&he?String(ne):ne)(qe,pt.$members$[he][0]);const Ft=Number.isNaN(Qe)&&Number.isNaN(qe);if((!(8&ht)||void 0===Qe)&&qe!==Qe&&!Ft&&(Mt.$instanceValues$.set(he,qe),Dt)){if(pt.$watchers$&&128&ht){const mn=pt.$watchers$[he];mn&&mn.map(jn=>{try{Dt[jn](qe,Qe,he)}catch(ar){Bn(ar,le)}})}2==(18&ht)&&Ge(Mt,!1)}})(this,le,ht,he)},configurable:!0,enumerable:!0}):1&qe&&64&Qe&&Object.defineProperty(Mt,le,{value(...ht){const Dt=kr(this);return Dt.$onInstancePromise$.then(()=>Dt.$lazyInstance$[le](...ht))}})}),1&qe){const le=new Map;Mt.attributeChangedCallback=function(Qe,ht,Dt){Ae.jmp(()=>{const Ft=le.get(Qe);if(this.hasOwnProperty(Ft))Dt=this[Ft],delete this[Ft];else if(Mt.hasOwnProperty(Ft)&&"number"==typeof this[Ft]&&this[Ft]==Dt)return;this[Ft]=(null!==Dt||"boolean"!=typeof this[Ft])&&Dt})},ne.observedAttributes=pt.filter(([Qe,ht])=>15&ht[0]).map(([Qe,ht])=>{const Dt=ht[1]||Qe;return le.set(Dt,Qe),512&ht[0]&&he.$attrsToReflect$.push([Qe,Dt]),Dt})}}return ne},nn=function(){var ne=(0,u.Z)(function*(he,qe,pt,Mt,le){if(!(32&qe.$flags$)){{if(qe.$flags$|=32,(le=Br(pt)).then){const Ft=()=>{};le=yield le,Ft()}le.isProxied||(pt.$watchers$=le.watchers,Bt(le,pt,2),le.isProxied=!0);const Dt=()=>{};qe.$flags$|=8;try{new le(qe)}catch(Ft){Bn(Ft)}qe.$flags$&=-9,qe.$flags$|=128,Dt(),Ln(qe.$lazyInstance$)}if(le.style){let Dt=le.style;"string"!=typeof Dt&&(Dt=Dt[qe.$modeName$=(ne=>$r.map(he=>he(ne)).find(he=>!!he))(he)]);const Ft=we(pt,qe.$modeName$);if(!ii.has(Ft)){const Kt=()=>{};ot(Ft,Dt,!!(1&pt.$flags$)),Kt()}}}const Qe=qe.$ancestorComponent$,ht=()=>Ge(qe,!0);Qe&&Qe["s-rc"]?Qe["s-rc"].push(ht):ht()});return function(qe,pt,Mt,le,Qe){return ne.apply(this,arguments)}}(),Ln=ne=>{Wn(ne,"connectedCallback")},di=ne=>{const he=ne["s-cr"]=de.createComment("");he["s-cn"]=!0,ne.insertBefore(he,ne.firstChild)},bi=(ne,he={})=>{const pt=[],Mt=he.exclude||[],le=ce.customElements,Qe=de.head,ht=Qe.querySelector("meta[charset]"),Dt=de.createElement("style"),Ft=[],Kt=de.querySelectorAll(`[${tt}]`);let mn,jn=!0,ar=0;for(Object.assign(Ae,he),Ae.$resourcesUrl$=new URL(he.resourcesUrl||"./",de.baseURI).href,Ae.$flags$|=2;ar<Kt.length;ar++)ot(Kt[ar].getAttribute(tt),et(Kt[ar].innerHTML),!0);ne.map(xr=>{xr[1].map(st=>{const Fe={$flags$:st[0],$tagName$:st[1],$members$:st[2],$listeners$:st[3]};Fe.$members$=st[2],Fe.$listeners$=st[3],Fe.$attrsToReflect$=[],Fe.$watchers$={};const vt=Fe.$tagName$,Ut=class extends HTMLElement{constructor(Jt){super(Jt),hi(Jt=this,Fe),1&Fe.$flags$&&Jt.attachShadow({mode:"open",delegatesFocus:!!(16&Fe.$flags$)})}connectedCallback(){mn&&(clearTimeout(mn),mn=null),jn?Ft.push(this):Ae.jmp(()=>(ne=>{if(!(1&Ae.$flags$)){const he=kr(ne),qe=he.$cmpMeta$,pt=()=>{};if(1&he.$flags$)ve(ne,he,qe.$listeners$),Ln(he.$lazyInstance$);else{let Mt;if(he.$flags$|=1,Mt=ne.getAttribute(Q),Mt){if(1&qe.$flags$){const le=Ie(ne.shadowRoot,qe,ne.getAttribute("s-mode"));ne.classList.remove(le+"-h",le+"-s")}((ne,he,qe,pt)=>{const le=ne.shadowRoot,Qe=[],Dt=le?[]:null,Ft=pt.$vnode$=Cn(he,null);Ae.$orgLocNodes$||ut(de.body,Ae.$orgLocNodes$=new Map),ne[Q]=qe,ne.removeAttribute(Q),ri(Ft,Qe,[],Dt,ne,ne,qe),Qe.map(Kt=>{const mn=Kt.$hostId$+"."+Kt.$nodeId$,jn=Ae.$orgLocNodes$.get(mn),ar=Kt.$elm$;jn&&""===jn["s-en"]&&jn.parentNode.insertBefore(ar,jn.nextSibling),le||(ar["s-hn"]=he,jn&&(ar["s-ol"]=jn,ar["s-ol"]["s-nr"]=ar)),Ae.$orgLocNodes$.delete(mn)}),le&&Dt.map(Kt=>{Kt&&le.appendChild(Kt)})})(ne,qe.$tagName$,Mt,he)}Mt||12&qe.$flags$&&di(ne);{let le=ne;for(;le=le.parentNode||le.host;)if(1===le.nodeType&&le.hasAttribute("s-id")&&le["s-p"]||le["s-p"]){Se(he,he.$ancestorComponent$=le);break}}qe.$members$&&Object.entries(qe.$members$).map(([le,[Qe]])=>{if(31&Qe&&ne.hasOwnProperty(le)){const ht=ne[le];delete ne[le],ne[le]=ht}}),Un(()=>nn(ne,he,qe))}pt()}})(this))}disconnectedCallback(){Ae.jmp(()=>(ne=>{if(!(1&Ae.$flags$)){const he=kr(this),qe=he.$lazyInstance$;he.$rmListeners$&&(he.$rmListeners$.map(pt=>pt()),he.$rmListeners$=void 0),Wn(qe,"disconnectedCallback")}})())}componentOnReady(){return kr(this).$onReadyPromise$}};Fe.$lazyBundleId$=xr[0],!Mt.includes(vt)&&!le.get(vt)&&(pt.push(vt),le.define(vt,Bt(Ut,Fe,1)))})}),Dt.innerHTML=pt+"{visibility:hidden}.hydrated{visibility:inherit}",Dt.setAttribute("data-styles",""),Qe.insertBefore(Dt,ht?ht.nextSibling:Qe.firstChild),jn=!1,Ft.length?Ft.map(xr=>xr.connectedCallback()):Ae.jmp(()=>mn=setTimeout(zn,30))},Pi=ne=>{const he=new URL(ne,Ae.$resourcesUrl$);return he.origin!==ce.location.origin?he.href:he.pathname},or=new WeakMap,kr=ne=>or.get(ne),wr=(ne,he)=>or.set(he.$lazyInstance$=ne,he),hi=(ne,he)=>{const qe={$flags$:0,$hostElement$:ne,$cmpMeta$:he,$instanceValues$:new Map};return qe.$onInstancePromise$=new Promise(pt=>qe.$onInstanceResolve$=pt),qe.$onReadyPromise$=new Promise(pt=>qe.$onReadyResolve$=pt),ne["s-p"]=[],ne["s-rc"]=[],ve(ne,qe,he.$listeners$),or.set(ne,qe)},fi=(ne,he)=>he in ne,Bn=(ne,he)=>(0,console.error)(ne,he),qr=new Map,Br=(ne,he,qe)=>{const pt=ne.$tagName$.replace(/-/g,"_"),Mt=ne.$lazyBundleId$,le=qr.get(Mt);return le?le[pt]:V(863)(`./${Mt}.entry.js`).then(Qe=>(qr.set(Mt,Qe),Qe[pt]),Bn)},ii=new Map,$r=[],Kr=[],ls=[],Qi=(ne,he)=>qe=>{ne.push(qe),_e||(_e=!0,he&&4&Ae.$flags$?Un(cn):Ae.raf(cn))},Ci=ne=>{for(let he=0;he<ne.length;he++)try{ne[he](performance.now())}catch(qe){Bn(qe)}ne.length=0},cn=()=>{Ci(Kr),Ci(ls),(_e=Kr.length>0)&&Ae.raf(cn)},Un=ne=>bt().then(ne),Ur=Qi(Kr,!1),ei=Qi(ls,!0),ki={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(un,yt,V)=>{"use strict";V.d(yt,{a:()=>ce,b:()=>gt,c:()=>H,g:()=>_e,i:()=>ot});var u=V(1308);class J{constructor(){this.m=new Map}reset(De){this.m=new Map(Object.entries(De))}get(De,we){const et=this.m.get(De);return void 0!==et?et:we}getBoolean(De,we=!1){const et=this.m.get(De);return void 0===et?we:"string"==typeof et?"true"===et:!!et}getNumber(De,we){const et=parseFloat(this.m.get(De));return isNaN(et)?void 0!==we?we:NaN:et}set(De,we){this.m.set(De,we)}}const H=new J,Ve="ionic-persist-config",_e=Ie=>de(Ie),ce=(Ie,De)=>("string"==typeof Ie&&(De=Ie,Ie=void 0),_e(Ie).includes(De)),de=(Ie=window)=>{if(typeof Ie>"u")return[];Ie.Ionic=Ie.Ionic||{};let De=Ie.Ionic.platforms;return null==De&&(De=Ie.Ionic.platforms=Ae(Ie),De.forEach(we=>Ie.document.documentElement.classList.add(`plt-${we}`))),De},Ae=Ie=>{const De=H.get("platform");return Object.keys(nt).filter(we=>{const et=null==De?void 0:De[we];return"function"==typeof et?et(Ie):nt[we](Ie)})},it=Ie=>!!(ke(Ie,/iPad/i)||ke(Ie,/Macintosh/i)&&Ye(Ie)),ve=Ie=>ke(Ie,/android|sink/i),Ye=Ie=>$e(Ie,"(any-pointer:coarse)"),Me=Ie=>Ne(Ie)||Q(Ie),Ne=Ie=>!!(Ie.cordova||Ie.phonegap||Ie.PhoneGap),Q=Ie=>{const De=Ie.Capacitor;return!(null==De||!De.isNative)},ke=(Ie,De)=>De.test(Ie.navigator.userAgent),$e=(Ie,De)=>{var we;return null===(we=Ie.matchMedia)||void 0===we?void 0:we.call(Ie,De).matches},nt={ipad:it,iphone:Ie=>ke(Ie,/iPhone/i),ios:Ie=>ke(Ie,/iPhone|iPod/i)||it(Ie),android:ve,phablet:Ie=>{const De=Ie.innerWidth,we=Ie.innerHeight,et=Math.min(De,we),He=Math.max(De,we);return et>390&&et<520&&He>620&&He<800},tablet:Ie=>{const De=Ie.innerWidth,we=Ie.innerHeight,et=Math.min(De,we),He=Math.max(De,we);return it(Ie)||(Ie=>ve(Ie)&&!ke(Ie,/mobile/i))(Ie)||et>460&&et<820&&He>780&&He<1400},cordova:Ne,capacitor:Q,electron:Ie=>ke(Ie,/electron/i),pwa:Ie=>{var De;return!!(null!==(De=Ie.matchMedia)&&void 0!==De&&De.call(Ie,"(display-mode: standalone)").matches||Ie.navigator.standalone)},mobile:Ye,mobileweb:Ie=>Ye(Ie)&&!Me(Ie),desktop:Ie=>!Ye(Ie),hybrid:Me};let We;const gt=Ie=>Ie&&(0,u.g)(Ie)||We,ot=(Ie={})=>{if(typeof window>"u")return;const De=window.document,we=window,et=we.Ionic=we.Ionic||{},He={};Ie._ael&&(He.ael=Ie._ael),Ie._rel&&(He.rel=Ie._rel),Ie._ce&&(He.ce=Ie._ce),(0,u.s)(He);const rt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ie=>{try{const De=Ie.sessionStorage.getItem(Ve);return null!==De?JSON.parse(De):{}}catch(De){return{}}})(we)),{persistConfig:!1}),et.config),(Ie=>{const De={};return Ie.location.search.slice(1).split("&").map(we=>we.split("=")).map(([we,et])=>[decodeURIComponent(we),decodeURIComponent(et)]).filter(([we])=>((Ie,De)=>Ie.substr(0,De.length)===De)(we,"ionic:")).map(([we,et])=>[we.slice("ionic:".length),et]).forEach(([we,et])=>{De[we]=et}),De})(we)),Ie);H.reset(rt),H.getBoolean("persistConfig")&&((Ie,De)=>{try{Ie.sessionStorage.setItem(Ve,JSON.stringify(De))}catch(we){return}})(we,rt),de(we),et.config=H,et.mode=We=H.get("mode",De.documentElement.getAttribute("mode")||(ce(we,"ios")?"ios":"md")),H.set("mode",We),De.documentElement.setAttribute("mode",We),De.documentElement.classList.add(We),H.getBoolean("_testing")&&H.set("animated",!1);const Ze=Ot=>{var kt;return null===(kt=Ot.tagName)||void 0===kt?void 0:kt.startsWith("ION-")},Pt=Ot=>["ios","md"].includes(Ot);(0,u.a)(Ot=>{for(;Ot;){const kt=Ot.mode||Ot.getAttribute("mode");if(kt){if(Pt(kt))return kt;Ze(Ot)&&console.warn('Invalid ionic mode: "'+kt+'", expected: "ios" or "md"')}Ot=Ot.parentElement}return We})}},6439:(un,yt,V)=>{"use strict";V.r(yt),V.d(yt,{iosTransitionAnimation:()=>Ae,shadow:()=>me});var u=V(181),J=V(1843);V(3457),V(1308);const Pe=je=>document.querySelector(`${je}.ion-cloned-element`),me=je=>je.shadowRoot||je,Te=je=>{const it="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs"),bt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=it){const Ce=it.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ce?Ce.querySelector(bt):null}return je.querySelector(bt)},Ve=(je,it)=>{const bt="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs");let Ce=[];if(null!=bt){const ve=bt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ve&&(Ce=ve.querySelectorAll("ion-buttons"))}else Ce=je.querySelectorAll("ion-buttons");for(const ve of Ce){const ae=ve.closest("ion-header"),lt=ae&&!ae.classList.contains("header-collapse-condense-inactive"),at=ve.querySelector("ion-back-button"),Ye=ve.classList.contains("buttons-collapse");if(null!==at&&("start"===ve.slot||""===ve.slot)&&(Ye&&lt&&it||!Ye))return at}return null},ce=(je,it,bt,Ce,ve,ae)=>{const lt=it?`calc(100% - ${ae.right+4}px)`:ae.left-4+"px",at=it?"7px":"-7px",Ye=it?"-4px":"4px",G=it?"-4px":"4px",Me=it?"right":"left",Ne=it?"left":"right",Le=bt?[{offset:0,opacity:1,transform:`translate3d(${Ye}, ${ae.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${at}, ${ve.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${at}, ${ve.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ye}, ${ae.top-46}px, 0) scale(1)`}],nt=bt?[{offset:0,opacity:1,transform:`translate3d(${G}, ${ae.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${G}, ${ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${G}, ${ae.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${G}, ${ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${G}, ${ae.top-46}px, 0) scale(1)`}],We=(0,u.c)(),gt=(0,u.c)(),ot=Pe("ion-back-button"),Ie=me(ot).querySelector(".button-text"),De=me(ot).querySelector("ion-icon");ot.text=Ce.text,ot.mode=Ce.mode,ot.icon=Ce.icon,ot.color=Ce.color,ot.disabled=Ce.disabled,ot.style.setProperty("display","block"),ot.style.setProperty("position","fixed"),gt.addElement(De),We.addElement(Ie),We.beforeStyles({"transform-origin":`${Me} center`}).beforeAddWrite(()=>{Ce.style.setProperty("display","none"),ot.style.setProperty(Me,lt)}).afterAddWrite(()=>{Ce.style.setProperty("display",""),ot.style.setProperty("display","none"),ot.style.removeProperty(Me)}).keyframes(Le),gt.beforeStyles({"transform-origin":`${Ne} center`}).keyframes(nt),je.addAnimation([We,gt])},de=(je,it,bt,Ce,ve,ae)=>{const lt=it?`calc(100% - ${ve.right}px)`:`${ve.left}px`,at=it?"-18px":"18px",Ye=it?"right":"left",Ne=bt?[{offset:0,opacity:0,transform:`translate3d(${at}, ${ae.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ve.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ve.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${at}, ${ae.top-4}px, 0) scale(0.5)`}],Q=Pe("ion-title"),tt=(0,u.c)();Q.innerText=Ce.innerText,Q.size=Ce.size,Q.color=Ce.color,tt.addElement(Q),tt.beforeStyles({"transform-origin":`${Ye} center`,height:"46px",display:"",position:"relative",[Ye]:lt}).beforeAddWrite(()=>{Ce.style.setProperty("display","none")}).afterAddWrite(()=>{Ce.style.setProperty("display",""),Q.style.setProperty("display","none")}).keyframes(Ne),je.addAnimation(tt)},Ae=(je,it)=>{var bt;try{const Ce="cubic-bezier(0.32,0.72,0,1)",ve="opacity",ae="transform",lt="0%",Ye="rtl"===je.ownerDocument.dir,G=Ye?"-99.5%":"99.5%",Me=Ye?"33%":"-33%",Ne=it.enteringEl,Q=it.leavingEl,tt="back"===it.direction,Le=Ne.querySelector(":scope > ion-content"),ke=Ne.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),$e=Ne.querySelectorAll(":scope > ion-header > ion-toolbar"),nt=(0,u.c)(),We=(0,u.c)();if(nt.addElement(Ne).duration((null!==(bt=it.duration)&&void 0!==bt?bt:0)||540).easing(it.easing||Ce).fill("both").beforeRemoveClass("ion-page-invisible"),Q&&null!=je){const De=(0,u.c)();De.addElement(je),nt.addAnimation(De)}if(Le||0!==$e.length||0!==ke.length?(We.addElement(Le),We.addElement(ke)):We.addElement(Ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),nt.addAnimation(We),tt?We.beforeClearStyles([ve]).fromTo("transform",`translateX(${Me})`,`translateX(${lt})`).fromTo(ve,.8,1):We.beforeClearStyles([ve]).fromTo("transform",`translateX(${G})`,`translateX(${lt})`),Le){const De=me(Le).querySelector(".transition-effect");if(De){const we=De.querySelector(".transition-cover"),et=De.querySelector(".transition-shadow"),He=(0,u.c)(),rt=(0,u.c)(),Ze=(0,u.c)();He.addElement(De).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),rt.addElement(we).beforeClearStyles([ve]).fromTo(ve,0,.1),Ze.addElement(et).beforeClearStyles([ve]).fromTo(ve,.03,.7),He.addAnimation([rt,Ze]),We.addAnimation([He])}}const gt=Ne.querySelector("ion-header.header-collapse-condense"),{forward:ot,backward:Ie}=((je,it,bt,Ce,ve)=>{const ae=Ve(Ce,bt),lt=Te(ve),at=Te(Ce),Ye=Ve(ve,bt),G=null!==ae&&null!==lt&&!bt,Me=null!==at&&null!==Ye&&bt;if(G){const Ne=lt.getBoundingClientRect(),Q=ae.getBoundingClientRect();de(je,it,bt,lt,Ne,Q),ce(je,it,bt,ae,Ne,Q)}else if(Me){const Ne=at.getBoundingClientRect(),Q=Ye.getBoundingClientRect();de(je,it,bt,at,Ne,Q),ce(je,it,bt,Ye,Ne,Q)}return{forward:G,backward:Me}})(nt,Ye,tt,Ne,Q);if($e.forEach(De=>{const we=(0,u.c)();we.addElement(De),nt.addAnimation(we);const et=(0,u.c)();et.addElement(De.querySelector("ion-title"));const He=(0,u.c)(),rt=Array.from(De.querySelectorAll("ion-buttons,[menuToggle]")),Ze=De.closest("ion-header"),Pt=null==Ze?void 0:Ze.classList.contains("header-collapse-condense-inactive");let Ot;Ot=rt.filter(tt?Cn=>{const xn=Cn.classList.contains("buttons-collapse");return xn&&!Pt||!xn}:Cn=>!Cn.classList.contains("buttons-collapse")),He.addElement(Ot);const kt=(0,u.c)();kt.addElement(De.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ct=(0,u.c)();Ct.addElement(me(De).querySelector(".toolbar-background"));const An=(0,u.c)(),bn=De.querySelector("ion-back-button");if(bn&&An.addElement(bn),we.addAnimation([et,He,kt,Ct,An]),He.fromTo(ve,.01,1),kt.fromTo(ve,.01,1),tt)Pt||et.fromTo("transform",`translateX(${Me})`,`translateX(${lt})`).fromTo(ve,.01,1),kt.fromTo("transform",`translateX(${Me})`,`translateX(${lt})`),An.fromTo(ve,.01,1);else if(gt||et.fromTo("transform",`translateX(${G})`,`translateX(${lt})`).fromTo(ve,.01,1),kt.fromTo("transform",`translateX(${G})`,`translateX(${lt})`),Ct.beforeClearStyles([ve,"transform"]),(null==Ze?void 0:Ze.translucent)?Ct.fromTo("transform",Ye?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ct.fromTo(ve,.01,"var(--opacity)"),ot||An.fromTo(ve,.01,1),bn&&!ot){const xn=(0,u.c)();xn.addElement(me(bn).querySelector(".button-text")).fromTo("transform",Ye?"translateX(-100px)":"translateX(100px)","translateX(0px)"),we.addAnimation(xn)}}),Q){const De=(0,u.c)(),we=Q.querySelector(":scope > ion-content"),et=Q.querySelectorAll(":scope > ion-header > ion-toolbar"),He=Q.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(we||0!==et.length||0!==He.length?(De.addElement(we),De.addElement(He)):De.addElement(Q.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),nt.addAnimation(De),tt){De.beforeClearStyles([ve]).fromTo("transform",`translateX(${lt})`,Ye?"translateX(-100%)":"translateX(100%)");const rt=(0,J.g)(Q);nt.afterAddWrite(()=>{"normal"===nt.getDirection()&&rt.style.setProperty("display","none")})}else De.fromTo("transform",`translateX(${lt})`,`translateX(${Me})`).fromTo(ve,1,.8);if(we){const rt=me(we).querySelector(".transition-effect");if(rt){const Ze=rt.querySelector(".transition-cover"),Pt=rt.querySelector(".transition-shadow"),Ot=(0,u.c)(),kt=(0,u.c)(),Ct=(0,u.c)();Ot.addElement(rt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),kt.addElement(Ze).beforeClearStyles([ve]).fromTo(ve,.1,0),Ct.addElement(Pt).beforeClearStyles([ve]).fromTo(ve,.7,.03),Ot.addAnimation([kt,Ct]),De.addAnimation([Ot])}}et.forEach(rt=>{const Ze=(0,u.c)();Ze.addElement(rt);const Pt=(0,u.c)();Pt.addElement(rt.querySelector("ion-title"));const Ot=(0,u.c)(),kt=rt.querySelectorAll("ion-buttons,[menuToggle]"),Ct=rt.closest("ion-header"),An=null==Ct?void 0:Ct.classList.contains("header-collapse-condense-inactive"),bn=Array.from(kt).filter(Ir=>{const Dn=Ir.classList.contains("buttons-collapse");return Dn&&!An||!Dn});Ot.addElement(bn);const Cn=(0,u.c)(),xn=rt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");xn.length>0&&Cn.addElement(xn);const Ht=(0,u.c)();Ht.addElement(me(rt).querySelector(".toolbar-background"));const gr=(0,u.c)(),Gn=rt.querySelector("ion-back-button");if(Gn&&gr.addElement(Gn),Ze.addAnimation([Pt,Ot,Cn,gr,Ht]),nt.addAnimation(Ze),gr.fromTo(ve,.99,0),Ot.fromTo(ve,.99,0),Cn.fromTo(ve,.99,0),tt){if(An||Pt.fromTo("transform",`translateX(${lt})`,Ye?"translateX(-100%)":"translateX(100%)").fromTo(ve,.99,0),Cn.fromTo("transform",`translateX(${lt})`,Ye?"translateX(-100%)":"translateX(100%)"),Ht.beforeClearStyles([ve,"transform"]),(null==Ct?void 0:Ct.translucent)?Ht.fromTo("transform","translateX(0px)",Ye?"translateX(-100%)":"translateX(100%)"):Ht.fromTo(ve,"var(--opacity)",0),Gn&&!Ie){const Dn=(0,u.c)();Dn.addElement(me(Gn).querySelector(".button-text")).fromTo("transform",`translateX(${lt})`,`translateX(${(Ye?-124:124)+"px"})`),Ze.addAnimation(Dn)}}else An||Pt.fromTo("transform",`translateX(${lt})`,`translateX(${Me})`).fromTo(ve,.99,0).afterClearStyles([ae,ve]),Cn.fromTo("transform",`translateX(${lt})`,`translateX(${Me})`).afterClearStyles([ae,ve]),gr.afterClearStyles([ve]),Pt.afterClearStyles([ve]),Ot.afterClearStyles([ve])})}return nt}catch(Ce){throw Ce}}},7838:(un,yt,V)=>{"use strict";V.r(yt),V.d(yt,{mdTransitionAnimation:()=>Re});var u=V(181),J=V(1843);V(3457),V(1308);const Re=(Pe,me)=>{var Te,Ve,_e;const Ae="back"===me.direction,it=me.leavingEl,bt=(0,J.g)(me.enteringEl),Ce=bt.querySelector("ion-toolbar"),ve=(0,u.c)();if(ve.addElement(bt).fill("both").beforeRemoveClass("ion-page-invisible"),Ae?ve.duration((null!==(Te=me.duration)&&void 0!==Te?Te:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ve.duration((null!==(Ve=me.duration)&&void 0!==Ve?Ve:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ce){const ae=(0,u.c)();ae.addElement(Ce),ve.addAnimation(ae)}if(it&&Ae){ve.duration((null!==(_e=me.duration)&&void 0!==_e?_e:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ae=(0,u.c)();ae.addElement((0,J.g)(it)).onFinish(lt=>{1===lt&&ae.elements.length>0&&ae.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ve.addAnimation(ae)}return ve}},3539:(un,yt,V)=>{"use strict";V.d(yt,{B:()=>we,G:()=>et,a:()=>Te,b:()=>Ve,c:()=>Ae,d:()=>tt,e:()=>it,f:()=>ke,g:()=>We,h:()=>Pe,i:()=>ot,j:()=>ve,k:()=>Ne,l:()=>_e,m:()=>ce,s:()=>De});var u=V(5861),J=V(5179),H=V(7593),xe=V(5730);let Re=0;const Pe=new WeakMap,me=He=>({create:rt=>bt(He,rt),dismiss:(rt,Ze,Pt)=>G(document,rt,Ze,He,Pt),getTop:()=>(0,u.Z)(function*(){return Ne(document,He)})()}),Te=me("ion-alert"),Ve=me("ion-action-sheet"),_e=me("ion-loading"),ce=me("ion-modal"),Ae=me("ion-popover"),it=He=>{typeof document<"u"&&Ye(document);const rt=Re++;He.overlayIndex=rt,He.hasAttribute("id")||(He.id=`ion-overlay-${rt}`)},bt=(He,rt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(He).then(()=>{const Ze=document.createElement(He);return Ze.classList.add("overlay-hidden"),Object.assign(Ze,Object.assign(Object.assign({},rt),{hasController:!0})),$e(document).appendChild(Ze),new Promise(Pt=>(0,xe.c)(Ze,Pt))}):Promise.resolve(),Ce='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ve=(He,rt)=>{let Ze=He.querySelector(Ce);const Pt=null==Ze?void 0:Ze.shadowRoot;Pt&&(Ze=Pt.querySelector(Ce)||Ze),Ze?(0,xe.f)(Ze):rt.focus()},lt=(He,rt)=>{const Ze=Array.from(He.querySelectorAll(Ce));let Pt=Ze.length>0?Ze[Ze.length-1]:null;const Ot=null==Pt?void 0:Pt.shadowRoot;Ot&&(Pt=Ot.querySelector(Ce)||Pt),Pt?Pt.focus():rt.focus()},Ye=He=>{0===Re&&(Re=1,He.addEventListener("focus",rt=>{((He,rt)=>{const Ze=Ne(rt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Pt=He.target;Ze&&Pt&&!Ze.classList.contains("ion-disable-focus-trap")&&(Ze.shadowRoot?(()=>{if(Ze.contains(Pt))Ze.lastFocus=Pt;else{const Ct=Ze.lastFocus;ve(Ze,Ze),Ct===rt.activeElement&&lt(Ze,Ze),Ze.lastFocus=rt.activeElement}})():(()=>{if(Ze===Pt)Ze.lastFocus=void 0;else{const Ct=(0,xe.g)(Ze);if(!Ct.contains(Pt))return;const An=Ct.querySelector(".ion-overlay-wrapper");if(!An)return;if(An.contains(Pt))Ze.lastFocus=Pt;else{const bn=Ze.lastFocus;ve(An,Ze),bn===rt.activeElement&&lt(An,Ze),Ze.lastFocus=rt.activeElement}}})())})(rt,He)},!0),He.addEventListener("ionBackButton",rt=>{const Ze=Ne(He);null!=Ze&&Ze.backdropDismiss&&rt.detail.register(H.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ze.dismiss(void 0,we))}),He.addEventListener("keyup",rt=>{if("Escape"===rt.key){const Ze=Ne(He);null!=Ze&&Ze.backdropDismiss&&Ze.dismiss(void 0,we)}}))},G=(He,rt,Ze,Pt,Ot)=>{const kt=Ne(He,Pt,Ot);return kt?kt.dismiss(rt,Ze):Promise.reject("overlay does not exist")},Ne=(He,rt,Ze)=>{const Pt=((He,rt)=>(void 0===rt&&(rt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(He.querySelectorAll(rt)).filter(Ze=>Ze.overlayIndex>0)))(He,rt).filter(Ot=>!(He=>He.classList.contains("overlay-hidden"))(Ot));return void 0===Ze?Pt[Pt.length-1]:Pt.find(Ot=>Ot.id===Ze)},Q=(He=!1)=>{const Ze=$e(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ze&&(He?Ze.setAttribute("aria-hidden","true"):Ze.removeAttribute("aria-hidden"))},tt=function(){var He=(0,u.Z)(function*(rt,Ze,Pt,Ot,kt){var Ct,An;if(rt.presented)return;Q(!0),rt.presented=!0,rt.willPresent.emit(),null===(Ct=rt.willPresentShorthand)||void 0===Ct||Ct.emit();const bn=(0,J.b)(rt),Cn=rt.enterAnimation?rt.enterAnimation:J.c.get(Ze,"ios"===bn?Pt:Ot);(yield nt(rt,Cn,rt.el,kt))&&(rt.didPresent.emit(),null===(An=rt.didPresentShorthand)||void 0===An||An.emit()),"ION-TOAST"!==rt.el.tagName&&Le(rt.el),rt.keyboardClose&&(null===document.activeElement||!rt.el.contains(document.activeElement))&&rt.el.focus()});return function(Ze,Pt,Ot,kt,Ct){return He.apply(this,arguments)}}(),Le=function(){var He=(0,u.Z)(function*(rt){let Ze=document.activeElement;if(!Ze)return;const Pt=null==Ze?void 0:Ze.shadowRoot;Pt&&(Ze=Pt.querySelector(Ce)||Ze),yield rt.onDidDismiss(),Ze.focus()});return function(Ze){return He.apply(this,arguments)}}(),ke=function(){var He=(0,u.Z)(function*(rt,Ze,Pt,Ot,kt,Ct,An){var bn,Cn;if(!rt.presented)return!1;Q(!1),rt.presented=!1;try{rt.el.style.setProperty("pointer-events","none"),rt.willDismiss.emit({data:Ze,role:Pt}),null===(bn=rt.willDismissShorthand)||void 0===bn||bn.emit({data:Ze,role:Pt});const xn=(0,J.b)(rt),Ht=rt.leaveAnimation?rt.leaveAnimation:J.c.get(Ot,"ios"===xn?kt:Ct);Pt!==et&&(yield nt(rt,Ht,rt.el,An)),rt.didDismiss.emit({data:Ze,role:Pt}),null===(Cn=rt.didDismissShorthand)||void 0===Cn||Cn.emit({data:Ze,role:Pt}),Pe.delete(rt),rt.el.classList.add("overlay-hidden"),rt.el.style.removeProperty("pointer-events"),void 0!==rt.el.lastFocus&&(rt.el.lastFocus=void 0)}catch(xn){console.error(xn)}return rt.el.remove(),!0});return function(Ze,Pt,Ot,kt,Ct,An,bn){return He.apply(this,arguments)}}(),$e=He=>He.querySelector("ion-app")||He.body,nt=function(){var He=(0,u.Z)(function*(rt,Ze,Pt,Ot){Pt.classList.remove("overlay-hidden");const Ct=Ze(rt.el,Ot);(!rt.animated||!J.c.getBoolean("animated",!0))&&Ct.duration(0),rt.keyboardClose&&Ct.beforeAddWrite(()=>{const bn=Pt.ownerDocument.activeElement;null!=bn&&bn.matches("input,ion-input, ion-textarea")&&bn.blur()});const An=Pe.get(rt)||[];return Pe.set(rt,[...An,Ct]),yield Ct.play(),!0});return function(Ze,Pt,Ot,kt){return He.apply(this,arguments)}}(),We=(He,rt)=>{let Ze;const Pt=new Promise(Ot=>Ze=Ot);return gt(He,rt,Ot=>{Ze(Ot.detail)}),Pt},gt=(He,rt,Ze)=>{const Pt=Ot=>{(0,xe.b)(He,rt,Pt),Ze(Ot)};(0,xe.a)(He,rt,Pt)},ot=He=>"cancel"===He||He===we,Ie=He=>He(),De=(He,rt)=>{if("function"==typeof He)return J.c.get("_zoneGate",Ie)(()=>{try{return He(rt)}catch(Pt){throw Pt}})},we="backdrop",et="gesture"},3292:(un,yt,V)=>{"use strict";var u=V(1481),J=V(4650),H=V(2435),xe=V(2078);let Re=(()=>{class c{constructor(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=J.Xpm({type:c,selectors:[["app-root"]],decls:2,vars:0,template:function(l,g){1&l&&(J.TgZ(0,"ion-app"),J._UZ(1,"ion-router-outlet"),J.qZA())},dependencies:[xe.dr,xe.jP]}),c})();const Pe=[{path:"home",loadChildren:()=>Promise.all([V.e(8592),V.e(4851)]).then(V.bind(V,4851)).then(c=>c.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"details/:id",loadChildren:()=>Promise.all([V.e(8592),V.e(1333)]).then(V.bind(V,1333)).then(c=>c.DetailsPageModule)},{path:"details",loadChildren:()=>Promise.all([V.e(8592),V.e(1333)]).then(V.bind(V,1333)).then(c=>c.DetailsPageModule)}];let me=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=J.oAB({type:c}),c.\u0275inj=J.cJS({imports:[H.Bz.forRoot(Pe,{preloadingStrategy:H.wm}),H.Bz]}),c})();var Te=V(2011),Ve=V(1205),_e=V(9751),ce=V(9646),de=V(8996),Ae=V(4986),je=V(4482),it=V(5403),Ce=V(4004),ve=V(3900),ae=V(5813),lt=V(3942),at=V(5861),Ye=V(9681),G=V(2090),Me=V(4859);const Ne="firebasestorage.googleapis.com",Q="storageBucket";class ke extends G.ZR{constructor(a,l){super($e(a),`Firebase Storage: ${l} (${$e(a)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ke.prototype)}_codeEquals(a){return $e(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $e(c){return"storage/"+c}function nt(){return new ke("unknown","An unknown error occurred, please check the error payload for server response.")}function et(){return new ke("canceled","User canceled the upload/download.")}function Pt(){return new ke("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ct(c){return new ke("invalid-argument",c)}function An(){return new ke("app-deleted","The Firebase app was deleted.")}function bn(c){return new ke("invalid-root-operation","The operation '"+c+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cn(c,a){return new ke("invalid-format","String does not match format '"+c+"': "+a)}function xn(c){throw new ke("internal-error","Internal error: "+c)}class Ht{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let g;try{g=Ht.makeFromUrl(a,l)}catch(I){return new Ht(a,"")}if(""===g.path)return g;throw function rt(c){return new ke("invalid-default-bucket","Invalid default bucket '"+c+"'.")}(a)}static makeFromUrl(a,l){let g=null;const I="([A-Za-z0-9.\\-_]+)",Z=new RegExp("^gs://"+I+"(/(.*))?$","i");function ye(ji){ji.path_=decodeURIComponent(ji.path)}const wt=l.replace(/[.]/g,"\\."),as=[{regex:Z,indices:{bucket:1,path:3},postModify:function R(ji){"/"===ji.path.charAt(ji.path.length-1)&&(ji.path_=ji.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${wt}/v[A-Za-z0-9_]+/b/${I}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ye},{regex:new RegExp(`^https?://${l===Ne?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${I}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ye}];for(let ji=0;ji<as.length;ji++){const Du=as[ji],_l=Du.regex.exec(a);if(_l){let Tu=_l[Du.indices.path];Tu||(Tu=""),g=new Ht(_l[Du.indices.bucket],Tu),Du.postModify(g);break}}if(null==g)throw function He(c){return new ke("invalid-url","Invalid URL '"+c+"'.")}(a);return g}}class gr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Vr(c){return"string"==typeof c||c instanceof String}function Or(c){return hr()&&c instanceof Blob}function hr(){return typeof Blob<"u"}function yi(c,a,l,g){if(g<a)throw Ct(`Invalid value for '${c}'. Expected ${a} or greater.`);if(g>l)throw Ct(`Invalid value for '${c}'. Expected ${l} or less.`)}function sr(c,a,l){let g=a;return null==l&&(g=`https://${a}`),`${l}://${g}/v0${c}`}function wn(c){const a=encodeURIComponent;let l="?";for(const g in c)c.hasOwnProperty(g)&&(l=l+(a(g)+"=")+a(c[g])+"&");return l=l.slice(0,-1),l}var fn=(()=>{return(c=fn||(fn={}))[c.NO_ERROR=0]="NO_ERROR",c[c.NETWORK_ERROR=1]="NETWORK_ERROR",c[c.ABORT=2]="ABORT",fn;var c})();class vn{constructor(a,l,g,I,R,$,Z,oe,ye,mt,wt){this.url_=a,this.method_=l,this.headers_=g,this.body_=I,this.successCodes_=R,this.additionalRetryCodes_=$,this.callback_=Z,this.errorCallback_=oe,this.timeout_=ye,this.progressCallback_=mt,this.connectionFactory_=wt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Vt,yn)=>{this.resolve_=Vt,this.reject_=yn,this.start_()})}start_(){const l=(g,I)=>{const R=this.resolve_,$=this.reject_,Z=I.connection;if(I.wasSuccessCode)try{const oe=this.callback_(Z,Z.getResponse());!function Dn(c){return void 0!==c}(oe)?R():R(oe)}catch(oe){$(oe)}else if(null!==Z){const oe=nt();oe.serverResponse=Z.getErrorText(),$(this.errorCallback_?this.errorCallback_(Z,oe):oe)}else $(I.canceled?this.appDelete_?An():et():function we(){return new ke("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?l(0,new Vn(!1,null,!0)):this.backoffId_=function Gn(c,a,l){let g=1,I=null,R=null,$=!1,Z=0;function oe(){return 2===Z}let ye=!1;function mt(...Wr){ye||(ye=!0,a.apply(null,Wr))}function wt(Wr){I=setTimeout(()=>{I=null,c(yn,oe())},Wr)}function Vt(){R&&clearTimeout(R)}function yn(Wr,...Oi){if(ye)return void Vt();if(Wr)return Vt(),void mt.call(null,Wr,...Oi);if(oe()||$)return Vt(),void mt.call(null,Wr,...Oi);let as;g<64&&(g*=2),1===Z?(Z=2,as=0):as=1e3*(g+Math.random()),wt(as)}let On=!1;function pr(Wr){On||(On=!0,Vt(),!ye&&(null!==I?(Wr||(Z=2),clearTimeout(I),wt(0)):Wr||(Z=1)))}return wt(0),R=setTimeout(()=>{$=!0,pr(!0)},l),pr}((g,I)=>{if(I)return void g(!1,new Vn(!1,null,!0));const R=this.connectionFactory_();this.pendingConnection_=R;const $=Z=>{null!==this.progressCallback_&&this.progressCallback_(Z.loaded,Z.lengthComputable?Z.total:-1)};null!==this.progressCallback_&&R.addUploadProgressListener($),R.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&R.removeUploadProgressListener($),this.pendingConnection_=null;const Z=R.getErrorCode()===fn.NO_ERROR,oe=R.getStatus();if(!Z||this.isRetryStatusCode_(oe)){const mt=R.getErrorCode()===fn.ABORT;return void g(!1,new Vn(!1,null,mt))}const ye=-1!==this.successCodes_.indexOf(oe);g(!0,new Vn(ye,R))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Ir(c){c(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(a){const l=a>=500&&a<600,I=-1!==[408,429].indexOf(a),R=-1!==this.additionalRetryCodes_.indexOf(a);return l||I||R}}class Vn{constructor(a,l,g){this.wasSuccessCode=a,this.connection=l,this.canceled=!!g}}function Ii(...c){const a=function Er(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let g=0;g<c.length;g++)l.append(c[g]);return l.getBlob()}if(hr())return new Blob(c);throw new ke("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Be={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Se{constructor(a,l){this.data=a,this.contentType=l||null}}function Ge(c,a){switch(c){case Be.RAW:return new Se(Ue(a));case Be.BASE64:case Be.BASE64URL:return new Se(Qt(c,a));case Be.DATA_URL:return new Se(function ir(c){const a=new dn(c);return a.base64?Qt(Be.BASE64,a.rest):function Lt(c){let a;try{a=decodeURIComponent(c)}catch(l){throw Cn(Be.DATA_URL,"Malformed data URL.")}return Ue(a)}(a.rest)}(a),function zn(c){return new dn(c).contentType}(a))}throw nt()}function Ue(c){const a=[];for(let l=0;l<c.length;l++){let g=c.charCodeAt(l);g<=127?a.push(g):g<=2047?a.push(192|g>>6,128|63&g):55296==(64512&g)?l<c.length-1&&56320==(64512&c.charCodeAt(l+1))?(g=65536|(1023&g)<<10|1023&c.charCodeAt(++l),a.push(240|g>>18,128|g>>12&63,128|g>>6&63,128|63&g)):a.push(239,191,189):56320==(64512&g)?a.push(239,191,189):a.push(224|g>>12,128|g>>6&63,128|63&g)}return new Uint8Array(a)}function Qt(c,a){switch(c){case Be.BASE64:{const I=-1!==a.indexOf("-"),R=-1!==a.indexOf("_");if(I||R)throw Cn(c,"Invalid character '"+(I?"-":"_")+"' found: is it base64url encoded?");break}case Be.BASE64URL:{const I=-1!==a.indexOf("+"),R=-1!==a.indexOf("/");if(I||R)throw Cn(c,"Invalid character '"+(I?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Oe(c){return atob(c)}(a)}catch(I){throw Cn(c,"Invalid character found")}const g=new Uint8Array(l.length);for(let I=0;I<l.length;I++)g[I]=l.charCodeAt(I);return g}class dn{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw Cn(Be.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const g=l[1]||null;null!=g&&(this.base64=function Wn(c,a){return c.length>=a.length&&c.substring(c.length-a.length)===a}(g,";base64"),this.contentType=this.base64?g.substring(0,g.length-7):g),this.rest=a.substring(a.indexOf(",")+1)}}class pn{constructor(a,l){let g=0,I="";Or(a)?(this.data_=a,g=a.size,I=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),g=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),g=a.length),this.size_=g,this.type_=I}size(){return this.size_}type(){return this.type_}slice(a,l){if(Or(this.data_)){const I=function Yn(c,a,l){return c.webkitSlice?c.webkitSlice(a,l):c.mozSlice?c.mozSlice(a,l):c.slice?c.slice(a,l):null}(this.data_,a,l);return null===I?null:new pn(I)}{const g=new Uint8Array(this.data_.buffer,a,l-a);return new pn(g,!0)}}static getBlob(...a){if(hr()){const l=a.map(g=>g instanceof pn?g.data_:g);return new pn(Ii.apply(null,l))}{const l=a.map($=>Vr($)?Ge(Be.RAW,$).data:$.data_);let g=0;l.forEach($=>{g+=$.byteLength});const I=new Uint8Array(g);let R=0;return l.forEach($=>{for(let Z=0;Z<$.length;Z++)I[R++]=$[Z]}),new pn(I,!0)}}uploadData(){return this.data_}}function br(c){let a;try{a=JSON.parse(c)}catch(l){return null}return function qt(c){return"object"==typeof c&&!Array.isArray(c)}(a)?a:null}function ut(c){const a=c.lastIndexOf("/",c.length-2);return-1===a?c:c.slice(a+1)}function Je(c,a){return a}class ge{constructor(a,l,g,I){this.server=a,this.local=l||a,this.writable=!!g,this.xform=I||Je}}let _t=null;function nn(){if(_t)return _t;const c=[];c.push(new ge("bucket")),c.push(new ge("generation")),c.push(new ge("metageneration")),c.push(new ge("name","fullPath",!0));const l=new ge("name");l.xform=function a(R,$){return function Bt(c){return!Vr(c)||c.length<2?c:ut(c)}($)},c.push(l);const I=new ge("size");return I.xform=function g(R,$){return void 0!==$?Number($):$},c.push(I),c.push(new ge("timeCreated")),c.push(new ge("updated")),c.push(new ge("md5Hash",null,!0)),c.push(new ge("cacheControl",null,!0)),c.push(new ge("contentDisposition",null,!0)),c.push(new ge("contentEncoding",null,!0)),c.push(new ge("contentLanguage",null,!0)),c.push(new ge("contentType",null,!0)),c.push(new ge("metadata","customMetadata",!0)),_t=c,_t}function di(c,a,l){const g=br(a);return null===g?null:function Pr(c,a,l){const g={type:"file"},I=l.length;for(let R=0;R<I;R++){const $=l[R];g[$.local]=$.xform(g,a[$.server])}return function Ln(c,a){Object.defineProperty(c,"ref",{get:function l(){const R=new Ht(c.bucket,c.fullPath);return a._makeStorageReference(R)}})}(g,c),g}(c,g,l)}function bi(c,a){const l={},g=a.length;for(let I=0;I<g;I++){const R=a[I];R.writable&&(l[R.server]=c[R.local])}return JSON.stringify(l)}const Pi="prefixes",or="items";class hi{constructor(a,l,g,I){this.url=a,this.method=l,this.handler=g,this.timeout=I,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fi(c){if(!c)throw nt()}function Bn(c,a){return function l(g,I){const R=di(c,I,a);return fi(null!==R),R}}function ii(c){return function a(l,g){let I;return I=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Ie(){return new ke("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ot(){return new ke("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function gt(c){return new ke("quota-exceeded","Quota for bucket '"+c+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(c.bucket):403===l.getStatus()?function De(c){return new ke("unauthorized","User does not have permission to access '"+c+"'.")}(c.path):g,I.serverResponse=g.serverResponse,I}}function $r(c){const a=ii(c);return function l(g,I){let R=a(g,I);return 404===g.getStatus()&&(R=function We(c){return new ke("object-not-found","Object '"+c+"' does not exist.")}(c.path)),R.serverResponse=I.serverResponse,R}}function Kr(c,a,l){const I=sr(a.fullServerUrl(),c.host,c._protocol),$=c.maxOperationRetryTime,Z=new hi(I,"GET",Bn(c,l),$);return Z.errorHandler=$r(a),Z}function ls(c,a,l,g,I){const R={};R.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(R.delimiter=l),g&&(R.pageToken=g),I&&(R.maxResults=I);const Z=sr(a.bucketOnlyServerUrl(),c.host,c._protocol),ye=c.maxOperationRetryTime,mt=new hi(Z,"GET",function qr(c,a){return function l(g,I){const R=function wr(c,a,l){const g=br(l);return null===g?null:function kr(c,a,l){const g={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Pi])for(const I of l[Pi]){const R=I.replace(/\/$/,""),$=c._makeStorageReference(new Ht(a,R));g.prefixes.push($)}if(l[or])for(const I of l[or]){const R=c._makeStorageReference(new Ht(a,I.name));g.items.push(R)}return g}(c,a,g)}(c,a,I);return fi(null!==R),R}}(c,a.bucket),ye);return mt.urlParams=R,mt.errorHandler=ii(a),mt}function ei(c,a,l){const g=Object.assign({},l);return g.fullPath=c.path,g.size=a.size(),g.contentType||(g.contentType=function Ur(c,a){return c&&c.contentType||a&&a.type()||"application/octet-stream"}(null,a)),g}class ne{constructor(a,l,g,I){this.current=a,this.total=l,this.finalized=!!g,this.metadata=I||null}}function he(c,a){let l=null;try{l=c.getResponseHeader("X-Goog-Upload-Status")}catch(I){fi(!1)}return fi(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Qe={STATE_CHANGED:"state_changed"},ht={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Dt(c){switch(c){case"running":case"pausing":case"canceling":return ht.RUNNING;case"paused":return ht.PAUSED;case"success":return ht.SUCCESS;case"canceled":return ht.CANCELED;default:return ht.ERROR}}class Ft{constructor(a,l,g){if(function Dr(c){return"function"==typeof c}(a)||null!=l||null!=g)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=g?g:void 0;else{const R=a;this.next=R.next,this.error=R.error,this.complete=R.complete}}}function Kt(c){return(...a)=>{Promise.resolve().then(()=>c(...a))}}let mn=null;class jn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fn.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fn.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fn.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,g,I){if(this.sent_)throw xn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==I)for(const R in I)I.hasOwnProperty(R)&&this.xhr_.setRequestHeader(R,I[R].toString());return void 0!==g?this.xhr_.send(g):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(a){return-1}}getResponse(){if(!this.sent_)throw xn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class ar extends jn{initXhr(){this.xhr_.responseType="text"}}function xr(){return mn?mn():new ar}class Jt{constructor(a,l,g=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=g,this._mappings=nn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=I=>{this._request=void 0,this._chunkMultiplier=1,I._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=I,this._transition("error"))},this._metadataErrorHandler=I=>{this._request=void 0,I._codeEquals("canceled")?this.completeTransitions_():(this._error=I,this._transition("error"))},this._promise=new Promise((I,R)=>{this._resolve=I,this._reject=R,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,g])=>{switch(this._state){case"running":a(l,g);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const g=function qe(c,a,l,g,I){const R=a.bucketOnlyServerUrl(),$=ei(a,g,I),Z={name:$.fullPath},oe=sr(R,c.host,c._protocol),mt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${g.size()}`,"X-Goog-Upload-Header-Content-Type":$.contentType,"Content-Type":"application/json; charset=utf-8"},wt=bi($,l),On=new hi(oe,"POST",function yn(pr){let Wr;he(pr);try{Wr=pr.getResponseHeader("X-Goog-Upload-URL")}catch(Oi){fi(!1)}return fi(Vr(Wr)),Wr},c.maxUploadRetryTime);return On.urlParams=Z,On.headers=mt,On.body=wt,On.errorHandler=ii(a),On}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(g,xr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._uploadUrl=R,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,g)=>{const I=function pt(c,a,l,g){const oe=new hi(l,"POST",function R(ye){const mt=he(ye,["active","final"]);let wt=null;try{wt=ye.getResponseHeader("X-Goog-Upload-Size-Received")}catch(yn){fi(!1)}wt||fi(!1);const Vt=Number(wt);return fi(!isNaN(Vt)),new ne(Vt,g.size(),"final"===mt)},c.maxUploadRetryTime);return oe.headers={"X-Goog-Upload-Command":"query"},oe.errorHandler=ii(a),oe}(this._ref.storage,this._ref._location,a,this._blob),R=this._ref.storage._makeRequest(I,xr,l,g);this._request=R,R.getPromise().then($=>{this._request=void 0,this._updateProgress($.current),this._needToFetchStatus=!1,$.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new ne(this._transferred,this._blob.size()),g=this._uploadUrl;this._resolveToken((I,R)=>{let $;try{$=function le(c,a,l,g,I,R,$,Z){const oe=new ne(0,0);if($?(oe.current=$.current,oe.total=$.total):(oe.current=0,oe.total=g.size()),g.size()!==oe.total)throw function Ot(){return new ke("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ye=oe.total-oe.current;let mt=ye;I>0&&(mt=Math.min(mt,I));const wt=oe.current,On={"X-Goog-Upload-Command":mt===ye?"upload, finalize":"upload","X-Goog-Upload-Offset":`${oe.current}`},pr=g.slice(wt,wt+mt);if(null===pr)throw Pt();const as=new hi(l,"POST",function Wr(ji,Du){const _l=he(ji,["active","final"]),Su=oe.current+mt,Tu=g.size();let tc;return tc="final"===_l?Bn(a,R)(ji,Du):null,new ne(Su,Tu,"final"===_l,tc)},a.maxUploadRetryTime);return as.headers=On,as.body=pr.uploadData(),as.progressCallback=Z||null,as.errorHandler=ii(c),as}(this._ref._location,this._ref.storage,g,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(oe){return this._error=oe,void this._transition("error")}const Z=this._ref.storage._makeRequest($,xr,I,R);this._request=Z,Z.getPromise().then(oe=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(oe.current),oe.finalized?(this._metadata=oe.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const g=Kr(this._ref.storage,this._ref._location,this._mappings),I=this._ref.storage._makeRequest(g,xr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const g=function ki(c,a,l,g,I){const R=a.bucketOnlyServerUrl(),$={"X-Goog-Upload-Protocol":"multipart"},oe=function Z(){let as="";for(let ji=0;ji<2;ji++)as+=Math.random().toString().slice(2);return as}();$["Content-Type"]="multipart/related; boundary="+oe;const ye=ei(a,g,I),mt=bi(ye,l),yn=pn.getBlob("--"+oe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mt+"\r\n--"+oe+"\r\nContent-Type: "+ye.contentType+"\r\n\r\n",g,"\r\n--"+oe+"--");if(null===yn)throw Pt();const On={name:ye.fullPath},pr=sr(R,c.host,c._protocol),Oi=c.maxUploadRetryTime,Ss=new hi(pr,"POST",Bn(c,l),Oi);return Ss.urlParams=On,Ss.headers=$,Ss.body=yn.uploadData(),Ss.errorHandler=ii(a),Ss}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),I=this._ref.storage._makeRequest(g,xr,a,l);this._request=I,I.getPromise().then(R=>{this._request=void 0,this._metadata=R,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request&&this._request.cancel();break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=et(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Dt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,g,I){const R=new Ft(l||void 0,g||void 0,I||void 0);return this._addObserver(R),()=>{this._removeObserver(R)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Dt(this._state)){case ht.SUCCESS:Kt(this._resolve.bind(null,this.snapshot))();break;case ht.CANCELED:case ht.ERROR:Kt(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Dt(this._state)){case ht.RUNNING:case ht.PAUSED:a.next&&Kt(a.next.bind(a,this.snapshot))();break;case ht.SUCCESS:a.complete&&Kt(a.complete.bind(a))();break;default:a.error&&Kt(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class gn{constructor(a,l){this._service=a,this._location=l instanceof Ht?l:Ht.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new gn(a,l)}get root(){const a=new Ht(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ut(this._location.path)}get storage(){return this._service}get parent(){const a=function Gr(c){if(0===c.length)return null;const a=c.lastIndexOf("/");return-1===a?"":c.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Ht(this._location.bucket,a);return new gn(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw bn(a)}}function es(c,a,l){return us.apply(this,arguments)}function us(){return(us=(0,at.Z)(function*(c,a,l){const I=yield As(c,{pageToken:l});a.prefixes.push(...I.prefixes),a.items.push(...I.items),null!=I.nextPageToken&&(yield es(c,a,I.nextPageToken))})).apply(this,arguments)}function As(c,a){null!=a&&"number"==typeof a.maxResults&&yi("options.maxResults",1,1e3,a.maxResults);const l=a||{},g=ls(c.storage,c._location,"/",l.pageToken,l.maxResults);return c.storage.makeRequestWithTokens(g,xr)}function Qo(c){c._throwIfRoot("getDownloadURL");const a=function Ci(c,a,l){const I=sr(a.fullServerUrl(),c.host,c._protocol),$=c.maxOperationRetryTime,Z=new hi(I,"GET",function Br(c,a){return function l(g,I){const R=di(c,I,a);return fi(null!==R),function Bi(c,a,l,g){const I=br(a);if(null===I||!Vr(I.downloadTokens))return null;const R=I.downloadTokens;if(0===R.length)return null;const $=encodeURIComponent;return R.split(",").map(ye=>{const wt=c.fullPath;return sr("/b/"+$(c.bucket)+"/o/"+$(wt),l,g)+wn({alt:"media",token:ye})})[0]}(R,I,c.host,c._protocol)}}(c,l),$);return Z.errorHandler=$r(a),Z}(c.storage,c._location,nn());return c.storage.makeRequestWithTokens(a,xr).then(l=>{if(null===l)throw function kt(){return new ke("no-download-url","The given file does not have any download URLs.")}();return l})}function Di(c,a){const l=function ri(c,a){const l=a.split("/").filter(g=>g.length>0).join("/");return 0===c.length?l:c+"/"+l}(c._location.path,a),g=new Ht(c._location.bucket,l);return new gn(c.storage,g)}function Ro(c,a){if(c instanceof Ms){const l=c;if(null==l._bucket)throw function Ze(){return new ke("no-default-bucket","No default bucket found. Did you set the '"+Q+"' property when initializing the app?")}();const g=new gn(l,l._bucket);return null!=a?Ro(g,a):g}return void 0!==a?Di(c,a):c}function da(c,a){if(a&&function xs(c){return/^[A-Za-z]+:\/\//.test(c)}(a)){if(c instanceof Ms)return function Eo(c,a){return new gn(c,a)}(c,a);throw Ct("To use ref(service, url), the first argument must be a Storage instance.")}return Ro(c,a)}function wo(c,a){const l=null==a?void 0:a[Q];return null==l?null:Ht.makeFromBucketSpec(l,c)}class Ms{constructor(a,l,g,I,R){this.app=a,this._authProvider=l,this._appCheckProvider=g,this._url=I,this._firebaseVersion=R,this._bucket=null,this._host=Ne,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=I?Ht.makeFromBucketSpec(I,this._host):wo(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Ht.makeFromBucketSpec(this._url,a):wo(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){yi("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){yi("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,at.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const g=yield l.getToken();if(null!==g)return g.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,at.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new gn(this,a)}_makeRequest(a,l,g,I){if(this._deleted)return new gr(An());{const R=function Gi(c,a,l,g,I,R){const $=wn(c.urlParams),Z=c.url+$,oe=Object.assign({},c.headers);return function Sr(c,a){a&&(c["X-Firebase-GMPID"]=a)}(oe,a),function mr(c,a){null!==a&&a.length>0&&(c.Authorization="Firebase "+a)}(oe,l),function Gt(c,a){c["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(oe,R),function oi(c,a){null!==a&&(c["X-Firebase-AppCheck"]=a)}(oe,g),new vn(Z,c.method,oe,c.body,c.successCodes,c.additionalRetryCodes,c.handler,c.errorHandler,c.timeout,c.progressCallback,I)}(a,this._appId,g,I,l,this._firebaseVersion);return this._requests.add(R),R.getPromise().then(()=>this._requests.delete(R),()=>this._requests.delete(R)),R}}makeRequestWithTokens(a,l){var g=this;return(0,at.Z)(function*(){const[I,R]=yield Promise.all([g._getAuthToken(),g._getAppCheckToken()]);return g._makeRequest(a,l,I,R).getPromise()})()}}const zi="@firebase/storage";function ds(c,a){return da(c=(0,G.m9)(c),a)}function Xs(c,{instanceIdentifier:a}){const l=c.getProvider("app").getImmediate(),g=c.getProvider("auth-internal"),I=c.getProvider("app-check-internal");return new Ms(l,g,I,a,Ye.SDK_VERSION)}!function xa(){(0,Ye._registerComponent)(new Me.wA("storage",Xs,"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(zi,"0.9.9",""),(0,Ye.registerVersion)(zi,"0.9.9","esm2017")}();class yr{constructor(a,l,g){this._delegate=a,this.task=l,this.ref=g}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ys{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new yr(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(g=>{if(a)return a(new yr(g,this,this._ref))},l)}on(a,l,g,I){let R;return l&&(R="function"==typeof l?$=>l(new yr($,this,this._ref)):{next:l.next?$=>l.next(new yr($,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,R,g||void 0,I||void 0)}}class Po{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Zr(a,this._service))}get items(){return this._delegate.items.map(a=>new Zr(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Zr{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function ks(c,a){return Di(c,a)}(this._delegate,a);return new Zr(l,this.storage)}get root(){return new Zr(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Zr(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new ys(function Zs(c,a,l){return function hs(c,a,l){return c._throwIfRoot("uploadBytesResumable"),new Jt(c,new pn(a),l)}(c=(0,G.m9)(c),a,l)}(this._delegate,a,l),this)}putString(a,l=Be.RAW,g){this._throwIfRoot("putString");const I=Ge(l,a),R=Object.assign({},g);return null==R.contentType&&null!=I.contentType&&(R.contentType=I.contentType),new ys(new Jt(this._delegate,new pn(I.data,!0),R),this)}listAll(){return function gs(c){return function Ji(c){const a={prefixes:[],items:[]};return es(c,a).then(()=>a)}(c=(0,G.m9)(c))}(this._delegate).then(a=>new Po(a,this.storage))}list(a){return function Oo(c,a){return As(c=(0,G.m9)(c),a)}(this._delegate,a||void 0).then(l=>new Po(l,this.storage))}getMetadata(){return function Co(c){return function xi(c){c._throwIfRoot("getMetadata");const a=Kr(c.storage,c._location,nn());return c.storage.makeRequestWithTokens(a,xr)}(c=(0,G.m9)(c))}(this._delegate)}updateMetadata(a){return function cs(c,a){return function Xo(c,a){c._throwIfRoot("updateMetadata");const l=function cn(c,a,l,g){const R=sr(a.fullServerUrl(),c.host,c._protocol),Z=bi(l,g),ye=c.maxOperationRetryTime,mt=new hi(R,"PATCH",Bn(c,g),ye);return mt.headers={"Content-Type":"application/json; charset=utf-8"},mt.body=Z,mt.errorHandler=$r(a),mt}(c.storage,c._location,a,nn());return c.storage.makeRequestWithTokens(l,xr)}(c=(0,G.m9)(c),a)}(this._delegate,a)}getDownloadURL(){return function Rs(c){return Qo(c=(0,G.m9)(c))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Wi(c){return function Is(c){c._throwIfRoot("deleteObject");const a=function Un(c,a){const g=sr(a.fullServerUrl(),c.host,c._protocol),Z=new hi(g,"DELETE",function $(oe,ye){},c.maxOperationRetryTime);return Z.successCodes=[200,204],Z.errorHandler=$r(a),Z}(c.storage,c._location);return c.storage.makeRequestWithTokens(a,xr)}(c=(0,G.m9)(c))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw bn(a)}}class Jo{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(Hs(a))throw Ct("ref() expected a child path but got a URL, use refFromURL instead.");return new Zr(ds(this._delegate,a),this)}refFromURL(a){if(!Hs(a))throw Ct("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ht.makeFromUrl(a,this._delegate.host)}catch(l){throw Ct("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zr(ds(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,g={}){!function Ns(c,a,l,g={}){!function fs(c,a,l,g={}){c.host=`${a}:${l}`,c._protocol="http";const{mockUserToken:I}=g;I&&(c._overrideAuthToken="string"==typeof I?I:(0,G.Sg)(I,c.app.options.projectId))}(c,a,l,g)}(this._delegate,a,l,g)}}function Hs(c){return/^[A-Za-z]+:\/\//.test(c)}function qi(c,{instanceIdentifier:a}){const l=c.getProvider("app-compat").getImmediate(),g=c.getProvider("storage").getImmediate({identifier:a});return new Jo(l,g)}!function Ri(c){const a={TaskState:ht,TaskEvent:Qe,StringFormat:Be,Storage:Jo,Reference:Zr};c.INTERNAL.registerComponent(new Me.wA("storage-compat",qi,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),c.registerVersion("@firebase/storage-compat","0.1.17")}(lt.Z);var vs=V(440),Gs=V(127);function Os(c){const a=function zs(c){return new _e.y(a=>{const l=$=>a.next($);l(c.snapshot);const R=c.on("state_changed",l);return c.then($=>{l($),a.complete()},$=>{l(c.snapshot),($=>{a.error($)})($)}),function(){R()}}).pipe(function bt(c,a=Ae.z){return(0,je.e)((l,g)=>{let I=null,R=null,$=null;const Z=()=>{if(I){I.unsubscribe(),I=null;const ye=R;R=null,g.next(ye)}};function oe(){const ye=$+c,mt=a.now();if(mt<ye)return I=this.schedule(void 0,ye-mt),void g.add(I);Z()}l.subscribe((0,it.x)(g,ye=>{R=ye,$=a.now(),I||(I=a.schedule(oe,c),g.add(I))},()=>{Z(),g.complete()},void 0,()=>{R=I=null}))})}(0))}(c);return{task:c,then:c.then.bind(c),catch:c.catch.bind(c),pause:c.pause.bind(c),cancel:c.cancel.bind(c),resume:c.resume.bind(c),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,Ce.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function ko(c){return{getDownloadURL:()=>(0,ce.of)(void 0).pipe(ae.fc,(0,ve.w)(()=>c.getDownloadURL()),ae.iC),getMetadata:()=>(0,ce.of)(void 0).pipe(ae.fc,(0,ve.w)(()=>c.getMetadata()),ae.iC),delete:()=>(0,de.D)(c.delete()),child:a=>ko(c.child(a)),updateMetadata:a=>(0,de.D)(c.updateMetadata(a)),put:(a,l)=>Os(c.put(a,l)),putString:(a,l,g)=>Os(c.putString(a,l,g)),list:a=>(0,de.D)(c.list(a)),listAll:()=>(0,de.D)(c.listAll())}}const ea=new J.OlP("angularfire2.storageBucket"),er=new J.OlP("angularfire2.storage.maxUploadRetryTime"),Ma=new J.OlP("angularfire2.storage.maxOperationRetryTime"),Va=new J.OlP("angularfire2.storage.use-emulator");let Qs=(()=>{class c{constructor(l,g,I,R,$,Z,oe,ye,mt,wt){const Vt=(0,Te.on)(l,$,g);this.storage=(0,Te.cc)(`${Vt.name}.storage.${I}`,"AngularFireStorage",Vt.name,()=>{const yn=$.runOutsideAngular(()=>Vt.storage(I||void 0)),On=mt;return On&&yn.useEmulator(...On),oe&&yn.setMaxUploadRetryTime(oe),ye&&yn.setMaxOperationRetryTime(ye),yn},[oe,ye])}ref(l){return ko(this.storage.ref(l))}refFromURL(l){return ko(this.storage.refFromURL(l))}upload(l,g,I){return ko(this.storage.ref(l)).put(g,I)}}return c.\u0275fac=function(l){return new(l||c)(J.LFG(Te.Dh),J.LFG(Te.xv,8),J.LFG(ea,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(ae.HU),J.LFG(er,8),J.LFG(Ma,8),J.LFG(Va,8),J.LFG(vs.nm,8))},c.\u0275prov=J.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Ua=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=J.oAB({type:c}),c.\u0275inj=J.cJS({}),c})(),ja=(()=>{class c{constructor(){Gs.Z.registerVersion("angularfire",ae.q4.full,"gcs-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=J.oAB({type:c}),c.\u0275inj=J.cJS({providers:[Qs],imports:[Ua]}),c})();var co=V(7407),m=V(6451),w=V(3099),f=V(5026),S=V(1884),W=V(8421),ze=V(4671),zt=V(5032),ln=V(7669);V(1451);var $n=V(1877);const ts="@firebase/database";let ni="";function Ki(c){ni=c}class No{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,G.Pz)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,G.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class fa{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,G.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const ho=function(c){try{if(typeof window<"u"&&typeof window[c]<"u"){const a=window[c];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new No(a)}}catch(a){}return new fa},To=ho("localStorage"),pa=ho("sessionStorage"),Fo=new $n.Yd("@firebase/database"),Lo=function(){let c=1;return function(){return c++}}(),Js=function(c){const a=(0,G.dS)(c),l=new G.gQ;l.update(a);const g=l.digest();return G.US.encodeByteArray(g)},ga=function(...c){let a="";for(let l=0;l<c.length;l++){const g=c[l];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?a+=ga.apply(null,g):a+="object"==typeof g?(0,G.Pz)(g):g,a+=" "}return a};let fo=null,po=!0;const ru=function(c,a){(0,G.hu)(!a||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Fo.logLevel=$n.in.VERBOSE,fo=Fo.log.bind(Fo),a&&pa.set("logging_enabled",!0)):"function"==typeof c?fo=c:(fo=null,pa.remove("logging_enabled"))},$i=function(...c){if(!0===po&&(po=!1,null===fo&&!0===pa.get("logging_enabled")&&ru(!0)),fo){const a=ga.apply(null,c);fo(a)}},ta=function(c){return function(...a){$i(c,...a)}},iu=function(...c){const a="FIREBASE INTERNAL ERROR: "+ga(...c);Fo.error(a)},eo=function(...c){const a=`FIREBASE FATAL ERROR: ${ga(...c)}`;throw Fo.error(a),new Error(a)},Yi=function(...c){const a="FIREBASE WARNING: "+ga(...c);Fo.warn(a)},ma=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},Bo="[MIN_NAME]",mi="[MAX_NAME]",Ds=function(c,a){if(c===a)return 0;if(c===Bo||a===mi)return-1;if(a===Bo||c===mi)return 1;{const l=ie(c),g=ie(a);return null!==l?null!==g?l-g==0?c.length-a.length:l-g:-1:null!==g?1:c<a?-1:1}},li=function(c,a){return c===a?0:c<a?-1:1},ya=function(c,a){if(a&&c in a)return a[c];throw new Error("Missing required key ("+c+") in object: "+(0,G.Pz)(a))},Zi=function(c){if("object"!=typeof c||null===c)return(0,G.Pz)(c);const a=[];for(const g in c)a.push(g);a.sort();let l="{";for(let g=0;g<a.length;g++)0!==g&&(l+=","),l+=(0,G.Pz)(a[g]),l+=":",l+=Zi(c[a[g]]);return l+="}",l},Fl=function(c,a){const l=c.length;if(l<=a)return[c];const g=[];for(let I=0;I<l;I+=a)g.push(c.substring(I,I+a>l?l:I+a));return g};function _s(c,a){for(const l in c)c.hasOwnProperty(l)&&a(l,c[l])}const va=function(c){(0,G.hu)(!ma(c),"Invalid JSON number");const g=1023;let I,R,$,Z,oe;0===c?(R=0,$=0,I=1/c==-1/0?1:0):(I=c<0,(c=Math.abs(c))>=Math.pow(2,1-g)?(Z=Math.min(Math.floor(Math.log(c)/Math.LN2),g),R=Z+g,$=Math.round(c*Math.pow(2,52-Z)-Math.pow(2,52))):(R=0,$=Math.round(c/Math.pow(2,-1074))));const ye=[];for(oe=52;oe;oe-=1)ye.push($%2?1:0),$=Math.floor($/2);for(oe=11;oe;oe-=1)ye.push(R%2?1:0),R=Math.floor(R/2);ye.push(I?1:0),ye.reverse();const mt=ye.join("");let wt="";for(oe=0;oe<64;oe+=8){let Vt=parseInt(mt.substr(oe,8),2).toString(16);1===Vt.length&&(Vt="0"+Vt),wt+=Vt}return wt.toLowerCase()},N=new RegExp("^-?(0*)\\d{1,10}$"),q=-2147483648,B=2147483647,ie=function(c){if(N.test(c)){const a=Number(c);if(a>=q&&a<=B)return a}return null},Ee=function(c){try{c()}catch(a){setTimeout(()=>{throw Yi("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Et=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$t=function(c,a){const l=setTimeout(c,a);return"object"==typeof l&&l.unref&&l.unref(),l};class Pn{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(g=>this.appCheck=g)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,g)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,g):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(g=>g.addTokenListener(a))}notifyForInvalidToken(){Yi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vr{constructor(a,l,g){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(I=>this.auth_=I)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?($i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,g)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,g):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yi(a)}}let Mr=(()=>{class c{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const to=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ra="websocket",Fs="long_polling";class Xt{constructor(a,l,g,I,R=!1,$="",Z=!1){this.secure=l,this.namespace=g,this.webSocketOnly=I,this.nodeAdmin=R,this.persistenceKey=$,this.includeNamespaceInQueryParams=Z,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=To.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&To.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ea(c,a,l){let g;if((0,G.hu)("string"==typeof a,"typeof type must == string"),(0,G.hu)("object"==typeof l,"typeof params must == object"),a===ra)g=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(a!==Fs)throw new Error("Unknown connection type: "+a);g=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function _i(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(l.ns=c.namespace);const I=[];return _s(l,(R,$)=>{I.push(R+"="+$)}),g+I.join("&")}class no{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,G.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,G.p$)(this.counters_)}}const Tn={},Xn={};function rl(c){const a=c.toString();return Tn[a]||(Tn[a]=new no),Tn[a]}class At{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<g.length;++I)g[I]&&Ee(()=>{this.onMessage_(g[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hn{constructor(a,l,g,I,R,$,Z){this.connId=a,this.repoInfo=l,this.applicationId=g,this.appCheckToken=I,this.authToken=R,this.transportSessionId=$,this.lastSessionId=Z,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ta(a),this.stats_=rl(l),this.urlFn=oe=>(this.appCheckToken&&(oe.ac=this.appCheckToken),Ea(l,Fs,oe))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new At(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,G.Yr)()||"complete"===document.readyState)c();else{let a=!1;const l=function(){document.body?a||(a=!0,c()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cl((...R)=>{const[$,Z,oe,ye,mt]=R;if(this.incrementIncomingBytes_(R),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===$)this.id=Z,this.password=oe;else{if("close"!==$)throw new Error("Unrecognized command received: "+$);Z?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Z,()=>{this.onClosed_()})):this.onClosed_()}},(...R)=>{const[$,Z]=R;this.incrementIncomingBytes_(R),this.myPacketOrderer.handleResponse($,Z)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&to.test(location.hostname)&&(g.r="f");const I=this.urlFn(g);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hn.forceAllow_=!0}static forceDisallow(){Hn.forceDisallow_=!0}static isAvailable(){return!((0,G.Yr)()||!Hn.forceAllow_&&(Hn.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,G.Pz)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const g=(0,G.h$)(l),I=Fl(g,1840);for(let R=0;R<I.length;R++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[R]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,G.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=a,g.pw=l,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,G.Pz)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Cl{constructor(a,l,g,I){if(this.onDisconnect=g,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,G.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Lo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Cl.createIFrame_();let R="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(R='<script>document.domain="'+document.domain+'";<\/script>');const $="<html><body>"+R+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(Z){$i("frame writing exception"),Z.stack&&$i(Z.stack),$i(Z)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||$i("No IE domain setting required")}catch(l){const g=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),g="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const $=this.pendingSegs.shift();g=g+"&seg"+I+"="+$.seg+"&ts"+I+"="+$.ts+"&d"+I+"="+$.d,I++}return l+=g,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,g){this.pendingSegs.push({seg:a,ts:l,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const g=()=>{this.outstandingRequests.delete(l),this.newRequest_()},I=setTimeout(g,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(I),g()})}addTag(a,l){(0,G.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=a,g.onload=g.onreadystatechange=function(){const I=g.readyState;(!I||"loaded"===I||"complete"===I)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),l())},g.onerror=()=>{$i("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch(g){}},Math.floor(1))}}let Li=null;typeof MozWebSocket<"u"?Li=MozWebSocket:typeof WebSocket<"u"&&(Li=WebSocket);let rn=(()=>{class c{constructor(l,g,I,R,$,Z,oe){this.connId=l,this.applicationId=I,this.appCheckToken=R,this.authToken=$,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ta(this.connId),this.stats_=rl(g),this.connURL=c.connectionURL_(g,Z,oe,R,I),this.nodeAdmin=g.nodeAdmin}static connectionURL_(l,g,I,R,$){const Z={v:"5"};return!(0,G.Yr)()&&typeof location<"u"&&location.hostname&&to.test(location.hostname)&&(Z.r="f"),g&&(Z.s=g),I&&(Z.ls=I),R&&(Z.ac=R),$&&(Z.p=$),Ea(l,ra,Z)}open(l,g){this.onDisconnect=g,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,To.set("previous_websocket_failure",!0);try{let I;if((0,G.Yr)()){I={headers:{"User-Agent":`Firebase/5/${ni}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const $=process.env,Z=0===this.connURL.indexOf("wss://")?$.HTTPS_PROXY||$.https_proxy:$.HTTP_PROXY||$.http_proxy;Z&&(I.proxy={origin:Z})}this.mySock=new Li(this.connURL,[],I)}catch(I){this.log_("Error instantiating WebSocket.");const R=I.message||I.data;return R&&this.log_(R),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const R=I.message||I.data;R&&this.log_(R),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(l=!0)}return!l&&null!==Li&&!c.forceDisallow_}static previouslyFailed(){return To.isInMemoryStorage||!0===To.get("previous_websocket_failure")}markConnectionHealthy(){To.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const I=(0,G.cI)(g);this.onMessage(I)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,G.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const g=Number(l);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const g=l.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const I=this.extractFrameCount_(g);null!==I&&this.appendFrame_(I)}}send(l){this.resetKeepAlive();const g=(0,G.Pz)(l);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const I=Fl(g,16384);I.length>1&&this.sendString_(String(I.length));for(let R=0;R<I.length;R++)this.sendString_(I[R])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})(),Oa=(()=>{class c{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Hn,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const g=rn&&rn.isAvailable();let I=g&&!rn.previouslyFailed();if(l.webSocketOnly&&(g||Yi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),I=!0),I)this.transports_=[rn];else{const R=this.transports_=[];for(const $ of c.ALL_TRANSPORTS)$&&$.isAvailable()&&R.push($);c.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return c.globalTransportInitialized_=!1,c})();class go{constructor(a,l,g,I,R,$,Z,oe,ye,mt){this.id=a,this.repoInfo_=l,this.applicationId_=g,this.appCheckToken_=I,this.authToken_=R,this.onMessage_=$,this.onReady_=Z,this.onDisconnect_=oe,this.onKill_=ye,this.lastSessionId=mt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ta("c:"+this.id+":"),this.transportManager_=new Oa(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,g)},Math.floor(0));const I=a.healthyTimeout||0;I>0&&(this.healthyTimeout_=$t(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=ya("t",a),g=ya("d",a);if("c"===l)this.onSecondaryControl_(g);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=ya("t",a),g=ya("d",a);"c"===l?this.onControl_(g):"d"===l&&this.onDataMessage_(g)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=ya("t",a);if("d"in a){const g=a.d;if("h"===l)this.onHandshake_(g);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(g):"r"===l?this.onReset_(g):"e"===l?iu("Server Error: "+g):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iu("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,g=a.v,I=a.h;this.sessionId=a.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==g&&Yi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,g),$t(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$t(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(To.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Id{put(a,l,g,I){}merge(a,l,g,I){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,g){}onDisconnectMerge(a,l,g){}onDisconnectCancel(a,l){}reportStats(a){}}class sa{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,G.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const g=[...this.listeners_[a]];for(let I=0;I<g.length;I++)g[I].callback.apply(g[I].context,l)}}on(a,l,g){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:g});const I=this.getInitialEvent(a);I&&l.apply(g,I)}off(a,l,g){this.validateEventType_(a);const I=this.listeners_[a]||[];for(let R=0;R<I.length;R++)if(I[R].callback===l&&(!g||g===I[R].context))return void I.splice(R,1)}validateEventType_(a){(0,G.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class Ao extends sa{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,G.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ao}getInitialEvent(a){return(0,G.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const ol=32,ui=768;class ci{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let g=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[g]=this.pieces_[I],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Nr(){return new ci("")}function Fr(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function Xi(c){return c.pieces_.length-c.pieceNum_}function cr(c){let a=c.pieceNum_;return a<c.pieces_.length&&a++,new ci(c.pieces_,a)}function al(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function mo(c,a=0){return c.pieces_.slice(c.pieceNum_+a)}function is(c){if(c.pieceNum_>=c.pieces_.length)return null;const a=[];for(let l=c.pieceNum_;l<c.pieces_.length-1;l++)a.push(c.pieces_[l]);return new ci(a,0)}function Si(c,a){const l=[];for(let g=c.pieceNum_;g<c.pieces_.length;g++)l.push(c.pieces_[g]);if(a instanceof ci)for(let g=a.pieceNum_;g<a.pieces_.length;g++)l.push(a.pieces_[g]);else{const g=a.split("/");for(let I=0;I<g.length;I++)g[I].length>0&&l.push(g[I])}return new ci(l,0)}function Zn(c){return c.pieceNum_>=c.pieces_.length}function Tr(c,a){const l=Fr(c),g=Fr(a);if(null===l)return a;if(l===g)return Tr(cr(c),cr(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+c+")")}function io(c,a){const l=mo(c,0),g=mo(a,0);for(let I=0;I<l.length&&I<g.length;I++){const R=Ds(l[I],g[I]);if(0!==R)return R}return l.length===g.length?0:l.length<g.length?-1:1}function A(c,a){if(Xi(c)!==Xi(a))return!1;for(let l=c.pieceNum_,g=a.pieceNum_;l<=c.pieces_.length;l++,g++)if(c.pieces_[l]!==a.pieces_[g])return!1;return!0}function x(c,a){let l=c.pieceNum_,g=a.pieceNum_;if(Xi(c)>Xi(a))return!1;for(;l<c.pieces_.length;){if(c.pieces_[l]!==a.pieces_[g])return!1;++l,++g}return!0}class b{constructor(a,l){this.errorPrefix_=l,this.parts_=mo(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,G.ug)(this.parts_[g]);ee(this)}}function ee(c){if(c.byteLength_>ui)throw new Error(c.errorPrefix_+"has a key path longer than "+ui+" bytes ("+c.byteLength_+").");if(c.parts_.length>ol)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ol+") or object contains a cycle "+re(c))}function re(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class Xe extends sa{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const g=!document[a];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new Xe}getInitialEvent(a){return(0,G.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const St=1e3;let It,te=(()=>{class c extends Id{constructor(l,g,I,R,$,Z,oe,ye){if(super(),this.repoInfo_=l,this.applicationId_=g,this.onDataUpdate_=I,this.onConnectStatus_=R,this.onServerInfoUpdate_=$,this.authTokenProvider_=Z,this.appCheckTokenProvider_=oe,this.authOverride_=ye,this.id=c.nextPersistentConnectionId_++,this.log_=ta("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=St,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ye&&!(0,G.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xe.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Ao.getInstance().on("online",this.onOnline_,this)}sendRequest(l,g,I){const R=++this.requestNumber_,$={r:R,a:l,b:g};this.log_((0,G.Pz)($)),(0,G.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest($),I&&(this.requestCBHash_[R]=I)}get(l){this.initConnection_();const g=new G.BH,R={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:Z=>{const oe=Z.d;"ok"===Z.s?g.resolve(oe):g.reject(oe)}};return this.outstandingGets_.push(R),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),g.promise}listen(l,g,I,R){this.initConnection_();const $=l._queryIdentifier,Z=l._path.toString();this.log_("Listen called for "+Z+" "+$),this.listens.has(Z)||this.listens.set(Z,new Map),(0,G.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,G.hu)(!this.listens.get(Z).has($),"listen() called twice for same path/queryId.");const oe={onComplete:R,hashFn:g,query:l,tag:I};this.listens.get(Z).set($,oe),this.connected_&&this.sendListen_(oe)}sendGet_(l){const g=this.outstandingGets_[l];this.sendRequest("g",g.request,I=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(I)})}sendListen_(l){const g=l.query,I=g._path.toString(),R=g._queryIdentifier;this.log_("Listen on "+I+" for "+R);const $={p:I};l.tag&&($.q=g._queryObject,$.t=l.tag),$.h=l.hashFn(),this.sendRequest("q",$,oe=>{const ye=oe.d,mt=oe.s;c.warnOnListenWarnings_(ye,g),(this.listens.get(I)&&this.listens.get(I).get(R))===l&&(this.log_("listen response",oe),"ok"!==mt&&this.removeListen_(I,R),l.onComplete&&l.onComplete(mt,ye))})}static warnOnListenWarnings_(l,g){if(l&&"object"==typeof l&&(0,G.r3)(l,"w")){const I=(0,G.DV)(l,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const R='".indexOn": "'+g._queryParams.getIndex().toString()+'"',$=g._path.toString();Yi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${R} at ${$} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,G.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,g=(0,G.w9)(l)?"auth":"gauth",I={cred:l};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(g,I,R=>{const $=R.s,Z=R.d||"error";this.authToken_===l&&("ok"===$?this.invalidAuthTokenCount_=0:this.onAuthRevoked_($,Z))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const g=l.s,I=l.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,I)})}unlisten(l,g){const I=l._path.toString(),R=l._queryIdentifier;this.log_("Unlisten called for "+I+" "+R),(0,G.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,R)&&this.connected_&&this.sendUnlisten_(I,R,l._queryObject,g)}sendUnlisten_(l,g,I,R){this.log_("Unlisten on "+l+" for "+g);const $={p:l};R&&($.q=I,$.t=R),this.sendRequest("n",$)}onDisconnectPut(l,g,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,g,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:g,onComplete:I})}onDisconnectMerge(l,g,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,g,I):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:g,onComplete:I})}onDisconnectCancel(l,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,g):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(l,g,I,R){const $={p:g,d:I};this.log_("onDisconnect "+l,$),this.sendRequest(l,$,Z=>{R&&setTimeout(()=>{R(Z.s,Z.d)},Math.floor(0))})}put(l,g,I,R){this.putInternal("p",l,g,I,R)}merge(l,g,I,R){this.putInternal("m",l,g,I,R)}putInternal(l,g,I,R,$){this.initConnection_();const Z={p:g,d:I};void 0!==$&&(Z.h=$),this.outstandingPuts_.push({action:l,request:Z,onComplete:R}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(l){const g=this.outstandingPuts_[l].action,I=this.outstandingPuts_[l].request,R=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(g,I,$=>{this.log_(g+" response",$),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),R&&R($.s,$.d)})}reportStats(l){if(this.connected_){const g={c:l};this.log_("reportStats",g),this.sendRequest("s",g,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,G.Pz)(l));const g=l.r,I=this.requestCBHash_[g];I&&(delete this.requestCBHash_[g],I(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,g){this.log_("handleServerMessage",l,g),"d"===l?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===l?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===l?this.onListenRevoked_(g.p,g.q):"ac"===l?this.onAuthRevoked_(g.s,g.d):"apc"===l?this.onAppCheckRevoked_(g.s,g.d):"sd"===l?this.onSecurityDebugPacket_(g):iu("Unrecognized action received from server: "+(0,G.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,G.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=St),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-l);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,at.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const g=l.onDataMessage_.bind(l),I=l.onReady_.bind(l),R=l.onRealtimeDisconnect_.bind(l),$=l.id+":"+c.nextConnectionId_++,Z=l.lastSessionId;let oe=!1,ye=null;const mt=function(){ye?ye.close():(oe=!0,R())};l.realtime_={close:mt,sendRequest:function(yn){(0,G.hu)(ye,"sendRequest call when we're not connected not allowed."),ye.sendRequest(yn)}};const Vt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[yn,On]=yield Promise.all([l.authTokenProvider_.getToken(Vt),l.appCheckTokenProvider_.getToken(Vt)]);oe?$i("getToken() completed but was canceled"):($i("getToken() completed. Creating connection."),l.authToken_=yn&&yn.accessToken,l.appCheckToken_=On&&On.token,ye=new go($,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,g,I,R,pr=>{Yi(pr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},Z))}catch(yn){l.log_("Failed to get token: "+yn),oe||(l.repoInfo_.nodeAdmin&&Yi(yn),mt())}}})()}interrupt(l){$i("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){$i("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,G.xb)(this.interruptReasons_)&&(this.reconnectDelay_=St,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const g=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const g=this.outstandingPuts_[l];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,g){let I;I=g?g.map($=>Zi($)).join("$"):"default";const R=this.removeListen_(l,I);R&&R.onComplete&&R.onComplete("permission_denied")}removeListen_(l,g){const I=new ci(l).toString();let R;if(this.listens.has(I)){const $=this.listens.get(I);R=$.get(g),$.delete(g),0===$.size&&this.listens.delete(I)}else R=void 0;return R}onAuthRevoked_(l,g){$i("Auth token revoked: "+l+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,g){$i("App check token revoked: "+l+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const g of l.values())this.sendListen_(g);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let g="js";(0,G.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+g+"."+ni.replace(/\./g,"-")]=1,(0,G.uI)()?l["framework.cordova"]=1:(0,G.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Ao.getInstance().currentlyOnline();return(0,G.xb)(this.interruptReasons_)&&l}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class fe{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new fe(a,l)}}class dt{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const g=new fe(Bo,a),I=new fe(Bo,l);return 0!==this.compare(g,I)}minPost(){return fe.MIN}}class jt extends dt{static get __EMPTY_NODE(){return It}static set __EMPTY_NODE(a){It=a}compare(a,l){return Ds(a.name,l.name)}isDefinedOn(a){throw(0,G.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return fe.MIN}maxPost(){return new fe(mi,It)}makePost(a,l){return(0,G.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new fe(a,It)}toString(){return".key"}}const en=new jt;class Fn{constructor(a,l,g,I,R=null){this.isReverse_=I,this.resultGenerator_=R,this.nodeStack_=[];let $=1;for(;!a.isEmpty();)if($=l?g(a.key,l):1,I&&($*=-1),$<0)a=this.isReverse_?a.left:a.right;else{if(0===$){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Da,Jn=(()=>{class c{constructor(l,g,I,R,$){this.key=l,this.value=g,this.color=null!=I?I:c.RED,this.left=null!=R?R:Rn.EMPTY_NODE,this.right=null!=$?$:Rn.EMPTY_NODE}copy(l,g,I,R,$){return new c(null!=l?l:this.key,null!=g?g:this.value,null!=I?I:this.color,null!=R?R:this.left,null!=$?$:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,g,I){let R=this;const $=I(l,R.key);return R=$<0?R.copy(null,null,null,R.left.insert(l,g,I),null):0===$?R.copy(null,g,null,null,null):R.copy(null,null,null,null,R.right.insert(l,g,I)),R.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rn.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,g){let I,R;if(I=this,g(l,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(l,g),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===g(l,I.key)){if(I.right.isEmpty())return Rn.EMPTY_NODE;R=I.right.min_(),I=I.copy(R.key,R.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(l,g))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,g)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class Rn{constructor(a,l=Rn.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Rn(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,Jn.BLACK,null,null))}remove(a){return new Rn(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,Jn.BLACK,null,null))}get(a){let l,g=this.root_;for(;!g.isEmpty();){if(l=this.comparator_(a,g.key),0===l)return g.value;l<0?g=g.left:l>0&&(g=g.right)}return null}getPredecessorKey(a){let l,g=this.root_,I=null;for(;!g.isEmpty();){if(l=this.comparator_(a,g.key),0===l){if(g.left.isEmpty())return I?I.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}l<0?g=g.left:l>0&&(I=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new Fn(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new Fn(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new Fn(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new Fn(this.root_,null,this.comparator_,!0,a)}}function ss(c,a){return Ds(c.name,a.name)}function yo(c,a){return Ds(c,a)}Rn.EMPTY_NODE=new class dr{copy(a,l,g,I,R){return this}insert(a,l,g){return new Jn(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tl=function(c){return"number"==typeof c?"number:"+va(c):"string:"+c},Ou=function(c){if(c.isLeafNode()){const a=c.val();(0,G.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,G.r3)(a,".sv"),"Priority must be a string or number.")}else(0,G.hu)(c===Da||c.isEmpty(),"priority of unexpected type.");(0,G.hu)(c===Da||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ll,Pa,Al,oa=(()=>{class c{constructor(l,g=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=g,this.lazyHash_=null,(0,G.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ou(this.priorityNode_)}static set __childrenNodeConstructor(l){ll=l}static get __childrenNodeConstructor(){return ll}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new c(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Zn(l)?this:".priority"===Fr(l)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,g){return null}updateImmediateChild(l,g){return".priority"===l?this.updatePriority(g):g.isEmpty()&&".priority"!==l?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,g).updatePriority(this.priorityNode_)}updateChild(l,g){const I=Fr(l);return null===I?g:g.isEmpty()&&".priority"!==I?this:((0,G.hu)(".priority"!==I||1===Xi(l),".priority must be the last token in a path"),this.updateImmediateChild(I,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(l),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,g){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Tl(this.priorityNode_.val())+":");const g=typeof this.value_;l+=g+":",l+="number"===g?va(this.value_):this.value_,this.lazyHash_=Js(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===c.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof c.__childrenNodeConstructor?-1:((0,G.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const g=typeof l.value_,I=typeof this.value_,R=c.VALUE_TYPE_ORDER.indexOf(g),$=c.VALUE_TYPE_ORDER.indexOf(I);return(0,G.hu)(R>=0,"Unknown leaf type: "+g),(0,G.hu)($>=0,"Unknown leaf type: "+I),R===$?"object"===I?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:$-R}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const Ui=new class Go extends dt{compare(a,l){const g=a.node.getPriority(),I=l.node.getPriority(),R=g.compareTo(I);return 0===R?Ds(a.name,l.name):R}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return fe.MIN}maxPost(){return new fe(mi,new oa("[PRIORITY-POST]",Al))}makePost(a,l){const g=Pa(a);return new fe(l,new oa("[PRIORITY-POST]",g))}toString(){return".priority"}},os=Math.log(2);class rp{constructor(a){this.count=parseInt(Math.log(a+1)/os,10),this.current_=this.count-1;const I=(R=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&I}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const uu=function(c,a,l,g){c.sort(a);const I=function(oe,ye){const mt=ye-oe;let wt,Vt;if(0===mt)return null;if(1===mt)return wt=c[oe],Vt=l?l(wt):wt,new Jn(Vt,wt.node,Jn.BLACK,null,null);{const yn=parseInt(mt/2,10)+oe,On=I(oe,yn),pr=I(yn+1,ye);return wt=c[yn],Vt=l?l(wt):wt,new Jn(Vt,wt.node,Jn.BLACK,On,pr)}},Z=function(oe){let ye=null,mt=null,wt=c.length;const Vt=function(On,pr){const Wr=wt-On,Oi=wt;wt-=On;const Ss=I(Wr+1,Oi),as=c[Wr],ji=l?l(as):as;yn(new Jn(ji,as.node,pr,null,Ss))},yn=function(On){ye?(ye.left=On,ye=On):(mt=On,ye=On)};for(let On=0;On<oe.count;++On){const pr=oe.nextBitIsOne(),Wr=Math.pow(2,oe.count-(On+1));pr?Vt(Wr,Jn.BLACK):(Vt(Wr,Jn.BLACK),Vt(Wr,Jn.RED))}return mt}(new rp(c.length));return new Rn(g||a,Z)};let ul;const Uc={};class Ga{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,G.hu)(Uc&&Ui,"ChildrenNode.ts has not been loaded"),ul=ul||new Ga({".priority":Uc},{".priority":Ui}),ul}get(a){const l=(0,G.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Rn?l:null}hasIndex(a){return(0,G.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,G.hu)(a!==en,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let I=!1;const R=l.getIterator(fe.Wrap);let Z,$=R.getNext();for(;$;)I=I||a.isDefinedOn($.node),g.push($),$=R.getNext();Z=I?uu(g,a.getCompare()):Uc;const oe=a.toString(),ye=Object.assign({},this.indexSet_);ye[oe]=a;const mt=Object.assign({},this.indexes_);return mt[oe]=Z,new Ga(mt,ye)}addToIndexes(a,l){const g=(0,G.UI)(this.indexes_,(I,R)=>{const $=(0,G.DV)(this.indexSet_,R);if((0,G.hu)($,"Missing index implementation for "+R),I===Uc){if($.isDefinedOn(a.node)){const Z=[],oe=l.getIterator(fe.Wrap);let ye=oe.getNext();for(;ye;)ye.name!==a.name&&Z.push(ye),ye=oe.getNext();return Z.push(a),uu(Z,$.getCompare())}return Uc}{const Z=l.get(a.name);let oe=I;return Z&&(oe=oe.remove(new fe(a.name,Z))),oe.insert(a,a.node)}});return new Ga(g,this.indexSet_)}removeFromIndexes(a,l){const g=(0,G.UI)(this.indexes_,I=>{if(I===Uc)return I;{const R=l.get(a.name);return R?I.remove(new fe(a.name,R)):I}});return new Ga(g,this.indexSet_)}}let xl,Lr=(()=>{class c{constructor(l,g,I){this.children_=l,this.priorityNode_=g,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&Ou(this.priorityNode_),this.children_.isEmpty()&&(0,G.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xl||(xl=new c(new Rn(yo),null,Ga.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xl}updatePriority(l){return this.children_.isEmpty()?this:new c(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const g=this.children_.get(l);return null===g?xl:g}}getChild(l){const g=Fr(l);return null===g?this:this.getImmediateChild(g).getChild(cr(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,g){if((0,G.hu)(g,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(g);{const I=new fe(l,g);let R,$;g.isEmpty()?(R=this.children_.remove(l),$=this.indexMap_.removeFromIndexes(I,this.children_)):(R=this.children_.insert(l,g),$=this.indexMap_.addToIndexes(I,this.children_));const Z=R.isEmpty()?xl:this.priorityNode_;return new c(R,Z,$)}}updateChild(l,g){const I=Fr(l);if(null===I)return g;{(0,G.hu)(".priority"!==Fr(l)||1===Xi(l),".priority must be the last token in a path");const R=this.getImmediateChild(I).updateChild(cr(l),g);return this.updateImmediateChild(I,R)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const g={};let I=0,R=0,$=!0;if(this.forEachChild(Ui,(Z,oe)=>{g[Z]=oe.val(l),I++,$&&c.INTEGER_REGEXP_.test(Z)?R=Math.max(R,Number(Z)):$=!1}),!l&&$&&R<2*I){const Z=[];for(const oe in g)Z[oe]=g[oe];return Z}return l&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Tl(this.getPriority().val())+":"),this.forEachChild(Ui,(g,I)=>{const R=I.hash();""!==R&&(l+=":"+g+":"+R)}),this.lazyHash_=""===l?"":Js(l)}return this.lazyHash_}getPredecessorChildName(l,g,I){const R=this.resolveIndex_(I);if(R){const $=R.getPredecessorKey(new fe(l,g));return $?$.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const g=this.resolveIndex_(l);if(g){const I=g.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(l){const g=this.getFirstChildName(l);return g?new fe(g,this.children_.get(g)):null}getLastChildName(l){const g=this.resolveIndex_(l);if(g){const I=g.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(l){const g=this.getLastChildName(l);return g?new fe(g,this.children_.get(g)):null}forEachChild(l,g){const I=this.resolveIndex_(l);return I?I.inorderTraversal(R=>g(R.name,R.node)):this.children_.inorderTraversal(g)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,g){const I=this.resolveIndex_(g);if(I)return I.getIteratorFrom(l,R=>R);{const R=this.children_.getIteratorFrom(l.name,fe.Wrap);let $=R.peek();for(;null!=$&&g.compare($,l)<0;)R.getNext(),$=R.peek();return R}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,g){const I=this.resolveIndex_(g);if(I)return I.getReverseIteratorFrom(l,R=>R);{const R=this.children_.getReverseIteratorFrom(l.name,fe.Wrap);let $=R.peek();for(;null!=$&&g.compare($,l)>0;)R.getNext(),$=R.peek();return R}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===jc?-1:0}withIndex(l){if(l===en||this.indexMap_.hasIndex(l))return this;{const g=this.indexMap_.addIndex(l,this.children_);return new c(this.children_,this.priorityNode_,g)}}isIndexed(l){return l===en||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const g=l;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const I=this.getIterator(Ui),R=g.getIterator(Ui);let $=I.getNext(),Z=R.getNext();for(;$&&Z;){if($.name!==Z.name||!$.node.equals(Z.node))return!1;$=I.getNext(),Z=R.getNext()}return null===$&&null===Z}return!1}return!1}}resolveIndex_(l){return l===en?null:this.indexMap_.get(l.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const jc=new class ip extends Lr{constructor(){super(new Rn(yo),Lr.EMPTY_NODE,Ga.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return Lr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(fe,{MIN:{value:new fe(Bo,Lr.EMPTY_NODE)},MAX:{value:new fe(mi,jc)}}),jt.__EMPTY_NODE=Lr.EMPTY_NODE,oa.__childrenNodeConstructor=Lr,function $l(c){Da=c}(jc),function Vc(c){Al=c}(jc);const zo=!0;function Es(c,a=null){if(null===c)return Lr.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(a=c[".priority"]),(0,G.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new oa(c,Es(a));if(c instanceof Array||!zo){let l=Lr.EMPTY_NODE;return _s(c,(g,I)=>{if((0,G.r3)(c,g)&&"."!==g.substring(0,1)){const R=Es(I);(R.isLeafNode()||!R.isEmpty())&&(l=l.updateImmediateChild(g,R))}}),l.updatePriority(Es(a))}{const l=[];let g=!1;if(_s(c,($,Z)=>{if("."!==$.substring(0,1)){const oe=Es(Z);oe.isEmpty()||(g=g||!oe.getPriority().isEmpty(),l.push(new fe($,oe)))}}),0===l.length)return Lr.EMPTY_NODE;const R=uu(l,ss,$=>$.name,yo);if(g){const $=uu(l,Ui.getCompare());return new Lr(R,Es(a),new Ga({".priority":$},{".priority":Ui}))}return new Lr(R,Es(a),Ga.Default)}}!function $c(c){Pa=c}(Es);class sh extends dt{constructor(a){super(),this.indexPath_=a,(0,G.hu)(!Zn(a)&&".priority"!==Fr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const g=this.extractChild(a.node),I=this.extractChild(l.node),R=g.compareTo(I);return 0===R?Ds(a.name,l.name):R}makePost(a,l){const g=Es(a),I=Lr.EMPTY_NODE.updateChild(this.indexPath_,g);return new fe(l,I)}maxPost(){const a=Lr.EMPTY_NODE.updateChild(this.indexPath_,jc);return new fe(mi,a)}toString(){return mo(this.indexPath_,0).join("/")}}const uc=new class zh extends dt{compare(a,l){const g=a.node.compareTo(l.node);return 0===g?Ds(a.name,l.name):g}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return fe.MIN}maxPost(){return fe.MAX}makePost(a,l){const g=Es(a);return new fe(l,g)}toString(){return".value"}},Pu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cu=function(){let c=0;const a=[];return function(l){const g=l===c;let I;c=l;const R=new Array(8);for(I=7;I>=0;I--)R[I]=Pu.charAt(l%64),l=Math.floor(l/64);(0,G.hu)(0===l,"Cannot push at time == 0");let $=R.join("");if(g){for(I=11;I>=0&&63===a[I];I--)a[I]=0;a[I]++}else for(I=0;I<12;I++)a[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)$+=Pu.charAt(a[I]);return(0,G.hu)(20===$.length,"nextPushId: Length should be 20."),$}}(),ku=function(c){if(c===""+B)return"-";const a=ie(c);if(null!=a)return""+(a+1);const l=new Array(c.length);for(let $=0;$<l.length;$++)l[$]=c.charAt($);if(l.length<786)return l.push("-"),l.join("");let g=l.length-1;for(;g>=0&&"z"===l[g];)g--;if(-1===g)return mi;const R=Pu.charAt(Pu.indexOf(l[g])+1);return l[g]=R,l.slice(0,g+1).join("")},Wh=function(c){if(c===""+q)return Bo;const a=ie(c);if(null!=a)return""+(a-1);const l=new Array(c.length);for(let g=0;g<l.length;g++)l[g]=c.charAt(g);return"-"===l[l.length-1]?1===l.length?""+B:(delete l[l.length-1],l.join("")):(l[l.length-1]=Pu.charAt(Pu.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function cc(c){return{type:"value",snapshotNode:c}}function Vl(c,a){return{type:"child_added",snapshotNode:a,childName:c}}function aa(c,a){return{type:"child_removed",snapshotNode:a,childName:c}}function dc(c,a,l){return{type:"child_changed",snapshotNode:a,childName:c,oldSnap:l}}class Dd{constructor(a){this.index_=a}updateChild(a,l,g,I,R,$){(0,G.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Z=a.getImmediateChild(l);return Z.getChild(I).equals(g.getChild(I))&&Z.isEmpty()===g.isEmpty()||(null!=$&&(g.isEmpty()?a.hasChild(l)?$.trackChildChange(aa(l,Z)):(0,G.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Z.isEmpty()?$.trackChildChange(Vl(l,g)):$.trackChildChange(dc(l,g,Z))),a.isLeafNode()&&g.isEmpty())?a:a.updateImmediateChild(l,g).withIndex(this.index_)}updateFullNode(a,l,g){return null!=g&&(a.isLeafNode()||a.forEachChild(Ui,(I,R)=>{l.hasChild(I)||g.trackChildChange(aa(I,R))}),l.isLeafNode()||l.forEachChild(Ui,(I,R)=>{if(a.hasChild(I)){const $=a.getImmediateChild(I);$.equals(R)||g.trackChildChange(dc(I,R,$))}else g.trackChildChange(Vl(I,R))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?Lr.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ul{constructor(a){this.indexedFilter_=new Dd(a.getIndex()),this.index_=a.getIndex(),this.startPost_=Ul.getStartPost_(a),this.endPost_=Ul.getEndPost_(a)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){return this.index_.compare(this.getStartPost(),a)<=0&&this.index_.compare(a,this.getEndPost())<=0}updateChild(a,l,g,I,R,$){return this.matches(new fe(l,g))||(g=Lr.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,g,I,R,$)}updateFullNode(a,l,g){l.isLeafNode()&&(l=Lr.EMPTY_NODE);let I=l.withIndex(this.index_);I=I.updatePriority(Lr.EMPTY_NODE);const R=this;return l.forEachChild(Ui,($,Z)=>{R.matches(new fe($,Z))||(I=I.updateImmediateChild($,Lr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,I,g)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class oh{constructor(a){this.rangedFilter_=new Ul(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft()}updateChild(a,l,g,I,R,$){return this.rangedFilter_.matches(new fe(l,g))||(g=Lr.EMPTY_NODE),a.getImmediateChild(l).equals(g)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,g,I,R,$):this.fullLimitUpdateChild_(a,l,g,R,$)}updateFullNode(a,l,g){let I;if(l.isLeafNode()||l.isEmpty())I=Lr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let R;I=Lr.EMPTY_NODE.withIndex(this.index_),R=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let $=0;for(;R.hasNext()&&$<this.limit_;){const Z=R.getNext();let oe;if(oe=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),Z)<=0:this.index_.compare(Z,this.rangedFilter_.getEndPost())<=0,!oe)break;I=I.updateImmediateChild(Z.name,Z.node),$++}}else{let R,$,Z,oe;if(I=l.withIndex(this.index_),I=I.updatePriority(Lr.EMPTY_NODE),this.reverse_){oe=I.getReverseIterator(this.index_),R=this.rangedFilter_.getEndPost(),$=this.rangedFilter_.getStartPost();const wt=this.index_.getCompare();Z=(Vt,yn)=>wt(yn,Vt)}else oe=I.getIterator(this.index_),R=this.rangedFilter_.getStartPost(),$=this.rangedFilter_.getEndPost(),Z=this.index_.getCompare();let ye=0,mt=!1;for(;oe.hasNext();){const wt=oe.getNext();!mt&&Z(R,wt)<=0&&(mt=!0),mt&&ye<this.limit_&&Z(wt,$)<=0?ye++:I=I.updateImmediateChild(wt.name,Lr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,I,g)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,g,I,R){let $;if(this.reverse_){const wt=this.index_.getCompare();$=(Vt,yn)=>wt(yn,Vt)}else $=this.index_.getCompare();const Z=a;(0,G.hu)(Z.numChildren()===this.limit_,"");const oe=new fe(l,g),ye=this.reverse_?Z.getFirstChild(this.index_):Z.getLastChild(this.index_),mt=this.rangedFilter_.matches(oe);if(Z.hasChild(l)){const wt=Z.getImmediateChild(l);let Vt=I.getChildAfterChild(this.index_,ye,this.reverse_);for(;null!=Vt&&(Vt.name===l||Z.hasChild(Vt.name));)Vt=I.getChildAfterChild(this.index_,Vt,this.reverse_);const yn=null==Vt?1:$(Vt,oe);if(mt&&!g.isEmpty()&&yn>=0)return null!=R&&R.trackChildChange(dc(l,g,wt)),Z.updateImmediateChild(l,g);{null!=R&&R.trackChildChange(aa(l,wt));const pr=Z.updateImmediateChild(l,Lr.EMPTY_NODE);return null!=Vt&&this.rangedFilter_.matches(Vt)?(null!=R&&R.trackChildChange(Vl(Vt.name,Vt.node)),pr.updateImmediateChild(Vt.name,Vt.node)):pr}}return g.isEmpty()?a:mt&&$(ye,oe)>=0?(null!=R&&(R.trackChildChange(aa(ye.name,ye.node)),R.trackChildChange(Vl(l,g))),Z.updateImmediateChild(l,g).updateImmediateChild(ye.name,Lr.EMPTY_NODE)):a}}class Ws{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ui}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,G.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ui}copy(){const a=new Ws;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Ps(c,a,l){const g=c.copy();return g.startSet_=!0,void 0===a&&(a=null),g.indexStartValue_=a,null!=l?(g.startNameSet_=!0,g.indexStartName_=l):(g.startNameSet_=!1,g.indexStartName_=""),g}function za(c,a,l){const g=c.copy();return g.endSet_=!0,void 0===a&&(a=null),g.indexEndValue_=a,void 0!==l?(g.endNameSet_=!0,g.indexEndName_=l):(g.endNameSet_=!1,g.indexEndName_=""),g}function Gc(c,a){const l=c.copy();return l.index_=a,l}function hc(c){const a={};if(c.isDefault())return a;let l;return c.index_===Ui?l="$priority":c.index_===uc?l="$value":c.index_===en?l="$key":((0,G.hu)(c.index_ instanceof sh,"Unrecognized index type!"),l=c.index_.toString()),a.orderBy=(0,G.Pz)(l),c.startSet_&&(a.startAt=(0,G.Pz)(c.indexStartValue_),c.startNameSet_&&(a.startAt+=","+(0,G.Pz)(c.indexStartName_))),c.endSet_&&(a.endAt=(0,G.Pz)(c.indexEndValue_),c.endNameSet_&&(a.endAt+=","+(0,G.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?a.limitToFirst=c.limit_:a.limitToLast=c.limit_),a}function qh(c){const a={};if(c.startSet_&&(a.sp=c.indexStartValue_,c.startNameSet_&&(a.sn=c.indexStartName_)),c.endSet_&&(a.ep=c.indexEndValue_,c.endNameSet_&&(a.en=c.indexEndName_)),c.limitSet_){a.l=c.limit_;let l=c.viewFrom_;""===l&&(l=c.isViewFromLeft()?"l":"r"),a.vf=l}return c.index_!==Ui&&(a.i=c.index_.toString()),a}class du extends Id{constructor(a,l,g,I){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=g,this.appCheckTokenProvider_=I,this.log_=ta("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,G.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,g,I){const R=a._path.toString();this.log_("Listen called for "+R+" "+a._queryIdentifier);const $=du.getListenId_(a,g),Z={};this.listens_[$]=Z;const oe=hc(a._queryParams);this.restRequest_(R+".json",oe,(ye,mt)=>{let wt=mt;if(404===ye&&(wt=null,ye=null),null===ye&&this.onDataUpdate_(R,wt,!1,g),(0,G.DV)(this.listens_,$)===Z){let Vt;Vt=ye?401===ye?"permission_denied":"rest_error:"+ye:"ok",I(Vt,null)}})}unlisten(a,l){const g=du.getListenId_(a,l);delete this.listens_[g]}get(a){const l=hc(a._queryParams),g=a._path.toString(),I=new G.BH;return this.restRequest_(g+".json",l,(R,$)=>{let Z=$;404===R&&(Z=null,R=null),null===R?(this.onDataUpdate_(g,Z,!1,null),I.resolve(Z)):I.reject(new Error(Z))}),I.promise}refreshAuthToken(a){}restRequest_(a,l={},g){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,R])=>{I&&I.accessToken&&(l.auth=I.accessToken),R&&R.token&&(l.ac=R.token);const $=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,G.xO)(l);this.log_("Sending REST request for "+$);const Z=new XMLHttpRequest;Z.onreadystatechange=()=>{if(g&&4===Z.readyState){this.log_("REST Response for "+$+" received. status:",Z.status,"response:",Z.responseText);let oe=null;if(Z.status>=200&&Z.status<300){try{oe=(0,G.cI)(Z.responseText)}catch(ye){Yi("Failed to parse JSON response for "+$+": "+Z.responseText)}g(null,oe)}else 401!==Z.status&&404!==Z.status&&Yi("Got unsuccessful REST response for "+$+" Status: "+Z.status),g(Z.status);g=null}},Z.open("GET",$,!0),Z.send()})}}class Kh{constructor(){this.rootNode_=Lr.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function fc(){return{value:null,children:new Map}}function dl(c,a,l){if(Zn(a))c.value=l,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(a,l);else{const g=Fr(a);c.children.has(g)||c.children.set(g,fc()),dl(c.children.get(g),a=cr(a),l)}}function ah(c,a){if(Zn(a))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const l=c.value;return c.value=null,l.forEachChild(Ui,(g,I)=>{dl(c,new ci(g),I)}),ah(c,a)}}if(c.children.size>0){const l=Fr(a);return a=cr(a),c.children.has(l)&&ah(c.children.get(l),a)&&c.children.delete(l),0===c.children.size}return!0}function zc(c,a,l){null!==c.value?l(a,c.value):function pc(c,a){c.children.forEach((l,g)=>{a(g,l)})}(c,(g,I)=>{zc(I,new ci(a.toString()+"/"+g),l)})}class gc{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&_s(this.last_,(g,I)=>{l[g]=l[g]-I}),this.last_=a,l}}class Ad{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new gc(a);const g=1e4+2e4*Math.random();$t(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const a=this.statsListener_.get(),l={};let g=!1;_s(a,(I,R)=>{R>0&&(0,G.r3)(this.statsToReport_,I)&&(l[I]=R,g=!0)}),g&&this.server_.reportStats(l),$t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qs=(()=>{return(c=qs||(qs={}))[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",qs;var c})();function Gl(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class Bu{constructor(a,l,g){this.path=a,this.affectedTree=l,this.revert=g,this.type=qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Zn(this.path)){if(null!=this.affectedTree.value)return(0,G.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new ci(a));return new Bu(Nr(),l,this.revert)}}return(0,G.hu)(Fr(this.path)===a,"operationForChild called for unrelated child."),new Bu(cr(this.path),this.affectedTree,this.revert)}}class $u{constructor(a,l){this.source=a,this.path=l,this.type=qs.LISTEN_COMPLETE}operationForChild(a){return Zn(this.path)?new $u(this.source,Nr()):new $u(this.source,cr(this.path))}}class Ti{constructor(a,l,g){this.source=a,this.path=l,this.snap=g,this.type=qs.OVERWRITE}operationForChild(a){return Zn(this.path)?new Ti(this.source,Nr(),this.snap.getImmediateChild(a)):new Ti(this.source,cr(this.path),this.snap)}}class zl{constructor(a,l,g){this.source=a,this.path=l,this.children=g,this.type=qs.MERGE}operationForChild(a){if(Zn(this.path)){const l=this.children.subtree(new ci(a));return l.isEmpty()?null:l.value?new Ti(this.source,Nr(),l.value):new zl(this.source,Nr(),l)}return(0,G.hu)(Fr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new zl(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sa{constructor(a,l,g){this.node_=a,this.fullyInitialized_=l,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Zn(a))return this.isFullyInitialized()&&!this.filtered_;const l=Fr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class Zh{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Wl(c,a,l,g,I,R){const $=g.filter(Z=>Z.type===l);$.sort((Z,oe)=>function lh(c,a,l){if(null==a.childName||null==l.childName)throw(0,G.g5)("Should only compare child_ events.");const g=new fe(a.childName,a.snapshotNode),I=new fe(l.childName,l.snapshotNode);return c.index_.compare(g,I)}(c,Z,oe)),$.forEach(Z=>{const oe=function Xh(c,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,c.index_)),a}(c,Z,R);I.forEach(ye=>{ye.respondsTo(Z.type)&&a.push(ye.createEvent(oe,c.query_))})})}function hl(c,a){return{eventCache:c,serverCache:a}}function Ta(c,a,l,g){return hl(new Sa(a,l,g),c.serverCache)}function Wc(c,a,l,g){return hl(c.eventCache,new Sa(a,l,g))}function ql(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function hu(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let Ml;class Ei{constructor(a,l=(()=>(Ml||(Ml=new Rn(li)),Ml))()){this.value=a,this.children=l}static fromObject(a){let l=new Ei(null);return _s(a,(g,I)=>{l=l.set(new ci(g),I)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Nr(),value:this.value};if(Zn(a))return null;{const g=Fr(a),I=this.children.get(g);if(null!==I){const R=I.findRootMostMatchingPathAndValue(cr(a),l);return null!=R?{path:Si(new ci(g),R.path),value:R.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Zn(a))return this;{const l=Fr(a),g=this.children.get(l);return null!==g?g.subtree(cr(a)):new Ei(null)}}set(a,l){if(Zn(a))return new Ei(l,this.children);{const g=Fr(a),R=(this.children.get(g)||new Ei(null)).set(cr(a),l),$=this.children.insert(g,R);return new Ei(this.value,$)}}remove(a){if(Zn(a))return this.children.isEmpty()?new Ei(null):new Ei(null,this.children);{const l=Fr(a),g=this.children.get(l);if(g){const I=g.remove(cr(a));let R;return R=I.isEmpty()?this.children.remove(l):this.children.insert(l,I),null===this.value&&R.isEmpty()?new Ei(null):new Ei(this.value,R)}return this}}get(a){if(Zn(a))return this.value;{const l=Fr(a),g=this.children.get(l);return g?g.get(cr(a)):null}}setTree(a,l){if(Zn(a))return l;{const g=Fr(a),R=(this.children.get(g)||new Ei(null)).setTree(cr(a),l);let $;return $=R.isEmpty()?this.children.remove(g):this.children.insert(g,R),new Ei(this.value,$)}}fold(a){return this.fold_(Nr(),a)}fold_(a,l){const g={};return this.children.inorderTraversal((I,R)=>{g[I]=R.fold_(Si(a,I),l)}),l(a,this.value,g)}findOnPath(a,l){return this.findOnPath_(a,Nr(),l)}findOnPath_(a,l,g){const I=!!this.value&&g(l,this.value);if(I)return I;if(Zn(a))return null;{const R=Fr(a),$=this.children.get(R);return $?$.findOnPath_(cr(a),Si(l,R),g):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Nr(),l)}foreachOnPath_(a,l,g){if(Zn(a))return this;{this.value&&g(l,this.value);const I=Fr(a),R=this.children.get(I);return R?R.foreachOnPath_(cr(a),Si(l,I),g):new Ei(null)}}foreach(a){this.foreach_(Nr(),a)}foreach_(a,l){this.children.inorderTraversal((g,I)=>{I.foreach_(Si(a,g),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,g)=>{g.value&&a(l,g.value)})}}class Ai{constructor(a){this.writeTree_=a}static empty(){return new Ai(new Ei(null))}}function Jr(c,a,l){if(Zn(a))return new Ai(new Ei(l));{const g=c.writeTree_.findRootMostValueAndPath(a);if(null!=g){const I=g.path;let R=g.value;const $=Tr(I,a);return R=R.updateChild($,l),new Ai(c.writeTree_.set(I,R))}{const I=new Ei(l),R=c.writeTree_.setTree(a,I);return new Ai(R)}}}function qc(c,a,l){let g=c;return _s(l,(I,R)=>{g=Jr(g,Si(a,I),R)}),g}function Md(c,a){if(Zn(a))return Ai.empty();{const l=c.writeTree_.setTree(a,new Ei(null));return new Ai(l)}}function la(c,a){return null!=fu(c,a)}function fu(c,a){const l=c.writeTree_.findRootMostValueAndPath(a);return null!=l?c.writeTree_.get(l.path).getChild(Tr(l.path,a)):null}function Wo(c){const a=[],l=c.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Ui,(g,I)=>{a.push(new fe(g,I))}):c.writeTree_.children.inorderTraversal((g,I)=>{null!=I.value&&a.push(new fe(g,I.value))}),a}function qa(c,a){if(Zn(a))return c;{const l=fu(c,a);return new Ai(null!=l?new Ei(l):c.writeTree_.subtree(a))}}function pu(c){return c.writeTree_.isEmpty()}function Ls(c,a){return qo(Nr(),c.writeTree_,a)}function qo(c,a,l){if(null!=a.value)return l.updateChild(c,a.value);{let g=null;return a.children.inorderTraversal((I,R)=>{".priority"===I?((0,G.hu)(null!==R.value,"Priority writes must always be leaf nodes"),g=R.value):l=qo(Si(c,I),R,l)}),!l.getChild(c).isEmpty()&&null!==g&&(l=l.updateChild(Si(c,".priority"),g)),l}}function Kl(c,a){return Xc(a,c)}function Od(c,a){if(c.snap)return x(c.path,a);for(const l in c.children)if(c.children.hasOwnProperty(l)&&x(Si(c.path,l),a))return!0;return!1}function Ka(c){return c.visible}function yu(c,a,l){let g=Ai.empty();for(let I=0;I<c.length;++I){const R=c[I];if(a(R)){const $=R.path;let Z;if(R.snap)x(l,$)?(Z=Tr(l,$),g=Jr(g,Z,R.snap)):x($,l)&&(Z=Tr($,l),g=Jr(g,Nr(),R.snap.getChild(Z)));else{if(!R.children)throw(0,G.g5)("WriteRecord should have .snap or .children");if(x(l,$))Z=Tr(l,$),g=qc(g,Z,R.children);else if(x($,l))if(Z=Tr($,l),Zn(Z))g=qc(g,Nr(),R.children);else{const oe=(0,G.DV)(R.children,Fr(Z));if(oe){const ye=oe.getChild(cr(Z));g=Jr(g,Nr(),ye)}}}}}return g}function Yc(c,a,l,g,I){if(g||I){const R=qa(c.visibleWrites,a);return!I&&pu(R)?l:I||null!=l||la(R,Nr())?Ls(yu(c.allWrites,function(ye){return(ye.visible||I)&&(!g||!~g.indexOf(ye.writeId))&&(x(ye.path,a)||x(a,ye.path))},a),l||Lr.EMPTY_NODE):null}{const R=fu(c.visibleWrites,a);if(null!=R)return R;{const $=qa(c.visibleWrites,a);return pu($)?l:null!=l||la($,Nr())?Ls($,l||Lr.EMPTY_NODE):null}}}function Yl(c,a,l,g){return Yc(c.writeTree,c.treePath,a,l,g)}function fl(c,a){return function Qh(c,a,l){let g=Lr.EMPTY_NODE;const I=fu(c.visibleWrites,a);if(I)return I.isLeafNode()||I.forEachChild(Ui,(R,$)=>{g=g.updateImmediateChild(R,$)}),g;if(l){const R=qa(c.visibleWrites,a);return l.forEachChild(Ui,($,Z)=>{const oe=Ls(qa(R,new ci($)),Z);g=g.updateImmediateChild($,oe)}),Wo(R).forEach($=>{g=g.updateImmediateChild($.name,$.node)}),g}return Wo(qa(c.visibleWrites,a)).forEach($=>{g=g.updateImmediateChild($.name,$.node)}),g}(c.writeTree,c.treePath,a)}function yc(c,a,l,g){return function Jh(c,a,l,g,I){(0,G.hu)(g||I,"Either existingEventSnap or existingServerSnap must exist");const R=Si(a,l);if(la(c.visibleWrites,R))return null;{const $=qa(c.visibleWrites,R);return pu($)?I.getChild(l):Ls($,I.getChild(l))}}(c.writeTree,c.treePath,a,l,g)}function vu(c,a){return function ua(c,a){return fu(c.visibleWrites,a)}(c.writeTree,Si(c.treePath,a))}function Zc(c,a,l){return function Pd(c,a,l,g){const I=Si(a,l),R=fu(c.visibleWrites,I);return null!=R?R:g.isCompleteForChild(l)?Ls(qa(c.visibleWrites,I),g.getNode().getImmediateChild(l)):null}(c.writeTree,c.treePath,a,l)}function Bs(c,a){return Xc(Si(c.treePath,a),c.writeTree)}function Xc(c,a){return{treePath:c,writeTree:a}}class Qc{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,g=a.childName;(0,G.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,G.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(g);if(I){const R=I.type;if("child_added"===l&&"child_removed"===R)this.changeMap.set(g,dc(g,a.snapshotNode,I.snapshotNode));else if("child_removed"===l&&"child_added"===R)this.changeMap.delete(g);else if("child_removed"===l&&"child_changed"===R)this.changeMap.set(g,aa(g,I.oldSnap));else if("child_changed"===l&&"child_added"===R)this.changeMap.set(g,Vl(g,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==R)throw(0,G.g5)("Illegal combination of changes: "+a+" occurred after "+I);this.changeMap.set(g,dc(g,a.snapshotNode,I.oldSnap))}}else this.changeMap.set(g,a)}getChanges(){return Array.from(this.changeMap.values())}}const Ya=new class Uu{getCompleteChild(a){return null}getChildAfterChild(a,l,g){return null}};class D{constructor(a,l,g=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=g}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const g=null!=this.optCompleteServerCache_?new Sa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zc(this.writes_,a,g)}}getChildAfterChild(a,l,g){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hu(this.viewCache_),R=function uh(c,a,l,g,I,R){return function Vu(c,a,l,g,I,R,$){let Z;const oe=qa(c.visibleWrites,a),ye=fu(oe,Nr());if(null!=ye)Z=ye;else{if(null==l)return[];Z=Ls(oe,l)}if(Z=Z.withIndex($),Z.isEmpty()||Z.isLeafNode())return[];{const mt=[],wt=$.getCompare(),Vt=R?Z.getReverseIteratorFrom(g,$):Z.getIteratorFrom(g,$);let yn=Vt.getNext();for(;yn&&mt.length<I;)0!==wt(yn,g)&&mt.push(yn),yn=Vt.getNext();return mt}}(c.writeTree,c.treePath,a,l,g,I,R)}(this.writes_,I,l,1,g,a);return 0===R.length?null:R[0]}}function ue(c,a,l,g,I,R){const $=a.eventCache;if(null!=vu(g,l))return a;{let Z,oe;if(Zn(l))if((0,G.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const ye=hu(a),wt=fl(g,ye instanceof Lr?ye:Lr.EMPTY_NODE);Z=c.filter.updateFullNode(a.eventCache.getNode(),wt,R)}else{const ye=Yl(g,hu(a));Z=c.filter.updateFullNode(a.eventCache.getNode(),ye,R)}else{const ye=Fr(l);if(".priority"===ye){(0,G.hu)(1===Xi(l),"Can't have a priority with additional path components");const mt=$.getNode();oe=a.serverCache.getNode();const wt=yc(g,l,mt,oe);Z=null!=wt?c.filter.updatePriority(mt,wt):$.getNode()}else{const mt=cr(l);let wt;if($.isCompleteForChild(ye)){oe=a.serverCache.getNode();const Vt=yc(g,l,$.getNode(),oe);wt=null!=Vt?$.getNode().getImmediateChild(ye).updateChild(mt,Vt):$.getNode().getImmediateChild(ye)}else wt=Zc(g,ye,a.serverCache);Z=null!=wt?c.filter.updateChild($.getNode(),ye,wt,mt,I,R):$.getNode()}}return Ta(a,Z,$.isFullyInitialized()||Zn(l),c.filter.filtersNodes())}}function ct(c,a,l,g,I,R,$,Z){const oe=a.serverCache;let ye;const mt=$?c.filter:c.filter.getIndexedFilter();if(Zn(l))ye=mt.updateFullNode(oe.getNode(),g,null);else if(mt.filtersNodes()&&!oe.isFiltered()){const yn=oe.getNode().updateChild(l,g);ye=mt.updateFullNode(oe.getNode(),yn,null)}else{const yn=Fr(l);if(!oe.isCompleteForPath(l)&&Xi(l)>1)return a;const On=cr(l),Wr=oe.getNode().getImmediateChild(yn).updateChild(On,g);ye=".priority"===yn?mt.updatePriority(oe.getNode(),Wr):mt.updateChild(oe.getNode(),yn,Wr,On,Ya,null)}const wt=Wc(a,ye,oe.isFullyInitialized()||Zn(l),mt.filtersNodes());return ue(c,wt,l,I,new D(I,wt,R),Z)}function Nt(c,a,l,g,I,R,$){const Z=a.eventCache;let oe,ye;const mt=new D(I,a,R);if(Zn(l))ye=c.filter.updateFullNode(a.eventCache.getNode(),g,$),oe=Ta(a,ye,!0,c.filter.filtersNodes());else{const wt=Fr(l);if(".priority"===wt)ye=c.filter.updatePriority(a.eventCache.getNode(),g),oe=Ta(a,ye,Z.isFullyInitialized(),Z.isFiltered());else{const Vt=cr(l),yn=Z.getNode().getImmediateChild(wt);let On;if(Zn(Vt))On=g;else{const pr=mt.getCompleteChild(wt);On=null!=pr?".priority"===al(Vt)&&pr.getChild(is(Vt)).isEmpty()?pr:pr.updateChild(Vt,g):Lr.EMPTY_NODE}oe=yn.equals(On)?a:Ta(a,c.filter.updateChild(Z.getNode(),wt,On,Vt,mt,$),Z.isFullyInitialized(),c.filter.filtersNodes())}}return oe}function on(c,a){return c.eventCache.isCompleteForChild(a)}function fr(c,a,l){return l.foreach((g,I)=>{a=a.updateChild(g,I)}),a}function tr(c,a,l,g,I,R,$,Z){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let ye,oe=a;ye=Zn(l)?g:new Ei(null).setTree(l,g);const mt=a.serverCache.getNode();return ye.children.inorderTraversal((wt,Vt)=>{if(mt.hasChild(wt)){const On=fr(0,a.serverCache.getNode().getImmediateChild(wt),Vt);oe=ct(c,oe,new ci(wt),On,I,R,$,Z)}}),ye.children.inorderTraversal((wt,Vt)=>{const yn=!a.serverCache.isCompleteForChild(wt)&&void 0===Vt.value;if(!mt.hasChild(wt)&&!yn){const pr=fr(0,a.serverCache.getNode().getImmediateChild(wt),Vt);oe=ct(c,oe,new ci(wt),pr,I,R,$,Z)}}),oe}class ef{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const g=this.query_._queryParams,I=new Dd(g.getIndex()),R=function jl(c){return c.loadsAllData()?new Dd(c.getIndex()):c.hasLimit()?new oh(c):new Ul(c)}(g);this.processor_=function y(c){return{filter:c}}(R);const $=l.serverCache,Z=l.eventCache,oe=I.updateFullNode(Lr.EMPTY_NODE,$.getNode(),null),ye=R.updateFullNode(Lr.EMPTY_NODE,Z.getNode(),null),mt=new Sa(oe,$.isFullyInitialized(),I.filtersNodes()),wt=new Sa(ye,Z.isFullyInitialized(),R.filtersNodes());this.viewCache_=hl(wt,mt),this.eventGenerator_=new Zh(this.query_)}get query(){return this.query_}}function ju(c,a){const l=hu(c.viewCache_);return l&&(c.query._queryParams.loadsAllData()||!Zn(a)&&!l.getImmediateChild(Fr(a)).isEmpty())?l.getChild(a):null}function Zl(c){return 0===c.eventRegistrations_.length}function Jc(c,a,l){const g=[];if(l){(0,G.hu)(null==a,"A cancel should cancel all event registrations.");const I=c.query._path;c.eventRegistrations_.forEach(R=>{const $=R.createCancelEvent(l,I);$&&g.push($)})}if(a){let I=[];for(let R=0;R<c.eventRegistrations_.length;++R){const $=c.eventRegistrations_[R];if($.matches(a)){if(a.hasAnyCallback()){I=I.concat(c.eventRegistrations_.slice(R+1));break}}else I.push($)}c.eventRegistrations_=I}else c.eventRegistrations_=[];return g}function Za(c,a,l,g){a.type===qs.MERGE&&null!==a.source.queryId&&((0,G.hu)(hu(c.viewCache_),"We should always have a full cache before handling merges"),(0,G.hu)(ql(c.viewCache_),"Missing event cache, even though we have a server cache"));const I=c.viewCache_,R=function M(c,a,l,g,I){const R=new Qc;let $,Z;if(l.type===qs.OVERWRITE){const ye=l;ye.source.fromUser?$=Nt(c,a,ye.path,ye.snap,g,I,R):((0,G.hu)(ye.source.fromServer,"Unknown source."),Z=ye.source.tagged||a.serverCache.isFiltered()&&!Zn(ye.path),$=ct(c,a,ye.path,ye.snap,g,I,Z,R))}else if(l.type===qs.MERGE){const ye=l;ye.source.fromUser?$=function Mn(c,a,l,g,I,R,$){let Z=a;return g.foreach((oe,ye)=>{const mt=Si(l,oe);on(a,Fr(mt))&&(Z=Nt(c,Z,mt,ye,I,R,$))}),g.foreach((oe,ye)=>{const mt=Si(l,oe);on(a,Fr(mt))||(Z=Nt(c,Z,mt,ye,I,R,$))}),Z}(c,a,ye.path,ye.children,g,I,R):((0,G.hu)(ye.source.fromServer,"Unknown source."),Z=ye.source.tagged||a.serverCache.isFiltered(),$=tr(c,a,ye.path,ye.children,g,I,Z,R))}else if(l.type===qs.ACK_USER_WRITE){const ye=l;$=ye.revert?function ch(c,a,l,g,I,R){let $;if(null!=vu(g,l))return a;{const Z=new D(g,a,I),oe=a.eventCache.getNode();let ye;if(Zn(l)||".priority"===Fr(l)){let mt;if(a.serverCache.isFullyInitialized())mt=Yl(g,hu(a));else{const wt=a.serverCache.getNode();(0,G.hu)(wt instanceof Lr,"serverChildren would be complete if leaf node"),mt=fl(g,wt)}ye=c.filter.updateFullNode(oe,mt,R)}else{const mt=Fr(l);let wt=Zc(g,mt,a.serverCache);null==wt&&a.serverCache.isCompleteForChild(mt)&&(wt=oe.getImmediateChild(mt)),ye=null!=wt?c.filter.updateChild(oe,mt,wt,cr(l),Z,R):a.eventCache.getNode().hasChild(mt)?c.filter.updateChild(oe,mt,Lr.EMPTY_NODE,cr(l),Z,R):oe,ye.isEmpty()&&a.serverCache.isFullyInitialized()&&($=Yl(g,hu(a)),$.isLeafNode()&&(ye=c.filter.updateFullNode(ye,$,R)))}return $=a.serverCache.isFullyInitialized()||null!=vu(g,Nr()),Ta(a,ye,$,c.filter.filtersNodes())}}(c,a,ye.path,g,I,R):function so(c,a,l,g,I,R,$){if(null!=vu(I,l))return a;const Z=a.serverCache.isFiltered(),oe=a.serverCache;if(null!=g.value){if(Zn(l)&&oe.isFullyInitialized()||oe.isCompleteForPath(l))return ct(c,a,l,oe.getNode().getChild(l),I,R,Z,$);if(Zn(l)){let ye=new Ei(null);return oe.getNode().forEachChild(en,(mt,wt)=>{ye=ye.set(new ci(mt),wt)}),tr(c,a,l,ye,I,R,Z,$)}return a}{let ye=new Ei(null);return g.foreach((mt,wt)=>{const Vt=Si(l,mt);oe.isCompleteForPath(Vt)&&(ye=ye.set(mt,oe.getNode().getChild(Vt)))}),tr(c,a,l,ye,I,R,Z,$)}}(c,a,ye.path,ye.affectedTree,g,I,R)}else{if(l.type!==qs.LISTEN_COMPLETE)throw(0,G.g5)("Unknown operation type: "+l.type);$=function pl(c,a,l,g,I){const R=a.serverCache;return ue(c,Wc(a,R.getNode(),R.isFullyInitialized()||Zn(l),R.isFiltered()),l,g,Ya,I)}(c,a,l.path,g,R)}const oe=R.getChanges();return function Y(c,a,l){const g=a.eventCache;if(g.isFullyInitialized()){const I=g.getNode().isLeafNode()||g.getNode().isEmpty(),R=ql(c);(l.length>0||!c.eventCache.isFullyInitialized()||I&&!g.getNode().equals(R)||!g.getNode().getPriority().equals(R.getPriority()))&&l.push(cc(ql(a)))}}(a,$,oe),{viewCache:$,changes:oe}}(c.processor_,I,a,l,g);return function E(c,a){(0,G.hu)(a.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,G.hu)(a.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,R.viewCache),(0,G.hu)(R.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=R.viewCache,xo(c,R.changes,R.viewCache.eventCache.getNode(),null)}function xo(c,a,l,g){return function sp(c,a,l,g){const I=[],R=[];return a.forEach($=>{"child_changed"===$.type&&c.index_.indexedValueChanged($.oldSnap,$.snapshotNode)&&R.push(function Nu(c,a){return{type:"child_moved",snapshotNode:a,childName:c}}($.childName,$.snapshotNode))}),Wl(c,I,"child_removed",a,g,l),Wl(c,I,"child_added",a,g,l),Wl(c,I,"child_moved",R,g,l),Wl(c,I,"child_changed",a,g,l),Wl(c,I,"value",a,g,l),I}(c.eventGenerator_,a,l,g?[g]:c.eventRegistrations_)}let Gu,ed;class Nd{constructor(){this.views=new Map}}function Fd(c,a,l,g){const I=a.source.queryId;if(null!==I){const R=c.views.get(I);return(0,G.hu)(null!=R,"SyncTree gave us an op for an invalid query."),Za(R,a,l,g)}{let R=[];for(const $ of c.views.values())R=R.concat(Za($,a,l,g));return R}}function dh(c,a,l,g,I){const $=c.views.get(a._queryIdentifier);if(!$){let Z=Yl(l,I?g:null),oe=!1;Z?oe=!0:g instanceof Lr?(Z=fl(l,g),oe=!1):(Z=Lr.EMPTY_NODE,oe=!1);const ye=hl(new Sa(Z,oe,!1),new Sa(g,I,!1));return new ef(a,ye)}return $}function ap(c){const a=[];for(const l of c.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function vc(c,a){let l=null;for(const g of c.views.values())l=l||ju(g,a);return l}function cg(c,a){return a._queryParams.loadsAllData()?hh(c):c.views.get(a._queryIdentifier)}function dg(c,a){return null!=cg(c,a)}function _c(c){return null!=hh(c)}function hh(c){for(const a of c.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let um=1;class oo{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Ei(null),this.pendingWriteTree_=function mc(){return{visibleWrites:Ai.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function up(c,a,l,g,I){return function gu(c,a,l,g,I){(0,G.hu)(g>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),c.allWrites.push({path:a,snap:l,writeId:g,visible:I}),I&&(c.visibleWrites=Jr(c.visibleWrites,a,l)),c.lastWriteId=g}(c.pendingWriteTree_,a,l,g,I),I?_u(c,new Ti({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Wu(c,a,l=!1){const g=function Kc(c,a){for(let l=0;l<c.allWrites.length;l++){const g=c.allWrites[l];if(g.writeId===a)return g}return null}(c.pendingWriteTree_,a);if(function Hr(c,a){const l=c.allWrites.findIndex(Z=>Z.writeId===a);(0,G.hu)(l>=0,"removeWrite called with nonexistent writeId.");const g=c.allWrites[l];c.allWrites.splice(l,1);let I=g.visible,R=!1,$=c.allWrites.length-1;for(;I&&$>=0;){const Z=c.allWrites[$];Z.visible&&($>=l&&Od(Z,g.path)?I=!1:x(g.path,Z.path)&&(R=!0)),$--}return!!I&&(R?(function mu(c){c.visibleWrites=yu(c.allWrites,Ka,Nr()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(g.snap?c.visibleWrites=Md(c.visibleWrites,g.path):_s(g.children,oe=>{c.visibleWrites=Md(c.visibleWrites,Si(g.path,oe))}),!0))}(c.pendingWriteTree_,a)){let R=new Ei(null);return null!=g.snap?R=R.set(Nr(),!0):_s(g.children,$=>{R=R.set(new ci($),!0)}),_u(c,new Bu(g.path,R,l))}return[]}function td(c,a,l){return _u(c,new Ti({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function ao(c,a,l,g){const I=a._path,R=c.syncPointTree_.get(I);let $=[];if(R&&("default"===a._queryIdentifier||dg(R,a))){const Z=function gy(c,a,l,g){const I=a._queryIdentifier,R=[];let $=[];const Z=_c(c);if("default"===I)for(const[oe,ye]of c.views.entries())$=$.concat(Jc(ye,l,g)),Zl(ye)&&(c.views.delete(oe),ye.query._queryParams.loadsAllData()||R.push(ye.query));else{const oe=c.views.get(I);oe&&($=$.concat(Jc(oe,l,g)),Zl(oe)&&(c.views.delete(I),oe.query._queryParams.loadsAllData()||R.push(oe.query)))}return Z&&!_c(c)&&R.push(new(function am(){return(0,G.hu)(Gu,"Reference.ts has not been loaded"),Gu}())(a._repo,a._path)),{removed:R,events:$}}(R,a,l,g);(function op(c){return 0===c.views.size})(R)&&(c.syncPointTree_=c.syncPointTree_.remove(I));const oe=Z.removed;$=Z.events;const ye=-1!==oe.findIndex(wt=>wt._queryParams.loadsAllData()),mt=c.syncPointTree_.findOnPath(I,(wt,Vt)=>_c(Vt));if(ye&&!mt){const wt=c.syncPointTree_.subtree(I);if(!wt.isEmpty()){const Vt=function lf(c){return c.fold((a,l,g)=>{if(l&&_c(l))return[hh(l)];{let I=[];return l&&(I=ap(l)),_s(g,(R,$)=>{I=I.concat($)}),I}})}(wt);for(let yn=0;yn<Vt.length;++yn){const On=Vt[yn],pr=On.query,Wr=qu(c,On);c.listenProvider_.startListening(Ld(pr),Eu(c,pr),Wr.hashFn,Wr.onComplete)}}}!mt&&oe.length>0&&!g&&(ye?c.listenProvider_.stopListening(Ld(a),null):oe.forEach(wt=>{const Vt=c.queryToTagMap.get(rd(wt));c.listenProvider_.stopListening(Ld(wt),Vt)})),function fp(c,a){for(let l=0;l<a.length;++l){const g=a[l];if(!g._queryParams.loadsAllData()){const I=rd(g),R=c.queryToTagMap.get(I);c.queryToTagMap.delete(I),c.tagToQueryMap.delete(R)}}}(c,oe)}return $}function dp(c,a,l,g){const I=sf(c,g);if(null!=I){const R=id(I),$=R.path,Z=R.queryId,oe=Tr($,a);return af(c,$,new Ti(Gl(Z),oe,l))}return[]}function gl(c,a){const l=c._path;let g=null,I=!1;a.syncPointTree_.foreachOnPath(l,(ye,mt)=>{const wt=Tr(ye,l);g=g||vc(mt,wt),I=I||_c(mt)});let $,R=a.syncPointTree_.get(l);R?(I=I||_c(R),g=g||vc(R,Nr())):(R=new Nd,a.syncPointTree_=a.syncPointTree_.set(l,R)),null!=g?$=!0:($=!1,g=Lr.EMPTY_NODE,a.syncPointTree_.subtree(l).foreachChild((mt,wt)=>{const Vt=vc(wt,Nr());Vt&&(g=g.updateImmediateChild(mt,Vt))}));const Z=dg(R,c);if(!Z&&!c._queryParams.loadsAllData()){const ye=rd(c);(0,G.hu)(!a.queryToTagMap.has(ye),"View does not exist, but we have a tag");const mt=function wc(){return um++}();a.queryToTagMap.set(ye,mt),a.tagToQueryMap.set(mt,ye)}return{syncPoint:R,writesCache:Kl(a.pendingWriteTree_,l),serverCache:g,serverCacheComplete:$,foundAncestorDefaultView:I,viewAlreadyExists:Z}}function fh(c,a,l){const{syncPoint:g,serverCache:I,writesCache:R,serverCacheComplete:$,viewAlreadyExists:Z,foundAncestorDefaultView:oe}=gl(a,c);let ye=function py(c,a,l,g,I,R){const $=dh(c,a,g,I,R);return c.views.has(a._queryIdentifier)||c.views.set(a._queryIdentifier,$),function nf(c,a){c.eventRegistrations_.push(a)}($,l),function Hu(c,a){const l=c.viewCache_.eventCache,g=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Ui,(R,$)=>{g.push(Vl(R,$))}),l.isFullyInitialized()&&g.push(cc(l.getNode())),xo(c,g,l.getNode(),a)}($,l)}(g,a,l,R,I,$);if(!Z&&!oe){const mt=cg(g,a);ye=ye.concat(function uf(c,a,l){const g=a._path,I=Eu(c,a),R=qu(c,l),$=c.listenProvider_.startListening(Ld(a),I,R.hashFn,R.onComplete),Z=c.syncPointTree_.subtree(g);if(I)(0,G.hu)(!_c(Z.value),"If we're adding a query, it shouldn't be shadowed");else{const oe=Z.fold((ye,mt,wt)=>{if(!Zn(ye)&&mt&&_c(mt))return[hh(mt).query];{let Vt=[];return mt&&(Vt=Vt.concat(ap(mt).map(yn=>yn.query))),_s(wt,(yn,On)=>{Vt=Vt.concat(On)}),Vt}});for(let ye=0;ye<oe.length;++ye){const mt=oe[ye];c.listenProvider_.stopListening(Ld(mt),Eu(c,mt))}}return $}(c,a,mt))}return ye}function ph(c,a,l){const I=c.pendingWriteTree_,R=c.syncPointTree_.findOnPath(a,($,Z)=>{const ye=vc(Z,Tr($,a));if(ye)return ye});return Yc(I,a,R,l,!0)}function _u(c,a){return nd(a,c.syncPointTree_,null,Kl(c.pendingWriteTree_,Nr()))}function nd(c,a,l,g){if(Zn(c.path))return Ec(c,a,l,g);{const I=a.get(Nr());null==l&&null!=I&&(l=vc(I,Nr()));let R=[];const $=Fr(c.path),Z=c.operationForChild($),oe=a.children.get($);if(oe&&Z){const ye=l?l.getImmediateChild($):null,mt=Bs(g,$);R=R.concat(nd(Z,oe,ye,mt))}return I&&(R=R.concat(Fd(I,c,g,l))),R}}function Ec(c,a,l,g){const I=a.get(Nr());null==l&&null!=I&&(l=vc(I,Nr()));let R=[];return a.children.inorderTraversal(($,Z)=>{const oe=l?l.getImmediateChild($):null,ye=Bs(g,$),mt=c.operationForChild($);mt&&(R=R.concat(Ec(mt,Z,oe,ye)))}),I&&(R=R.concat(Fd(I,c,g,l))),R}function qu(c,a){const l=a.query,g=Eu(c,l);return{hashFn:()=>(function kd(c){return c.viewCache_.serverCache.getNode()}(a)||Lr.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return g?function cp(c,a,l){const g=sf(c,l);if(g){const I=id(g),R=I.path,$=I.queryId,Z=Tr(R,a);return af(c,R,new $u(Gl($),Z))}return[]}(c,l._path,g):function cm(c,a){return _u(c,new $u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(c,l._path);{const R=function wl(c,a){let l="Unknown Error";"too_big"===c?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?l="Client doesn't have permission to access the desired data.":"unavailable"===c&&(l="The service is unavailable");const g=new Error(c+" at "+a._path.toString()+": "+l);return g.code=c.toUpperCase(),g}(I,l);return ao(c,l,null,R)}}}}function Eu(c,a){const l=rd(a);return c.queryToTagMap.get(l)}function rd(c){return c._path.toString()+"$"+c._queryIdentifier}function sf(c,a){return c.tagToQueryMap.get(a)}function id(c){const a=c.indexOf("$");return(0,G.hu)(-1!==a&&a<c.length-1,"Bad queryKey."),{queryId:c.substr(a+1),path:new ci(c.substr(0,a))}}function af(c,a,l){const g=c.syncPointTree_.get(a);return(0,G.hu)(g,"Missing sync point for query tag that we're tracking"),Fd(g,l,Kl(c.pendingWriteTree_,a),null)}function Ld(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new(function lp(){return(0,G.hu)(ed,"Reference.ts has not been loaded"),ed}())(c._repo,c._path):c}class Ku{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new Ku(l)}node(){return this.node_}}class Rl{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=Si(this.path_,a);return new Rl(this.syncTree_,l)}node(){return ph(this.syncTree_,this.path_)}}const dm=function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c},gh=function(c,a,l){return c&&"object"==typeof c?((0,G.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?cf(c[".sv"],a,l):"object"==typeof c[".sv"]?sd(c[".sv"],a):void(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},cf=function(c,a,l){if("timestamp"===c)return l.timestamp;(0,G.hu)(!1,"Unexpected server value: "+c)},sd=function(c,a,l){c.hasOwnProperty("increment")||(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const g=c.increment;"number"!=typeof g&&(0,G.hu)(!1,"Unexpected increment value: "+g);const I=a.node();if((0,G.hu)(null!==I&&typeof I<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return g;const $=I.getValue();return"number"!=typeof $?g:$+g},pp=function(c,a,l,g){return Zu(a,new Rl(l,c),g)},Yu=function(c,a,l){return Zu(c,new Ku(a),l)};function Zu(c,a,l){const g=c.getPriority().val(),I=gh(g,a.getImmediateChild(".priority"),l);let R;if(c.isLeafNode()){const $=c,Z=gh($.getValue(),a,l);return Z!==$.getValue()||I!==$.getPriority().val()?new oa(Z,Es(I)):c}{const $=c;return R=$,I!==$.getPriority().val()&&(R=R.updatePriority(new oa(I))),$.forEachChild(Ui,(Z,oe)=>{const ye=Zu(oe,a.getImmediateChild(Z),l);ye!==oe&&(R=R.updateImmediateChild(Z,ye))}),R}}class Xu{constructor(a="",l=null,g={children:{},childCount:0}){this.name=a,this.parent=l,this.node=g}}function Bd(c,a){let l=a instanceof ci?a:new ci(a),g=c,I=Fr(l);for(;null!==I;){const R=(0,G.DV)(g.node.children,I)||{children:{},childCount:0};g=new Xu(I,g,R),l=cr(l),I=Fr(l)}return g}function Ol(c){return c.node.value}function gp(c,a){c.node.value=a,bc(c)}function df(c){return c.node.childCount>0}function $d(c,a){_s(c.node.children,(l,g)=>{a(new Xu(l,c,g))})}function mp(c,a,l,g){l&&!g&&a(c),$d(c,I=>{mp(I,a,!0,g)}),l&&g&&a(c)}function Ic(c){return new ci(null===c.parent?c.name:Ic(c.parent)+"/"+c.name)}function bc(c){null!==c.parent&&function hm(c,a,l){const g=function hf(c){return void 0===Ol(c)&&!df(c)}(l),I=(0,G.r3)(c.node.children,a);g&&I?(delete c.node.children[a],c.node.childCount--,bc(c)):!g&&!I&&(c.node.children[a]=l.node,c.node.childCount++,bc(c))}(c.parent,c.name,c)}const gg=/[\[\].#$\/\u0000-\u001F\u007F]/,Ko=/[\[\].#$\u0000-\u001F\u007F]/,ff=10485760,Pl=function(c){return"string"==typeof c&&0!==c.length&&!gg.test(c)},Qu=function(c){return"string"==typeof c&&0!==c.length&&!Ko.test(c)},ml=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!ma(c)||c&&"object"==typeof c&&(0,G.r3)(c,".sv")},Na=function(c,a,l,g){g&&void 0===a||Ud((0,G.gK)(c,"value"),a,l)},Ud=function(c,a,l){const g=l instanceof ci?new b(l,c):l;if(void 0===a)throw new Error(c+"contains undefined "+re(g));if("function"==typeof a)throw new Error(c+"contains a function "+re(g)+" with contents = "+a.toString());if(ma(a))throw new Error(c+"contains "+a.toString()+" "+re(g));if("string"==typeof a&&a.length>ff/3&&(0,G.ug)(a)>ff)throw new Error(c+"contains a string greater than "+ff+" utf8 bytes "+re(g)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let I=!1,R=!1;if(_s(a,($,Z)=>{if(".value"===$)I=!0;else if(".priority"!==$&&".sv"!==$&&(R=!0,!Pl($)))throw new Error(c+" contains an invalid key ("+$+") "+re(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function O(c,a){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(a),c.byteLength_+=(0,G.ug)(a),ee(c)})(g,$),Ud(c,Z,g),function U(c){const a=c.parts_.pop();c.byteLength_-=(0,G.ug)(a),c.parts_.length>0&&(c.byteLength_-=1)}(g)}),I&&R)throw new Error(c+' contains ".value" child '+re(g)+" in addition to actual children.")}},yp=function(c,a,l,g){if(g&&void 0===a)return;const I=(0,G.gK)(c,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(I+" must be an object containing the children to replace.");const R=[];_s(a,($,Z)=>{const oe=new ci($);if(Ud(I,Z,Si(l,oe)),".priority"===al(oe)&&!ml(Z))throw new Error(I+"contains an invalid value for '"+oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");R.push(oe)}),function(c,a){let l,g;for(l=0;l<a.length;l++){g=a[l];const R=mo(g);for(let $=0;$<R.length;$++)if((".priority"!==R[$]||$!==R.length-1)&&!Pl(R[$]))throw new Error(c+"contains an invalid key ("+R[$]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(io);let I=null;for(l=0;l<a.length;l++){if(g=a[l],null!==I&&x(I,g))throw new Error(c+"contains a path "+I.toString()+" that is ancestor of another path "+g.toString());I=g}}(I,R)},Ju=function(c,a,l){if(!l||void 0!==a){if(ma(a))throw new Error((0,G.gK)(c,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ml(a))throw new Error((0,G.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cc=function(c,a,l,g){if(!(g&&void 0===l||Pl(l)))throw new Error((0,G.gK)(c,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xa=function(c,a,l,g){if(!(g&&void 0===l||Qu(l)))throw new Error((0,G.gK)(c,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yg=function(c,a,l,g){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Xa(c,a,l,g)},Qa=function(c,a){if(".info"===Fr(a))throw new Error(c+" failed = Can't modify data under /.info/")},jd=function(c,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!Pl(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Qu(c)}(l))throw new Error((0,G.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fm{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pf(c,a){let l=null;for(let g=0;g<a.length;g++){const I=a[g],R=I.getPath();null!==l&&!A(R,l.path)&&(c.eventLists_.push(l),l=null),null===l&&(l={events:[],path:R}),l.events.push(I)}l&&c.eventLists_.push(l)}function mh(c,a,l){pf(c,l),vg(c,g=>A(g,a))}function yl(c,a,l){pf(c,l),vg(c,g=>x(g,a)||x(a,g))}function vg(c,a){c.recursionDepth_++;let l=!0;for(let g=0;g<c.eventLists_.length;g++){const I=c.eventLists_[g];I&&(a(I.path)?(_g(c.eventLists_[g]),c.eventLists_[g]=null):l=!1)}l&&(c.eventLists_=[]),c.recursionDepth_--}function _g(c){for(let a=0;a<c.events.length;a++){const l=c.events[a];if(null!==l){c.events[a]=null;const g=l.getEventRunner();fo&&$i("event: "+l.toString()),Ee(g)}}}const Eg="repo_interrupt",ad=25;class Fa{constructor(a,l,g,I){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=g,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fc(),this.transactionQueueTree_=new Xu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vp(c){const l=c.infoData_.getNode(new ci(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function vh(c){return dm({timestamp:vp(c)})}function pm(c,a,l,g,I){c.dataUpdateCount++;const R=new ci(a);l=c.interceptServerDataCallback_?c.interceptServerDataCallback_(a,l):l;let $=[];if(I)if(g){const oe=(0,G.UI)(l,ye=>Es(ye));$=function pg(c,a,l,g){const I=sf(c,g);if(I){const R=id(I),$=R.path,Z=R.queryId,oe=Tr($,a),ye=Ei.fromObject(l);return af(c,$,new zl(Gl(Z),oe,ye))}return[]}(c.serverSyncTree_,R,oe,I)}else{const oe=Es(l);$=dp(c.serverSyncTree_,R,oe,I)}else if(g){const oe=(0,G.UI)(l,ye=>Es(ye));$=function fg(c,a,l){const g=Ei.fromObject(l);return _u(c,new zl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,g))}(c.serverSyncTree_,R,oe)}else{const oe=Es(l);$=td(c.serverSyncTree_,R,oe)}let Z=R;$.length>0&&(Z=Dc(c,R)),yl(c.eventQueue_,Z,$)}function gf(c,a){mf(c,"connected",a),!1===a&&function mm(c){Ql(c,"onDisconnectEvents");const a=vh(c),l=fc();zc(c.onDisconnect_,Nr(),(I,R)=>{const $=pp(I,R,c.serverSyncTree_,a);dl(l,I,$)});let g=[];zc(l,Nr(),(I,R)=>{g=g.concat(td(c.serverSyncTree_,I,R));const $=bf(c,I);Dc(c,$)}),c.onDisconnect_=fc(),yl(c.eventQueue_,Nr(),g)}(c)}function mf(c,a,l){const g=new ci("/.info/"+a),I=Es(l);c.infoData_.updateSnapshot(g,I);const R=td(c.infoSyncTree_,g,I);yl(c.eventQueue_,g,R)}function ld(c){return c.nextWriteId_++}function Yo(c,a){const l=function hp(c,a){const l=a._path;let g=null;c.syncPointTree_.foreachOnPath(l,(ye,mt)=>{const wt=Tr(ye,l);g=g||vc(mt,wt)});let I=c.syncPointTree_.get(l);I?g=g||vc(I,Nr()):(I=new Nd,c.syncPointTree_=c.syncPointTree_.set(l,I));const R=null!=g,$=R?new Sa(g,!0,!1):null;return function tf(c){return ql(c.viewCache_)}(dh(I,a,Kl(c.pendingWriteTree_,a._path),R?$.getNode():Lr.EMPTY_NODE,R))}(c.serverSyncTree_,a);return null!=l?Promise.resolve(l):c.server_.get(a).then(g=>{const I=Es(g).withIndex(a._queryParams.getIndex());if(a._queryParams.loadsAllData())td(c.serverSyncTree_,a._path,I);else{const $=function rf(c,a){const{syncPoint:l,serverCache:g,writesCache:I,serverCacheComplete:R}=gl(a,c),$=dh(l,a,I,g,R);return l.views.has(a._queryIdentifier)||l.views.set(a._queryIdentifier,$),a._queryParams.loadsAllData()?null:Eu(c,a)}(c.serverSyncTree_,a);dp(c.serverSyncTree_,a._path,I,$)}return ao(c.serverSyncTree_,a,null).length>0&&Ql(c,"unexpected cancel events in repoGetValue"),I},g=>(Ql(c,"get for query "+(0,G.Pz)(a)+" failed: "+g),Promise.reject(new Error(g))))}function yf(c,a,l,g,I){Ql(c,"set",{path:a.toString(),value:l,priority:g});const R=vh(c),$=Es(l,g),Z=ph(c.serverSyncTree_,a),oe=Yu($,Z,R),ye=ld(c),mt=up(c.serverSyncTree_,a,oe,ye,!0);pf(c.eventQueue_,mt),c.server_.put(a.toString(),$.val(!0),(Vt,yn)=>{const On="ok"===Vt;On||Yi("set at "+a+" failed: "+Vt);const pr=Wu(c.serverSyncTree_,ye,!On);yl(c.eventQueue_,a,pr),Jl(0,I,Vt,yn)});const wt=bf(c,a);Dc(c,wt),yl(c.eventQueue_,wt,[])}function Xl(c,a,l){c.server_.onDisconnectCancel(a.toString(),(g,I)=>{"ok"===g&&ah(c.onDisconnect_,a),Jl(0,l,g,I)})}function _p(c,a,l,g){const I=Es(l);c.server_.onDisconnectPut(a.toString(),I.val(!0),(R,$)=>{"ok"===R&&dl(c.onDisconnect_,a,I),Jl(0,g,R,$)})}function _f(c,a,l){let g;g=".info"===Fr(a._path)?ao(c.infoSyncTree_,a,l):ao(c.serverSyncTree_,a,l),mh(c.eventQueue_,a._path,g)}function Ef(c){c.persistentConnection_&&c.persistentConnection_.interrupt(Eg)}function Ql(c,...a){let l="";c.persistentConnection_&&(l=c.persistentConnection_.id+":"),$i(l,...a)}function Jl(c,a,l,g){a&&Ee(()=>{if("ok"===l)a(null);else{const I=(l||"error").toUpperCase();let R=I;g&&(R+=": "+g);const $=new Error(R);$.code=I,a($)}})}function Rr(c,a,l){return ph(c.serverSyncTree_,a,l)||Lr.EMPTY_NODE}function Hd(c,a=c.transactionQueueTree_){if(a||_h(c,a),Ol(a)){const l=wp(c,a);(0,G.hu)(l.length>0,"Sending zero length transaction queue"),l.every(I=>0===I.status)&&function Ig(c,a,l){const g=l.map(ye=>ye.currentWriteId),I=Rr(c,a,g);let R=I;const $=I.hash();for(let ye=0;ye<l.length;ye++){const mt=l[ye];(0,G.hu)(0===mt.status,"tryToSendTransactionQueue_: items in queue should all be run."),mt.status=1,mt.retryCount++;const wt=Tr(a,mt.path);R=R.updateChild(wt,mt.currentOutputSnapshotRaw)}const Z=R.val(!0),oe=a;c.server_.put(oe.toString(),Z,ye=>{Ql(c,"transaction put response",{path:oe.toString(),status:ye});let mt=[];if("ok"===ye){const wt=[];for(let Vt=0;Vt<l.length;Vt++)l[Vt].status=2,mt=mt.concat(Wu(c.serverSyncTree_,l[Vt].currentWriteId)),l[Vt].onComplete&&wt.push(()=>l[Vt].onComplete(null,!0,l[Vt].currentOutputSnapshotResolved)),l[Vt].unwatcher();_h(c,Bd(c.transactionQueueTree_,a)),Hd(c,c.transactionQueueTree_),yl(c.eventQueue_,a,mt);for(let Vt=0;Vt<wt.length;Vt++)Ee(wt[Vt])}else{if("datastale"===ye)for(let wt=0;wt<l.length;wt++)l[wt].status=3===l[wt].status?4:0;else{Yi("transaction at "+oe.toString()+" failed: "+ye);for(let wt=0;wt<l.length;wt++)l[wt].status=4,l[wt].abortReason=ye}Dc(c,a)}},$)}(c,Ic(a),l)}else df(a)&&$d(a,l=>{Hd(c,l)})}function Dc(c,a){const l=If(c,a),g=Ic(l);return function bg(c,a,l){if(0===a.length)return;const g=[];let I=[];const $=a.filter(Z=>0===Z.status).map(Z=>Z.currentWriteId);for(let Z=0;Z<a.length;Z++){const oe=a[Z],ye=Tr(l,oe.path);let wt,mt=!1;if((0,G.hu)(null!==ye,"rerunTransactionsUnderNode_: relativePath should not be null."),4===oe.status)mt=!0,wt=oe.abortReason,I=I.concat(Wu(c.serverSyncTree_,oe.currentWriteId,!0));else if(0===oe.status)if(oe.retryCount>=ad)mt=!0,wt="maxretry",I=I.concat(Wu(c.serverSyncTree_,oe.currentWriteId,!0));else{const Vt=Rr(c,oe.path,$);oe.currentInputSnapshot=Vt;const yn=a[Z].update(Vt.val());if(void 0!==yn){Ud("transaction failed: Data returned ",yn,oe.path);let On=Es(yn);"object"==typeof yn&&null!=yn&&(0,G.r3)(yn,".priority")||(On=On.updatePriority(Vt.getPriority()));const Wr=oe.currentWriteId,Oi=vh(c),Ss=Yu(On,Vt,Oi);oe.currentOutputSnapshotRaw=On,oe.currentOutputSnapshotResolved=Ss,oe.currentWriteId=ld(c),$.splice($.indexOf(Wr),1),I=I.concat(up(c.serverSyncTree_,oe.path,Ss,oe.currentWriteId,oe.applyLocally)),I=I.concat(Wu(c.serverSyncTree_,Wr,!0))}else mt=!0,wt="nodata",I=I.concat(Wu(c.serverSyncTree_,oe.currentWriteId,!0))}yl(c.eventQueue_,l,I),I=[],mt&&(a[Z].status=2,setTimeout(a[Z].unwatcher,Math.floor(0)),a[Z].onComplete&&g.push("nodata"===wt?()=>a[Z].onComplete(null,!1,a[Z].currentInputSnapshot):()=>a[Z].onComplete(new Error(wt),!1,null)))}_h(c,c.transactionQueueTree_);for(let Z=0;Z<g.length;Z++)Ee(g[Z]);Hd(c,c.transactionQueueTree_)}(c,wp(c,l),g),g}function If(c,a){let l,g=c.transactionQueueTree_;for(l=Fr(a);null!==l&&void 0===Ol(g);)g=Bd(g,l),l=Fr(a=cr(a));return g}function wp(c,a){const l=[];return Ip(c,a,l),l.sort((g,I)=>g.order-I.order),l}function Ip(c,a,l){const g=Ol(a);if(g)for(let I=0;I<g.length;I++)l.push(g[I]);$d(a,I=>{Ip(c,I,l)})}function _h(c,a){const l=Ol(a);if(l){let g=0;for(let I=0;I<l.length;I++)2!==l[I].status&&(l[g]=l[I],g++);l.length=g,gp(a,l.length>0?l:void 0)}$d(a,g=>{_h(c,g)})}function bf(c,a){const l=Ic(If(c,a)),g=Bd(c.transactionQueueTree_,a);return function Vd(c,a,l){let g=l?c:c.parent;for(;null!==g;){if(a(g))return!0;g=g.parent}}(g,I=>{bp(c,I)}),bp(c,g),mp(g,I=>{bp(c,I)}),l}function bp(c,a){const l=Ol(a);if(l){const g=[];let I=[],R=-1;for(let $=0;$<l.length;$++)3===l[$].status||(1===l[$].status?((0,G.hu)(R===$-1,"All SENT items should be at beginning of queue."),R=$,l[$].status=3,l[$].abortReason="set"):((0,G.hu)(0===l[$].status,"Unexpected transaction status in abort"),l[$].unwatcher(),I=I.concat(Wu(c.serverSyncTree_,l[$].currentWriteId,!0)),l[$].onComplete&&g.push(l[$].onComplete.bind(null,new Error("set"),!1,null))));-1===R?gp(a,void 0):l.length=R+1,yl(c.eventQueue_,Ic(a),I);for(let $=0;$<g.length;$++)Ee(g[$])}}const Gd=function(c,a){const l=wu(c),g=l.namespace;return"firebase.com"===l.domain&&eo(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==l.domain&&eo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Xt(l.host,l.secure,g,"ws"===l.scheme||"wss"===l.scheme,a,"",g!==l.subdomain),path:new ci(l.pathString)}},wu=function(c){let a="",l="",g="",I="",R="",$=!0,Z="https",oe=443;if("string"==typeof c){let ye=c.indexOf("//");ye>=0&&(Z=c.substring(0,ye-1),c=c.substring(ye+2));let mt=c.indexOf("/");-1===mt&&(mt=c.length);let wt=c.indexOf("?");-1===wt&&(wt=c.length),a=c.substring(0,Math.min(mt,wt)),mt<wt&&(I=function Eh(c){let a="";const l=c.split("/");for(let g=0;g<l.length;g++)if(l[g].length>0){let I=l[g];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch(R){}a+="/"+I}return a}(c.substring(mt,wt)));const Vt=function ud(c){const a={};"?"===c.charAt(0)&&(c=c.substring(1));for(const l of c.split("&")){if(0===l.length)continue;const g=l.split("=");2===g.length?a[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):Yi(`Invalid query segment '${l}' in query '${c}'`)}return a}(c.substring(Math.min(c.length,wt)));ye=a.indexOf(":"),ye>=0?($="https"===Z||"wss"===Z,oe=parseInt(a.substring(ye+1),10)):ye=a.length;const yn=a.slice(0,ye);if("localhost"===yn.toLowerCase())l="localhost";else if(yn.split(".").length<=2)l=yn;else{const On=a.indexOf(".");g=a.substring(0,On).toLowerCase(),l=a.substring(On+1),R=g}"ns"in Vt&&(R=Vt.ns)}return{host:a,port:oe,domain:l,subdomain:g,secure:$,scheme:Z,pathString:I,namespace:R}};class Cp{constructor(a,l,g,I){this.eventType=a,this.eventRegistration=l,this.snapshot=g,this.prevName=I}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,G.Pz)(this.snapshot.exportVal())}}class wh{constructor(a,l,g){this.eventRegistration=a,this.error=l,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ih{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,G.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Cg{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new G.BH;return Xl(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Qa("OnDisconnect.remove",this._path);const a=new G.BH;return _p(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Qa("OnDisconnect.set",this._path),Na("OnDisconnect.set",a,this._path,!1);const l=new G.BH;return _p(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){Qa("OnDisconnect.setWithPriority",this._path),Na("OnDisconnect.setWithPriority",a,this._path,!1),Ju("OnDisconnect.setWithPriority",l,!1);const g=new G.BH;return function wg(c,a,l,g,I){const R=Es(l,g);c.server_.onDisconnectPut(a.toString(),R.val(!0),($,Z)=>{"ok"===$&&dl(c.onDisconnect_,a,R),Jl(0,I,$,Z)})}(this._repo,this._path,a,l,g.wrapCallback(()=>{})),g.promise}update(a){Qa("OnDisconnect.update",this._path),yp("OnDisconnect.update",a,this._path,!1);const l=new G.BH;return function vf(c,a,l,g){if((0,G.xb)(l))return $i("onDisconnect().update() called with empty data.  Don't do anything."),void Jl(0,g,"ok",void 0);c.server_.onDisconnectMerge(a.toString(),l,(I,R)=>{"ok"===I&&_s(l,($,Z)=>{const oe=Es(Z);dl(c.onDisconnect_,Si(a,$),oe)}),Jl(0,g,I,R)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class La{constructor(a,l,g,I){this._repo=a,this._path=l,this._queryParams=g,this._orderByCalled=I}get key(){return Zn(this._path)?null:al(this._path)}get ref(){return new Ja(this._repo,this._path)}get _queryIdentifier(){const a=qh(this._queryParams),l=Zi(a);return"{}"===l?"default":l}get _queryObject(){return qh(this._queryParams)}isEqual(a){if(!((a=(0,G.m9)(a))instanceof La))return!1;const l=this._repo===a._repo,g=A(this._path,a._path);return l&&g&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ho(c){let a="";for(let l=c.pieceNum_;l<c.pieces_.length;l++)""!==c.pieces_[l]&&(a+="/"+encodeURIComponent(String(c.pieces_[l])));return a||"/"}(this._path)}}function Dp(c,a){if(!0===c._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function ec(c){let a=null,l=null;if(c.hasStart()&&(a=c.getIndexStartValue()),c.hasEnd()&&(l=c.getIndexEndValue()),c.getIndex()===en){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==Bo)throw new Error(g);if("string"!=typeof a)throw new Error(I)}if(c.hasEnd()){if(c.getIndexEndName()!==mi)throw new Error(g);if("string"!=typeof l)throw new Error(I)}}else if(c.getIndex()===Ui){if(null!=a&&!ml(a)||null!=l&&!ml(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,G.hu)(c.getIndex()instanceof sh||c.getIndex()===uc,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bh(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ja extends La{constructor(a,l){super(a,l,new Ws,!1)}get parent(){const a=is(this._path);return null===a?null:new Ja(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Sc{constructor(a,l,g){this._node=a,this.ref=l,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new ci(a),g=Iu(this.ref,a);return new Sc(this._node.getChild(l),g,Ui)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,I)=>a(new Sc(I,Iu(this.ref,g),Ui)))}hasChild(a){const l=new ci(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ch(c,a){return(c=(0,G.m9)(c))._checkNotDeleted("ref"),void 0!==a?Iu(c._root,a):c._root}function eu(c,a){(c=(0,G.m9)(c))._checkNotDeleted("refFromURL");const l=Gd(a,c._repo.repoInfo_.nodeAdmin);jd("refFromURL",l);const g=l.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&g.host!==c._repo.repoInfo_.host&&eo("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+c._repo.repoInfo_.host+")"),Ch(c,l.path.toString())}function Iu(c,a){return null===Fr((c=(0,G.m9)(c))._path)?yg("child","path",a,!1):Xa("child","path",a,!1),new Ja(c._repo,Si(c._path,a))}function Dh(c,a){c=(0,G.m9)(c),Qa("set",c._path),Na("set",a,c._path,!1);const l=new G.BH;return yf(c._repo,c._path,a,null,l.wrapCallback(()=>{})),l.promise}function _m(c,a){yp("update",a,c._path,!1);const l=new G.BH;return function gm(c,a,l,g){Ql(c,"update",{path:a.toString(),value:l});let I=!0;const R=vh(c),$={};if(_s(l,(Z,oe)=>{I=!1,$[Z]=pp(Si(a,Z),Es(oe),c.serverSyncTree_,R)}),I)$i("update() called with empty data.  Don't do anything."),Jl(0,g,"ok",void 0);else{const Z=ld(c),oe=function hg(c,a,l,g){!function Rd(c,a,l,g){(0,G.hu)(g>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:a,children:l,writeId:g,visible:!0}),c.visibleWrites=qc(c.visibleWrites,a,l),c.lastWriteId=g}(c.pendingWriteTree_,a,l,g);const I=Ei.fromObject(l);return _u(c,new zl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,I))}(c.serverSyncTree_,a,$,Z);pf(c.eventQueue_,oe),c.server_.merge(a.toString(),l,(ye,mt)=>{const wt="ok"===ye;wt||Yi("update at "+a+" failed: "+ye);const Vt=Wu(c.serverSyncTree_,Z,!wt),yn=Vt.length>0?Dc(c,a):a;yl(c.eventQueue_,yn,Vt),Jl(0,g,ye,mt)}),_s(l,ye=>{const mt=bf(c,Si(a,ye));Dc(c,mt)}),yl(c.eventQueue_,a,[])}}(c._repo,c._path,a,l.wrapCallback(()=>{})),l.promise}class Cf{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const g=l._queryParams.getIndex();return new Cp("value",this,new Sc(a.snapshotNode,new Ja(l._repo,l._path),g))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new wh(this,a,l):null}matches(a){return a instanceof Cf&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wd{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new wh(this,a,l):null}createEvent(a,l){(0,G.hu)(null!=a.childName,"Child events should have a childName.");const g=Iu(new Ja(l._repo,l._path),a.childName),I=l._queryParams.getIndex();return new Cp(a.type,this,new Sc(a.snapshotNode,g,I),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Wd&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Tc(c,a,l,g,I){let R;if("object"==typeof g&&(R=void 0,I=g),"function"==typeof g&&(R=g),I&&I.onlyOnce){const oe=l,ye=(mt,wt)=>{_f(c._repo,c,Z),oe(mt,wt)};ye.userCallback=l.userCallback,ye.context=l.context,l=ye}const $=new Ih(l,R||void 0),Z="value"===a?new Cf($):new Wd(a,$);return function ym(c,a,l){let g;g=".info"===Fr(a._path)?fh(c.infoSyncTree_,a,l):fh(c.serverSyncTree_,a,l),mh(c.eventQueue_,a._path,g)}(c._repo,c,Z),()=>_f(c._repo,c,Z)}function Ac(c,a,l,g){return Tc(c,"value",a,l,g)}function Sh(c,a,l,g){return Tc(c,"child_added",a,l,g)}function Th(c,a,l,g){return Tc(c,"child_changed",a,l,g)}function wm(c,a,l,g){return Tc(c,"child_moved",a,l,g)}function Df(c,a,l,g){return Tc(c,"child_removed",a,l,g)}function Sg(c,a,l){let g=null;const I=l?new Ih(l):null;"value"===a?g=new Cf(I):a&&(g=new Wd(a,I)),_f(c._repo,c,g)}class bu{}class cd extends bu{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Na("endAt",this._value,a._path,!0);const l=za(a._queryParams,this._value,this._key);if(bh(l),ec(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new La(a._repo,a._path,l,a._orderByCalled)}}class Ap extends bu{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Na("endBefore",this._value,a._path,!1);const l=function Td(c,a,l){let g,I;return c.index_===en?("string"==typeof a&&(a=Wh(a)),I=za(c,a,l)):(g=null==l?Bo:Wh(l),I=za(c,a,g)),I.endBeforeSet_=!0,I}(a._queryParams,this._value,this._key);if(bh(l),ec(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new La(a._repo,a._path,l,a._orderByCalled)}}class Sf extends bu{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Na("startAt",this._value,a._path,!0);const l=Ps(a._queryParams,this._value,this._key);if(bh(l),ec(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new La(a._repo,a._path,l,a._orderByCalled)}}class xc extends bu{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Na("startAfter",this._value,a._path,!1);const l=function Hc(c,a,l){let g;if(c.index_===en)"string"==typeof a&&(a=ku(a)),g=Ps(c,a,l);else{let I;I=null==l?mi:ku(l),g=Ps(c,a,I)}return g.startAfterSet_=!0,g}(a._queryParams,this._value,this._key);if(bh(l),ec(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new La(a._repo,a._path,l,a._orderByCalled)}}class Af extends bu{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new La(a._repo,a._path,function ka(c,a){const l=c.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class Ah extends bu{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new La(a._repo,a._path,function Sd(c,a){const l=c.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class xp extends bu{constructor(a){super(),this._path=a}_apply(a){Dp(a,"orderByChild");const l=new ci(this._path);if(Zn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new sh(l),I=Gc(a._queryParams,g);return ec(I),new La(a._repo,a._path,I,!0)}}class xh extends bu{_apply(a){Dp(a,"orderByKey");const l=Gc(a._queryParams,en);return ec(l),new La(a._repo,a._path,l,!0)}}class xf extends bu{_apply(a){Dp(a,"orderByPriority");const l=Gc(a._queryParams,Ui);return ec(l),new La(a._repo,a._path,l,!0)}}class Pp extends bu{_apply(a){Dp(a,"orderByValue");const l=Gc(a._queryParams,uc);return ec(l),new La(a._repo,a._path,l,!0)}}class Rf extends bu{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(Na("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cd(this._value,this._key)._apply(new Sf(this._value,this._key)._apply(a))}}function ca(c,...a){let l=(0,G.m9)(c);for(const g of a)l=g._apply(l);return l}(function zu(c){(0,G.hu)(!Gu,"__referenceConstructor has already been defined"),Gu=c})(Ja),function lm(c){(0,G.hu)(!ed,"__referenceConstructor has already been defined"),ed=c}(Ja);const Of="FIREBASE_DATABASE_EMULATOR_HOST",kp={};let Ag=!1;function Pf(c,a,l,g,I){let R=g||c.options.databaseURL;void 0===R&&(c.options.projectId||eo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$i("Using default host for project ",c.options.projectId),R=`${c.options.projectId}-default-rtdb.firebaseio.com`);let oe,ye,$=Gd(R,I),Z=$.repoInfo;typeof process<"u"&&process.env&&(ye=process.env[Of]),ye?(oe=!0,R=`http://${ye}?ns=${Z.namespace}`,$=Gd(R,I),Z=$.repoInfo):oe=!$.repoInfo.secure;const mt=I&&oe?new Mr(Mr.OWNER):new vr(c.name,c.options,a);jd("Invalid Firebase Database URL",$),Zn($.path)||eo("Database URL must point to the root of a Firebase Database (not including a child path).");const wt=function xg(c,a,l,g){let I=kp[a.name];I||(I={},kp[a.name]=I);let R=I[c.toURLString()];return R&&eo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),R=new Fa(c,Ag,l,g),I[c.toURLString()]=R,R}(Z,c,mt,new Pn(c.name,l));return new kf(wt,c)}class kf{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yh(c,a,l){if(c.stats_=rl(c.repoInfo_),c.forceRestClient_||Et())c.server_=new du(c.repoInfo_,(g,I,R,$)=>{pm(c,g,I,R,$)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>gf(c,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,G.Pz)(l)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}c.persistentConnection_=new te(c.repoInfo_,a,(g,I,R,$)=>{pm(c,g,I,R,$)},g=>{gf(c,g)},g=>{!function my(c,a){_s(a,(l,g)=>{mf(c,l,g)})}(c,g)},c.authTokenProvider_,c.appCheckProvider_,l),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(g=>{c.server_.refreshAuthToken(g)}),c.appCheckProvider_.addTokenChangeListener(g=>{c.server_.refreshAppCheckToken(g.token)}),c.statsReporter_=function _n(c,a){const l=c.toString();return Xn[l]||(Xn[l]=a()),Xn[l]}(c.repoInfo_,()=>new Ad(c.stats_,c.server_)),c.infoData_=new Kh,c.infoSyncTree_=new oo({startListening:(g,I,R,$)=>{let Z=[];const oe=c.infoData_.getNode(g._path);return oe.isEmpty()||(Z=td(c.infoSyncTree_,g._path,oe),setTimeout(()=>{$("ok")},0)),Z},stopListening:()=>{}}),mf(c,"connected",!1),c.serverSyncTree_=new oo({startListening:(g,I,R,$)=>(c.server_.listen(g,R,I,(Z,oe)=>{const ye=$(Z,oe);yl(c.eventQueue_,g._path,ye)}),[]),stopListening:(g,I)=>{c.server_.unlisten(g,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ja(this._repo,Nr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Im(c,a){const l=kp[a];(!l||l[c.key]!==c)&&eo(`Database ${a}(${c.repoInfo_}) has already been deleted.`),Ef(c),delete l[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&eo("Cannot call "+a+" on a deleted database.")}}function Mg(){Oa.IS_TRANSPORT_INITIALIZED&&Yi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Fp(){Mg(),Hn.forceDisallow()}function bm(){Mg(),rn.forceDisallow(),Hn.forceAllow()}function $p(c,a){ru(c,a)}const Rc={".sv":"timestamp"};class Ba{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}te.prototype.simpleListen=function(c,a){this.sendRequest("q",{p:c},a)},te.prototype.echo=function(c,a){this.sendRequest("echo",{d:c},a)},function Kd(c){Ki(Ye.SDK_VERSION),(0,Ye._registerComponent)(new Me.wA("database",(a,{instanceIdentifier:l})=>Pf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(ts,"0.13.3",c),(0,Ye.registerVersion)(ts,"0.13.3","esm2017")}();const jp=new $n.Yd("@firebase/database-compat"),Ff=function(c){jp.warn("FIREBASE WARNING: "+c)};class Dm{constructor(a){this._delegate=a}cancel(a){(0,G.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,G.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),g=>a(g)),l}remove(a){(0,G.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,G.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),g=>a(g)),l}set(a,l){(0,G.Dv)("OnDisconnect.set",1,2,arguments.length),(0,G.Wj)("OnDisconnect.set","onComplete",l,!0);const g=this._delegate.set(a);return l&&g.then(()=>l(null),I=>l(I)),g}setWithPriority(a,l,g){(0,G.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,G.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const I=this._delegate.setWithPriority(a,l);return g&&I.then(()=>g(null),R=>g(R)),I}update(a,l){if((0,G.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Ff("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,G.Wj)("OnDisconnect.update","onComplete",l,!0);const g=this._delegate.update(a);return l&&g.then(()=>l(null),I=>l(I)),g}}class Zd{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,G.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kl{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,G.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,G.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,G.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,G.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,G.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),Xa("DataSnapshot.child","path",a,!1),new kl(this._database,this._delegate.child(a))}hasChild(a){return(0,G.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xa("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,G.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,G.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,G.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new kl(this._database,l)))}hasChildren(){return(0,G.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,G.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,G.Dv)("DataSnapshot.ref",0,0,arguments.length),new vl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vo{constructor(a,l){this.database=a,this._delegate=l}on(a,l,g,I){var R;(0,G.Dv)("Query.on",2,4,arguments.length),(0,G.Wj)("Query.on","callback",l,!1);const $=vo.getCancelAndContextArgs_("Query.on",g,I),Z=(ye,mt)=>{l.call($.context,new kl(this.database,ye),mt)};Z.userCallback=l,Z.context=$.context;const oe=null===(R=$.cancel)||void 0===R?void 0:R.bind($.context);switch(a){case"value":return Ac(this._delegate,Z,oe),l;case"child_added":return Sh(this._delegate,Z,oe),l;case"child_removed":return Df(this._delegate,Z,oe),l;case"child_changed":return Th(this._delegate,Z,oe),l;case"child_moved":return wm(this._delegate,Z,oe),l;default:throw new Error((0,G.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,g){if((0,G.Dv)("Query.off",0,3,arguments.length),function(c,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,G.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,G.Wj)("Query.off","callback",l,!0),(0,G.lb)("Query.off","context",g,!0),l){const I=()=>{};I.userCallback=l,I.context=g,Sg(this._delegate,a,I)}else Sg(this._delegate,a)}get(){return function Em(c){return Yo((c=(0,G.m9)(c))._repo,c).then(a=>new Sc(a,new Ja(c._repo,c._path),c._queryParams.getIndex()))}(this._delegate).then(a=>new kl(this.database,a))}once(a,l,g,I){(0,G.Dv)("Query.once",1,4,arguments.length),(0,G.Wj)("Query.once","callback",l,!0);const R=vo.getCancelAndContextArgs_("Query.once",g,I),$=new G.BH,Z=(ye,mt)=>{const wt=new kl(this.database,ye);l&&l.call(R.context,wt,mt),$.resolve(wt)};Z.userCallback=l,Z.context=R.context;const oe=ye=>{R.cancel&&R.cancel.call(R.context,ye),$.reject(ye)};switch(a){case"value":Ac(this._delegate,Z,oe,{onlyOnce:!0});break;case"child_added":Sh(this._delegate,Z,oe,{onlyOnce:!0});break;case"child_removed":Df(this._delegate,Z,oe,{onlyOnce:!0});break;case"child_changed":Th(this._delegate,Z,oe,{onlyOnce:!0});break;case"child_moved":wm(this._delegate,Z,oe,{onlyOnce:!0});break;default:throw new Error((0,G.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return $.promise}limitToFirst(a){return(0,G.Dv)("Query.limitToFirst",1,1,arguments.length),new vo(this.database,ca(this._delegate,function hd(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Af(c)}(a)))}limitToLast(a){return(0,G.Dv)("Query.limitToLast",1,1,arguments.length),new vo(this.database,ca(this._delegate,function tu(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ah(c)}(a)))}orderByChild(a){return(0,G.Dv)("Query.orderByChild",1,1,arguments.length),new vo(this.database,ca(this._delegate,function Mp(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xa("orderByChild","path",c,!1),new xp(c)}(a)))}orderByKey(){return(0,G.Dv)("Query.orderByKey",0,0,arguments.length),new vo(this.database,ca(this._delegate,function Rp(){return new xh}()))}orderByPriority(){return(0,G.Dv)("Query.orderByPriority",0,0,arguments.length),new vo(this.database,ca(this._delegate,function Op(){return new xf}()))}orderByValue(){return(0,G.Dv)("Query.orderByValue",0,0,arguments.length),new vo(this.database,ca(this._delegate,function Mf(){return new Pp}()))}startAt(a=null,l){return(0,G.Dv)("Query.startAt",0,2,arguments.length),new vo(this.database,ca(this._delegate,function Tf(c=null,a){return Cc("startAt","key",a,!0),new Sf(c,a)}(a,l)))}startAfter(a=null,l){return(0,G.Dv)("Query.startAfter",0,2,arguments.length),new vo(this.database,ca(this._delegate,function Mc(c,a){return Cc("startAfter","key",a,!0),new xc(c,a)}(a,l)))}endAt(a=null,l){return(0,G.Dv)("Query.endAt",0,2,arguments.length),new vo(this.database,ca(this._delegate,function qd(c,a){return Cc("endAt","key",a,!0),new cd(c,a)}(a,l)))}endBefore(a=null,l){return(0,G.Dv)("Query.endBefore",0,2,arguments.length),new vo(this.database,ca(this._delegate,function dd(c,a){return Cc("endBefore","key",a,!0),new Ap(c,a)}(a,l)))}equalTo(a,l){return(0,G.Dv)("Query.equalTo",1,2,arguments.length),new vo(this.database,ca(this._delegate,function Tg(c,a){return Cc("equalTo","key",a,!0),new Rf(c,a)}(a,l)))}toString(){return(0,G.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,G.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,G.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof vo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,g){const I={cancel:void 0,context:void 0};if(l&&g)I.cancel=l,(0,G.Wj)(a,"cancel",I.cancel,!0),I.context=g,(0,G.lb)(a,"context",I.context,!0);else if(l)if("object"==typeof l&&null!==l)I.context=l;else{if("function"!=typeof l)throw new Error((0,G.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=l}return I}get ref(){return new vl(this.database,new Ja(this._delegate._repo,this._delegate._path))}}class vl extends vo{constructor(a,l){super(a,new La(l._repo,l._path,new Ws,!1)),this.database=a,this._delegate=l}getKey(){return(0,G.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,G.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new vl(this.database,Iu(this._delegate,a))}getParent(){(0,G.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new vl(this.database,a):null}getRoot(){return(0,G.Dv)("Reference.root",0,0,arguments.length),new vl(this.database,this._delegate.root)}set(a,l){(0,G.Dv)("Reference.set",1,2,arguments.length),(0,G.Wj)("Reference.set","onComplete",l,!0);const g=Dh(this._delegate,a);return l&&g.then(()=>l(null),I=>l(I)),g}update(a,l){if((0,G.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const I={};for(let R=0;R<a.length;++R)I[""+R]=a[R];a=I,Ff("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qa("Reference.update",this._delegate._path),(0,G.Wj)("Reference.update","onComplete",l,!0);const g=_m(this._delegate,a);return l&&g.then(()=>l(null),I=>l(I)),g}setWithPriority(a,l,g){(0,G.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,G.Wj)("Reference.setWithPriority","onComplete",g,!0);const I=function Dg(c,a,l){if(Qa("setWithPriority",c._path),Na("setWithPriority",a,c._path,!1),Ju("setWithPriority",l,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const g=new G.BH;return yf(c._repo,c._path,a,l,g.wrapCallback(()=>{})),g.promise}(this._delegate,a,l);return g&&I.then(()=>g(null),R=>g(R)),I}remove(a){(0,G.Dv)("Reference.remove",0,1,arguments.length),(0,G.Wj)("Reference.remove","onComplete",a,!0);const l=function Tp(c){return Qa("remove",c._path),Dh(c,null)}(this._delegate);return a&&l.then(()=>a(null),g=>a(g)),l}transaction(a,l,g){(0,G.Dv)("Reference.transaction",1,3,arguments.length),(0,G.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,G.Wj)("Reference.transaction","onComplete",l,!0),function(c,a,l,g){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,G.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const I=function Nf(c,a,l){var g;if(c=(0,G.m9)(c),Qa("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const I=null===(g=null==l?void 0:l.applyLocally)||void 0===g||g,R=new G.BH,Z=Ac(c,()=>{});return function Ep(c,a,l,g,I,R){Ql(c,"transaction on "+a);const $={path:a,update:l,onComplete:g,status:null,order:Lo(),applyLocally:R,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Z=Rr(c,a,void 0);$.currentInputSnapshot=Z;const oe=$.update(Z.val());if(void 0===oe)$.unwatcher(),$.currentOutputSnapshotRaw=null,$.currentOutputSnapshotResolved=null,$.onComplete&&$.onComplete(null,!1,$.currentInputSnapshot);else{Ud("transaction failed: Data returned ",oe,$.path),$.status=0;const ye=Bd(c.transactionQueueTree_,a),mt=Ol(ye)||[];let wt;mt.push($),gp(ye,mt),"object"==typeof oe&&null!==oe&&(0,G.r3)(oe,".priority")?(wt=(0,G.DV)(oe,".priority"),(0,G.hu)(ml(wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):wt=(ph(c.serverSyncTree_,a)||Lr.EMPTY_NODE).getPriority().val();const Vt=vh(c),yn=Es(oe,wt),On=Yu(yn,Z,Vt);$.currentOutputSnapshotRaw=yn,$.currentOutputSnapshotResolved=On,$.currentWriteId=ld(c);const pr=up(c.serverSyncTree_,a,On,$.currentWriteId,$.applyLocally);yl(c.eventQueue_,a,pr),Hd(c,c.transactionQueueTree_)}}(c._repo,c._path,a,(oe,ye,mt)=>{let wt=null;oe?R.reject(oe):(wt=new Sc(mt,new Ja(c._repo,c._path),Ui),R.resolve(new Ba(ye,wt)))},Z,I),R.promise}(this._delegate,a,{applyLocally:g}).then(R=>new Zd(R.committed,new kl(this.database,R.snapshot)));return l&&I.then(R=>l(null,R.committed,R.snapshot),R=>l(R,!1,null)),I}setPriority(a,l){(0,G.Dv)("Reference.setPriority",1,2,arguments.length),(0,G.Wj)("Reference.setPriority","onComplete",l,!0);const g=function vm(c,a){c=(0,G.m9)(c),Qa("setPriority",c._path),Ju("setPriority",a,!1);const l=new G.BH;return yf(c._repo,Si(c._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&g.then(()=>l(null),I=>l(I)),g}push(a,l){(0,G.Dv)("Reference.push",0,2,arguments.length),(0,G.Wj)("Reference.push","onComplete",l,!0);const g=function zd(c,a){c=(0,G.m9)(c),Qa("push",c._path),Na("push",a,c._path,!0);const l=vp(c._repo),g=cu(l),I=Iu(c,g),R=Iu(c,g);let $;return $=null!=a?Dh(R,a).then(()=>R):Promise.resolve(R),I.then=$.then.bind($),I.catch=$.then.bind($,void 0),I}(this._delegate,a),I=g.then($=>new vl(this.database,$));l&&I.then(()=>l(null),$=>l($));const R=new vl(this.database,g);return R.then=I.then.bind(I),R.catch=I.catch.bind(I,void 0),R}onDisconnect(){return Qa("Reference.onDisconnect",this._delegate._path),new Dm(new Cg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class fd{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Fp,forceLongPolling:bm}}useEmulator(a,l,g={}){!function Rg(c,a,l,g={}){(c=(0,G.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&eo("Cannot call useEmulator() after instance has already been initialized.");const I=c._repoInternal;let R;if(I.repoInfo_.nodeAdmin)g.mockUserToken&&eo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),R=new Mr(Mr.OWNER);else if(g.mockUserToken){const $="string"==typeof g.mockUserToken?g.mockUserToken:(0,G.Sg)(g.mockUserToken,c.app.options.projectId);R=new Mr($)}!function el(c,a,l,g){c.repoInfo_=new Xt(`${a}:${l}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),g&&(c.authTokenProvider_=g)}(I,a,l,R)}(this._delegate,a,l,g)}ref(a){if((0,G.Dv)("database.ref",0,1,arguments.length),a instanceof vl){const l=eu(this._delegate,a.toString());return new vl(this,l)}{const l=Ch(this._delegate,a);return new vl(this,l)}}refFromURL(a){(0,G.Dv)("database.refFromURL",1,1,arguments.length);const g=eu(this._delegate,a);return new vl(this,g)}goOffline(){return(0,G.Dv)("database.goOffline",0,0,arguments.length),function Bp(c){(c=(0,G.m9)(c))._checkNotDeleted("goOffline"),Ef(c._repo)}(this._delegate)}goOnline(){return(0,G.Dv)("database.goOnline",0,0,arguments.length),function Mh(c){(c=(0,G.m9)(c))._checkNotDeleted("goOnline"),function wf(c){c.persistentConnection_&&c.persistentConnection_.resume(Eg)}(c._repo)}(this._delegate)}}fd.ServerValue={TIMESTAMP:function Vp(){return Rc}(),increment:c=>function Yd(c){return{".sv":{increment:c}}}(c)};var Hp=Object.freeze({__proto__:null,initStandalone:function Sm({app:c,url:a,version:l,customAuthImpl:g,namespace:I,nodeAdmin:R=!1}){Ki(l);const $=new Me.zt("auth-internal",new Me.H0("database-standalone"));return $.setComponent(new Me.wA("auth-internal",()=>g,"PRIVATE")),{instance:new fd(Pf(c,$,void 0,a,R),c),namespace:I}}});const Gp=fd.ServerValue;function Cu(c){return null==c}function Ph(c){return"function"==typeof c.set}function pd(c,a){return Ph(a)?a:c.ref(a)}function Oc(c,a){if(function Pg(c){return"string"==typeof c}(c))return a.stringCase();if(Ph(c))return a.firebaseCase();if(function Wp(c){return"function"==typeof c.exportVal}(c))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function gd(c,a,l="on",g=Ae.z){return new _e.y(I=>{let R=null;return R=c[l](a,($,Z)=>{g.schedule(()=>{I.next({snapshot:$,prevKey:Z})}),"once"===l&&g.schedule(()=>I.complete())},$=>{g.schedule(()=>I.error($))}),"on"===l?{unsubscribe(){null!=R&&c.off(a,R)}}:{unsubscribe(){}}}).pipe((0,Ce.U)(I=>{const{snapshot:R,prevKey:$}=I;let Z=null;return R.exists()&&(Z=R.key),{type:a,payload:R,prevKey:$,key:Z}}),(0,w.B)())}function kh(c,a){const l=c.length;for(let g=0;g<l;g++)if(c[g].payload.key===a)return g;return-1}function qp(c,a){const{payload:l,prevKey:g,key:I}=a,R=kh(c,I),$=function Tm(c,a){if(Cu(a))return 0;{const l=kh(c,a);return-1===l?c.length:l+1}}(c,g);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let Z=null;a.payload.forEach(oe=>{const ye={payload:oe,type:"value",prevKey:Z,key:oe.key};return Z=oe.key,c=[...c,ye],!1})}return c;case"child_added":if(R>-1){const Z=c[R-1];(Z&&Z.key||null)!==g&&(c=c.filter(oe=>oe.payload.key!==l.key)).splice($,0,a)}else{if(null==g)return[a,...c];(c=c.slice()).splice($,0,a)}return c;case"child_removed":return c.filter(Z=>Z.payload.key!==l.key);case"child_changed":return c.map(Z=>Z.payload.key===I?a:Z);case"child_moved":if(R>-1){const Z=c.splice(R,1)[0];return(c=c.slice()).splice($,0,Z),c}return c;default:return c}}function md(c){return(Cu(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function Lf(c,a,l){return function kg(c,a,l){return gd(c,"value","once",l).pipe((0,ve.w)(g=>{const I=[(0,ce.of)(g)];return a.forEach(R=>I.push(gd(c,R,"on",l))),(0,m.T)(...I).pipe((0,f.R)(qp,[]))}),(0,S.x)())}(c,a=md(a),l)}function Ng(c,a,l){const g=(a=md(a)).map(I=>gd(c,I,"on",l));return(0,m.T)(...g)}function Bf(c,a){return function(g,I){return Oc(g,{stringCase:()=>c.child(g)[a](I),firebaseCase:()=>g[a](I),snapshotCase:()=>g.ref[a](I)})}}function Mm(c){return function(l){return l?Oc(l,{stringCase:()=>c.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):c.remove()}}function Fg(c,a){return function(){return gd(c,"value","on",a)}}!function zp(c){c.INTERNAL.registerComponent(new Me.wA("database-compat",(a,{instanceIdentifier:l})=>{const g=a.getProvider("app-compat").getImmediate(),I=a.getProvider("database").getImmediate({identifier:l});return new fd(I,g)},"PUBLIC").setServiceProps({Reference:vl,Query:vo,Database:fd,DataSnapshot:kl,enableLogging:$p,INTERNAL:Hp,ServerValue:Gp}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.2.3")}(lt.Z);const Nh=new J.OlP("angularfire2.realtimeDatabaseURL"),Zp=new J.OlP("angularfire2.database.use-emulator");let Pc=(()=>{class c{constructor(l,g,I,R,$,Z,oe,ye,mt,wt,Vt,yn,On,pr,Wr){this.schedulers=Z;const Oi=oe,Ss=(0,Te.on)(l,$,g);ye&&(0,Ve.nw)(Ss,$,mt,Vt,yn,On,wt,pr),this.database=(0,Te.cc)(`${Ss.name}.database.${I}`,"AngularFireDatabase",Ss.name,()=>{const as=$.runOutsideAngular(()=>Ss.database(I||void 0));return Oi&&as.useEmulator(...Oi),as},[Oi])}list(l,g){const I=this.schedulers.ngZone.runOutsideAngular(()=>pd(this.database,l));let R=I;return g&&(R=g(I)),function Yp(c,a){const l=a.schedulers.outsideAngular,g=a.schedulers.ngZone.run(()=>c.ref);return{query:c,update:Bf(g,"update"),set:Bf(g,"set"),push:I=>g.push(I),remove:Mm(g),snapshotChanges:I=>Lf(c,I,l).pipe(ae.iC),stateChanges:I=>Ng(c,I,l).pipe(ae.iC),auditTrail:I=>function Am(c,a,l){return function xm(c,a,l){return function Kp(c,a){return gd(c,"value","on",a).pipe((0,Ce.U)(l=>{let g;return l.payload.forEach(I=>(g=I.key,!1)),{data:l,lastKeyToLoad:g}}))}(c,l).pipe(function Sn(...c){const a=(0,ln.jO)(c);return(0,je.e)((l,g)=>{const I=c.length,R=new Array(I);let $=c.map(()=>!1),Z=!1;for(let oe=0;oe<I;oe++)(0,W.Xf)(c[oe]).subscribe((0,it.x)(g,ye=>{R[oe]=ye,!Z&&!$[oe]&&($[oe]=!0,(Z=$.every(ze.y))&&($=null))},zt.Z));l.subscribe((0,it.x)(g,oe=>{if(Z){const ye=[oe,...R];g.next(a?a(...ye):ye)}}))})}(a),(0,Ce.U)(([I,R])=>{const $=I.lastKeyToLoad,Z=R.map(oe=>oe.key);return{actions:R,lastKeyToLoad:$,loadedKeys:Z}}),function lr(c){return(0,je.e)((a,l)=>{let g=!1,I=0;a.subscribe((0,it.x)(l,R=>(g||(g=!c(R,I++)))&&l.next(R)))})}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,Ce.U)(I=>I.actions))}(c,Ng(c,a).pipe((0,f.R)((I,R)=>[...I,R],[])),l)}(c,I,l).pipe(ae.iC),valueChanges:(I,R)=>Lf(c,I,l).pipe((0,Ce.U)(Z=>Z.map(oe=>R&&R.idField?Object.assign(Object.assign({},oe.payload.val()),{[R.idField]:oe.key}):oe.payload.val())),ae.iC)}}(R,this)}object(l){return function $f(c,a){return{query:c,snapshotChanges:()=>Fg(c,a.schedulers.outsideAngular)().pipe(ae.iC),update:l=>c.ref.update(l),set:l=>c.ref.set(l),remove:()=>c.ref.remove(),valueChanges:()=>Fg(c,a.schedulers.outsideAngular)().pipe(ae.iC,(0,Ce.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pd(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(l){return new(l||c)(J.LFG(Te.Dh),J.LFG(Te.xv,8),J.LFG(Nh,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(ae.HU),J.LFG(Zp,8),J.LFG(Ve.zQ,8),J.LFG(Ve.Qv,8),J.LFG(Ve.L6,8),J.LFG(Ve._Q,8),J.LFG(Ve.rT,8),J.LFG(Ve.lh,8),J.LFG(Ve.f7,8),J.LFG(vs.nm,8))},c.\u0275prov=J.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),Lg=(()=>{class c{constructor(){Gs.Z.registerVersion("angularfire",ae.q4.full,"rtdb-compat")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=J.oAB({type:c}),c.\u0275inj=J.cJS({providers:[Pc]}),c})();const Vf_firebaseConfig={apiKey:"AIzaSyDO0XbLSW83dlrIa1Ji3nzJNxpejMBzR6c",authDomain:"ionic-crud-todo.firebaseapp.com",projectId:"ionic-crud-todo",storageBucket:"ionic-crud-todo.appspot.com",messagingSenderId:"953548778648",appId:"1:953548778648:web:6070b85fc70ea437a1b4ed"};let Rm=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=J.oAB({type:c,bootstrap:[Re]}),c.\u0275inj=J.cJS({providers:[{provide:H.wN,useClass:xe.r4}],imports:[u.b2,xe.Pc.forRoot(),me,Te.hO.initializeApp(Vf_firebaseConfig),Ve.ww,co.yb,ja,Lg]}),c})();(0,J.G48)(),u.q6().bootstrapModule(Rm).catch(c=>console.log(c))},5867:(un,yt,V)=>{"use strict";V.d(yt,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=V(9681);(0,u.registerVersion)("firebase","9.9.1","app")},127:(un,yt,V)=>{"use strict";V.d(yt,{Z:()=>u.Z});var u=V(3942);u.Z.registerVersion("firebase","9.9.1","app-compat")},1451:(un,yt,V)=>{"use strict";V.r(yt);var u=V(5861),J=V(3942),H=V(2090),xe=V(9681),Re=V(655),Pe=V(1877),me=V(4859);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de_EMAIL_SIGNIN="EMAIL_SIGNIN",de_PASSWORD_RESET="PASSWORD_RESET",de_RECOVER_EMAIL="RECOVER_EMAIL",de_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",de_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",de_VERIFY_EMAIL="VERIFY_EMAIL";const it=function Ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bt=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new Pe.Yd("@firebase/auth");function lt(D,...y){ae.logLevel<=Pe.in.ERROR&&ae.error(`Auth (${xe.SDK_VERSION}): ${D}`,...y)}function at(D,...y){throw Ne(D,...y)}function Ye(D,...y){return Ne(D,...y)}function G(D,y,E){const M=Object.assign(Object.assign({},bt()),{[y]:E});return new H.LL("auth","Firebase",M).create(y,{appName:D.name})}function Me(D,y,E){if(!(y instanceof E))throw E.name!==y.constructor.name&&at(D,"argument-error"),G(D,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(D,...y){if("string"!=typeof D){const E=y[0],M=[...y.slice(1)];return M[0]&&(M[0].appName=D.name),D._errorFactory.create(E,...M)}return Ce.create(D,...y)}function Q(D,y,...E){if(!D)throw Ne(y,...E)}function tt(D){const y="INTERNAL ASSERTION FAILED: "+D;throw lt(y),new Error(y)}function Le(D,y){D||tt(y)}const ke=new Map;function $e(D){Le(D instanceof Function,"Expected a class definition");let y=ke.get(D);return y?(Le(y instanceof D,"Instance stored in cache mismatched with class"),y):(y=new D,ke.set(D,y),y)}function gt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function ot(){return"http:"===Ie()||"https:"===Ie()}function Ie(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class et{constructor(y,E){this.shortDelay=y,this.longDelay=E,Le(E>y,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function De(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function He(D,y){Le(D.emulator,"Emulator should always be set here");const{url:E}=D.emulator;return y?`${E}${y.startsWith("/")?y.slice(1):y}`:E}class rt{static initialize(y,E,M){this.fetchImpl=y,E&&(this.headersImpl=E),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ze={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pt=new et(3e4,6e4);function Ot(D,y){return D.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:D.tenantId}):y}function kt(D,y,E,M){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(function*(D,y,E,M,Y={}){return An(D,Y,(0,u.Z)(function*(){let ue={},ct={};M&&("GET"===y?ct=M:ue={body:JSON.stringify(M)});const Nt=(0,H.xO)(Object.assign({key:D.config.apiKey},ct)).slice(1),on=yield D._getAdditionalHeaders();return on["Content-Type"]="application/json",D.languageCode&&(on["X-Firebase-Locale"]=D.languageCode),rt.fetch()(Ht(D,D.config.apiHost,E,Nt),Object.assign({method:y,headers:on,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function An(D,y,E){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(D,y,E){D._canInitEmulator=!1;const M=Object.assign(Object.assign({},Ze),y);try{const Y=new gr(D),ue=yield Promise.race([E(),Y.promise]);Y.clearNetworkTimeout();const ct=yield ue.json();if("needConfirmation"in ct)throw Gn(D,"account-exists-with-different-credential",ct);if(ue.ok&&!("errorMessage"in ct))return ct;{const Nt=ue.ok?ct.errorMessage:ct.error.message,[on,Mn]=Nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===on)throw Gn(D,"credential-already-in-use",ct);if("EMAIL_EXISTS"===on)throw Gn(D,"email-already-in-use",ct);if("USER_DISABLED"===on)throw Gn(D,"user-disabled",ct);const fr=M[on]||on.toLowerCase().replace(/[_\s]+/g,"-");if(Mn)throw G(D,fr,Mn);at(D,fr)}}catch(Y){if(Y instanceof H.ZR)throw Y;at(D,"network-request-failed")}})).apply(this,arguments)}function Cn(D,y,E,M){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(D,y,E,M,Y={}){const ue=yield kt(D,y,E,M,Y);return"mfaPendingCredential"in ue&&at(D,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function Ht(D,y,E,M){const Y=`${y}${E}?${M}`;return D.config.emulator?He(D.config,Y):`${D.config.apiScheme}://${Y}`}class gr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((E,M)=>{this.timer=setTimeout(()=>M(Ye(this.auth,"network-request-failed")),Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(D,y,E){const M={appName:D.name};E.email&&(M.email=E.email),E.phoneNumber&&(M.phoneNumber=E.phoneNumber);const Y=Ye(D,y,M);return Y.customData._tokenResponse=E,Y}function Dn(){return(Dn=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function qt(){return(qt=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function hr(D){if(D)try{const y=new Date(Number(D));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function wn(){return(wn=(0,u.Z)(function*(D,y=!1){const E=(0,H.m9)(D),M=yield E.getIdToken(y),Y=vn(M);Q(Y&&Y.exp&&Y.auth_time&&Y.iat,E.auth,"internal-error");const ue="object"==typeof Y.firebase?Y.firebase:void 0,ct=null==ue?void 0:ue.sign_in_provider;return{claims:Y,token:M,authTime:hr(fn(Y.auth_time)),issuedAtTime:hr(fn(Y.iat)),expirationTime:hr(fn(Y.exp)),signInProvider:ct||null,signInSecondFactor:(null==ue?void 0:ue.sign_in_second_factor)||null}})).apply(this,arguments)}function fn(D){return 1e3*Number(D)}function vn(D){var y;const[E,M,Y]=D.split(".");if(void 0===E||void 0===M||void 0===Y)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,H.tV)(M);return ue?JSON.parse(ue):(lt("Failed to decode base64 JWT payload"),null)}catch(ue){return lt("Caught error parsing JWT payload as JSON",null===(y=ue)||void 0===y?void 0:y.toString()),null}}function mr(D,y){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(function*(D,y,E=!1){if(E)return y;try{return yield y}catch(M){throw M instanceof H.ZR&&function Sr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(M)&&D.auth.currentUser===D&&(yield D.auth.signOut()),M}})).apply(this,arguments)}class oi{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var E;if(y){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const Y=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(y=!1){var E=this;if(!this.isRunning)return;const M=this.getInterval(y);this.timerId=setTimeout((0,u.Z)(function*(){yield E.iteration()}),M)}iteration(){var y=this;return(0,u.Z)(function*(){var E;try{yield y.user.getIdToken(!0)}catch(M){return void("auth/network-request-failed"===(null===(E=M)||void 0===E?void 0:E.code)&&y.schedule(!0))}y.schedule()})()}}class Gi{constructor(y,E){this.createdAt=y,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=hr(this.lastLoginAt),this.creationTime=hr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Er(D){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,u.Z)(function*(D){var y;const E=D.auth,M=yield D.getIdToken(),Y=yield mr(D,function Vr(D,y){return Or.apply(this,arguments)}(E,{idToken:M}));Q(null==Y?void 0:Y.users.length,E,"internal-error");const ue=Y.users[0];D._notifyReloadListener(ue);const ct=null!==(y=ue.providerUserInfo)&&void 0!==y&&y.length?function Se(D){return D.map(y=>{var{providerId:E}=y,M=(0,Re._T)(y,["providerId"]);return{providerId:E,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(ue.providerUserInfo):[],Nt=function Be(D,y){return[...D.filter(M=>!y.some(Y=>Y.providerId===M.providerId)),...y]}(D.providerData,ct),fr=!!D.isAnonymous&&!(D.email&&ue.passwordHash||null!=Nt&&Nt.length),tr={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:Nt,metadata:new Gi(ue.createdAt,ue.lastLoginAt),isAnonymous:fr};Object.assign(D,tr)}),Ii.apply(this,arguments)}function Oe(){return(Oe=(0,u.Z)(function*(D){const y=(0,H.m9)(D);yield Er(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Ue(){return(Ue=(0,u.Z)(function*(D,y){const E=yield An(D,{},(0,u.Z)(function*(){const M=(0,H.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:Y,apiKey:ue}=D.config,ct=Ht(D,Y,"/v1/token",`key=${ue}`),Nt=yield D._getAdditionalHeaders();return Nt["Content-Type"]="application/x-www-form-urlencoded",rt.fetch()(ct,{method:"POST",headers:Nt,body:M})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Q(y.idToken,"internal-error"),Q(typeof y.idToken<"u","internal-error"),Q(typeof y.refreshToken<"u","internal-error");const E="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Vn(D){const y=vn(D);return Q(y,"internal-error"),Q(typeof y.exp<"u","internal-error"),Q(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,E)}getToken(y,E=!1){var M=this;return(0,u.Z)(function*(){return Q(!M.accessToken||M.refreshToken,y,"user-token-expired"),E||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(y,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,E){var M=this;return(0,u.Z)(function*(){const{accessToken:Y,refreshToken:ue,expiresIn:ct}=yield function Ge(D,y){return Ue.apply(this,arguments)}(y,E);M.updateTokensAndExpiration(Y,ue,Number(ct))})()}updateTokensAndExpiration(y,E,M){this.refreshToken=E||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(y,E){const{refreshToken:M,accessToken:Y,expirationTime:ue}=E,ct=new Lt;return M&&(Q("string"==typeof M,"internal-error",{appName:y}),ct.refreshToken=M),Y&&(Q("string"==typeof Y,"internal-error",{appName:y}),ct.accessToken=Y),ue&&(Q("number"==typeof ue,"internal-error",{appName:y}),ct.expirationTime=ue),ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return tt("not implemented")}}function Qt(D,y){Q("string"==typeof D||typeof D>"u","internal-error",{appName:y})}class dn{constructor(y){var{uid:E,auth:M,stsTokenManager:Y}=y,ue=(0,Re._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=M,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Gi(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(y){var E=this;return(0,u.Z)(function*(){const M=yield mr(E,E.stsTokenManager.getToken(E.auth,y));return Q(M,E.auth,"internal-error"),E.accessToken!==M&&(E.accessToken=M,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),M})()}getIdTokenResult(y){return function sr(D){return wn.apply(this,arguments)}(this,y)}reload(){return function Yn(D){return Oe.apply(this,arguments)}(this)}_assign(y){this!==y&&(Q(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(E=>Object.assign({},E)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new dn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,E=!1){var M=this;return(0,u.Z)(function*(){let Y=!1;y.idToken&&y.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(y),Y=!0),E&&(yield Er(M)),yield M.auth._persistUserIfCurrent(M),Y&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var y=this;return(0,u.Z)(function*(){const E=yield y.getIdToken();return yield mr(y,function Ir(D,y){return Dn.apply(this,arguments)}(y.auth,{idToken:E})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,E){var M,Y,ue,ct,Nt,on,Mn,fr;const tr=null!==(M=E.displayName)&&void 0!==M?M:void 0,so=null!==(Y=E.email)&&void 0!==Y?Y:void 0,pl=null!==(ue=E.phoneNumber)&&void 0!==ue?ue:void 0,ch=null!==(ct=E.photoURL)&&void 0!==ct?ct:void 0,ef=null!==(Nt=E.tenantId)&&void 0!==Nt?Nt:void 0,kd=null!==(on=E._redirectEventId)&&void 0!==on?on:void 0,tf=null!==(Mn=E.createdAt)&&void 0!==Mn?Mn:void 0,ju=null!==(fr=E.lastLoginAt)&&void 0!==fr?fr:void 0,{uid:Zl,emailVerified:nf,isAnonymous:Jc,providerData:Za,stsTokenManager:Hu}=E;Q(Zl&&Hu,y,"internal-error");const xo=Lt.fromJSON(this.name,Hu);Q("string"==typeof Zl,y,"internal-error"),Qt(tr,y.name),Qt(so,y.name),Q("boolean"==typeof nf,y,"internal-error"),Q("boolean"==typeof Jc,y,"internal-error"),Qt(pl,y.name),Qt(ch,y.name),Qt(ef,y.name),Qt(kd,y.name),Qt(tf,y.name),Qt(ju,y.name);const Gu=new dn({uid:Zl,auth:y,email:so,emailVerified:nf,displayName:tr,isAnonymous:Jc,photoURL:ch,phoneNumber:pl,tenantId:ef,stsTokenManager:xo,createdAt:tf,lastLoginAt:ju});return Za&&Array.isArray(Za)&&(Gu.providerData=Za.map(Nd=>Object.assign({},Nd))),kd&&(Gu._redirectEventId=kd),Gu}static _fromIdTokenResponse(y,E,M=!1){return(0,u.Z)(function*(){const Y=new Lt;Y.updateFromServerResponse(E);const ue=new dn({uid:E.localId,auth:y,stsTokenManager:Y,isAnonymous:M});return yield Er(ue),ue})()}}const zn=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(E,M){var Y=this;return(0,u.Z)(function*(){Y.storage[E]=M})()}_get(E){var M=this;return(0,u.Z)(function*(){const Y=M.storage[E];return void 0===Y?null:Y})()}_remove(E){var M=this;return(0,u.Z)(function*(){delete M.storage[E]})()}_addListener(E,M){}_removeListener(E,M){}}return D.type="NONE",D})();function Wn(D,y,E){return`firebase:${D}:${y}:${E}`}class pn{constructor(y,E,M){this.persistence=y,this.auth=E,this.userKey=M;const{config:Y,name:ue}=this.auth;this.fullUserKey=Wn(this.userKey,Y.apiKey,ue),this.fullPersistenceKey=Wn("persistence",Y.apiKey,ue),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,u.Z)(function*(){const E=yield y.persistence._get(y.fullUserKey);return E?dn._fromJSON(y.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var E=this;return(0,u.Z)(function*(){if(E.persistence===y)return;const M=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=y,M?E.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,E,M="authUser"){return(0,u.Z)(function*(){if(!E.length)return new pn($e(zn),y,M);const Y=(yield Promise.all(E.map(function(){var Mn=(0,u.Z)(function*(fr){if(yield fr._isAvailable())return fr});return function(fr){return Mn.apply(this,arguments)}}()))).filter(Mn=>Mn);let ue=Y[0]||$e(zn);const ct=Wn(M,y.config.apiKey,y.name);let Nt=null;for(const Mn of E)try{const fr=yield Mn._get(ct);if(fr){const tr=dn._fromJSON(y,fr);Mn!==ue&&(Nt=tr),ue=Mn;break}}catch(fr){}const on=Y.filter(Mn=>Mn._shouldAllowMigration);return ue._shouldAllowMigration&&on.length?(ue=on[0],Nt&&(yield ue._set(ct,Nt.toJSON())),yield Promise.all(E.map(function(){var Mn=(0,u.Z)(function*(fr){if(fr!==ue)try{yield fr._remove(ct)}catch(tr){}});return function(fr){return Mn.apply(this,arguments)}}())),new pn(ue,y,M)):new pn(ue,y,M)})()}}function br(D){const y=D.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Je(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Gr(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(_t(y))return"Blackberry";if(Bt(y))return"Webos";if(ri(y))return"Safari";if((y.includes("chrome/")||ut(y))&&!y.includes("edge/"))return"Chrome";if(ge(y))return"Android";{const M=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function Gr(D=(0,H.z$)()){return/firefox\//i.test(D)}function ri(D=(0,H.z$)()){const y=D.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function ut(D=(0,H.z$)()){return/crios\//i.test(D)}function Je(D=(0,H.z$)()){return/iemobile/i.test(D)}function ge(D=(0,H.z$)()){return/android/i.test(D)}function _t(D=(0,H.z$)()){return/blackberry/i.test(D)}function Bt(D=(0,H.z$)()){return/webos/i.test(D)}function nn(D=(0,H.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Bi(D=(0,H.z$)()){return nn(D)||ge(D)||Bt(D)||_t(D)||/windows phone/i.test(D)||Je(D)}function Pi(D,y=[]){let E;switch(D){case"Browser":E=br((0,H.z$)());break;case"Worker":E=`${br((0,H.z$)())}-${D}`;break;default:E=D}const M=y.length?y.join(","):"FirebaseCore-web";return`${E}/JsCore/${xe.SDK_VERSION}/${M}`}class or{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,E){const M=ue=>new Promise((ct,Nt)=>{try{ct(y(ue))}catch(on){Nt(on)}});M.onAbort=E,this.queue.push(M);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(y){var E=this;return(0,u.Z)(function*(){var M;if(E.auth.currentUser===y)return;const Y=[];try{for(const ue of E.queue)yield ue(y),ue.onAbort&&Y.push(ue.onAbort)}catch(ue){Y.reverse();for(const ct of Y)try{ct()}catch(Nt){}throw E.auth._errorFactory.create("login-blocked",{originalMessage:null===(M=ue)||void 0===M?void 0:M.message})}})()}}class kr{constructor(y,E,M){this.app=y,this.heartbeatServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hi(this),this.idTokenSubscription=new hi(this),this.beforeStateQueue=new or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(y,E){var M=this;return E&&(this._popupRedirectResolver=$e(E)),this._initializationPromise=this.queue((0,u.Z)(function*(){var Y,ue;if(!M._deleted&&(M.persistenceManager=yield pn.create(M,y),!M._deleted)){if(null!==(Y=M._popupRedirectResolver)&&void 0!==Y&&Y._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(ct){}yield M.initializeCurrentUser(E),M.lastNotifiedUid=(null===(ue=M.currentUser)||void 0===ue?void 0:ue.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,u.Z)(function*(){if(y._deleted)return;const E=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||E){if(y.currentUser&&E&&y.currentUser.uid===E.uid)return y._currentUser._assign(E),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(E,!0)}})()}initializeCurrentUser(y){var E=this;return(0,u.Z)(function*(){var M;const Y=yield E.assertedPersistence.getCurrentUser();let ue=Y,ct=!1;if(y&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Nt=null===(M=E.redirectUser)||void 0===M?void 0:M._redirectEventId,on=null==ue?void 0:ue._redirectEventId,Mn=yield E.tryRedirectSignIn(y);(!Nt||Nt===on)&&null!=Mn&&Mn.user&&(ue=Mn.user,ct=!0)}if(!ue)return E.directlySetCurrentUser(null);if(!ue._redirectEventId){if(ct)try{yield E.beforeStateQueue.runMiddleware(ue)}catch(Nt){ue=Y,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Nt))}return ue?E.reloadAndSetCurrentUserOrClear(ue):E.directlySetCurrentUser(null)}return Q(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ue._redirectEventId?E.directlySetCurrentUser(ue):E.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(y){var E=this;return(0,u.Z)(function*(){let M=null;try{M=yield E._popupRedirectResolver._completeRedirectFn(E,y,!0)}catch(Y){yield E._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(y){var E=this;return(0,u.Z)(function*(){var M;try{yield Er(y)}catch(Y){if("auth/network-request-failed"!==(null===(M=Y)||void 0===M?void 0:M.code))return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function we(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var y=this;return(0,u.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var E=this;return(0,u.Z)(function*(){const M=y?(0,H.m9)(y):null;return M&&Q(M.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(M&&M._clone(E))})()}_updateCurrentUser(y,E=!1){var M=this;return(0,u.Z)(function*(){if(!M._deleted)return y&&Q(M.tenantId===y.tenantId,M,"tenant-id-mismatch"),E||(yield M.beforeStateQueue.runMiddleware(y)),M.queue((0,u.Z)(function*(){yield M.directlySetCurrentUser(y),M.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,u.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var E=this;return this.queue((0,u.Z)(function*(){yield E.assertedPersistence.setPersistence($e(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new H.LL("auth","Firebase",y())}onAuthStateChanged(y,E,M){return this.registerStateListener(this.authStateSubscription,y,E,M)}beforeAuthStateChanged(y,E){return this.beforeStateQueue.pushCallback(y,E)}onIdTokenChanged(y,E,M){return this.registerStateListener(this.idTokenSubscription,y,E,M)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,E){var M=this;return(0,u.Z)(function*(){const Y=yield M.getOrInitRedirectPersistenceManager(E);return null===y?Y.removeCurrentUser():Y.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var E=this;return(0,u.Z)(function*(){if(!E.redirectPersistenceManager){const M=y&&$e(y)||E._popupRedirectResolver;Q(M,E,"argument-error"),E.redirectPersistenceManager=yield pn.create(E,[$e(M._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(y){var E=this;return(0,u.Z)(function*(){var M,Y;return E._isInitialized&&(yield E.queue((0,u.Z)(function*(){}))),(null===(M=E._currentUser)||void 0===M?void 0:M._redirectEventId)===y?E._currentUser:(null===(Y=E.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===y?E.redirectUser:null})()}_persistUserIfCurrent(y){var E=this;return(0,u.Z)(function*(){if(y===E.currentUser)return E.queue((0,u.Z)(function*(){return E.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(E=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,E,M,Y){if(this._deleted)return()=>{};const ue="function"==typeof E?E:E.next.bind(E),ct=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(ct,this,"internal-error"),ct.then(()=>ue(this.currentUser)),"function"==typeof E?y.addObserver(E,M,Y):y.addObserver(E)}directlySetCurrentUser(y){var E=this;return(0,u.Z)(function*(){E.currentUser&&E.currentUser!==y&&(E._currentUser._stopProactiveRefresh(),y&&E.isProactiveRefreshEnabled&&y._startProactiveRefresh()),E.currentUser=y,y?yield E.assertedPersistence.setCurrentUser(y):yield E.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Pi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,u.Z)(function*(){var E;const M={"X-Client-Version":y.clientVersion};y.app.options.appId&&(M["X-Firebase-gmpid"]=y.app.options.appId);const Y=yield null===(E=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();return Y&&(M["X-Firebase-Client"]=Y),M})()}}function wr(D){return(0,H.m9)(D)}class hi{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,H.ne)(E=>this.observer=E)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bn(D){const y=D.indexOf(":");return y<0?"":D.substr(0,y+1)}function Br(D){if(!D)return null;const y=Number(D);return isNaN(y)?null:y}class $r{constructor(y,E){this.providerId=y,this.signInMethod=E}toJSON(){return tt("not implemented")}_getIdTokenResponse(y){return tt("not implemented")}_linkToIdToken(y,E){return tt("not implemented")}_getReauthenticationResolver(y){return tt("not implemented")}}function Kr(D,y){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:resetPassword",Ot(D,y))})).apply(this,arguments)}function Qi(D,y){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:update",Ot(D,y))})).apply(this,arguments)}function ei(){return(ei=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithPassword",Ot(D,y))})).apply(this,arguments)}function ki(D,y){return ne.apply(this,arguments)}function ne(){return(ne=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:sendOobCode",Ot(D,y))})).apply(this,arguments)}function qe(){return(qe=(0,u.Z)(function*(D,y){return ki(D,y)})).apply(this,arguments)}function Mt(){return(Mt=(0,u.Z)(function*(D,y){return ki(D,y)})).apply(this,arguments)}function Qe(){return(Qe=(0,u.Z)(function*(D,y){return ki(D,y)})).apply(this,arguments)}function Dt(){return(Dt=(0,u.Z)(function*(D,y){return ki(D,y)})).apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithEmailLink",Ot(D,y))})).apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithEmailLink",Ot(D,y))})).apply(this,arguments)}class ar extends $r{constructor(y,E,M,Y=null){super("password",M),this._email=y,this._password=E,this._tenantId=Y}static _fromEmailAndPassword(y,E){return new ar(y,E,"password")}static _fromEmailAndCode(y,E,M=null){return new ar(y,E,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y;if(null!=E&&E.email&&null!=E&&E.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(y){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return function Ur(D,y){return ei.apply(this,arguments)}(y,{returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ft(D,y){return Kt.apply(this,arguments)}(y,{email:E._email,oobCode:E._password});default:at(y,"internal-error")}})()}_linkToIdToken(y,E){var M=this;return(0,u.Z)(function*(){switch(M.signInMethod){case"password":return Qi(y,{idToken:E,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function mn(D,y){return jn.apply(this,arguments)}(y,{idToken:E,email:M._email,oobCode:M._password});default:at(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function xr(D,y){return st.apply(this,arguments)}function st(){return(st=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithIdp",Ot(D,y))})).apply(this,arguments)}class vt extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const E=new vt(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(E.idToken=y.idToken),y.accessToken&&(E.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(E.nonce=y.nonce),y.pendingToken&&(E.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(E.accessToken=y.oauthToken,E.secret=y.oauthTokenSecret):at("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:M,signInMethod:Y}=E,ue=(0,Re._T)(E,["providerId","signInMethod"]);if(!M||!Y)return null;const ct=new vt(M,Y);return ct.idToken=ue.idToken||void 0,ct.accessToken=ue.accessToken||void 0,ct.secret=ue.secret,ct.nonce=ue.nonce,ct.pendingToken=ue.pendingToken||null,ct}_getIdTokenResponse(y){return xr(y,this.buildRequest())}_linkToIdToken(y,E){const M=this.buildRequest();return M.idToken=E,xr(y,M)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,xr(y,E)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),y.postBody=(0,H.xO)(E)}return y}}function Jt(){return(Jt=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:sendVerificationCode",Ot(D,y))})).apply(this,arguments)}function qn(){return(qn=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ot(D,y))})).apply(this,arguments)}function Kn(){return(Kn=(0,u.Z)(function*(D,y){const E=yield Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ot(D,y));if(E.temporaryProof)throw Gn(D,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const hs={USER_NOT_FOUND:"user-not-found"};function Ji(){return(Ji=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ot(D,Object.assign(Object.assign({},y),{operation:"REAUTH"})),hs)})).apply(this,arguments)}class es extends $r{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,E){return new es({verificationId:y,verificationCode:E})}static _fromTokenResponse(y,E){return new es({phoneNumber:y,temporaryProof:E})}_getIdTokenResponse(y){return function gn(D,y){return qn.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,E){return function vi(D,y){return Kn.apply(this,arguments)}(y,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function ai(D,y){return Ji.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:E,verificationId:M,verificationCode:Y}=this.params;return y&&E?{temporaryProof:y,phoneNumber:E}:{sessionInfo:M,code:Y}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:E,verificationCode:M,phoneNumber:Y,temporaryProof:ue}=y;return M||E||Y||ue?new es({verificationId:E,verificationCode:M,phoneNumber:Y,temporaryProof:ue}):null}}class xi{constructor(y){var E,M,Y,ue,ct,Nt;const on=(0,H.zd)((0,H.pd)(y)),Mn=null!==(E=on.apiKey)&&void 0!==E?E:null,fr=null!==(M=on.oobCode)&&void 0!==M?M:null,tr=function us(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=on.mode)&&void 0!==Y?Y:null);Q(Mn&&fr&&tr,"argument-error"),this.apiKey=Mn,this.operation=tr,this.code=fr,this.continueUrl=null!==(ue=on.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(ct=on.languageCode)&&void 0!==ct?ct:null,this.tenantId=null!==(Nt=on.tenantId)&&void 0!==Nt?Nt:null}static parseLink(y){const E=function As(D){const y=(0,H.zd)((0,H.pd)(D)).link,E=y?(0,H.zd)((0,H.pd)(y)).deep_link_id:null,M=(0,H.zd)((0,H.pd)(D)).deep_link_id;return(M?(0,H.zd)((0,H.pd)(M)).link:null)||M||E||y||D}(y);try{return new xi(E)}catch(M){return null}}}let Qo=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(E,M){return ar._fromEmailAndPassword(E,M)}static credentialWithLink(E,M){const Y=xi.parseLink(M);return Q(Y,"argument-error"),ar._fromEmailAndCode(E,Y.code,Y.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Is{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Di extends Is{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class xs extends Di{static credentialFromJSON(y){const E="string"==typeof y?JSON.parse(y):y;return Q("providerId"in E&&"signInMethod"in E,"argument-error"),vt._fromParams(E)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return Q(y.idToken||y.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return xs.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return xs.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:M,oauthTokenSecret:Y,pendingToken:ue,nonce:ct,providerId:Nt}=y;if(!M&&!Y&&!E&&!ue||!Nt)return null;try{return new xs(Nt)._credential({idToken:E,accessToken:M,nonce:ct,pendingToken:ue})}catch(on){return null}}}let Eo=(()=>{class D extends Di{constructor(){super("facebook.com")}static credential(E){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch(M){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Ro=(()=>{class D extends Di{constructor(){super("google.com"),this.addScope("profile")}static credential(E,M){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:M,oauthAccessToken:Y}=E;if(!M&&!Y)return null;try{return D.credential(M,Y)}catch(ue){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),da=(()=>{class D extends Di{constructor(){super("github.com")}static credential(E){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return D.credential(E.oauthAccessToken)}catch(M){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class fs extends $r{constructor(y,E){super(y,y),this.pendingToken=E}_getIdTokenResponse(y){return xr(y,this.buildRequest())}_linkToIdToken(y,E){const M=this.buildRequest();return M.idToken=E,xr(y,M)}_getReauthenticationResolver(y){const E=this.buildRequest();return E.autoCreate=!1,xr(y,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const E="string"==typeof y?JSON.parse(y):y,{providerId:M,signInMethod:Y,pendingToken:ue}=E;return M&&Y&&ue&&M===Y?new fs(M,ue):null}static _create(y,E){return new fs(y,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zi extends Is{constructor(y){Q(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return zi.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return zi.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const E=fs.fromJSON(y);return Q(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:E,providerId:M}=y;if(!E||!M)return null;try{return fs._create(M,E)}catch(Y){return null}}}let Io=(()=>{class D extends Di{constructor(){super("twitter.com")}static credential(E,M){return vt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:M})}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:M,oauthTokenSecret:Y}=E;if(!M||!Y)return null;try{return D.credential(M,Y)}catch(ue){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function bs(D,y){return bo.apply(this,arguments)}function bo(){return(bo=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signUp",Ot(D,y))})).apply(this,arguments)}class ps{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,E,M,Y=!1){return(0,u.Z)(function*(){const ue=yield dn._fromIdTokenResponse(y,M,Y),ct=js(M);return new ps({user:ue,providerId:ct,_tokenResponse:M,operationType:E})})()}static _forOperation(y,E,M){return(0,u.Z)(function*(){yield y._updateTokensIfNecessary(M,!0);const Y=js(M);return new ps({user:y,providerId:Y,_tokenResponse:M,operationType:E})})()}}function js(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Co(){return(Co=(0,u.Z)(function*(D){var y;const E=wr(D);if(yield E._initializationPromise,null!==(y=E.currentUser)&&void 0!==y&&y.isAnonymous)return new ps({user:E.currentUser,providerId:null,operationType:"signIn"});const M=yield bs(E,{returnSecureToken:!0}),Y=yield ps._fromIdTokenResponse(E,"signIn",M,!0);return yield E._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class cs extends H.ZR{constructor(y,E,M,Y){var ue;super(E.code,E.message),this.operationType=M,this.user=Y,Object.setPrototypeOf(this,cs.prototype),this.customData={appName:y.name,tenantId:null!==(ue=y.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:E.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(y,E,M,Y){return new cs(y,E,M,Y)}}function Oo(D,y,E,M){return("reauthenticate"===y?E._getReauthenticationResolver(D):E._getIdTokenResponse(D)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?cs._fromErrorAndOperation(D,ue,y,M):ue})}function gs(D){return new Set(D.map(({providerId:y})=>y).filter(y=>!!y))}function Wi(){return Wi=(0,u.Z)(function*(D,y){const E=(0,H.m9)(D);yield ms(!0,E,y);const{providerUserInfo:M}=yield function Dr(D,y){return qt.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[y]}),Y=gs(M||[]);return E.providerData=E.providerData.filter(ue=>Y.has(ue.providerId)),Y.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),Wi.apply(this,arguments)}function ds(D,y){return ks.apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(D,y,E=!1){const M=yield mr(D,y._linkToIdToken(D.auth,yield D.getIdToken()),E);return ps._forOperation(D,"link",M)})).apply(this,arguments)}function ms(D,y,E){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(D,y,E){yield Er(y);const Y=!1===D?"provider-already-linked":"no-such-provider";Q(gs(y.providerData).has(E)===D,y.auth,Y)})).apply(this,arguments)}function Xr(D,y){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(D,y,E=!1){var M;const{auth:Y}=D,ue="reauthenticate";try{const ct=yield mr(D,Oo(Y,ue,y,D),E);Q(ct.idToken,Y,"internal-error");const Nt=vn(ct.idToken);Q(Nt,Y,"internal-error");const{sub:on}=Nt;return Q(D.uid===on,Y,"user-mismatch"),ps._forOperation(D,ue,ct)}catch(ct){throw"auth/user-not-found"===(null===(M=ct)||void 0===M?void 0:M.code)&&at(Y,"user-mismatch"),ct}})).apply(this,arguments)}function Xs(D,y){return xa.apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(D,y,E=!1){const M="signIn",Y=yield Oo(D,M,y),ue=yield ps._fromIdTokenResponse(D,M,Y);return E||(yield D._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function yr(D,y){return ys.apply(this,arguments)}function ys(){return(ys=(0,u.Z)(function*(D,y){return Xs(wr(D),y)})).apply(this,arguments)}function Po(D,y){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,u.Z)(function*(D,y){const E=(0,H.m9)(D);return yield ms(!1,E,y.providerId),ds(E,y)})).apply(this,arguments)}function Jo(D,y){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,u.Z)(function*(D,y){return Xr((0,H.m9)(D),y)})).apply(this,arguments)}function ha(){return(ha=(0,u.Z)(function*(D,y){return Cn(D,"POST","/v1/accounts:signInWithCustomToken",Ot(D,y))})).apply(this,arguments)}function qi(){return qi=(0,u.Z)(function*(D,y){const E=wr(D),M=yield function Mi(D,y){return ha.apply(this,arguments)}(E,{token:y,returnSecureToken:!0}),Y=yield ps._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(Y.user),Y}),qi.apply(this,arguments)}class Ri{constructor(y,E){this.factorId=y,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(y,E){return"phoneInfo"in E?vs._fromServerResponse(y,E):at(y,"internal-error")}}class vs extends Ri{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,E){return new vs(E)}}function Gs(D,y,E){var M;Q((null===(M=E.url)||void 0===M?void 0:M.length)>0,D,"invalid-continue-uri"),Q(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),y.continueUrl=E.url,y.dynamicLinkDomain=E.dynamicLinkDomain,y.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Q(E.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),y.iOSBundleId=E.iOS.bundleId),E.android&&(Q(E.android.packageName.length>0,D,"missing-android-pkg-name"),y.androidInstallApp=E.android.installApp,y.androidMinimumVersionCode=E.android.minimumVersion,y.androidPackageName=E.android.packageName)}function Os(){return Os=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D),Y={requestType:"PASSWORD_RESET",email:y};E&&Gs(M,Y,E),yield function pt(D,y){return Mt.apply(this,arguments)}(M,Y)}),Os.apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(D,y,E){yield Kr((0,H.m9)(D),{oobCode:y,newPassword:E})})).apply(this,arguments)}function Ma(){return Ma=(0,u.Z)(function*(D,y){yield function cn(D,y){return Un.apply(this,arguments)}((0,H.m9)(D),{oobCode:y})}),Ma.apply(this,arguments)}function Va(D,y){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,u.Z)(function*(D,y){const E=(0,H.m9)(D),M=yield Kr(E,{oobCode:y}),Y=M.requestType;switch(Q(Y,E,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(M.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(M.mfaInfo,E,"internal-error");default:Q(M.email,E,"internal-error")}let ue=null;return M.mfaInfo&&(ue=Ri._fromServerResponse(wr(E),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:ue},operation:Y}})).apply(this,arguments)}function Ua(){return(Ua=(0,u.Z)(function*(D,y){const{data:E}=yield Va((0,H.m9)(D),y);return E.email})).apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(D,y,E){const M=wr(D),Y=yield bs(M,{returnSecureToken:!0,email:y,password:E}),ue=yield ps._fromIdTokenResponse(M,"signIn",Y);return yield M._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function f(){return f=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D),Y={requestType:"EMAIL_SIGNIN",email:y};Q(E.handleCodeInApp,M,"argument-error"),E&&Gs(M,Y,E),yield function le(D,y){return Qe.apply(this,arguments)}(M,Y)}),f.apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D),Y=Qo.credentialWithLink(y,E||gt());return Q(Y._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),yr(M,Y)})).apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:createAuthUri",Ot(D,y))})).apply(this,arguments)}function lr(){return lr=(0,u.Z)(function*(D,y){const M={identifier:y,continueUri:ot()?gt():"http://localhost"},{signinMethods:Y}=yield function zt(D,y){return ln.apply(this,arguments)}((0,H.m9)(D),M);return Y||[]}),lr.apply(this,arguments)}function $n(){return $n=(0,u.Z)(function*(D,y){const E=(0,H.m9)(D),Y={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};y&&Gs(E.auth,Y,y);const{email:ue}=yield function he(D,y){return qe.apply(this,arguments)}(E.auth,Y);ue!==D.email&&(yield D.reload())}),$n.apply(this,arguments)}function Cs(){return Cs=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:y};E&&Gs(M.auth,ue,E);const{email:ct}=yield function ht(D,y){return Dt.apply(this,arguments)}(M.auth,ue);ct!==D.email&&(yield D.reload())}),Cs.apply(this,arguments)}function Ki(){return(Ki=(0,u.Z)(function*(D,y){return kt(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function fa(){return fa=(0,u.Z)(function*(D,{displayName:y,photoURL:E}){if(void 0===y&&void 0===E)return;const M=(0,H.m9)(D),ue={idToken:yield M.getIdToken(),displayName:y,photoUrl:E,returnSecureToken:!0},ct=yield mr(M,function ni(D,y){return Ki.apply(this,arguments)}(M.auth,ue));M.displayName=ct.displayName||null,M.photoURL=ct.photoUrl||null;const Nt=M.providerData.find(({providerId:on})=>"password"===on);Nt&&(Nt.displayName=M.displayName,Nt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(ct)}),fa.apply(this,arguments)}function pa(D,y,E){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,u.Z)(function*(D,y,E){const{auth:M}=D,ue={idToken:yield D.getIdToken(),returnSecureToken:!0};y&&(ue.email=y),E&&(ue.password=E);const ct=yield mr(D,Qi(M,ue));yield D._updateTokensIfNecessary(ct,!0)})).apply(this,arguments)}class Js{constructor(y,E,M={}){this.isNewUser=y,this.providerId=E,this.profile=M}}class ga extends Js{constructor(y,E,M,Y){super(y,E,M),this.username=Y}}class fo extends Js{constructor(y,E){super(y,"facebook.com",E)}}class po extends ga{constructor(y,E){super(y,"github.com",E,"string"==typeof(null==E?void 0:E.login)?null==E?void 0:E.login:null)}}class ru extends Js{constructor(y,E){super(y,"google.com",E)}}class $i extends ga{constructor(y,E,M){super(y,"twitter.com",E,M)}}function ta(D){const{user:y,_tokenResponse:E}=D;return y.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Lo(D){var y,E;if(!D)return null;const{providerId:M}=D,Y=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},ue=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!M&&null!=D&&D.idToken){const ct=null===(E=null===(y=vn(D.idToken))||void 0===y?void 0:y.firebase)||void 0===E?void 0:E.sign_in_provider;if(ct)return new Js(ue,"anonymous"!==ct&&"custom"!==ct?ct:null)}if(!M)return null;switch(M){case"facebook.com":return new fo(ue,Y);case"github.com":return new po(ue,Y);case"google.com":return new ru(ue,Y);case"twitter.com":return new $i(ue,Y,D.screenName||null);case"custom":case"anonymous":return new Js(ue,null);default:return new Js(ue,M,Y)}}(E)}class li{constructor(y,E){this.type=y,this.credential=E}static _fromIdtoken(y){return new li("enroll",y)}static _fromMfaPendingCredential(y){return new li("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var E,M;if(null!=y&&y.multiFactorSession){if(null!==(E=y.multiFactorSession)&&void 0!==E&&E.pendingCredential)return li._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(M=y.multiFactorSession)&&void 0!==M&&M.idToken)return li._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ya{constructor(y,E,M){this.session=y,this.hints=E,this.signInResolver=M}static _fromError(y,E){const M=wr(y),Y=E.customData._serverResponse,ue=(Y.mfaInfo||[]).map(Nt=>Ri._fromServerResponse(M,Nt));Q(Y.mfaPendingCredential,M,"internal-error");const ct=li._fromMfaPendingCredential(Y.mfaPendingCredential);return new ya(ct,ue,function(){var Nt=(0,u.Z)(function*(on){const Mn=yield on._process(M,ct);delete Y.mfaInfo,delete Y.mfaPendingCredential;const fr=Object.assign(Object.assign({},Y),{idToken:Mn.idToken,refreshToken:Mn.refreshToken});switch(E.operationType){case"signIn":const tr=yield ps._fromIdTokenResponse(M,E.operationType,fr);return yield M._updateCurrentUser(tr.user),tr;case"reauthenticate":return Q(E.user,M,"internal-error"),ps._forOperation(E.user,E.operationType,fr);default:at(M,"internal-error")}});return function(on){return Nt.apply(this,arguments)}}())}resolveSignIn(y){var E=this;return(0,u.Z)(function*(){return E.signInResolver(y)})()}}class Ll{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(M=>Ri._fromServerResponse(y.auth,M)))})}static _fromUser(y){return new Ll(y)}getSession(){var y=this;return(0,u.Z)(function*(){return li._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,E){var M=this;return(0,u.Z)(function*(){const Y=y,ue=yield M.getSession(),ct=yield mr(M.user,Y._process(M.user.auth,ue,E));return yield M.user._updateTokensIfNecessary(ct),M.user.reload()})()}unenroll(y){var E=this;return(0,u.Z)(function*(){var M;const Y="string"==typeof y?y:y.uid,ue=yield E.user.getIdToken(),ct=yield mr(E.user,function va(D,y){return kt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(D,y))}(E.user.auth,{idToken:ue,mfaEnrollmentId:Y}));E.enrolledFactors=E.enrolledFactors.filter(({uid:Nt})=>Nt!==Y),yield E.user._updateTokensIfNecessary(ct);try{yield E.user.reload()}catch(Nt){if("auth/user-token-expired"!==(null===(M=Nt)||void 0===M?void 0:M.code))throw Nt}})()}}const _a=new WeakMap,N="__sak";class q{constructor(y,E){this.storageRetriever=y,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(N,"1"),this.storage.removeItem(N),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,E){return this.storage.setItem(y,JSON.stringify(E)),Promise.resolve()}_get(y){const E=this.storage.getItem(y);return Promise.resolve(E?JSON.parse(E):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const $t=(()=>{class D extends q{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,M)=>this.onStorageEvent(E,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function B(){const D=(0,H.z$)();return ri(D)||nn(D)}()&&function bi(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=Bi(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const M of Object.keys(this.listeners)){const Y=this.storage.getItem(M),ue=this.localCache[M];Y!==ue&&E(M,ue,Y)}}onStorageEvent(E,M=!1){if(!E.key)return void this.forAllChangedKeys((Nt,on,Mn)=>{this.notifyListeners(Nt,Mn)});const Y=E.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Nt=this.storage.getItem(Y);if(E.newValue!==Nt)null!==E.newValue?this.storage.setItem(Y,E.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===E.newValue&&!M)return}const ue=()=>{const Nt=this.storage.getItem(Y);!M&&this.localCache[Y]===Nt||this.notifyListeners(Y,Nt)},ct=this.storage.getItem(Y);!function di(){return(0,H.w1)()&&10===document.documentMode}()||ct===E.newValue||E.newValue===E.oldValue?ue():setTimeout(ue,10)}notifyListeners(E,M){this.localCache[E]=M;const Y=this.listeners[E];if(Y)for(const ue of Array.from(Y))ue(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,M,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:M,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,M){var Y=()=>super._set,ue=this;return(0,u.Z)(function*(){yield Y().call(ue,E,M),ue.localCache[E]=JSON.stringify(M)})()}_get(E){var M=()=>super._get,Y=this;return(0,u.Z)(function*(){const ue=yield M().call(Y,E);return Y.localCache[E]=JSON.stringify(ue),ue})()}_remove(E){var M=()=>super._remove,Y=this;return(0,u.Z)(function*(){yield M().call(Y,E),delete Y.localCache[E]})()}}return D.type="LOCAL",D})(),vr=(()=>{class D extends q{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,M){}_removeListener(E,M){}}return D.type="SESSION",D})();let jr=(()=>{class D{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const M=this.receivers.find(ue=>ue.isListeningto(E));if(M)return M;const Y=new D(E);return this.receivers.push(Y),Y}isListeningto(E){return this.eventTarget===E}handleEvent(E){var M=this;return(0,u.Z)(function*(){const Y=E,{eventId:ue,eventType:ct,data:Nt}=Y.data,on=M.handlersMap[ct];if(null==on||!on.size)return;Y.ports[0].postMessage({status:"ack",eventId:ue,eventType:ct});const Mn=Array.from(on).map(function(){var tr=(0,u.Z)(function*(so){return so(Y.origin,Nt)});return function(so){return tr.apply(this,arguments)}}()),fr=yield function Mr(D){return Promise.all(D.map(function(){var y=(0,u.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(M){return{fulfilled:!1,reason:M}}});return function(E){return y.apply(this,arguments)}}()))}(Mn);Y.ports[0].postMessage({status:"done",eventId:ue,eventType:ct,response:fr})})()}_subscribe(E,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(M)}_unsubscribe(E,M){this.handlersMap[E]&&M&&this.handlersMap[E].delete(M),(!M||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function _r(D="",y=10){let E="";for(let M=0;M<y;M++)E+=Math.floor(10*Math.random());return D+E}class Ni{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,E,M=50){var Y=this;return(0,u.Z)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let ct,Nt;return new Promise((on,Mn)=>{const fr=_r("",20);ue.port1.start();const tr=setTimeout(()=>{Mn(new Error("unsupported_event"))},M);Nt={messageChannel:ue,onMessage(so){const pl=so;if(pl.data.eventId===fr)switch(pl.data.status){case"ack":clearTimeout(tr),ct=setTimeout(()=>{Mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ct),on(pl.data.response);break;default:clearTimeout(tr),clearTimeout(ct),Mn(new Error("invalid_response"))}}},Y.handlers.add(Nt),ue.port1.addEventListener("message",Nt.onMessage),Y.target.postMessage({eventType:y,eventId:fr,data:E},[ue.port2])}).finally(()=>{Nt&&Y.removeMessageHandler(Nt)})})()}}function ur(){return window}function to(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function ns(){return(ns=(0,u.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Fs="firebaseLocalStorageDb",Xt=1,_i="firebaseLocalStorage",Ea="fbase_key";class no{constructor(y){this.request=y}toPromise(){return new Promise((y,E)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function Tn(D,y){return D.transaction([_i],y?"readwrite":"readonly").objectStore(_i)}function rl(){const D=indexedDB.open(Fs,Xt);return new Promise((y,E)=>{D.addEventListener("error",()=>{E(D.error)}),D.addEventListener("upgradeneeded",()=>{const M=D.result;try{M.createObjectStore(_i,{keyPath:Ea})}catch(Y){E(Y)}}),D.addEventListener("success",(0,u.Z)(function*(){const M=D.result;M.objectStoreNames.contains(_i)?y(M):(M.close(),yield function Xn(){const D=indexedDB.deleteDatabase(Fs);return new no(D).toPromise()}(),y(yield rl()))}))})}function _n(D,y,E){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(D,y,E){const M=Tn(D,!0).put({[Ea]:y,value:E});return new no(M).toPromise()})).apply(this,arguments)}function Fi(){return(Fi=(0,u.Z)(function*(D,y){const E=Tn(D,!1).get(y),M=yield new no(E).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Il(D,y){const E=Tn(D,!0).delete(y);return new no(E).toPromise()}const Ra=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,u.Z)(function*(){return E.db||(E.db=yield rl()),E.db})()}_withRetries(E){var M=this;return(0,u.Z)(function*(){let Y=0;for(;;)try{const ue=yield M._openDb();return yield E(ue)}catch(ue){if(Y++>3)throw ue;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,u.Z)(function*(){return to()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,u.Z)(function*(){E.receiver=jr._getInstance(function ra(){return to()?self:null}()),E.receiver._subscribe("keyChanged",function(){var M=(0,u.Z)(function*(Y,ue){return{keyProcessed:(yield E._poll()).includes(ue.key)}});return function(Y,ue){return M.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var M=(0,u.Z)(function*(Y,ue){return["keyChanged"]});return function(Y,ue){return M.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,u.Z)(function*(){var M,Y;if(E.activeServiceWorker=yield function si(){return ns.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new Ni(E.activeServiceWorker);const ue=yield E.sender._send("ping",{},800);ue&&null!==(M=ue[0])&&void 0!==M&&M.fulfilled&&null!==(Y=ue[0])&&void 0!==Y&&Y.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var M=this;return(0,u.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function rs(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:E},M.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const E=yield rl();return yield _n(E,N,"1"),yield Il(E,N),!0}catch(E){}return!1})()}_withPendingWrite(E){var M=this;return(0,u.Z)(function*(){M.pendingWrites++;try{yield E()}finally{M.pendingWrites--}})()}_set(E,M){var Y=this;return(0,u.Z)(function*(){return Y._withPendingWrite((0,u.Z)(function*(){return yield Y._withRetries(ue=>_n(ue,E,M)),Y.localCache[E]=M,Y.notifyServiceWorker(E)}))})()}_get(E){var M=this;return(0,u.Z)(function*(){const Y=yield M._withRetries(ue=>function Zt(D,y){return Fi.apply(this,arguments)}(ue,E));return M.localCache[E]=Y,Y})()}_remove(E){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(Y=>Il(Y,E)),delete M.localCache[E],M.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,u.Z)(function*(){const M=yield E._withRetries(ct=>{const Nt=Tn(ct,!1).getAll();return new no(Nt).toPromise()});if(!M)return[];if(0!==E.pendingWrites)return[];const Y=[],ue=new Set;for(const{fbase_key:ct,value:Nt}of M)ue.add(ct),JSON.stringify(E.localCache[ct])!==JSON.stringify(Nt)&&(E.notifyListeners(ct,Nt),Y.push(ct));for(const ct of Object.keys(E.localCache))E.localCache[ct]&&!ue.has(ct)&&(E.notifyListeners(ct,null),Y.push(ct));return Y})()}notifyListeners(E,M){this.localCache[E]=M;const Y=this.listeners[E];if(Y)for(const ue of Array.from(Y))ue(M)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(M)}_removeListener(E,M){this.listeners[E]&&(this.listeners[E].delete(M),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function au(){return(au=(0,u.Z)(function*(D){return(yield kt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ia(D){return new Promise((y,E)=>{const M=document.createElement("script");M.setAttribute("src",D),M.onload=y,M.onerror=Y=>{const ue=Ye("internal-error");ue.customData=Y,E(ue)},M.type="text/javascript",M.charset="UTF-8",function ro(){var D,y;return null!==(y=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==y?y:document}().appendChild(M)})}function Qn(D){return`__${D}${Math.floor(1e6*Math.random())}`}const pi=1e12;class Hn{constructor(y){this.auth=y,this.counter=pi,this._widgets=new Map}render(y,E){const M=this.counter;return this._widgets.set(M,new Cl(y,this.auth.name,E||{})),this.counter++,M}reset(y){var E;const M=y||pi;null===(E=this._widgets.get(M))||void 0===E||E.delete(),this._widgets.delete(M)}getResponse(y){var E;return(null===(E=this._widgets.get(y||pi))||void 0===E?void 0:E.getResponse())||""}execute(y){var E=this;return(0,u.Z)(function*(){var M;return null===(M=E._widgets.get(y||pi))||void 0===M||M.execute(),""})()}}class Cl{constructor(y,E,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof y?document.getElementById(y):y;Q(Y,"argument-error",{appName:E}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qr(D){const y=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<D;M++)y.push(E.charAt(Math.floor(Math.random()*E.length)));return y.join("")}(50);const{callback:y,"expired-callback":E}=this.params;if(y)try{y(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dl=Qn("rcb"),Li=new et(3e4,6e4);class Oa{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=ur().grecaptcha)||void 0===y||!y.render)}load(y,E=""){return Q(function $o(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(E),y,"argument-error"),this.shouldResolveImmediately(E)?Promise.resolve(ur().grecaptcha):new Promise((M,Y)=>{const ue=ur().setTimeout(()=>{Y(Ye(y,"network-request-failed"))},Li.get());ur()[Dl]=()=>{ur().clearTimeout(ue),delete ur()[Dl];const Nt=ur().grecaptcha;if(!Nt)return void Y(Ye(y,"internal-error"));const on=Nt.render;Nt.render=(Mn,fr)=>{const tr=on(Mn,fr);return this.counter++,tr},this.hostLanguage=E,M(Nt)},Ia(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Dl,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ue),Y(Ye(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var E;return!(null===(E=ur().grecaptcha)||void 0===E||!E.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ba{load(y){return(0,u.Z)(function*(){return new Hn(y)})()}clearedOneInstance(){}}const Ca="recaptcha",Vo={theme:"light",type:"image"};class sl{constructor(y,E=Object.assign({},Vo),M){this.parameters=E,this.type=Ca,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(M),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof y?document.getElementById(y):y;Q(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ba:new Oa,this.validateStartingState()}verify(){var y=this;return(0,u.Z)(function*(){y.assertNotDestroyed();const E=yield y.render(),M=y.getAssertedRecaptcha();return M.getResponse(E)||new Promise(ue=>{const ct=Nt=>{Nt&&(y.tokenChangeListeners.delete(ct),ue(Nt))};y.tokenChangeListeners.add(ct),y.isInvisible&&M.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return E=>{if(this.tokenChangeListeners.forEach(M=>M(E)),"function"==typeof y)y(E);else if("string"==typeof y){const M=ur()[y];"function"==typeof M&&M(E)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,u.Z)(function*(){if(yield y.init(),!y.widgetId){let E=y.container;if(!y.isInvisible){const M=document.createElement("div");E.appendChild(M),E=M}y.widgetId=y.getAssertedRecaptcha().render(E,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,u.Z)(function*(){Q(ot()&&!to(),y.auth,"internal-error"),yield function Ha(){let D=null;return new Promise(y=>{"complete"!==document.readyState?(D=()=>y(),window.addEventListener("load",D)):y()}).catch(y=>{throw D&&window.removeEventListener("load",D),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const E=yield function wa(D){return au.apply(this,arguments)}(y.auth);Q(E,y.auth,"internal-error"),y.parameters.sitekey=E})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Uo{constructor(y,E){this.verificationId=y,this.onConfirmation=E}confirm(y){const E=es._fromVerification(this.verificationId,y);return this.onConfirmation(E)}}function gi(){return(gi=(0,u.Z)(function*(D,y,E){const M=wr(D),Y=yield Sl(M,y,(0,H.m9)(E));return new Uo(Y,ue=>yr(M,ue))})).apply(this,arguments)}function jo(){return(jo=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D);yield ms(!1,M,"phone");const Y=yield Sl(M.auth,y,(0,H.m9)(E));return new Uo(Y,ue=>Po(M,ue))})).apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D),Y=yield Sl(M.auth,y,(0,H.m9)(E));return new Uo(Y,ue=>Jo(M,ue))})).apply(this,arguments)}function Sl(D,y,E){return go.apply(this,arguments)}function go(){return go=(0,u.Z)(function*(D,y,E){var M;const Y=yield E.verify();try{let ue;if(Q("string"==typeof Y,D,"argument-error"),Q(E.type===Ca,D,"argument-error"),ue="string"==typeof y?{phoneNumber:y}:y,"session"in ue){const ct=ue.session;if("phoneNumber"in ue)return Q("enroll"===ct.type,D,"internal-error"),(yield function Fl(D,y){return kt(D,"POST","/v2/accounts/mfaEnrollment:start",Ot(D,y))}(D,{idToken:ct.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{Q("signin"===ct.type,D,"internal-error");const Nt=(null===(M=ue.multiFactorHint)||void 0===M?void 0:M.uid)||ue.multiFactorUid;return Q(Nt,D,"missing-multi-factor-info"),(yield function ou(D,y){return kt(D,"POST","/v2/accounts/mfaSignIn:start",Ot(D,y))}(D,{mfaPendingCredential:ct.credential,mfaEnrollmentId:Nt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ct}=yield function Ut(D,y){return Jt.apply(this,arguments)}(D,{phoneNumber:ue.phoneNumber,recaptchaToken:Y});return ct}}finally{E._reset()}}),go.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(D,y){yield ds((0,H.m9)(D),y)})).apply(this,arguments)}let Ao=(()=>{class D{constructor(E){this.providerId=D.PROVIDER_ID,this.auth=wr(E)}verifyPhoneNumber(E,M){return Sl(this.auth,E,(0,H.m9)(M))}static credential(E,M){return es._fromVerification(E,M)}static credentialFromResult(E){return D.credentialFromTaggedObject(E)}static credentialFromError(E){return D.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:M,temporaryProof:Y}=E;return M&&Y?es._fromTokenResponse(M,Y):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function ol(D,y){return y?$e(y):(Q(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class ui extends $r{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return xr(y,this._buildIdpRequest())}_linkToIdToken(y,E){return xr(y,this._buildIdpRequest(E))}_getReauthenticationResolver(y){return xr(y,this._buildIdpRequest())}_buildIdpRequest(y){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(E.idToken=y),E}}function ci(D){return Xs(D.auth,new ui(D),D.bypassAuthState)}function Nr(D){const{auth:y,user:E}=D;return Q(E,y,"internal-error"),Xr(E,new ui(D),D.bypassAuthState)}function Fr(D){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,u.Z)(function*(D){const{auth:y,user:E}=D;return Q(E,y,"internal-error"),ds(E,new ui(D),D.bypassAuthState)})).apply(this,arguments)}class cr{constructor(y,E,M,Y,ue=!1){this.auth=y,this.resolver=M,this.user=Y,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var y=this;return new Promise(function(){var E=(0,u.Z)(function*(M,Y){y.pendingPromise={resolve:M,reject:Y};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(ue){y.reject(ue)}});return function(M,Y){return E.apply(this,arguments)}}())}onAuthEvent(y){var E=this;return(0,u.Z)(function*(){const{urlResponse:M,sessionId:Y,postBody:ue,tenantId:ct,error:Nt,type:on}=y;if(Nt)return void E.reject(Nt);const Mn={auth:E.auth,requestUri:M,sessionId:Y,tenantId:ct||void 0,postBody:ue||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(on)(Mn))}catch(fr){E.reject(fr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return ci;case"linkViaPopup":case"linkViaRedirect":return Fr;case"reauthViaPopup":case"reauthViaRedirect":return Nr;default:at(this.auth,"internal-error")}}resolve(y){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const al=new et(2e3,1e4);function mo(){return(mo=(0,u.Z)(function*(D,y,E){const M=wr(D);Me(D,y,Is);const Y=ol(M,E);return new io(M,"signInViaPopup",y,Y).executeNotNull()})).apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D);Me(M.auth,y,Is);const Y=ol(M.auth,E);return new io(M.auth,"reauthViaPopup",y,Y,M).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D);Me(M.auth,y,Is);const Y=ol(M.auth,E);return new io(M.auth,"linkViaPopup",y,Y,M).executeNotNull()})).apply(this,arguments)}let io=(()=>{class D extends cr{constructor(E,M,Y,ue,ct){super(E,M,ue,ct),this.provider=Y,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var E=this;return(0,u.Z)(function*(){const M=yield E.execute();return Q(M,E.auth,"internal-error"),M})()}onExecution(){var E=this;return(0,u.Z)(function*(){Le(1===E.filter.length,"Popup operations only handle one event");const M=_r();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],M),E.authWindow.associatedEvent=M,E.resolver._originValidation(E.auth).catch(Y=>{E.reject(Y)}),E.resolver._isIframeWebStorageSupported(E.auth,Y=>{Y||E.reject(Ye(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const E=()=>{var M,Y;this.pollId=null!==(Y=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==Y&&Y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(E,al.get())};E()}}return D.currentPopupAction=null,D})();const A="pendingRedirect",x=new Map;class b extends cr{constructor(y,E,M=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,M),this.eventId=null}execute(){var y=()=>super.execute,E=this;return(0,u.Z)(function*(){let M=x.get(E.auth._key());if(!M){try{const ue=(yield function O(D,y){return U.apply(this,arguments)}(E.resolver,E.auth))?yield y().call(E):null;M=()=>Promise.resolve(ue)}catch(Y){M=()=>Promise.reject(Y)}x.set(E.auth._key(),M)}return E.bypassAuthState||x.set(E.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(y){var E=()=>super.onAuthEvent,M=this;return(0,u.Z)(function*(){if("signInViaRedirect"===y.type)return E().call(M,y);if("unknown"!==y.type){if(y.eventId){const Y=yield M.auth._redirectUserForId(y.eventId);if(Y)return M.user=Y,E().call(M,y);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function U(){return(U=(0,u.Z)(function*(D,y){const E=En(y),M=an(D);if(!(yield M._isAvailable()))return!1;const Y="true"===(yield M._get(E));return yield M._remove(E),Y})).apply(this,arguments)}function ee(D,y){return re.apply(this,arguments)}function re(){return(re=(0,u.Z)(function*(D,y){return an(D)._set(En(y),"true")})).apply(this,arguments)}function St(D,y){x.set(D._key(),y)}function an(D){return $e(D._redirectPersistence)}function En(D){return Wn(A,D.config.apiKey,D.name)}function In(D,y,E){return function zr(D,y,E){return F.apply(this,arguments)}(D,y,E)}function F(){return(F=(0,u.Z)(function*(D,y,E){const M=wr(D);Me(D,y,Is);const Y=ol(M,E);return yield ee(Y,M),Y._openRedirect(M,y,"signInViaRedirect")})).apply(this,arguments)}function j(D,y,E){return function te(D,y,E){return fe.apply(this,arguments)}(D,y,E)}function fe(){return(fe=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D);Me(M.auth,y,Is);const Y=ol(M.auth,E);yield ee(Y,M.auth);const ue=yield Rn(M);return Y._openRedirect(M.auth,y,"reauthViaRedirect",ue)})).apply(this,arguments)}function dt(D,y,E){return function It(D,y,E){return jt.apply(this,arguments)}(D,y,E)}function jt(){return(jt=(0,u.Z)(function*(D,y,E){const M=(0,H.m9)(D);Me(M.auth,y,Is);const Y=ol(M.auth,E);yield ms(!1,M,y.providerId),yield ee(Y,M.auth);const ue=yield Rn(M);return Y._openRedirect(M.auth,y,"linkViaRedirect",ue)})).apply(this,arguments)}function Fn(){return(Fn=(0,u.Z)(function*(D,y){return yield wr(D)._initializationPromise,Jn(D,y,!1)})).apply(this,arguments)}function Jn(D,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(D,y,E=!1){const M=wr(D),Y=ol(M,y),ct=yield new b(M,Y,E).execute();return ct&&!E&&(delete ct.user._redirectEventId,yield M._persistUserIfCurrent(ct.user),yield M._setRedirectUser(null,y)),ct})).apply(this,arguments)}function Rn(D){return ss.apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(D){const y=_r(`${D.uid}:::`);return D._redirectEventId=y,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),y})).apply(this,arguments)}class Da{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let E=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(y,M)&&(E=!0,this.sendToConsumer(y,M),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Ou(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tl(D);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=y,E=!0)),E}sendToConsumer(y,E){var M;if(y.error&&!Tl(y)){const Y=(null===(M=y.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";E.onError(Ye(this.auth,Y))}else E.onAuthEvent(y)}isEventForConsumer(y,E){const M=null===E.eventId||!!y.eventId&&y.eventId===E.eventId;return E.filter.includes(y.type)&&M}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($l(y))}saveEventToCache(y){this.cachedEventUids.add($l(y)),this.lastProcessedEventTime=Date.now()}}function $l(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(y=>y).join("-")}function Tl({type:D,error:y}){return"unknown"===D&&"auth/no-auth-event"===(null==y?void 0:y.code)}function ll(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,u.Z)(function*(D,y={}){return kt(D,"GET","/v1/projects",y)})).apply(this,arguments)}const Pa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function Vc(){return(Vc=(0,u.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:y}=yield ll(D);for(const E of y)try{if(Go(E))return}catch(M){}at(D,"unauthorized-domain")})).apply(this,arguments)}function Go(D){const y=gt(),{protocol:E,hostname:M}=new URL(y);if(D.startsWith("chrome-extension://")){const ct=new URL(D);return""===ct.hostname&&""===M?"chrome-extension:"===E&&D.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===E&&ct.hostname===M}if(!Al.test(E))return!1;if(Pa.test(D))return M===D;const Y=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(M)}const Ui=new et(3e4,6e4);function os(){const D=ur().___jsl;if(null!=D&&D.H)for(const y of Object.keys(D.H))if(D.H[y].r=D.H[y].r||[],D.H[y].L=D.H[y].L||[],D.H[y].r=[...D.H[y].L],D.CP)for(let E=0;E<D.CP.length;E++)D.CP[E]=null}let uu=null;const Uc=new et(5e3,15e3),Ga="__/auth/iframe",xl="emulator/auth/iframe",Lr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ip=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jc(D){const y=D.config;Q(y.authDomain,D,"auth-domain-config-required");const E=y.emulator?He(y,xl):`https://${D.config.authDomain}/${Ga}`,M={apiKey:y.apiKey,appName:D.name,v:xe.SDK_VERSION},Y=ip.get(D.config.apiHost);Y&&(M.eid=Y);const ue=D._getFrameworks();return ue.length&&(M.fw=ue.join(",")),`${E}?${(0,H.xO)(M).slice(1)}`}function Es(){return Es=(0,u.Z)(function*(D){const y=yield function ul(D){return uu=uu||function rp(D){return new Promise((y,E)=>{var M,Y,ue;function ct(){os(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{os(),E(Ye(D,"network-request-failed"))},timeout:Ui.get()})}if(null!==(Y=null===(M=ur().gapi)||void 0===M?void 0:M.iframes)&&void 0!==Y&&Y.Iframe)y(gapi.iframes.getContext());else{if(null===(ue=ur().gapi)||void 0===ue||!ue.load){const Nt=Qn("iframefcb");return ur()[Nt]=()=>{gapi.load?ct():E(Ye(D,"network-request-failed"))},Ia(`https://apis.google.com/js/api.js?onload=${Nt}`).catch(on=>E(on))}ct()}}).catch(y=>{throw uu=null,y})}(D),uu}(D),E=ur().gapi;return Q(E,D,"internal-error"),y.open({where:document.body,url:jc(D),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lr,dontclear:!0},M=>new Promise(function(){var Y=(0,u.Z)(function*(ue,ct){yield M.restyle({setHideOnLeave:!1});const Nt=Ye(D,"network-request-failed"),on=ur().setTimeout(()=>{ct(Nt)},Uc.get());function Mn(){ur().clearTimeout(on),ue(M)}M.ping(Mn).then(Mn,()=>{ct(Nt)})});return function(ue,ct){return Y.apply(this,arguments)}}()))}),Es.apply(this,arguments)}const sh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zh=500,uc=600,Pu="_blank",bd="http://localhost";class Cd{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}const ku="__/auth/handler",Wh="emulator/auth/handler";function cc(D,y,E,M,Y,ue){Q(D.config.authDomain,D,"auth-domain-config-required"),Q(D.config.apiKey,D,"invalid-api-key");const ct={apiKey:D.config.apiKey,appName:D.name,authType:E,redirectUrl:M,v:xe.SDK_VERSION,eventId:Y};if(y instanceof Is){y.setDefaultLanguage(D.languageCode),ct.providerId=y.providerId||"",(0,H.xb)(y.getCustomParameters())||(ct.customParameters=JSON.stringify(y.getCustomParameters()));for(const[on,Mn]of Object.entries(ue||{}))ct[on]=Mn}if(y instanceof Di){const on=y.getScopes().filter(Mn=>""!==Mn);on.length>0&&(ct.scopes=on.join(","))}D.tenantId&&(ct.tid=D.tenantId);const Nt=ct;for(const on of Object.keys(Nt))void 0===Nt[on]&&delete Nt[on];return`${function Vl({config:D}){return D.emulator?He(D,Wh):`https://${D.authDomain}/${ku}`}(D)}?${(0,H.xO)(Nt).slice(1)}`}const aa="webStorageSupport",Nu=class dc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vr,this._completeRedirectFn=Jn,this._overrideRedirectResult=St}_openPopup(y,E,M,Y){var ue=this;return(0,u.Z)(function*(){var ct;Le(null===(ct=ue.eventManagers[y._key()])||void 0===ct?void 0:ct.manager,"_initialize() not called before _openPopup()");const Nt=cc(y,E,M,gt(),Y);return function cl(D,y,E,M=zh,Y=uc){const ue=Math.max((window.screen.availHeight-Y)/2,0).toString(),ct=Math.max((window.screen.availWidth-M)/2,0).toString();let Nt="";const on=Object.assign(Object.assign({},sh),{width:M.toString(),height:Y.toString(),top:ue,left:ct}),Mn=(0,H.z$)().toLowerCase();E&&(Nt=ut(Mn)?Pu:E),Gr(Mn)&&(y=y||bd,on.scrollbars="yes");const fr=Object.entries(on).reduce((so,[pl,ch])=>`${so}${pl}=${ch},`,"");if(function Pr(D=(0,H.z$)()){var y;return nn(D)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(Mn)&&"_self"!==Nt)return function cu(D,y){const E=document.createElement("a");E.href=D,E.target=y;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(M)}(y||"",Nt),new Cd(null);const tr=window.open(y||"",Nt,fr);Q(tr,D,"popup-blocked");try{tr.focus()}catch(so){}return new Cd(tr)}(y,Nt,_r())})()}_openRedirect(y,E,M,Y){var ue=this;return(0,u.Z)(function*(){return yield ue._originValidation(y),function Vi(D){ur().location.href=D}(cc(y,E,M,gt(),Y)),new Promise(()=>{})})()}_initialize(y){const E=y._key();if(this.eventManagers[E]){const{manager:Y,promise:ue}=this.eventManagers[E];return Y?Promise.resolve(Y):(Le(ue,"If manager is not set, promise should be"),ue)}const M=this.initAndGetManager(y);return this.eventManagers[E]={promise:M},M.catch(()=>{delete this.eventManagers[E]}),M}initAndGetManager(y){var E=this;return(0,u.Z)(function*(){const M=yield function zo(D){return Es.apply(this,arguments)}(y),Y=new Da(y);return M.register("authEvent",ue=>(Q(null==ue?void 0:ue.authEvent,y,"invalid-auth-event"),{status:Y.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[y._key()]={manager:Y},E.iframes[y._key()]=M,Y})()}_isIframeWebStorageSupported(y,E){this.iframes[y._key()].send(aa,{type:aa},Y=>{var ue;const ct=null===(ue=null==Y?void 0:Y[0])||void 0===ue?void 0:ue[aa];void 0!==ct&&E(!!ct),at(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function $c(D){return Vc.apply(this,arguments)}(y)),this.originValidationPromises[E]}get _shouldInitProactively(){return Bi()||ri()||nn()}};class Dd{constructor(y){this.factorId=y}_process(y,E,M){switch(E.type){case"enroll":return this._finalizeEnroll(y,E.credential,M);case"signin":return this._finalizeSignIn(y,E.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Ul extends Dd{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Ul(y)}_finalizeEnroll(y,E,M){return function _s(D,y){return kt(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(D,y))}(y,{idToken:E,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,E){return function xu(D,y){return kt(D,"POST","/v2/accounts/mfaSignIn:finalize",Ot(D,y))}(y,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let oh=(()=>{class D{constructor(){}static assertion(E){return Ul._fromCredential(E)}}return D.FACTOR_ID="phone",D})();var Ws="@firebase/auth";class ka{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var E=this;return(0,u.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const E=this.auth.onIdTokenChanged(M=>{var Y;y((null===(Y=M)||void 0===Y?void 0:Y.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,E),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const E=this.internalListeners.get(y);E&&(this.internalListeners.delete(y),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function za(){return window}!function Ps(D){(0,xe._registerComponent)(new me.wA("auth",(y,{options:E})=>{const M=y.getProvider("app").getImmediate(),Y=y.getProvider("heartbeat"),{apiKey:ue,authDomain:ct}=M.options;return((Nt,on)=>{Q(ue&&!ue.includes(":"),"invalid-api-key",{appName:Nt.name}),Q(!(null!=ct&&ct.includes(":")),"argument-error",{appName:Nt.name});const Mn={apiKey:ue,authDomain:ct,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pi(D)},fr=new kr(Nt,on,Mn);return function We(D,y){const E=(null==y?void 0:y.persistence)||[],M=(Array.isArray(E)?E:[E]).map($e);null!=y&&y.errorMap&&D._updateErrorMap(y.errorMap),D._initializeWithPersistence(M,null==y?void 0:y.popupRedirectResolver)}(fr,E),fr})(M,Y)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,E,M)=>{y.getProvider("auth-internal").initialize()})),(0,xe._registerComponent)(new me.wA("auth-internal",y=>{const E=wr(y.getProvider("auth").getImmediate());return new ka(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)(Ws,"0.20.5",function Sd(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,xe.registerVersion)(Ws,"0.20.5","esm2017")}("Browser");const Td=2e3;function hc(){return hc=(0,u.Z)(function*(D,y,E){var M;const{BuildInfo:Y}=za();Le(y.sessionId,"AuthEvent did not contain a session ID");const ue=yield function zc(D){return pc.apply(this,arguments)}(y.sessionId),ct={};return nn()?ct.ibi=Y.packageName:ge()?ct.apn=Y.packageName:at(D,"operation-not-supported-in-this-environment"),Y.displayName&&(ct.appDisplayName=Y.displayName),ct.sessionId=ue,cc(D,E,y.type,void 0,null!==(M=y.eventId)&&void 0!==M?M:void 0,ct)}),hc.apply(this,arguments)}function du(){return(du=(0,u.Z)(function*(D){const{BuildInfo:y}=za(),E={};nn()?E.iosBundleId=y.packageName:ge()?E.androidPackageName=y.packageName:at(D,"operation-not-supported-in-this-environment"),yield ll(D,E)})).apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(D,y,E){const{cordova:M}=za();let Y=()=>{};try{yield new Promise((ue,ct)=>{let Nt=null;function on(){var tr;ue();const so=null===(tr=M.plugins.browsertab)||void 0===tr?void 0:tr.close;"function"==typeof so&&so(),"function"==typeof(null==E?void 0:E.close)&&E.close()}function Mn(){Nt||(Nt=window.setTimeout(()=>{ct(Ye(D,"redirect-cancelled-by-user"))},Td))}function fr(){"visible"===(null==document?void 0:document.visibilityState)&&Mn()}y.addPassiveListener(on),document.addEventListener("resume",Mn,!1),ge()&&document.addEventListener("visibilitychange",fr,!1),Y=()=>{y.removePassiveListener(on),document.removeEventListener("resume",Mn,!1),document.removeEventListener("visibilitychange",fr,!1),Nt&&window.clearTimeout(Nt)}})}finally{Y()}})).apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(D){const y=function gc(D){if(Le(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const y=new ArrayBuffer(D.length),E=new Uint8Array(y);for(let M=0;M<D.length;M++)E[M]=D.charCodeAt(M);return E}(D),E=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(E)).map(Y=>Y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Wa=20;class Yh extends Da{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(E=>E(y)),super.onEvent(y)}initialized(){var y=this;return(0,u.Z)(function*(){yield y.initPromise})()}}function qs(D){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(D){const y=yield Bu()._get($u(D));return y&&(yield Bu()._remove($u(D))),y})).apply(this,arguments)}function Gl(){const D=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<Wa;E++){const M=Math.floor(Math.random()*y.length);D.push(y.charAt(M))}return D.join("")}function Bu(){return $e($t)}function $u(D){return Wn("authEvent",D.config.apiKey,D.name)}function Sa(D){if(null==D||!D.includes("?"))return{};const[y,...E]=D.split("?");return(0,H.zd)(E.join("?"))}const Wl=class sp{constructor(){this._redirectPersistence=vr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jn,this._overrideRedirectResult=St}_initialize(y){var E=this;return(0,u.Z)(function*(){const M=y._key();let Y=E.eventManagers.get(M);return Y||(Y=new Yh(y),E.eventManagers.set(M,Y),E.attachCallbackListeners(y,Y)),Y})()}_openPopup(y){at(y,"operation-not-supported-in-this-environment")}_openRedirect(y,E,M,Y){var ue=this;return(0,u.Z)(function*(){!function ah(D){var y,E,M,Y,ue,ct,Nt,on,Mn,fr;const tr=za();Q("function"==typeof(null===(y=null==tr?void 0:tr.universalLinks)||void 0===y?void 0:y.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(E=null==tr?void 0:tr.BuildInfo)||void 0===E?void 0:E.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(ue=null===(Y=null===(M=null==tr?void 0:tr.cordova)||void 0===M?void 0:M.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===ue?void 0:ue.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(on=null===(Nt=null===(ct=null==tr?void 0:tr.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Nt?void 0:Nt.browsertab)||void 0===on?void 0:on.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(fr=null===(Mn=null==tr?void 0:tr.cordova)||void 0===Mn?void 0:Mn.InAppBrowser)||void 0===fr?void 0:fr.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const ct=yield ue._initialize(y);yield ct.initialized(),ct.resetRedirect(),function Xe(){x.clear()}(),yield ue._originValidation(y);const Nt=function Fu(D,y,E=null){return{type:y,eventId:E,urlResponse:null,sessionId:Gl(),postBody:null,tenantId:D.tenantId,error:Ye(D,"no-auth-event")}}(y,M,Y);yield function Ad(D,y){return Bu()._set($u(D),y)}(y,Nt);const on=yield function Gc(D,y,E){return hc.apply(this,arguments)}(y,Nt,E),Mn=yield function Kh(D){const{cordova:y}=za();return new Promise(E=>{y.plugins.browsertab.isAvailable(M=>{let Y=null;M?y.plugins.browsertab.openUrl(D):Y=y.InAppBrowser.open(D,function Ln(D=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),E(Y)})})}(on);return function fc(D,y,E){return dl.apply(this,arguments)}(y,ct,Mn)})()}_isIframeWebStorageSupported(y,E){throw new Error("Method not implemented.")}_originValidation(y){const E=y._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function qh(D){return du.apply(this,arguments)}(y)),this.originValidationPromises[E]}attachCallbackListeners(y,E){const{universalLinks:M,handleOpenURL:Y,BuildInfo:ue}=za(),ct=setTimeout((0,u.Z)(function*(){yield qs(y),E.onEvent(Xh())}),500),Nt=function(){var fr=(0,u.Z)(function*(tr){clearTimeout(ct);const so=yield qs(y);let pl=null;so&&null!=tr&&tr.url&&(pl=function Hl(D,y){var E,M;const Y=function zl(D){const y=Sa(D),E=y.link?decodeURIComponent(y.link):void 0,M=Sa(E).link,Y=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Sa(Y).link||Y||M||E||D}(y);if(Y.includes("/__/auth/callback")){const ue=Sa(Y),ct=ue.firebaseError?function Ti(D){try{return JSON.parse(D)}catch(y){return null}}(decodeURIComponent(ue.firebaseError)):null,Nt=null===(M=null===(E=null==ct?void 0:ct.code)||void 0===E?void 0:E.split("auth/"))||void 0===M?void 0:M[1],on=Nt?Ye(Nt):null;return on?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:on,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:Y,postBody:null}}return null}(so,tr.url)),E.onEvent(pl||Xh())});return function(so){return fr.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,Nt);const on=Y,Mn=`${ue.packageName.toLowerCase()}://`;za().handleOpenURL=function(){var fr=(0,u.Z)(function*(tr){if(tr.toLowerCase().startsWith(Mn)&&Nt({url:tr}),"function"==typeof on)try{on(tr)}catch(so){console.error(so)}});return function(tr){return fr.apply(this,arguments)}}()}};function Xh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ye("no-auth-event")}}const Wc=1e3;function ql(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function Ml(D=(0,H.z$)()){return!("file:"!==ql()&&"ionic:"!==ql()&&"capacitor:"!==ql()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function qc(){try{const D=self.localStorage,y=_r();if(D)return D.setItem(y,"1"),D.removeItem(y),!function Jr(D=(0,H.z$)()){return function Ei(){return(0,H.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ai(D=(0,H.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,H.hl)()}catch(D){return Md()&&(0,H.hl)()}return!1}function Md(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function la(){return(function hu(){return"http:"===ql()||"https:"===ql()}()||(0,H.ru)()||Ml())&&!function xd(){return(0,H.b$)()||(0,H.UG)()}()&&qc()&&!Md()}function fu(){return Ml()&&typeof document<"u"}function qa(){return(qa=(0,u.Z)(function*(){return!!fu()&&new Promise(D=>{const y=setTimeout(()=>{D(!1)},Wc);document.addEventListener("deviceready",()=>{clearTimeout(y),D(!0)})})})).apply(this,arguments)}const Ls={LOCAL:"local",NONE:"none",SESSION:"session"},qo=Q,Kl="persistence";function Rd(D){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,u.Z)(function*(D){yield D._initializationPromise;const y=Od(),E=Wn(Kl,D.config.apiKey,D.name);y&&y.setItem(E,D._getPersistence())})).apply(this,arguments)}function Od(){var D;try{return(null===(D=function pu(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch(y){return null}}const mu=Q;class Ka{constructor(){this.browserResolver=$e(Nu),this.cordovaResolver=$e(Wl),this.underlyingResolver=null,this._redirectPersistence=vr,this._completeRedirectFn=Jn,this._overrideRedirectResult=St}_initialize(y){var E=this;return(0,u.Z)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,E,M,Y){var ue=this;return(0,u.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openPopup(y,E,M,Y)})()}_openRedirect(y,E,M,Y){var ue=this;return(0,u.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openRedirect(y,E,M,Y)})()}_isIframeWebStorageSupported(y,E){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,E)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return fu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,u.Z)(function*(){if(y.underlyingResolver)return;const E=yield function Wo(){return qa.apply(this,arguments)}();y.underlyingResolver=E?y.cordovaResolver:y.browserResolver})()}}function yu(D){return D.unwrap()}function Qh(D){return Pd(D)}function Pd(D){const{_tokenResponse:y}=D instanceof H.ZR?D.customData:D;if(!y)return null;if(!(D instanceof H.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return Ao.credentialFromResult(D);const E=y.providerId;if(!E||E===Ve.PASSWORD)return null;let M;switch(E){case Ve.GOOGLE:M=Ro;break;case Ve.FACEBOOK:M=Eo;break;case Ve.GITHUB:M=da;break;case Ve.TWITTER:M=Io;break;default:const{oauthIdToken:Y,oauthAccessToken:ue,oauthTokenSecret:ct,pendingToken:Nt,nonce:on}=y;return ue||ct||Y||Nt?Nt?E.startsWith("saml.")?fs._create(E,Nt):vt._fromParams({providerId:E,signInMethod:E,pendingToken:Nt,idToken:Y,accessToken:ue}):new xs(E).credential({idToken:Y,accessToken:ue,rawNonce:on}):null}return D instanceof H.ZR?M.credentialFromError(D):M.credentialFromResult(D)}function ua(D,y){return y.catch(E=>{throw E instanceof H.ZR&&function Jh(D,y){var E,M;const Y=null===(E=y.customData)||void 0===E?void 0:E._tokenResponse;if("auth/multi-factor-auth-required"===(null===(M=y)||void 0===M?void 0:M.code))y.resolver=new Yl(D,function Zi(D,y){var E;const M=(0,H.m9)(D),Y=y;return Q(y.customData.operationType,M,"argument-error"),Q(null===(E=Y.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,M,"argument-error"),ya._fromError(M,Y)}(D,y));else if(Y){const ue=Pd(y),ct=y;ue&&(ct.credential=ue,ct.tenantId=Y.tenantId||void 0,ct.email=Y.email||void 0,ct.phoneNumber=Y.phoneNumber||void 0)}}(D,E),E}).then(E=>{const Y=E.user;return{operationType:E.operationType,credential:Qh(E),additionalUserInfo:ta(E),user:fl.getOrCreate(Y)}})}function Vu(D,y){return mc.apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(D,y){const E=yield y;return{verificationId:E.verificationId,confirm:M=>ua(D,E.confirm(M))}})).apply(this,arguments)}class Yl{constructor(y,E){this.resolver=E,this.auth=function Yc(D){return D.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return ua(yu(this.auth),this.resolver.resolveSignIn(y))}}class fl{constructor(y){this._delegate=y,this.multiFactor=function wl(D){const y=(0,H.m9)(D);return _a.has(y)||_a.set(y,Ll._fromUser(y)),_a.get(y)}(y)}static getOrCreate(y){return fl.USER_MAP.has(y)||fl.USER_MAP.set(y,new fl(y)),fl.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var E=this;return(0,u.Z)(function*(){return ua(E.auth,Po(E._delegate,y))})()}linkWithPhoneNumber(y,E){var M=this;return(0,u.Z)(function*(){return Vu(M.auth,function Mu(D,y,E){return jo.apply(this,arguments)}(M._delegate,y,E))})()}linkWithPopup(y){var E=this;return(0,u.Z)(function*(){return ua(E.auth,function Zn(D,y,E){return Tr.apply(this,arguments)}(E._delegate,y,Ka))})()}linkWithRedirect(y){var E=this;return(0,u.Z)(function*(){return yield Rd(wr(E.auth)),dt(E._delegate,y,Ka)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var E=this;return(0,u.Z)(function*(){return ua(E.auth,Jo(E._delegate,y))})()}reauthenticateWithPhoneNumber(y,E){return Vu(this.auth,function Ru(D,y,E){return xt.apply(this,arguments)}(this._delegate,y,E))}reauthenticateWithPopup(y){return ua(this.auth,function is(D,y,E){return Si.apply(this,arguments)}(this._delegate,y,Ka))}reauthenticateWithRedirect(y){var E=this;return(0,u.Z)(function*(){return yield Rd(wr(E.auth)),j(E._delegate,y,Ka)})()}sendEmailVerification(y){return function ti(D,y){return $n.apply(this,arguments)}(this._delegate,y)}unlink(y){var E=this;return(0,u.Z)(function*(){return yield function Rs(D,y){return Wi.apply(this,arguments)}(E._delegate,y),E})()}updateEmail(y){return function ho(D,y){return pa((0,H.m9)(D),y,null)}(this._delegate,y)}updatePassword(y){return function To(D,y){return pa((0,H.m9)(D),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function Id(D,y){return sa.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function No(D,y){return fa.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,E){return function ts(D,y,E){return Cs.apply(this,arguments)}(this._delegate,y,E)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fl.USER_MAP=new WeakMap;const yc=Q;let vu=(()=>{class D{constructor(E,M){if(this.app=E,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Y}=E.options;yc(Y,"invalid-api-key",{appName:E.name}),yc(Y,"invalid-api-key",{appName:E.name});const ue=typeof window<"u"?Ka:void 0;this._delegate=M.initialize({options:{persistence:Zc(Y,E.name),popupRedirectResolver:ue}}),this._delegate._updateErrorMap(it),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(E){this._delegate.languageCode=E}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(E){this._delegate.tenantId=E}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(E,M){!function fi(D,y,E){const M=wr(D);Q(M._canInitEmulator,M,"emulator-config-failed"),Q(/^https?:\/\//.test(y),M,"invalid-emulator-scheme");const Y=!(null==E||!E.disableWarnings),ue=Bn(y),{host:ct,port:Nt}=function qr(D){const y=Bn(D),E=/(\/\/)?([^?#/]+)/.exec(D.substr(y.length));if(!E)return{host:"",port:null};const M=E[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(M);if(Y){const ue=Y[1];return{host:ue,port:Br(M.substr(ue.length+1))}}{const[ue,ct]=M.split(":");return{host:ue,port:Br(ct)}}}(y);M.config.emulator={url:`${ue}//${ct}${null===Nt?"":`:${Nt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:ct,port:Nt,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function ii(){function D(){const y=document.createElement("p"),E=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,E,M)}applyActionCode(E){return function er(D,y){return Ma.apply(this,arguments)}(this._delegate,E)}checkActionCode(E){return Va(this._delegate,E)}confirmPasswordReset(E,M){return function ko(D,y,E){return ea.apply(this,arguments)}(this._delegate,E,M)}createUserWithEmailAndPassword(E,M){var Y=this;return(0,u.Z)(function*(){return ua(Y._delegate,function ja(D,y,E){return co.apply(this,arguments)}(Y._delegate,E,M))})()}fetchProvidersForEmail(E){return this.fetchSignInMethodsForEmail(E)}fetchSignInMethodsForEmail(E){return function Sn(D,y){return lr.apply(this,arguments)}(this._delegate,E)}isSignInWithEmailLink(E){return function S(D,y){const E=xi.parseLink(y);return"EMAIL_SIGNIN"===(null==E?void 0:E.operation)}(0,E)}getRedirectResult(){var E=this;return(0,u.Z)(function*(){yc(la(),E._delegate,"operation-not-supported-in-this-environment");const M=yield function en(D,y){return Fn.apply(this,arguments)}(E._delegate,Ka);return M?ua(E._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(E){!function lh(D,y){wr(D)._logFramework(y)}(this._delegate,E)}onAuthStateChanged(E,M,Y){const{next:ue,error:ct,complete:Nt}=uh(E,M,Y);return this._delegate.onAuthStateChanged(ue,ct,Nt)}onIdTokenChanged(E,M,Y){const{next:ue,error:ct,complete:Nt}=uh(E,M,Y);return this._delegate.onIdTokenChanged(ue,ct,Nt)}sendSignInLinkToEmail(E,M){return function w(D,y,E){return f.apply(this,arguments)}(this._delegate,E,M)}sendPasswordResetEmail(E,M){return function zs(D,y,E){return Os.apply(this,arguments)}(this._delegate,E,M||void 0)}setPersistence(E){var M=this;return(0,u.Z)(function*(){let Y;switch(function gu(D,y){qo(Object.values(Ls).includes(y),D,"invalid-persistence-type"),(0,H.b$)()?qo(y!==Ls.SESSION,D,"unsupported-persistence-type"):(0,H.UG)()?qo(y===Ls.NONE,D,"unsupported-persistence-type"):Md()?qo(y===Ls.NONE||y===Ls.LOCAL&&(0,H.hl)(),D,"unsupported-persistence-type"):qo(y===Ls.NONE||qc(),D,"unsupported-persistence-type")}(M._delegate,E),E){case Ls.SESSION:Y=vr;break;case Ls.LOCAL:Y=(yield $e(Ra)._isAvailable())?Ra:$t;break;case Ls.NONE:Y=zn;break;default:return at("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(Y)})()}signInAndRetrieveDataWithCredential(E){return this.signInWithCredential(E)}signInAnonymously(){return ua(this._delegate,function Zs(D){return Co.apply(this,arguments)}(this._delegate))}signInWithCredential(E){return ua(this._delegate,yr(this._delegate,E))}signInWithCustomToken(E){return ua(this._delegate,function Do(D,y){return qi.apply(this,arguments)}(this._delegate,E))}signInWithEmailAndPassword(E,M){return ua(this._delegate,function m(D,y,E){return yr((0,H.m9)(D),Qo.credential(y,E))}(this._delegate,E,M))}signInWithEmailLink(E,M){return ua(this._delegate,function W(D,y,E){return ze.apply(this,arguments)}(this._delegate,E,M))}signInWithPhoneNumber(E,M){return Vu(this._delegate,function lu(D,y,E){return gi.apply(this,arguments)}(this._delegate,E,M))}signInWithPopup(E){var M=this;return(0,u.Z)(function*(){return yc(la(),M._delegate,"operation-not-supported-in-this-environment"),ua(M._delegate,function Ho(D,y,E){return mo.apply(this,arguments)}(M._delegate,E,Ka))})()}signInWithRedirect(E){var M=this;return(0,u.Z)(function*(){return yc(la(),M._delegate,"operation-not-supported-in-this-environment"),yield Rd(M._delegate),In(M._delegate,E,Ka)})()}updateCurrentUser(E){return this._delegate.updateCurrentUser(E)}verifyPasswordResetCode(E){return function So(D,y){return Ua.apply(this,arguments)}(this._delegate,E)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Ls,D})();function uh(D,y,E){let M=D;"function"!=typeof D&&({next:M,error:y,complete:E}=D);const Y=M;return{next:ct=>Y(ct&&fl.getOrCreate(ct)),error:y,complete:E}}function Zc(D,y){const E=function Hr(D,y){const E=Od();if(!E)return[];const M=Wn(Kl,D,y);switch(E.getItem(M)){case Ls.NONE:return[zn];case Ls.LOCAL:return[Ra,vr];case Ls.SESSION:return[vr];default:return[]}}(D,y);if(typeof self<"u"&&!E.includes(Ra)&&E.push(Ra),typeof window<"u")for(const M of[$t,vr])E.includes(M)||E.push(M);return E.includes(zn)||E.push(zn),E}class Bs{constructor(){this.providerId="phone",this._delegate=new Ao(yu(J.Z.auth()))}static credential(y,E){return Ao.credential(y,E)}verifyPhoneNumber(y,E){return this._delegate.verifyPhoneNumber(y,E)}unwrap(){return this._delegate}}Bs.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,Bs.PROVIDER_ID=Ao.PROVIDER_ID;const Xc=Q;class Qc{constructor(y,E,M=J.Z.app()){var Y;Xc(null===(Y=M.options)||void 0===Y?void 0:Y.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new sl(y,E,M.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ya(D){D.INTERNAL.registerComponent(new me.wA("auth-compat",y=>{const E=y.getProvider("app-compat").getImmediate(),M=y.getProvider("auth");return new vu(E,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:de_EMAIL_SIGNIN,PASSWORD_RESET:de_PASSWORD_RESET,RECOVER_EMAIL:de_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:de_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:de_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:de_VERIFY_EMAIL}},EmailAuthProvider:Qo,FacebookAuthProvider:Eo,GithubAuthProvider:da,GoogleAuthProvider:Ro,OAuthProvider:xs,SAMLAuthProvider:zi,PhoneAuthProvider:Bs,PhoneMultiFactorGenerator:oh,RecaptchaVerifier:Qc,TwitterAuthProvider:Io,Auth:vu,AuthCredential:$r,Error:H.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.2.18")}(J.Z)},1135:(un,yt,V)=>{"use strict";V.d(yt,{X:()=>J});var u=V(7579);class J extends u.x{constructor(xe){super(),this._value=xe}get value(){return this.getValue()}_subscribe(xe){const Re=super._subscribe(xe);return!Re.closed&&xe.next(this._value),Re}getValue(){const{hasError:xe,thrownError:Re,_value:Pe}=this;if(xe)throw Re;return this._throwIfClosed(),Pe}next(xe){super.next(this._value=xe)}}},9751:(un,yt,V)=>{"use strict";V.d(yt,{y:()=>Te});var u=V(930),J=V(727),H=V(8822),xe=V(9635),Re=V(2416),Pe=V(576),me=V(2806);let Te=(()=>{class de{constructor(je){je&&(this._subscribe=je)}lift(je){const it=new de;return it.source=this,it.operator=je,it}subscribe(je,it,bt){const Ce=function ce(de){return de&&de instanceof u.Lv||function _e(de){return de&&(0,Pe.m)(de.next)&&(0,Pe.m)(de.error)&&(0,Pe.m)(de.complete)}(de)&&(0,J.Nn)(de)}(je)?je:new u.Hp(je,it,bt);return(0,me.x)(()=>{const{operator:ve,source:ae}=this;Ce.add(ve?ve.call(Ce,ae):ae?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(je){try{return this._subscribe(je)}catch(it){je.error(it)}}forEach(je,it){return new(it=Ve(it))((bt,Ce)=>{const ve=new u.Hp({next:ae=>{try{je(ae)}catch(lt){Ce(lt),ve.unsubscribe()}},error:Ce,complete:bt});this.subscribe(ve)})}_subscribe(je){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(je)}[H.L](){return this}pipe(...je){return(0,xe.U)(je)(this)}toPromise(je){return new(je=Ve(je))((it,bt)=>{let Ce;this.subscribe(ve=>Ce=ve,ve=>bt(ve),()=>it(Ce))})}}return de.create=Ae=>new de(Ae),de})();function Ve(de){var Ae;return null!==(Ae=null!=de?de:Re.v.Promise)&&void 0!==Ae?Ae:Promise}},7579:(un,yt,V)=>{"use strict";V.d(yt,{x:()=>me});var u=V(9751),J=V(727);const xe=(0,V(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=V(8737),Pe=V(2806);let me=(()=>{class Ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ce){const de=new Te(this,this);return de.operator=ce,de}_throwIfClosed(){if(this.closed)throw new xe}next(ce){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(ce)}})}error(ce){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ce;const{observers:de}=this;for(;de.length;)de.shift().error(ce)}})}complete(){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ce}=this;for(;ce.length;)ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ce;return(null===(ce=this.observers)||void 0===ce?void 0:ce.length)>0}_trySubscribe(ce){return this._throwIfClosed(),super._trySubscribe(ce)}_subscribe(ce){return this._throwIfClosed(),this._checkFinalizedStatuses(ce),this._innerSubscribe(ce)}_innerSubscribe(ce){const{hasError:de,isStopped:Ae,observers:je}=this;return de||Ae?J.Lc:(this.currentObservers=null,je.push(ce),new J.w0(()=>{this.currentObservers=null,(0,Re.P)(je,ce)}))}_checkFinalizedStatuses(ce){const{hasError:de,thrownError:Ae,isStopped:je}=this;de?ce.error(Ae):je&&ce.complete()}asObservable(){const ce=new u.y;return ce.source=this,ce}}return Ve.create=(_e,ce)=>new Te(_e,ce),Ve})();class Te extends me{constructor(_e,ce){super(),this.destination=_e,this.source=ce}next(_e){var ce,de;null===(de=null===(ce=this.destination)||void 0===ce?void 0:ce.next)||void 0===de||de.call(ce,_e)}error(_e){var ce,de;null===(de=null===(ce=this.destination)||void 0===ce?void 0:ce.error)||void 0===de||de.call(ce,_e)}complete(){var _e,ce;null===(ce=null===(_e=this.destination)||void 0===_e?void 0:_e.complete)||void 0===ce||ce.call(_e)}_subscribe(_e){var ce,de;return null!==(de=null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(_e))&&void 0!==de?de:J.Lc}}},930:(un,yt,V)=>{"use strict";V.d(yt,{Hp:()=>bt,Lv:()=>de});var u=V(576),J=V(727),H=V(2416),xe=V(7849),Re=V(5032);const Pe=Ve("C",void 0,void 0);function Ve(at,Ye,G){return{kind:at,value:Ye,error:G}}var _e=V(3410),ce=V(2806);class de extends J.w0{constructor(Ye){super(),this.isStopped=!1,Ye?(this.destination=Ye,(0,J.Nn)(Ye)&&Ye.add(this)):this.destination=lt}static create(Ye,G,Me){return new bt(Ye,G,Me)}next(Ye){this.isStopped?ae(function Te(at){return Ve("N",at,void 0)}(Ye),this):this._next(Ye)}error(Ye){this.isStopped?ae(function me(at){return Ve("E",void 0,at)}(Ye),this):(this.isStopped=!0,this._error(Ye))}complete(){this.isStopped?ae(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ye){this.destination.next(Ye)}_error(Ye){try{this.destination.error(Ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ae=Function.prototype.bind;function je(at,Ye){return Ae.call(at,Ye)}class it{constructor(Ye){this.partialObserver=Ye}next(Ye){const{partialObserver:G}=this;if(G.next)try{G.next(Ye)}catch(Me){Ce(Me)}}error(Ye){const{partialObserver:G}=this;if(G.error)try{G.error(Ye)}catch(Me){Ce(Me)}else Ce(Ye)}complete(){const{partialObserver:Ye}=this;if(Ye.complete)try{Ye.complete()}catch(G){Ce(G)}}}class bt extends de{constructor(Ye,G,Me){let Ne;if(super(),(0,u.m)(Ye)||!Ye)Ne={next:null!=Ye?Ye:void 0,error:null!=G?G:void 0,complete:null!=Me?Me:void 0};else{let Q;this&&H.v.useDeprecatedNextContext?(Q=Object.create(Ye),Q.unsubscribe=()=>this.unsubscribe(),Ne={next:Ye.next&&je(Ye.next,Q),error:Ye.error&&je(Ye.error,Q),complete:Ye.complete&&je(Ye.complete,Q)}):Ne=Ye}this.destination=new it(Ne)}}function Ce(at){H.v.useDeprecatedSynchronousErrorHandling?(0,ce.O)(at):(0,xe.h)(at)}function ae(at,Ye){const{onStoppedNotification:G}=H.v;G&&_e.z.setTimeout(()=>G(at,Ye))}const lt={closed:!0,next:Re.Z,error:function ve(at){throw at},complete:Re.Z}},727:(un,yt,V)=>{"use strict";V.d(yt,{Lc:()=>Pe,w0:()=>Re,Nn:()=>me});var u=V(576);const H=(0,V(3888).d)(Ve=>function(ce){Ve(this),this.message=ce?`${ce.length} errors occurred during unsubscription:\n${ce.map((de,Ae)=>`${Ae+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ce});var xe=V(8737);class Re{constructor(_e){this.initialTeardown=_e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _e;if(!this.closed){this.closed=!0;const{_parentage:ce}=this;if(ce)if(this._parentage=null,Array.isArray(ce))for(const je of ce)je.remove(this);else ce.remove(this);const{initialTeardown:de}=this;if((0,u.m)(de))try{de()}catch(je){_e=je instanceof H?je.errors:[je]}const{_finalizers:Ae}=this;if(Ae){this._finalizers=null;for(const je of Ae)try{Te(je)}catch(it){_e=null!=_e?_e:[],it instanceof H?_e=[..._e,...it.errors]:_e.push(it)}}if(_e)throw new H(_e)}}add(_e){var ce;if(_e&&_e!==this)if(this.closed)Te(_e);else{if(_e instanceof Re){if(_e.closed||_e._hasParent(this))return;_e._addParent(this)}(this._finalizers=null!==(ce=this._finalizers)&&void 0!==ce?ce:[]).push(_e)}}_hasParent(_e){const{_parentage:ce}=this;return ce===_e||Array.isArray(ce)&&ce.includes(_e)}_addParent(_e){const{_parentage:ce}=this;this._parentage=Array.isArray(ce)?(ce.push(_e),ce):ce?[ce,_e]:_e}_removeParent(_e){const{_parentage:ce}=this;ce===_e?this._parentage=null:Array.isArray(ce)&&(0,xe.P)(ce,_e)}remove(_e){const{_finalizers:ce}=this;ce&&(0,xe.P)(ce,_e),_e instanceof Re&&_e._removeParent(this)}}Re.EMPTY=(()=>{const Ve=new Re;return Ve.closed=!0,Ve})();const Pe=Re.EMPTY;function me(Ve){return Ve instanceof Re||Ve&&"closed"in Ve&&(0,u.m)(Ve.remove)&&(0,u.m)(Ve.add)&&(0,u.m)(Ve.unsubscribe)}function Te(Ve){(0,u.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(un,yt,V)=>{"use strict";V.d(yt,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(un,yt,V)=>{"use strict";V.d(yt,{z:()=>Re});var u=V(8189),H=V(7669),xe=V(8996);function Re(...Pe){return function J(){return(0,u.J)(1)}()((0,xe.D)(Pe,(0,H.yG)(Pe)))}},515:(un,yt,V)=>{"use strict";V.d(yt,{E:()=>J});const J=new(V(9751).y)(Re=>Re.complete())},8996:(un,yt,V)=>{"use strict";V.d(yt,{D:()=>Ye});var u=V(8421),J=V(5363),H=V(9468),Pe=V(9751),Te=V(2202),Ve=V(576),_e=V(9672);function de(G,Me){if(!G)throw new Error("Iterable cannot be null");return new Pe.y(Ne=>{(0,_e.f)(Ne,Me,()=>{const Q=G[Symbol.asyncIterator]();(0,_e.f)(Ne,Me,()=>{Q.next().then(tt=>{tt.done?Ne.complete():Ne.next(tt.value)})},0,!0)})})}var Ae=V(3670),je=V(8239),it=V(1144),bt=V(6495),Ce=V(2206),ve=V(4532),ae=V(3260);function Ye(G,Me){return Me?function at(G,Me){if(null!=G){if((0,Ae.c)(G))return function xe(G,Me){return(0,u.Xf)(G).pipe((0,H.R)(Me),(0,J.Q)(Me))}(G,Me);if((0,it.z)(G))return function me(G,Me){return new Pe.y(Ne=>{let Q=0;return Me.schedule(function(){Q===G.length?Ne.complete():(Ne.next(G[Q++]),Ne.closed||this.schedule())})})}(G,Me);if((0,je.t)(G))return function Re(G,Me){return(0,u.Xf)(G).pipe((0,H.R)(Me),(0,J.Q)(Me))}(G,Me);if((0,Ce.D)(G))return de(G,Me);if((0,bt.T)(G))return function ce(G,Me){return new Pe.y(Ne=>{let Q;return(0,_e.f)(Ne,Me,()=>{Q=G[Te.h](),(0,_e.f)(Ne,Me,()=>{let tt,Le;try{({value:tt,done:Le}=Q.next())}catch(ke){return void Ne.error(ke)}Le?Ne.complete():Ne.next(tt)},0,!0)}),()=>(0,Ve.m)(null==Q?void 0:Q.return)&&Q.return()})}(G,Me);if((0,ae.L)(G))return function lt(G,Me){return de((0,ae.Q)(G),Me)}(G,Me)}throw(0,ve.z)(G)}(G,Me):(0,u.Xf)(G)}},8421:(un,yt,V)=>{"use strict";V.d(yt,{Xf:()=>Ae});var u=V(655),J=V(1144),H=V(8239),xe=V(9751),Re=V(3670),Pe=V(2206),me=V(4532),Te=V(6495),Ve=V(3260),_e=V(576),ce=V(7849),de=V(8822);function Ae(at){if(at instanceof xe.y)return at;if(null!=at){if((0,Re.c)(at))return function je(at){return new xe.y(Ye=>{const G=at[de.L]();if((0,_e.m)(G.subscribe))return G.subscribe(Ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(at);if((0,J.z)(at))return function it(at){return new xe.y(Ye=>{for(let G=0;G<at.length&&!Ye.closed;G++)Ye.next(at[G]);Ye.complete()})}(at);if((0,H.t)(at))return function bt(at){return new xe.y(Ye=>{at.then(G=>{Ye.closed||(Ye.next(G),Ye.complete())},G=>Ye.error(G)).then(null,ce.h)})}(at);if((0,Pe.D)(at))return ve(at);if((0,Te.T)(at))return function Ce(at){return new xe.y(Ye=>{for(const G of at)if(Ye.next(G),Ye.closed)return;Ye.complete()})}(at);if((0,Ve.L)(at))return function ae(at){return ve((0,Ve.Q)(at))}(at)}throw(0,me.z)(at)}function ve(at){return new xe.y(Ye=>{(function lt(at,Ye){var G,Me,Ne,Q;return(0,u.mG)(this,void 0,void 0,function*(){try{for(G=(0,u.KL)(at);!(Me=yield G.next()).done;)if(Ye.next(Me.value),Ye.closed)return}catch(tt){Ne={error:tt}}finally{try{Me&&!Me.done&&(Q=G.return)&&(yield Q.call(G))}finally{if(Ne)throw Ne.error}}Ye.complete()})})(at,Ye).catch(G=>Ye.error(G))})}},6451:(un,yt,V)=>{"use strict";V.d(yt,{T:()=>Pe});var u=V(8189),J=V(8421),H=V(515),xe=V(7669),Re=V(8996);function Pe(...me){const Te=(0,xe.yG)(me),Ve=(0,xe._6)(me,1/0),_e=me;return _e.length?1===_e.length?(0,J.Xf)(_e[0]):(0,u.J)(Ve)((0,Re.D)(_e,Te)):H.E}},9646:(un,yt,V)=>{"use strict";V.d(yt,{of:()=>H});var u=V(7669),J=V(8996);function H(...xe){const Re=(0,u.yG)(xe);return(0,J.D)(xe,Re)}},5403:(un,yt,V)=>{"use strict";V.d(yt,{x:()=>J});var u=V(930);function J(xe,Re,Pe,me,Te){return new H(xe,Re,Pe,me,Te)}class H extends u.Lv{constructor(Re,Pe,me,Te,Ve,_e){super(Re),this.onFinalize=Ve,this.shouldUnsubscribe=_e,this._next=Pe?function(ce){try{Pe(ce)}catch(de){Re.error(de)}}:super._next,this._error=Te?function(ce){try{Te(ce)}catch(de){Re.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(ce){Re.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(Re=this.onFinalize)||void 0===Re||Re.call(this))}}}},6590:(un,yt,V)=>{"use strict";V.d(yt,{d:()=>H});var u=V(4482),J=V(5403);function H(xe){return(0,u.e)((Re,Pe)=>{let me=!1;Re.subscribe((0,J.x)(Pe,Te=>{me=!0,Pe.next(Te)},()=>{me||Pe.next(xe),Pe.complete()}))})}},1884:(un,yt,V)=>{"use strict";V.d(yt,{x:()=>xe});var u=V(4671),J=V(4482),H=V(5403);function xe(Pe,me=u.y){return Pe=null!=Pe?Pe:Re,(0,J.e)((Te,Ve)=>{let _e,ce=!0;Te.subscribe((0,H.x)(Ve,de=>{const Ae=me(de);(ce||!Pe(_e,Ae))&&(ce=!1,_e=Ae,Ve.next(de))}))})}function Re(Pe,me){return Pe===me}},9300:(un,yt,V)=>{"use strict";V.d(yt,{h:()=>H});var u=V(4482),J=V(5403);function H(xe,Re){return(0,u.e)((Pe,me)=>{let Te=0;Pe.subscribe((0,J.x)(me,Ve=>xe.call(Re,Ve,Te++)&&me.next(Ve)))})}},590:(un,yt,V)=>{"use strict";V.d(yt,{P:()=>me});var u=V(6805),J=V(9300),H=V(5698),xe=V(6590),Re=V(8068),Pe=V(4671);function me(Te,Ve){const _e=arguments.length>=2;return ce=>ce.pipe(Te?(0,J.h)((de,Ae)=>Te(de,Ae,ce)):Pe.y,(0,H.q)(1),_e?(0,xe.d)(Ve):(0,Re.T)(()=>new u.K))}},4004:(un,yt,V)=>{"use strict";V.d(yt,{U:()=>H});var u=V(4482),J=V(5403);function H(xe,Re){return(0,u.e)((Pe,me)=>{let Te=0;Pe.subscribe((0,J.x)(me,Ve=>{me.next(xe.call(Re,Ve,Te++))}))})}},8189:(un,yt,V)=>{"use strict";V.d(yt,{J:()=>H});var u=V(5577),J=V(4671);function H(xe=1/0){return(0,u.z)(J.y,xe)}},5577:(un,yt,V)=>{"use strict";V.d(yt,{z:()=>Te});var u=V(4004),J=V(8421),H=V(4482),xe=V(9672),Re=V(5403),me=V(576);function Te(Ve,_e,ce=1/0){return(0,me.m)(_e)?Te((de,Ae)=>(0,u.U)((je,it)=>_e(de,je,Ae,it))((0,J.Xf)(Ve(de,Ae))),ce):("number"==typeof _e&&(ce=_e),(0,H.e)((de,Ae)=>function Pe(Ve,_e,ce,de,Ae,je,it,bt){const Ce=[];let ve=0,ae=0,lt=!1;const at=()=>{lt&&!Ce.length&&!ve&&_e.complete()},Ye=Me=>ve<de?G(Me):Ce.push(Me),G=Me=>{je&&_e.next(Me),ve++;let Ne=!1;(0,J.Xf)(ce(Me,ae++)).subscribe((0,Re.x)(_e,Q=>{null==Ae||Ae(Q),je?Ye(Q):_e.next(Q)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(ve--;Ce.length&&ve<de;){const Q=Ce.shift();it?(0,xe.f)(_e,it,()=>G(Q)):G(Q)}at()}catch(Q){_e.error(Q)}}))};return Ve.subscribe((0,Re.x)(_e,Ye,()=>{lt=!0,at()})),()=>{null==bt||bt()}}(de,Ae,Ve,ce)))}},5363:(un,yt,V)=>{"use strict";V.d(yt,{Q:()=>xe});var u=V(9672),J=V(4482),H=V(5403);function xe(Re,Pe=0){return(0,J.e)((me,Te)=>{me.subscribe((0,H.x)(Te,Ve=>(0,u.f)(Te,Re,()=>Te.next(Ve),Pe),()=>(0,u.f)(Te,Re,()=>Te.complete(),Pe),Ve=>(0,u.f)(Te,Re,()=>Te.error(Ve),Pe)))})}},5026:(un,yt,V)=>{"use strict";V.d(yt,{R:()=>xe});var u=V(4482),J=V(5403);function xe(Re,Pe){return(0,u.e)(function H(Re,Pe,me,Te,Ve){return(_e,ce)=>{let de=me,Ae=Pe,je=0;_e.subscribe((0,J.x)(ce,it=>{const bt=je++;Ae=de?Re(Ae,it,bt):(de=!0,it),Te&&ce.next(Ae)},Ve&&(()=>{de&&ce.next(Ae),ce.complete()})))}}(Re,Pe,arguments.length>=2,!0))}},3099:(un,yt,V)=>{"use strict";V.d(yt,{B:()=>Re});var u=V(8421),J=V(7579),H=V(930),xe=V(4482);function Re(me={}){const{connector:Te=(()=>new J.x),resetOnError:Ve=!0,resetOnComplete:_e=!0,resetOnRefCountZero:ce=!0}=me;return de=>{let Ae,je,it,bt=0,Ce=!1,ve=!1;const ae=()=>{null==je||je.unsubscribe(),je=void 0},lt=()=>{ae(),Ae=it=void 0,Ce=ve=!1},at=()=>{const Ye=Ae;lt(),null==Ye||Ye.unsubscribe()};return(0,xe.e)((Ye,G)=>{bt++,!ve&&!Ce&&ae();const Me=it=null!=it?it:Te();G.add(()=>{bt--,0===bt&&!ve&&!Ce&&(je=Pe(at,ce))}),Me.subscribe(G),!Ae&&bt>0&&(Ae=new H.Hp({next:Ne=>Me.next(Ne),error:Ne=>{ve=!0,ae(),je=Pe(lt,Ve,Ne),Me.error(Ne)},complete:()=>{Ce=!0,ae(),je=Pe(lt,_e),Me.complete()}}),(0,u.Xf)(Ye).subscribe(Ae))})(de)}}function Pe(me,Te,...Ve){if(!0===Te)return void me();if(!1===Te)return;const _e=new H.Hp({next:()=>{_e.unsubscribe(),me()}});return Te(...Ve).subscribe(_e)}},8675:(un,yt,V)=>{"use strict";V.d(yt,{O:()=>xe});var u=V(7272),J=V(7669),H=V(4482);function xe(...Re){const Pe=(0,J.yG)(Re);return(0,H.e)((me,Te)=>{(Pe?(0,u.z)(Re,me,Pe):(0,u.z)(Re,me)).subscribe(Te)})}},9468:(un,yt,V)=>{"use strict";V.d(yt,{R:()=>J});var u=V(4482);function J(H,xe=0){return(0,u.e)((Re,Pe)=>{Pe.add(H.schedule(()=>Re.subscribe(Pe),xe))})}},3900:(un,yt,V)=>{"use strict";V.d(yt,{w:()=>xe});var u=V(8421),J=V(4482),H=V(5403);function xe(Re,Pe){return(0,J.e)((me,Te)=>{let Ve=null,_e=0,ce=!1;const de=()=>ce&&!Ve&&Te.complete();me.subscribe((0,H.x)(Te,Ae=>{null==Ve||Ve.unsubscribe();let je=0;const it=_e++;(0,u.Xf)(Re(Ae,it)).subscribe(Ve=(0,H.x)(Te,bt=>Te.next(Pe?Pe(Ae,bt,it,je++):bt),()=>{Ve=null,de()}))},()=>{ce=!0,de()}))})}},5698:(un,yt,V)=>{"use strict";V.d(yt,{q:()=>xe});var u=V(515),J=V(4482),H=V(5403);function xe(Re){return Re<=0?()=>u.E:(0,J.e)((Pe,me)=>{let Te=0;Pe.subscribe((0,H.x)(me,Ve=>{++Te<=Re&&(me.next(Ve),Re<=Te&&me.complete())}))})}},8505:(un,yt,V)=>{"use strict";V.d(yt,{b:()=>Re});var u=V(576),J=V(4482),H=V(5403),xe=V(4671);function Re(Pe,me,Te){const Ve=(0,u.m)(Pe)||me||Te?{next:Pe,error:me,complete:Te}:Pe;return Ve?(0,J.e)((_e,ce)=>{var de;null===(de=Ve.subscribe)||void 0===de||de.call(Ve);let Ae=!0;_e.subscribe((0,H.x)(ce,je=>{var it;null===(it=Ve.next)||void 0===it||it.call(Ve,je),ce.next(je)},()=>{var je;Ae=!1,null===(je=Ve.complete)||void 0===je||je.call(Ve),ce.complete()},je=>{var it;Ae=!1,null===(it=Ve.error)||void 0===it||it.call(Ve,je),ce.error(je)},()=>{var je,it;Ae&&(null===(je=Ve.unsubscribe)||void 0===je||je.call(Ve)),null===(it=Ve.finalize)||void 0===it||it.call(Ve)}))}):xe.y}},8068:(un,yt,V)=>{"use strict";V.d(yt,{T:()=>xe});var u=V(6805),J=V(4482),H=V(5403);function xe(Pe=Re){return(0,J.e)((me,Te)=>{let Ve=!1;me.subscribe((0,H.x)(Te,_e=>{Ve=!0,Te.next(_e)},()=>Ve?Te.complete():Te.error(Pe())))})}function Re(){return new u.K}},4408:(un,yt,V)=>{"use strict";V.d(yt,{o:()=>Re});var u=V(727);class J extends u.w0{constructor(me,Te){super()}schedule(me,Te=0){return this}}const H={setInterval(Pe,me,...Te){const{delegate:Ve}=H;return null!=Ve&&Ve.setInterval?Ve.setInterval(Pe,me,...Te):setInterval(Pe,me,...Te)},clearInterval(Pe){const{delegate:me}=H;return((null==me?void 0:me.clearInterval)||clearInterval)(Pe)},delegate:void 0};var xe=V(8737);class Re extends J{constructor(me,Te){super(me,Te),this.scheduler=me,this.work=Te,this.pending=!1}schedule(me,Te=0){var Ve;if(this.closed)return this;this.state=me;const _e=this.id,ce=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(ce,_e,Te)),this.pending=!0,this.delay=Te,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(ce,this.id,Te),this}requestAsyncId(me,Te,Ve=0){return H.setInterval(me.flush.bind(me,this),Ve)}recycleAsyncId(me,Te,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Te;null!=Te&&H.clearInterval(Te)}execute(me,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(me,Te);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Te){let _e,Ve=!1;try{this.work(me)}catch(ce){Ve=!0,_e=ce||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),_e}unsubscribe(){if(!this.closed){const{id:me,scheduler:Te}=this,{actions:Ve}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,xe.P)(Ve,this),null!=me&&(this.id=this.recycleAsyncId(Te,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(un,yt,V)=>{"use strict";V.d(yt,{v:()=>H});var u=V(6063);class J{constructor(Re,Pe=J.now){this.schedulerActionCtor=Re,this.now=Pe}schedule(Re,Pe=0,me){return new this.schedulerActionCtor(this,Re).schedule(me,Pe)}}J.now=u.l.now;class H extends J{constructor(Re,Pe=J.now){super(Re,Pe),this.actions=[],this._active=!1}flush(Re){const{actions:Pe}=this;if(this._active)return void Pe.push(Re);let me;this._active=!0;do{if(me=Re.execute(Re.state,Re.delay))break}while(Re=Pe.shift());if(this._active=!1,me){for(;Re=Pe.shift();)Re.unsubscribe();throw me}}}},4986:(un,yt,V)=>{"use strict";V.d(yt,{z:()=>H});var u=V(4408);const H=new(V(7565).v)(u.o)},6063:(un,yt,V)=>{"use strict";V.d(yt,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(un,yt,V)=>{"use strict";V.d(yt,{z:()=>u});const u={setTimeout(J,H,...xe){const{delegate:Re}=u;return null!=Re&&Re.setTimeout?Re.setTimeout(J,H,...xe):setTimeout(J,H,...xe)},clearTimeout(J){const{delegate:H}=u;return((null==H?void 0:H.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(un,yt,V)=>{"use strict";V.d(yt,{h:()=>J});const J=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(un,yt,V)=>{"use strict";V.d(yt,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(un,yt,V)=>{"use strict";V.d(yt,{K:()=>J});const J=(0,V(3888).d)(H=>function(){H(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(un,yt,V)=>{"use strict";V.d(yt,{_6:()=>Pe,jO:()=>xe,yG:()=>Re});var u=V(576);function H(me){return me[me.length-1]}function xe(me){return(0,u.m)(H(me))?me.pop():void 0}function Re(me){return function J(me){return me&&(0,u.m)(me.schedule)}(H(me))?me.pop():void 0}function Pe(me,Te){return"number"==typeof H(me)?me.pop():Te}},4742:(un,yt,V)=>{"use strict";V.d(yt,{D:()=>Re});const{isArray:u}=Array,{getPrototypeOf:J,prototype:H,keys:xe}=Object;function Re(me){if(1===me.length){const Te=me[0];if(u(Te))return{args:Te,keys:null};if(function Pe(me){return me&&"object"==typeof me&&J(me)===H}(Te)){const Ve=xe(Te);return{args:Ve.map(_e=>Te[_e]),keys:Ve}}}return{args:me,keys:null}}},8737:(un,yt,V)=>{"use strict";function u(J,H){if(J){const xe=J.indexOf(H);0<=xe&&J.splice(xe,1)}}V.d(yt,{P:()=>u})},3888:(un,yt,V)=>{"use strict";function u(J){const xe=J(Re=>{Error.call(Re),Re.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}V.d(yt,{d:()=>u})},1810:(un,yt,V)=>{"use strict";function u(J,H){return J.reduce((xe,Re,Pe)=>(xe[Re]=H[Pe],xe),{})}V.d(yt,{n:()=>u})},2806:(un,yt,V)=>{"use strict";V.d(yt,{O:()=>xe,x:()=>H});var u=V(2416);let J=null;function H(Re){if(u.v.useDeprecatedSynchronousErrorHandling){const Pe=!J;if(Pe&&(J={errorThrown:!1,error:null}),Re(),Pe){const{errorThrown:me,error:Te}=J;if(J=null,me)throw Te}}else Re()}function xe(Re){u.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=Re)}},9672:(un,yt,V)=>{"use strict";function u(J,H,xe,Re=0,Pe=!1){const me=H.schedule(function(){xe(),Pe?J.add(this.schedule(null,Re)):this.unsubscribe()},Re);if(J.add(me),!Pe)return me}V.d(yt,{f:()=>u})},4671:(un,yt,V)=>{"use strict";function u(J){return J}V.d(yt,{y:()=>u})},1144:(un,yt,V)=>{"use strict";V.d(yt,{z:()=>u});const u=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(un,yt,V)=>{"use strict";V.d(yt,{D:()=>J});var u=V(576);function J(H){return Symbol.asyncIterator&&(0,u.m)(null==H?void 0:H[Symbol.asyncIterator])}},576:(un,yt,V)=>{"use strict";function u(J){return"function"==typeof J}V.d(yt,{m:()=>u})},3670:(un,yt,V)=>{"use strict";V.d(yt,{c:()=>H});var u=V(8822),J=V(576);function H(xe){return(0,J.m)(xe[u.L])}},6495:(un,yt,V)=>{"use strict";V.d(yt,{T:()=>H});var u=V(2202),J=V(576);function H(xe){return(0,J.m)(null==xe?void 0:xe[u.h])}},8239:(un,yt,V)=>{"use strict";V.d(yt,{t:()=>J});var u=V(576);function J(H){return(0,u.m)(null==H?void 0:H.then)}},3260:(un,yt,V)=>{"use strict";V.d(yt,{L:()=>xe,Q:()=>H});var u=V(655),J=V(576);function H(Re){return(0,u.FC)(this,arguments,function*(){const me=Re.getReader();try{for(;;){const{value:Te,done:Ve}=yield(0,u.qq)(me.read());if(Ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Te)}}finally{me.releaseLock()}})}function xe(Re){return(0,J.m)(null==Re?void 0:Re.getReader)}},4482:(un,yt,V)=>{"use strict";V.d(yt,{A:()=>J,e:()=>H});var u=V(576);function J(xe){return(0,u.m)(null==xe?void 0:xe.lift)}function H(xe){return Re=>{if(J(Re))return Re.lift(function(Pe){try{return xe(Pe,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(un,yt,V)=>{"use strict";V.d(yt,{Z:()=>xe});var u=V(4004);const{isArray:J}=Array;function xe(Re){return(0,u.U)(Pe=>function H(Re,Pe){return J(Pe)?Re(...Pe):Re(Pe)}(Re,Pe))}},5032:(un,yt,V)=>{"use strict";function u(){}V.d(yt,{Z:()=>u})},9635:(un,yt,V)=>{"use strict";V.d(yt,{U:()=>H,z:()=>J});var u=V(4671);function J(...xe){return H(xe)}function H(xe){return 0===xe.length?u.y:1===xe.length?xe[0]:function(Pe){return xe.reduce((me,Te)=>Te(me),Pe)}}},7849:(un,yt,V)=>{"use strict";V.d(yt,{h:()=>H});var u=V(2416),J=V(3410);function H(xe){J.z.setTimeout(()=>{const{onUnhandledError:Re}=u.v;if(!Re)throw xe;Re(xe)})}},4532:(un,yt,V)=>{"use strict";function u(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(yt,{z:()=>u})},863:(un,yt,V)=>{var u={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7206,9230],"./ion-datetime_3.entry.js":[4959,7206,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(H){if(!V.o(u,H))return Promise.resolve().then(()=>{var Pe=new Error("Cannot find module '"+H+"'");throw Pe.code="MODULE_NOT_FOUND",Pe});var xe=u[H],Re=xe[0];return Promise.all(xe.slice(1).map(V.e)).then(()=>V(Re))}J.keys=()=>Object.keys(u),J.id=863,un.exports=J},655:(un,yt,V)=>{"use strict";function xe(We,gt){var ot={};for(var Ie in We)Object.prototype.hasOwnProperty.call(We,Ie)&&gt.indexOf(Ie)<0&&(ot[Ie]=We[Ie]);if(null!=We&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(Ie=Object.getOwnPropertySymbols(We);De<Ie.length;De++)gt.indexOf(Ie[De])<0&&Object.prototype.propertyIsEnumerable.call(We,Ie[De])&&(ot[Ie[De]]=We[Ie[De]])}return ot}function Re(We,gt,ot,Ie){var et,De=arguments.length,we=De<3?gt:null===Ie?Ie=Object.getOwnPropertyDescriptor(gt,ot):Ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)we=Reflect.decorate(We,gt,ot,Ie);else for(var He=We.length-1;He>=0;He--)(et=We[He])&&(we=(De<3?et(we):De>3?et(gt,ot,we):et(gt,ot))||we);return De>3&&we&&Object.defineProperty(gt,ot,we),we}function de(We,gt,ot,Ie){return new(ot||(ot=Promise))(function(we,et){function He(Pt){try{Ze(Ie.next(Pt))}catch(Ot){et(Ot)}}function rt(Pt){try{Ze(Ie.throw(Pt))}catch(Ot){et(Ot)}}function Ze(Pt){Pt.done?we(Pt.value):function De(we){return we instanceof ot?we:new ot(function(et){et(we)})}(Pt.value).then(He,rt)}Ze((Ie=Ie.apply(We,gt||[])).next())})}function at(We){return this instanceof at?(this.v=We,this):new at(We)}function Ye(We,gt,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,Ie=ot.apply(We,gt||[]),we=[];return De={},et("next"),et("throw"),et("return"),De[Symbol.asyncIterator]=function(){return this},De;function et(kt){Ie[kt]&&(De[kt]=function(Ct){return new Promise(function(An,bn){we.push([kt,Ct,An,bn])>1||He(kt,Ct)})})}function He(kt,Ct){try{!function rt(kt){kt.value instanceof at?Promise.resolve(kt.value.v).then(Ze,Pt):Ot(we[0][2],kt)}(Ie[kt](Ct))}catch(An){Ot(we[0][3],An)}}function Ze(kt){He("next",kt)}function Pt(kt){He("throw",kt)}function Ot(kt,Ct){kt(Ct),we.shift(),we.length&&He(we[0][0],we[0][1])}}function Me(We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,gt=We[Symbol.asyncIterator];return gt?gt.call(We):(We=function bt(We){var gt="function"==typeof Symbol&&Symbol.iterator,ot=gt&&We[gt],Ie=0;if(ot)return ot.call(We);if(We&&"number"==typeof We.length)return{next:function(){return We&&Ie>=We.length&&(We=void 0),{value:We&&We[Ie++],done:!We}}};throw new TypeError(gt?"Object is not iterable.":"Symbol.iterator is not defined.")}(We),ot={},Ie("next"),Ie("throw"),Ie("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function Ie(we){ot[we]=We[we]&&function(et){return new Promise(function(He,rt){!function De(we,et,He,rt){Promise.resolve(rt).then(function(Ze){we({value:Ze,done:He})},et)}(He,rt,(et=We[we](et)).done,et.value)})}}}V.d(yt,{FC:()=>Ye,KL:()=>Me,_T:()=>xe,gn:()=>Re,mG:()=>de,qq:()=>at})},6895:(un,yt,V)=>{"use strict";V.d(yt,{Do:()=>ae,EM:()=>Wi,HT:()=>xe,JF:()=>Xr,K0:()=>Pe,Mx:()=>ls,O5:()=>pt,PM:()=>cs,S$:()=>bt,V_:()=>Ve,Ye:()=>lt,b0:()=>ve,bD:()=>bo,ez:()=>bs,q:()=>H,sg:()=>ne,tP:()=>xr,w_:()=>Re});var u=V(4650);let J=null;function H(){return J}function xe(N){J||(J=N)}class Re{}const Pe=new u.OlP("DocumentToken");let me=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=u.Yz7({token:N,factory:function(){return function Te(){return(0,u.LFG)(_e)}()},providedIn:"platform"}),N})();const Ve=new u.OlP("Location Initialized");let _e=(()=>{class N extends me{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(B){const ie=H().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",B,!1),()=>ie.removeEventListener("popstate",B)}onHashChange(B){const ie=H().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",B,!1),()=>ie.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,ie,Ee){ce()?this._history.pushState(B,ie,Ee):this._location.hash=Ee}replaceState(B,ie,Ee){ce()?this._history.replaceState(B,ie,Ee):this._location.hash=Ee}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return N.\u0275fac=function(B){return new(B||N)(u.LFG(Pe))},N.\u0275prov=u.Yz7({token:N,factory:function(){return function de(){return new _e((0,u.LFG)(Pe))}()},providedIn:"platform"}),N})();function ce(){return!!window.history.pushState}function Ae(N,q){if(0==N.length)return q;if(0==q.length)return N;let B=0;return N.endsWith("/")&&B++,q.startsWith("/")&&B++,2==B?N+q.substring(1):1==B?N+q:N+"/"+q}function je(N){const q=N.match(/#|\?|$/),B=q&&q.index||N.length;return N.slice(0,B-("/"===N[B-1]?1:0))+N.slice(B)}function it(N){return N&&"?"!==N[0]?"?"+N:N}let bt=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=u.Yz7({token:N,factory:function(){return(0,u.f3M)(ve)},providedIn:"root"}),N})();const Ce=new u.OlP("appBaseHref");let ve=(()=>{class N extends bt{constructor(B,ie){var Ee,Et,$t;super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=null!==(Ee=null!==(Et=null!=ie?ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Et?Et:null===($t=(0,u.f3M)(Pe).location)||void 0===$t?void 0:$t.origin)&&void 0!==Ee?Ee:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return Ae(this._baseHref,B)}path(B=!1){const ie=this._platformLocation.pathname+it(this._platformLocation.search),Ee=this._platformLocation.hash;return Ee&&B?`${ie}${Ee}`:ie}pushState(B,ie,Ee,Et){const $t=this.prepareExternalUrl(Ee+it(Et));this._platformLocation.pushState(B,ie,$t)}replaceState(B,ie,Ee,Et){const $t=this.prepareExternalUrl(Ee+it(Et));this._platformLocation.replaceState(B,ie,$t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){var ie,Ee;null===(ie=(Ee=this._platformLocation).historyGo)||void 0===ie||ie.call(Ee,B)}}return N.\u0275fac=function(B){return new(B||N)(u.LFG(me),u.LFG(Ce,8))},N.\u0275prov=u.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),ae=(()=>{class N extends bt{constructor(B,ie){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(B){const ie=Ae(this._baseHref,B);return ie.length>0?"#"+ie:ie}pushState(B,ie,Ee,Et){let $t=this.prepareExternalUrl(Ee+it(Et));0==$t.length&&($t=this._platformLocation.pathname),this._platformLocation.pushState(B,ie,$t)}replaceState(B,ie,Ee,Et){let $t=this.prepareExternalUrl(Ee+it(Et));0==$t.length&&($t=this._platformLocation.pathname),this._platformLocation.replaceState(B,ie,$t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){var ie,Ee;null===(ie=(Ee=this._platformLocation).historyGo)||void 0===ie||ie.call(Ee,B)}}return N.\u0275fac=function(B){return new(B||N)(u.LFG(me),u.LFG(Ce,8))},N.\u0275prov=u.Yz7({token:N,factory:N.\u0275fac}),N})(),lt=(()=>{class N{constructor(B){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const ie=this._locationStrategy.getBaseHref();this._basePath=function Me(N){if(new RegExp("^(https?:)?//").test(N)){const[,B]=N.split(/\/\/[^\/]+/);return B}return N}(je(G(ie))),this._locationStrategy.onPopState(Ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ee.state,type:Ee.type})})}ngOnDestroy(){var B;null===(B=this._urlChangeSubscription)||void 0===B||B.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,ie=""){return this.path()==this.normalize(B+it(ie))}normalize(B){return N.stripTrailingSlash(function Ye(N,q){if(!N||!q.startsWith(N))return q;const B=q.substring(N.length);return""===B||["/",";","?","#"].includes(B[0])?B:q}(this._basePath,G(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,ie="",Ee=null){this._locationStrategy.pushState(Ee,"",B,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+it(ie)),Ee)}replaceState(B,ie="",Ee=null){this._locationStrategy.replaceState(Ee,"",B,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+it(ie)),Ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){var ie,Ee;null===(ie=(Ee=this._locationStrategy).historyGo)||void 0===ie||ie.call(Ee,B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(B);var Ee;this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(null===(Ee=this._urlChangeSubscription)||void 0===Ee||Ee.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",ie){this._urlChangeListeners.forEach(Ee=>Ee(B,ie))}subscribe(B,ie,Ee){return this._subject.subscribe({next:B,error:ie,complete:Ee})}}return N.normalizeQueryParams=it,N.joinWithSlash=Ae,N.stripTrailingSlash=je,N.\u0275fac=function(B){return new(B||N)(u.LFG(bt))},N.\u0275prov=u.Yz7({token:N,factory:function(){return function at(){return new lt((0,u.LFG)(bt))}()},providedIn:"root"}),N})();function G(N){return N.replace(/\/index.html$/,"")}function ls(N,q){q=encodeURIComponent(q);for(const B of N.split(";")){const ie=B.indexOf("="),[Ee,Et]=-1==ie?[B,""]:[B.slice(0,ie),B.slice(ie+1)];if(Ee.trim()===q)return decodeURIComponent(Et)}return null}class ki{constructor(q,B,ie,Ee){this.$implicit=q,this.ngForOf=B,this.index=ie,this.count=Ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ne=(()=>{class N{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,ie,Ee){this._viewContainer=B,this._template=ie,this._differs=Ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const ie=this._viewContainer;B.forEachOperation((Ee,Et,$t)=>{if(null==Ee.previousIndex)ie.createEmbeddedView(this._template,new ki(Ee.item,this._ngForOf,-1,-1),null===$t?void 0:$t);else if(null==$t)ie.remove(null===Et?void 0:Et);else if(null!==Et){const Pn=ie.get(Et);ie.move(Pn,$t),he(Pn,Ee)}});for(let Ee=0,Et=ie.length;Ee<Et;Ee++){const Pn=ie.get(Ee).context;Pn.index=Ee,Pn.count=Et,Pn.ngForOf=this._ngForOf}B.forEachIdentityChange(Ee=>{he(ie.get(Ee.currentIndex),Ee)})}static ngTemplateContextGuard(B,ie){return!0}}return N.\u0275fac=function(B){return new(B||N)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},N.\u0275dir=u.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function he(N,q){N.context.$implicit=q.item}let pt=(()=>{class N{constructor(B,ie){this._viewContainer=B,this._context=new Mt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){le("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){le("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,ie){return!0}}return N.\u0275fac=function(B){return new(B||N)(u.Y36(u.s_b),u.Y36(u.Rgc))},N.\u0275dir=u.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Mt{constructor(){this.$implicit=null,this.ngIf=null}}function le(N,q){if(q&&!q.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,u.AaK)(q)}'.`)}let xr=(()=>{class N{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const ie=this._viewContainerRef;if(this._viewRef&&ie.remove(ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ee,ngTemplateOutletContext:Et,ngTemplateOutletInjector:$t}=this;this._viewRef=ie.createEmbeddedView(Ee,Et,$t?{injector:$t}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return N.\u0275fac=function(B){return new(B||N)(u.Y36(u.s_b))},N.\u0275dir=u.lG2({type:N,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),N})(),bs=(()=>{class N{}return N.\u0275fac=function(B){return new(B||N)},N.\u0275mod=u.oAB({type:N}),N.\u0275inj=u.cJS({}),N})();const bo="browser",ps="server";function cs(N){return N===ps}let Wi=(()=>{class N{}return N.\u0275prov=(0,u.Yz7)({token:N,providedIn:"root",factory:()=>new ds((0,u.LFG)(Pe),window)}),N})();class ds{constructor(q,B){this.document=q,this.window=B,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const B=function ms(N,q){const B=N.getElementById(q)||N.getElementsByName(q)[0];if(B)return B;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const ie=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let Ee=ie.currentNode;for(;Ee;){const Et=Ee.shadowRoot;if(Et){const $t=Et.getElementById(q)||Et.querySelector(`[name="${q}"]`);if($t)return $t}Ee=ie.nextNode()}}return null}(this.document,q);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=q)}}scrollToElement(q){const B=q.getBoundingClientRect(),ie=B.left+this.window.pageXOffset,Ee=B.top+this.window.pageYOffset,Et=this.offset();this.window.scrollTo(ie-Et[0],Ee-Et[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=ks(this.window.history)||ks(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function ks(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Xr{}},4650:(un,yt,V)=>{"use strict";V.d(yt,{$8M:()=>Oa,$WT:()=>ii,$Z:()=>qd,AFp:()=>K0,AaK:()=>Te,CRH:()=>S0,CZH:()=>Dv,CqO:()=>Cy,D6c:()=>TI,EJc:()=>jw,F$t:()=>Um,F4k:()=>by,FYo:()=>ml,FiY:()=>F,G48:()=>uI,Gf:()=>C0,GfV:()=>yp,GkF:()=>Wg,Gpc:()=>ce,Hsn:()=>Gf,JOm:()=>cl,LFG:()=>Se,Lbi:()=>$w,Lck:()=>PE,MMx:()=>g_,NdJ:()=>qg,OlP:()=>gi,P3R:()=>rf,PXZ:()=>rI,Q6J:()=>Hg,QGY:()=>Bm,Qsj:()=>Na,R0b:()=>Bc,RDi:()=>Bs,Rgc:()=>hy,SBq:()=>Qu,Sil:()=>Gw,Suo:()=>D0,TTD:()=>Wi,TgZ:()=>Hf,VKq:()=>h0,X6Q:()=>lI,XFs:()=>qt,Xpm:()=>di,Xts:()=>fh,Y36:()=>cd,YKP:()=>n0,YNc:()=>jg,Yjl:()=>fi,Yz7:()=>Ot,Z0I:()=>bn,ZZ4:()=>U_,_Bn:()=>t0,_UZ:()=>Fm,_Vd:()=>Ko,_c5:()=>DI,_uU:()=>Fc,aQg:()=>j_,c2e:()=>Vw,cJS:()=>Ct,cg1:()=>ig,dDg:()=>Jw,dqk:()=>wn,eFA:()=>aE,eJc:()=>D_,ekj:()=>qf,eoX:()=>rE,f3M:()=>Ue,g9A:()=>Z0,h0i:()=>im,hGG:()=>SI,hij:()=>oc,iGM:()=>b0,ifc:()=>Gr,ip1:()=>q0,jDz:()=>s0,kL8:()=>iv,lG2:()=>hi,lqb:()=>sd,lri:()=>tE,n5z:()=>Qr,oAB:()=>or,oxw:()=>wi,q4F:()=>Ju,qLn:()=>jd,qOj:()=>Nh,qZA:()=>Gg,rWj:()=>nE,sBO:()=>cI,s_b:()=>Iv,soG:()=>Sv,tb:()=>sE,tp0:()=>te,uIk:()=>Du,vHH:()=>Ce,vpe:()=>ih,wAp:()=>Cr,xp6:()=>Hd,z2F:()=>Tv,zSh:()=>Ku,zs3:()=>wu});var u=V(7579),J=V(727),H=V(9751),xe=V(6451),Re=V(3099);function Pe(n){for(let r in n)if(n[r]===Pe)return r;throw Error("Could not find renamed property on target object.")}function me(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Te(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Te).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ve(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const _e=Pe({__forward_ref__:Pe});function ce(n){return n.__forward_ref__=ce,n.toString=function(){return Te(this())},n}function de(n){return Ae(n)?n():n}function Ae(n){return"function"==typeof n&&n.hasOwnProperty(_e)&&n.__forward_ref__===ce}function je(n){return n&&!!n.\u0275providers}const bt="https://g.co/ng/security#xss";class Ce extends Error{constructor(r,o){super(ve(r,o)),this.code=r}}function ve(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function ae(n){return"string"==typeof n?n:null==n?"":String(n)}function Me(n,r){throw new Ce(-201,!1)}function et(n,r){null==n&&function He(n,r,o,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${o} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function Ot(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function An(n){return Cn(n,Gn)||Cn(n,Dn)}function bn(n){return null!==An(n)}function Cn(n,r){return n.hasOwnProperty(r)?n[r]:null}function gr(n){return n&&(n.hasOwnProperty(Ir)||n.hasOwnProperty(Dr))?n[Ir]:null}const Gn=Pe({\u0275prov:Pe}),Ir=Pe({\u0275inj:Pe}),Dn=Pe({ngInjectableDef:Pe}),Dr=Pe({ngInjectorDef:Pe});var qt=(()=>((qt=qt||{})[qt.Default=0]="Default",qt[qt.Host=1]="Host",qt[qt.Self=2]="Self",qt[qt.SkipSelf=4]="SkipSelf",qt[qt.Optional=8]="Optional",qt))();let Vr;function hr(n){const r=Vr;return Vr=n,r}function yi(n,r,o){const d=An(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:o&qt.Optional?null:void 0!==r?r:void Me(Te(n))}const wn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mr={},Gt="__NG_DI_FLAG__",Sr="ngTempTokenPath",oi="ngTokenPath",Gi=/\n/gm,Er="\u0275",Ii="__source";let Yn;function Oe(n){const r=Yn;return Yn=n,r}function Be(n,r=qt.Default){if(void 0===Yn)throw new Ce(-203,!1);return null===Yn?yi(n,void 0,r):Yn.get(n,r&qt.Optional?null:void 0,r)}function Se(n,r=qt.Default){return(function Or(){return Vr}()||Be)(de(n),r)}function Ue(n,r=qt.Default){return Se(n,Lt(r))}function Lt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qt(n){const r=[];for(let o=0;o<n.length;o++){const d=de(n[o]);if(Array.isArray(d)){if(0===d.length)throw new Ce(900,!1);let p,_=qt.Default;for(let T=0;T<d.length;T++){const P=d[T],L=ir(P);"number"==typeof L?-1===L?p=P.token:_|=L:p=P}r.push(Se(p,_))}else r.push(Se(d))}return r}function dn(n,r){return n[Gt]=r,n.prototype[Gt]=r,n}function ir(n){return n[Gt]}function pn(n){return{toString:n}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Gr=(()=>{return(n=Gr||(Gr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Gr;var n})();const ri={},ut=[],Je=Pe({\u0275cmp:Pe}),ge=Pe({\u0275dir:Pe}),_t=Pe({\u0275pipe:Pe}),Bt=Pe({\u0275mod:Pe}),nn=Pe({\u0275fac:Pe}),Ln=Pe({__NG_ELEMENT_ID__:Pe});let Pr=0;function di(n){return pn(()=>{const r=Kr(n),o={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Gr.Emulated,id:"c"+Pr++,styles:n.styles||ut,_:null,schemas:n.schemas||null,tView:null};ls(o);const d=n.dependencies;return o.directiveDefs=Qi(d,!1),o.pipeDefs=Qi(d,!0),o})}function bi(n){return Bn(n)||qr(n)}function Pi(n){return null!==n}function or(n){return pn(()=>({type:n.type,bootstrap:n.bootstrap||ut,declarations:n.declarations||ut,imports:n.imports||ut,exports:n.exports||ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wr(n,r){if(null==n)return ri;const o={};for(const d in n)if(n.hasOwnProperty(d)){let p=n[d],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),o[p]=d,r&&(r[p]=_)}return o}function hi(n){return pn(()=>{const r=Kr(n);return ls(r),r})}function fi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[Je]||null}function qr(n){return n[ge]||null}function Br(n){return n[_t]||null}function ii(n){const r=Bn(n)||qr(n)||Br(n);return null!==r&&r.standalone}function $r(n,r){const o=n[Bt]||null;if(!o&&!0===r)throw new Error(`Type ${Te(n)} does not have '\u0275mod' property.`);return o}function Kr(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wr(n.inputs,r),outputs:wr(n.outputs)}}function ls(n){var r;null===(r=n.features)||void 0===r||r.forEach(o=>o(n))}function Qi(n,r){if(!n)return null;const o=r?Br:bi;return()=>("function"==typeof n?n():n).map(d=>o(d)).filter(Pi)}const Ci=0,cn=1,Un=2,Ur=3,ei=4,ki=5,ne=6,he=7,qe=8,pt=9,Mt=10,le=11,Qe=12,ht=13,Dt=14,Ft=15,Kt=16,mn=17,jn=18,ar=19,xr=20,st=21,Fe=22,Ut=1,Jt=2,gn=7,qn=8,vi=9,Kn=10;function ai(n){return Array.isArray(n)&&"object"==typeof n[Ut]}function Ji(n){return Array.isArray(n)&&!0===n[Ut]}function es(n){return 0!=(4&n.flags)}function us(n){return n.componentOffset>-1}function As(n){return 1==(1&n.flags)}function xi(n){return!!n.template}function Xo(n){return 0!=(256&n[Un])}function gs(n,r){return n.hasOwnProperty(nn)?n[nn]:null}class Rs{constructor(r,o,d){this.previousValue=r,this.currentValue=o,this.firstChange=d}isFirstChange(){return this.firstChange}}function Wi(){return ds}function ds(n){return n.type.prototype.ngOnChanges&&(n.setInput=ms),ks}function ks(){const n=Xr(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===ri)n.previous=r;else for(let d in r)o[d]=r[d];n.current=null,this.ngOnChanges(r)}}function ms(n,r,o,d){const p=this.declaredInputs[o],_=Xr(n)||function uo(n,r){return n[Ns]=r}(n,{previous:ri,current:null}),T=_.current||(_.current={}),P=_.previous,L=P[p];T[p]=new Rs(L&&L.currentValue,r,P===ri),n[d]=r}Wi.ngInherit=!0;const Ns="__ngSimpleChanges__";function Xr(n){return n[Ns]||null}const yr=function(n,r,o){};function Zr(n){for(;Array.isArray(n);)n=n[Ci];return n}function Hs(n,r){return Zr(r[n])}function Mi(n,r){return Zr(r[n.index])}function Do(n,r){return n.data[r]}function Ri(n,r){const o=r[n];return ai(o)?o:o[Ci]}function Gs(n){return 64==(64&n[Un])}function Os(n,r){return null==r?null:n[r]}function ko(n){n[jn]=0}function ea(n,r){n[ki]+=r;let o=n,d=n[Ur];for(;null!==d&&(1===r&&1===o[ki]||-1===r&&0===o[ki]);)d[ki]+=r,o=d,d=d[Ur]}const er={lFrame:eo(null),bindingsEnabled:!0};function ja(){return er.bindingsEnabled}function w(){return er.lFrame.lView}function f(){return er.lFrame.tView}function ze(){let n=zt();for(;null!==n&&64===n.type;)n=n.parent;return n}function zt(){return er.lFrame.currentTNode}function Sn(n,r){const o=er.lFrame;o.currentTNode=n,o.isParent=r}function lr(){return er.lFrame.isParent}function ti(){er.lFrame.isParent=!1}function fa(){return er.lFrame.bindingIndex++}function Fo(n,r){const o=er.lFrame;o.bindingIndex=o.bindingRootIndex=n,Js(r)}function Js(n){er.lFrame.currentDirectiveIndex=n}function fo(){return er.lFrame.currentQueryIndex}function po(n){er.lFrame.currentQueryIndex=n}function ru(n){const r=n[cn];return 2===r.type?r.declTNode:1===r.type?n[ne]:null}function $i(n,r,o){if(o&qt.SkipSelf){let p=r,_=n;for(;!(p=p.parent,null!==p||o&qt.Host||(p=ru(_),null===p||(_=_[Ft],10&p.type))););if(null===p)return!1;r=p,n=_}const d=er.lFrame=iu();return d.currentTNode=r,d.lView=n,!0}function ta(n){const r=iu(),o=n[cn];er.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function iu(){const n=er.lFrame,r=null===n?null:n.child;return null===r?eo(n):r}function eo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Yi(){const n=er.lFrame;return er.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const lc=Yi;function ma(){const n=Yi();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mi(){return er.lFrame.selectedIndex}function Ds(n){er.lFrame.selectedIndex=n}function li(){const n=er.lFrame;return Do(n.tView,n.selectedIndex)}function _a(n,r){for(let o=r.directiveStart,d=r.directiveEnd;o<d;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:P,ngAfterViewInit:L,ngAfterViewChecked:K,ngOnDestroy:se}=_;T&&(n.contentHooks||(n.contentHooks=[])).push(-o,T),P&&((n.contentHooks||(n.contentHooks=[])).push(o,P),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,P)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),K&&((n.viewHooks||(n.viewHooks=[])).push(o,K),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,K)),null!=se&&(n.destroyHooks||(n.destroyHooks=[])).push(o,se)}}function wl(n,r,o){B(n,r,3,o)}function N(n,r,o,d){(3&n[Un])===o&&B(n,r,o,d)}function q(n,r){let o=n[Un];(3&o)===r&&(o&=2047,o+=1,n[Un]=o)}function B(n,r,o,d){const _=null!=d?d:-1,T=r.length-1;let P=0;for(let L=void 0!==d?65535&n[jn]:0;L<T;L++)if("number"==typeof r[L+1]){if(P=r[L],null!=d&&P>=d)break}else r[L]<0&&(n[jn]+=65536),(P<_||-1==_)&&(ie(n,o,r,L),n[jn]=(4294901760&n[jn])+L+2),L++}function ie(n,r,o,d){const p=o[d]<0,_=o[d+1],P=n[p?-o[d]:o[d]];if(p){if(n[Un]>>11<n[jn]>>16&&(3&n[Un])===r){n[Un]+=2048,yr(4,P,_);try{_.call(P)}finally{yr(5,P,_)}}}else{yr(4,P,_);try{_.call(P)}finally{yr(5,P,_)}}}const Ee=-1;class Et{constructor(r,o,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=d}}function Vi(n,r,o){let d=0;for(;d<o.length;){const p=o[d];if("number"==typeof p){if(0!==p)break;d++;const _=o[d++],T=o[d++],P=o[d++];n.setAttribute(r,T,P,_)}else{const _=p,T=o[++d];si(_)?n.setProperty(r,_,T):n.setAttribute(r,_,T),d++}}return d}function to(n){return 3===n||4===n||6===n}function si(n){return 64===n.charCodeAt(0)}function ns(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let d=0;d<r.length;d++){const p=r[d];"number"==typeof p?o=p:0===o||rs(n,o,p,null,-1===o||2===o?r[++d]:null)}}return n}function rs(n,r,o,d,p){let _=0,T=n.length;if(-1===r)T=-1;else for(;_<n.length;){const P=n[_++];if("number"==typeof P){if(P===r){T=-1;break}if(P>r){T=_-1;break}}}for(;_<n.length;){const P=n[_];if("number"==typeof P)break;if(P===o){if(null===d)return void(null!==p&&(n[_+1]=p));if(d===n[_+1])return void(n[_+2]=p)}_++,null!==d&&_++,null!==p&&_++}-1!==T&&(n.splice(T,0,r),_=T+1),n.splice(_++,0,o),null!==d&&n.splice(_++,0,d),null!==p&&n.splice(_++,0,p)}function ra(n){return n!==Ee}function Fs(n){return 32767&n}function _i(n,r){let o=function Xt(n){return n>>16}(n),d=r;for(;o>0;)d=d[Ft],o--;return d}let Ea=!0;function no(n){const r=Ea;return Ea=n,r}const Xn=255,rl=5;let _n=0;const At={};function Fi(n,r){const o=bl(n,r);if(-1!==o)return o;const d=r[cn];d.firstCreatePass&&(n.injectorIndex=r.length,Il(d.data,n),Il(r,null),Il(d.blueprint,null));const p=su(n,r),_=n.injectorIndex;if(ra(p)){const T=Fs(p),P=_i(p,r),L=P[cn].data;for(let K=0;K<8;K++)r[_+K]=P[T+K]|L[T+K]}return r[_+8]=p,_}function Il(n,r){n.push(0,0,0,0,0,0,0,0,r)}function bl(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function su(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,d=null,p=r;for(;null!==p;){if(d=rn(p),null===d)return Ee;if(o++,p=p[Ft],-1!==d.injectorIndex)return d.injectorIndex|o<<16}return Ee}function Bl(n,r,o){!function Zt(n,r,o){let d;"string"==typeof o?d=o.charCodeAt(0)||0:o.hasOwnProperty(Ln)&&(d=o[Ln]),null==d&&(d=o[Ln]=_n++);const p=d&Xn;r.data[n+(p>>rl)]|=1<<p}(n,r,o)}function ou(n,r,o){if(o&qt.Optional||void 0!==n)return n;Me()}function xu(n,r,o,d){if(o&qt.Optional&&void 0===d&&(d=null),!(o&(qt.Self|qt.Host))){const p=n[pt],_=hr(void 0);try{return p?p.get(r,d,o&qt.Optional):yi(r,d,o&qt.Optional)}finally{hr(_)}}return ou(d,0,o)}function wa(n,r,o,d=qt.Default,p){if(null!==n){if(1024&r[Un]){const T=function Li(n,r,o,d,p){let _=n,T=r;for(;null!==_&&null!==T&&1024&T[Un]&&!(256&T[Un]);){const P=au(_,T,o,d|qt.Self,At);if(P!==At)return P;let L=_.parent;if(!L){const K=T[st];if(K){const se=K.get(o,At,d);if(se!==At)return se}L=rn(T),T=T[Ft]}_=L}return p}(n,r,o,d,At);if(T!==At)return T}const _=au(n,r,o,d,At);if(_!==At)return _}return xu(r,o,d,p)}function au(n,r,o,d,p){const _=function il(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ln)?n[Ln]:void 0;return"number"==typeof r?r>=0?r&Xn:Cl:r}(o);if("function"==typeof _){if(!$i(r,n,d))return d&qt.Host?ou(p,0,d):xu(r,o,d,p);try{const T=_(d);if(null!=T||d&qt.Optional)return T;Me()}finally{lc()}}else if("number"==typeof _){let T=null,P=bl(n,r),L=Ee,K=d&qt.Host?r[Kt][ne]:null;for((-1===P||d&qt.SkipSelf)&&(L=-1===P?su(n,r):r[P+8],L!==Ee&&pi(d,!1)?(T=r[cn],P=Fs(L),r=_i(L,r)):P=-1);-1!==P;){const se=r[cn];if(ia(_,P,se.data)){const be=ro(P,r,o,T,d,K);if(be!==At)return be}L=r[P+8],L!==Ee&&pi(d,r[cn].data[P+8]===K)&&ia(_,P,r)?(T=se,P=Fs(L),r=_i(L,r)):P=-1}}return p}function ro(n,r,o,d,p,_){const T=r[cn],P=T.data[n+8],se=Ia(P,T,o,null==d?us(P)&&Ea:d!=T&&0!=(3&P.type),p&qt.Host&&_===P);return null!==se?Qn(r,T,se,P):At}function Ia(n,r,o,d,p){const _=n.providerIndexes,T=r.data,P=1048575&_,L=n.directiveStart,se=_>>20,ft=p?P+se:n.directiveEnd;for(let Tt=d?P:P+se;Tt<ft;Tt++){const Yt=T[Tt];if(Tt<L&&o===Yt||Tt>=L&&Yt.type===o)return Tt}if(p){const Tt=T[L];if(Tt&&xi(Tt)&&Tt.type===o)return L}return null}function Qn(n,r,o,d){let p=n[o];const _=r.data;if(function $t(n){return n instanceof Et}(p)){const T=p;T.resolving&&function at(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${n}${o}`)}(function lt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ae(n)}(_[o]));const P=no(T.canSeeViewProviders);T.resolving=!0;const L=T.injectImpl?hr(T.injectImpl):null;$i(n,d,qt.Default);try{p=n[o]=T.factory(void 0,_,n,d),r.firstCreatePass&&o>=d.directiveStart&&function Ll(n,r,o){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:_}=r.type.prototype;if(d){const T=ds(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,T),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,T)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==L&&hr(L),no(P),T.resolving=!1,lc()}}return p}function ia(n,r,o){return!!(o[r+(n>>rl)]&1<<n)}function pi(n,r){return!(n&qt.Self||n&qt.Host&&r)}class Hn{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,d){return wa(this._tNode,this._lView,r,Lt(d),o)}}function Cl(){return new Hn(ze(),w())}function Qr(n){return pn(()=>{const r=n.prototype.constructor,o=r[nn]||Dl(r),d=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==d;){const _=p[nn]||Dl(p);if(_&&_!==o)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Dl(n){return Ae(n)?()=>{const r=Dl(de(n));return r&&r()}:gs(n)}function rn(n){const r=n[cn],o=r.type;return 2===o?r.declTNode:1===o?n[ne]:null}function Oa(n){return function Ra(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const d=o.length;let p=0;for(;p<d;){const _=o[p];if(to(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<d&&"string"==typeof o[p];)p++;else{if(_===r)return o[p+1];p+=2}}}return null}(ze(),n)}const ba="__parameters__";function Ha(n,r,o){return pn(()=>{const d=function sl(n){return function(...o){if(n){const d=n(...o);for(const p in d)this[p]=d[p]}}}(r);function p(..._){if(this instanceof p)return d.apply(this,_),this;const T=new p(..._);return P.annotation=T,P;function P(L,K,se){const be=L.hasOwnProperty(ba)?L[ba]:Object.defineProperty(L,ba,{value:[]})[ba];for(;be.length<=se;)be.push(null);return(be[se]=be[se]||[]).push(T),L}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class gi{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ot({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cr(n,r){n.forEach(o=>Array.isArray(o)?cr(o,r):r(o))}function al(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Ho(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function mo(n,r){const o=[];for(let d=0;d<n;d++)o.push(r);return o}function io(n,r,o){let d=x(n,r);return d>=0?n[1|d]=o:(d=~d,function Zn(n,r,o,d){let p=n.length;if(p==r)n.push(o,d);else if(1===p)n.push(d,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=o,n[r+1]=d}}(n,d,r,o)),d}function A(n,r){const o=x(n,r);if(o>=0)return n[1|o]}function x(n,r){return function O(n,r,o){let d=0,p=n.length>>o;for(;p!==d;){const _=d+(p-d>>1),T=n[_<<o];if(r===T)return _<<o;T>r?p=_:d=_+1}return~(p<<o)}(n,r,1)}const F=dn(Ha("Optional"),8),te=dn(Ha("SkipSelf"),4);var cl=(()=>((cl=cl||{})[cl.Important=1]="Important",cl[cl.DashCase=2]="DashCase",cl))();const Vl=new Map;let aa=0;const Sd="__ngContext__";function Ps(n,r){ai(r)?(n[Sd]=r[xr],function Nu(n){Vl.set(n[xr],n)}(r)):n[Sd]=r}let zc;function pc(n,r){return zc(n,r)}function Wa(n){const r=n[Ur];return Ji(r)?r[Ur]:r}function Ad(n){return Lu(n[ht])}function qs(n){return Lu(n[ei])}function Lu(n){for(;null!==n&&!Ji(n);)n=n[ei];return n}function Hl(n,r,o,d,p){if(null!=d){let _,T=!1;Ji(d)?_=d:ai(d)&&(T=!0,d=d[Ci]);const P=Zr(d);0===n&&null!==o?null==p?Ai(r,o,P):Ei(r,o,P,p||null,!0):1===n&&null!==o?Ei(r,o,P,p||null,!0):2===n?function Hr(n,r,o){const d=la(n,r);d&&function qc(n,r,o,d){n.removeChild(r,o,d)}(n,d,r,o)}(r,P,T):3===n&&r.destroyNode(P),null!=_&&function Yc(n,r,o,d,p){const _=o[gn];_!==Zr(o)&&Hl(r,n,d,_,p);for(let P=Kn;P<o.length;P++){const L=o[P];mu(L[cn],L,n,r,d,_)}}(r,n,_,o,p)}}function Ti(n,r,o){return n.createElement(r,o)}function lh(n,r){const o=n[vi],d=o.indexOf(r),p=r[Ur];512&r[Un]&&(r[Un]&=-513,ea(p,-1)),o.splice(d,1)}function hl(n,r){if(n.length<=Kn)return;const o=Kn+r,d=n[o];if(d){const p=d[mn];null!==p&&p!==n&&lh(p,d),r>0&&(n[o-1][ei]=d[ei]);const _=Ho(n,Kn+r);!function zl(n,r){mu(n,r,r[le],2,null,null),r[Ci]=null,r[ne]=null}(d[cn],d);const T=_[ar];null!==T&&T.detachView(_[cn]),d[Ur]=null,d[ei]=null,d[Un]&=-65}return d}function Ta(n,r){if(!(128&r[Un])){const o=r[le];o.destroyNode&&mu(n,r,o,3,null,null),function sp(n){let r=n[ht];if(!r)return Wc(n[cn],n);for(;r;){let o=null;if(ai(r))o=r[ht];else{const d=r[Kn];d&&(o=d)}if(!o){for(;r&&!r[ei]&&r!==n;)ai(r)&&Wc(r[cn],r),r=r[Ur];null===r&&(r=n),ai(r)&&Wc(r[cn],r),o=r&&r[ei]}r=o}}(r)}}function Wc(n,r){if(!(128&r[Un])){r[Un]&=-65,r[Un]|=128,function hu(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let d=0;d<o.length;d+=2){const p=r[o[d]];if(!(p instanceof Et)){const _=o[d+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const P=p[_[T]],L=_[T+1];yr(4,P,L);try{L.call(P)}finally{yr(5,P,L)}}else{yr(4,p,_);try{_.call(p)}finally{yr(5,p,_)}}}}}(n,r),function ql(n,r){const o=n.cleanup,d=r[he];let p=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const T=o[_+3];T>=0?d[p=T]():d[p=-T].unsubscribe(),_+=2}else{const T=d[p=o[_+1]];o[_].call(T)}if(null!==d){for(let _=p+1;_<d.length;_++)(0,d[_])();r[he]=null}}(n,r),1===r[cn].type&&r[le].destroy();const o=r[mn];if(null!==o&&Ji(r[Ur])){o!==r[Ur]&&lh(o,r);const d=r[ar];null!==d&&d.detachView(n)}!function Ul(n){Vl.delete(n[xr])}(r)}}function Ml(n,r,o){return function xd(n,r,o){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return o[Ci];{const{componentOffset:p}=d;if(p>-1){const{encapsulation:_}=n.data[d.directiveStart+p];if(_===Gr.None||_===Gr.Emulated)return null}return Mi(d,o)}}(n,r.parent,o)}function Ei(n,r,o,d,p){n.insertBefore(r,o,d,p)}function Ai(n,r,o){n.appendChild(r,o)}function Jr(n,r,o,d,p){null!==d?Ei(n,r,o,d,p):Ai(n,r,o)}function la(n,r){return n.parentNode(r)}function Wo(n,r,o){return pu(n,r,o)}let Ls,Zc,Qc,pu=function qa(n,r,o){return 40&n.type?Mi(n,o):null};function Kl(n,r,o,d){const p=Ml(n,d,r),_=r[le],P=Wo(d.parent||r[ne],d,r);if(null!=p)if(Array.isArray(o))for(let L=0;L<o.length;L++)Jr(_,p,o[L],P,!1);else Jr(_,p,o,P,!1);void 0!==Ls&&Ls(_,d,r,o,p)}function gu(n,r){if(null!==r){const o=r.type;if(3&o)return Mi(r,n);if(4&o)return Kc(-1,n[r.index]);if(8&o){const d=r.child;if(null!==d)return gu(n,d);{const p=n[r.index];return Ji(p)?Kc(-1,p):Zr(p)}}if(32&o)return pc(r,n)()||Zr(n[r.index]);{const d=Rd(n,r);return null!==d?Array.isArray(d)?d[0]:gu(Wa(n[Kt]),d):gu(n,r.next)}}return null}function Rd(n,r){return null!==r?n[Kt][ne].projection[r.projection]:null}function Kc(n,r){const o=Kn+n+1;if(o<r.length){const d=r[o],p=d[cn].firstChild;if(null!==p)return gu(d,p)}return r[gn]}function Od(n,r,o,d,p,_,T){for(;null!=o;){const P=d[o.index],L=o.type;if(T&&0===r&&(P&&Ps(Zr(P),d),o.flags|=2),32!=(32&o.flags))if(8&L)Od(n,r,o.child,d,p,_,!1),Hl(r,n,p,P,_);else if(32&L){const K=pc(o,d);let se;for(;se=K();)Hl(r,n,p,se,_);Hl(r,n,p,P,_)}else 16&L?yu(n,r,d,o,p,_):Hl(r,n,p,P,_);o=T?o.projectionNext:o.next}}function mu(n,r,o,d,p,_){Od(o,d,n.firstChild,r,p,_,!1)}function yu(n,r,o,d,p,_){const T=o[Kt],L=T[ne].projection[d.projection];if(Array.isArray(L))for(let K=0;K<L.length;K++)Hl(r,n,p,L[K],_);else Od(n,r,L,T[Ur],p,_,!0)}function Pd(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function ua(n,r,o){const{mergedAttrs:d,classes:p,styles:_}=o;null!==d&&Vi(n,r,d),null!==p&&Pd(n,r,p),null!==_&&function Jh(n,r,o){n.setAttribute(r,"style",o)}(n,r,_)}function Bs(n){Zc=n}function y(n){var r;return(null===(r=function Uu(){if(void 0===Qc&&(Qc=null,wn.trustedTypes))try{Qc=wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Qc}())||void 0===r?void 0:r.createScriptURL(n))||n}class E{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}function on(n){return n instanceof E?n.changingThisBreaksApplicationSecurity:n}function Mn(n,r){const o=function fr(n){return n instanceof E&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${bt})`)}return o===r}const nf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var oo=(()=>((oo=oo||{})[oo.NONE=0]="NONE",oo[oo.HTML=1]="HTML",oo[oo.STYLE=2]="STYLE",oo[oo.SCRIPT=3]="SCRIPT",oo[oo.URL=4]="URL",oo[oo.RESOURCE_URL=5]="RESOURCE_URL",oo))();function Wu(n){const r=gl();return r?r.sanitize(oo.URL,n)||"":Mn(n,"URL")?on(n):function Jc(n){return(n=String(n)).match(nf)?n:"unsafe:"+n}(ae(n))}function td(n){const r=gl();if(r)return y(r.sanitize(oo.RESOURCE_URL,n)||"");if(Mn(n,"ResourceURL"))return y(on(n));throw new Ce(904,!1)}function rf(n,r,o){return function ao(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?td:Wu}(r,o)(n)}function gl(){const n=w();return n&&n[Qe]}const fh=new gi("ENVIRONMENT_INITIALIZER"),ph=new gi("INJECTOR",-1),hp=new gi("INJECTOR_DEF_TYPES");class _u{get(r,o=mr){if(o===mr){const d=new Error(`NullInjectorError: No provider for ${Te(r)}!`);throw d.name="NullInjectorError",d}return o}}function Ec(...n){return{\u0275providers:qu(0,n),\u0275fromNgModule:!0}}function qu(n,...r){const o=[],d=new Set;let p;return cr(r,_=>{const T=_;rd(T,o,[],d)&&(p||(p=[]),p.push(T))}),void 0!==p&&Eu(p,o),o}function Eu(n,r){for(let o=0;o<n.length;o++){const{providers:p}=n[o];id(p,_=>{r.push(_)})}}function rd(n,r,o,d){if(!(n=de(n)))return!1;let p=null,_=gr(n);const T=!_&&Bn(n);if(_||T){if(T&&!T.standalone)return!1;p=n}else{const L=n.ngModule;if(_=gr(L),!_)return!1;p=L}const P=d.has(p);if(T){if(P)return!1;if(d.add(p),T.dependencies){const L="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const K of L)rd(K,r,o,d)}}else{if(!_)return!1;{if(null!=_.imports&&!P){let K;d.add(p);try{cr(_.imports,se=>{rd(se,r,o,d)&&(K||(K=[]),K.push(se))})}finally{}void 0!==K&&Eu(K,r)}if(!P){const K=gs(p)||(()=>new p);r.push({provide:p,useFactory:K,deps:ut},{provide:hp,useValue:p,multi:!0},{provide:fh,useValue:()=>Se(p),multi:!0})}const L=_.providers;null==L||P||id(L,se=>{r.push(se)})}}return p!==n&&void 0!==n.providers}function id(n,r){for(let o of n)je(o)&&(o=o.\u0275providers),Array.isArray(o)?id(o,r):r(o)}const af=Pe({provide:String,useValue:Pe});function lf(n){return null!==n&&"object"==typeof n&&af in n}function wc(n){return"function"==typeof n}const Ku=new gi("Set Injector scope."),Rl={},dm={};let gh;function cf(){return void 0===gh&&(gh=new _u),gh}class sd{}class pp extends sd{get destroyed(){return this._destroyed}constructor(r,o,d,p){super(),this.parent=o,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$d(r,T=>this.processProvider(T)),this.records.set(ph,Ol(void 0,this)),p.has("environment")&&this.records.set(sd,Ol(void 0,this));const _=this.records.get(Ku);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(hp.multi,ut,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Oe(this),d=hr(void 0);try{return r()}finally{Oe(o),hr(d)}}get(r,o=mr,d=qt.Default){this.assertNotDestroyed(),d=Lt(d);const p=Oe(this),_=hr(void 0);try{if(!(d&qt.SkipSelf)){let P=this.records.get(r);if(void 0===P){const L=function hf(n){return"function"==typeof n||"object"==typeof n&&n instanceof gi}(r)&&An(r);P=L&&this.injectableDefInScope(L)?Ol(Yu(r),Rl):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(d&qt.Self?cf():this.parent).get(r,o=d&qt.Optional&&o===mr?null:o)}catch(T){if("NullInjectorError"===T.name){if((T[Sr]=T[Sr]||[]).unshift(Te(r)),p)throw T;return function zn(n,r,o,d){const p=n[Sr];throw r[Ii]&&p.unshift(r[Ii]),n.message=function Wn(n,r,o,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Er?n.slice(2):n;let p=Te(r);if(Array.isArray(r))p=r.map(Te).join(" -> ");else if("object"==typeof r){let _=[];for(let T in r)if(r.hasOwnProperty(T)){let P=r[T];_.push(T+":"+("string"==typeof P?JSON.stringify(P):Te(P)))}p=`{${_.join(", ")}}`}return`${o}${d?"("+d+")":""}[${p}]: ${n.replace(Gi,"\n  ")}`}("\n"+n.message,p,o,d),n[oi]=p,n[Sr]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{hr(_),Oe(p)}}resolveInjectorInitializers(){const r=Oe(this),o=hr(void 0);try{const d=this.get(fh.multi,ut,qt.Self);for(const p of d)p()}finally{Oe(r),hr(o)}}toString(){const r=[],o=this.records;for(const d of o.keys())r.push(Te(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(r){let o=wc(r=de(r))?r:de(r&&r.provide);const d=function Xu(n){return lf(n)?Ol(void 0,n.useValue):Ol(Bd(n),Rl)}(r);if(wc(r)||!0!==r.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=Ol(void 0,Rl,!0),p.factory=()=>Qt(p.multi),this.records.set(o,p)),o=r,p.multi.push(r)}this.records.set(o,d)}hydrate(r,o){return o.value===Rl&&(o.value=dm,o.value=o.factory()),"object"==typeof o.value&&o.value&&function df(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=de(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Yu(n){const r=An(n),o=null!==r?r.factory:gs(n);if(null!==o)return o;if(n instanceof gi)throw new Ce(204,!1);if(n instanceof Function)return function Zu(n){const r=n.length;if(r>0)throw mo(r,"?"),new Ce(204,!1);const o=function xn(n){const r=n&&(n[Gn]||n[Dn]);return r?(function Ht(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ce(204,!1)}function Bd(n,r,o){let d;if(wc(n)){const p=de(n);return gs(p)||Yu(p)}if(lf(n))d=()=>de(n.useValue);else if(function fp(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Qt(n.deps||[]));else if(function Ld(n){return!(!n||!n.useExisting)}(n))d=()=>Se(de(n.useExisting));else{const p=de(n&&(n.useClass||n.provide));if(!function gp(n){return!!n.deps}(n))return gs(p)||Yu(p);d=()=>new p(...Qt(n.deps))}return d}function Ol(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function $d(n,r){for(const o of n)Array.isArray(o)?$d(o,r):o&&je(o)?$d(o.\u0275providers,r):r(o)}class mp{}class Vd{}class gg{resolveComponentFactory(r){throw function Ic(n){const r=Error(`No component factory found for ${Te(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ko=(()=>{class n{}return n.NULL=new gg,n})();function ff(){return Pl(ze(),w())}function Pl(n,r){return new Qu(Mi(n,r))}let Qu=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=ff,n})();function mg(n){return n instanceof Qu?n.nativeElement:n}class ml{}let Na=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ud(){const n=w(),o=Ri(ze().index,n);return(ai(o)?o:n)[le]}(),n})(),od=(()=>{class n{}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:()=>null}),n})();class yp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ju=new yp("15.2.4"),Cc={},Xa="ngOriginalError";function Qa(n){return n[Xa]}class jd{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&Qa(r);for(;o&&Qa(o);)o=Qa(o);return o||null}}function Fa(n){return n instanceof Function?n():n}function mf(n,r,o){let d=n.length;for(;;){const p=n.indexOf(r,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=r.length;if(p+_===d||n.charCodeAt(p+_)<=32)return p}o=p+1}}const ld="ng-template";function Yo(n,r,o){let d=0,p=!0;for(;d<n.length;){let _=n[d++];if("string"==typeof _&&p){const T=n[d++];if(o&&"class"===_&&-1!==mf(T.toLowerCase(),r,0))return!0}else{if(1===_){for(;d<n.length&&"string"==typeof(_=n[d++]);)if(_.toLowerCase()===r)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function yf(n){return 4===n.type&&n.value!==ld}function gm(n,r,o){return r===(4!==n.type||o?n.value:ld)}function mm(n,r,o){let d=4;const p=n.attrs||[],_=function ym(n){for(let r=0;r<n.length;r++)if(to(n[r]))return r;return n.length}(p);let T=!1;for(let P=0;P<r.length;P++){const L=r[P];if("number"!=typeof L){if(!T)if(4&d){if(d=2|1&d,""!==L&&!gm(n,L,o)||""===L&&1===r.length){if(Xl(d))return!1;T=!0}}else{const K=8&d?L:r[++P];if(8&d&&null!==n.attrs){if(!Yo(n.attrs,K,o)){if(Xl(d))return!1;T=!0}continue}const be=_p(8&d?"class":L,p,yf(n),o);if(-1===be){if(Xl(d))return!1;T=!0;continue}if(""!==K){let ft;ft=be>_?"":p[be+1].toLowerCase();const Tt=8&d?ft:null;if(Tt&&-1!==mf(Tt,K,0)||2&d&&K!==ft){if(Xl(d))return!1;T=!0}}}}else{if(!T&&!Xl(d)&&!Xl(L))return!1;if(T&&Xl(L))continue;T=!1,d=L|1&d}}return Xl(d)||T}function Xl(n){return 0==(1&n)}function _p(n,r,o,d){if(null===r)return-1;let p=0;if(d||!o){let _=!1;for(;p<r.length;){const T=r[p];if(T===n)return p;if(3===T||6===T)_=!0;else{if(1===T||2===T){let P=r[++p];for(;"string"==typeof P;)P=r[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=_?1:2}return-1}return function _f(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const d=n[o];if("number"==typeof d)return-1;if(d===r)return o;o++}return-1}(r,n)}function wg(n,r,o=!1){for(let d=0;d<r.length;d++)if(mm(n,r[d],o))return!0;return!1}function Ef(n,r){e:for(let o=0;o<r.length;o++){const d=r[o];if(n.length===d.length){for(let p=0;p<n.length;p++)if(n[p]!==d[p])continue e;return!0}}return!1}function wf(n,r){return n?":not("+r.trim()+")":r}function Ql(n){let r=n[0],o=1,d=2,p="",_=!1;for(;o<n.length;){let T=n[o];if("string"==typeof T)if(2&d){const P=n[++o];p+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&d?p+="."+T:4&d&&(p+=" "+T);else""!==p&&!Xl(T)&&(r+=wf(_,p),p=""),d=T,_=_||!Xl(d);o++}return""!==p&&(r+=wf(_,p)),r}const Rr={};function Hd(n){Ig(f(),w(),mi()+n,!1)}function Ig(n,r,o,d){if(!d)if(3==(3&r[Un])){const _=n.preOrderCheckHooks;null!==_&&wl(r,_,o)}else{const _=n.preOrderHooks;null!==_&&N(r,_,0,o)}Ds(o)}function ud(n,r=null,o=null,d){const p=Gd(n,r,o,d);return p.resolveInjectorInitializers(),p}function Gd(n,r=null,o=null,d,p=new Set){const _=[o||ut,Ec(n)];return d=d||("object"==typeof n?void 0:Te(n)),new pp(_,r||cf(),d||null,p)}let wu=(()=>{class n{static create(o,d){if(Array.isArray(o))return ud({name:""},d,o,"");{var p;const _=null!==(p=o.name)&&void 0!==p?p:"";return ud({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=mr,n.NULL=new _u,n.\u0275prov=Ot({token:n,providedIn:"any",factory:()=>Se(ph)}),n.__NG_ELEMENT_ID__=-1,n})();function cd(n,r=qt.Default){const o=w();return null===o?Se(n,r):wa(ze(),o,de(n),r)}function qd(){throw new Error("invalid")}function dd(n,r){const o=n.contentQueries;if(null!==o)for(let d=0;d<o.length;d+=2){const _=o[d+1];if(-1!==_){const T=n.data[_];po(o[d]),T.contentQueries(2,r[_],_)}}}function xc(n,r,o,d,p,_,T,P,L,K,se){const be=r.blueprint.slice();return be[Ci]=p,be[Un]=76|d,(null!==se||n&&1024&n[Un])&&(be[Un]|=1024),ko(be),be[Ur]=be[Ft]=n,be[qe]=o,be[Mt]=T||n&&n[Mt],be[le]=P||n&&n[le],be[Qe]=L||n&&n[Qe]||null,be[pt]=K||n&&n[pt]||null,be[ne]=_,be[xr]=function dc(){return aa++}(),be[st]=se,be[Kt]=2==r.type?n[Kt]:be,be}function Mc(n,r,o,d,p){let _=n.data[r];if(null===_)_=function Af(n,r,o,d,p){const _=zt(),T=lr(),L=n.data[r]=function Tg(n,r,o,d,p,_){return{type:o,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,o,r,d,p);return null===n.firstChild&&(n.firstChild=L),null!==_&&(T?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L,L.prev=_)),L}(n,r,o,d,p),function To(){return er.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=d,_.attrs=p;const T=function ln(){const n=er.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return Sn(_,!0),_}function hd(n,r,o,d){if(0===o)return-1;const p=r.length;for(let _=0;_<o;_++)r.push(d),n.blueprint.push(d),n.data.push(null);return p}function Ah(n,r,o){ta(r);try{const d=n.viewQuery;null!==d&&fd(1,d,o);const p=n.template;null!==p&&xp(n,r,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&dd(n,r),n.staticViewQueries&&fd(2,n.viewQuery,o);const _=n.components;null!==_&&function Tf(n,r){for(let o=0;o<r.length;o++)Cm(n,r[o])}(r,_)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[Un]&=-5,ma()}}function tu(n,r,o,d){const p=r[Un];if(128!=(128&p)){ta(r);try{ko(r),function No(n){return er.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&xp(n,r,o,2,d);const T=3==(3&p);if(T){const K=n.preOrderCheckHooks;null!==K&&wl(r,K,null)}else{const K=n.preOrderHooks;null!==K&&N(r,K,0,null),q(r,0)}if(function jp(n){for(let r=Ad(n);null!==r;r=qs(r)){if(!r[Jt])continue;const o=r[vi];for(let d=0;d<o.length;d++){const p=o[d];512&p[Un]||ea(p[Ur],1),p[Un]|=512}}}(r),function Up(n){for(let r=Ad(n);null!==r;r=qs(r))for(let o=Kn;o<r.length;o++){const d=r[o],p=d[cn];Gs(d)&&tu(p,d,p.template,d[qe])}}(r),null!==n.contentQueries&&dd(n,r),T){const K=n.contentCheckHooks;null!==K&&wl(r,K)}else{const K=n.contentHooks;null!==K&&N(r,K,1),q(r,1)}!function Ap(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let d=0;d<o.length;d++){const p=o[d];if(p<0)Ds(~p);else{const _=p,T=o[++d],P=o[++d];Fo(T,_),P(2,r[_])}}}finally{Ds(-1)}}(n,r);const P=n.components;null!==P&&function Sf(n,r){for(let o=0;o<r.length;o++)Ff(n,r[o])}(r,P);const L=n.viewQuery;if(null!==L&&fd(2,L,d),T){const K=n.viewCheckHooks;null!==K&&wl(r,K)}else{const K=n.viewHooks;null!==K&&N(r,K,2),q(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Un]&=-41,512&r[Un]&&(r[Un]&=-513,ea(r[Ur],-1))}finally{ma()}}}function xp(n,r,o,d,p){const _=mi(),T=2&d;try{Ds(-1),T&&r.length>Fe&&Ig(n,r,Fe,!1),yr(T?2:0,p),o(d,p)}finally{Ds(_),yr(T?3:1,p)}}function Mp(n,r,o){if(es(r)){const p=r.directiveEnd;for(let _=r.directiveStart;_<p;_++){const T=n.data[_];T.contentQueries&&T.contentQueries(1,o[_],_)}}}function xh(n,r,o){ja()&&(function bm(n,r,o,d){const p=o.directiveStart,_=o.directiveEnd;us(o)&&function Yd(n,r,o){const d=Mi(r,n),p=xf(o),_=n[Mt],T=Zd(n,xc(n,p,null,o.onPush?32:16,d,r,_,_.createRenderer(d,o),null,null,null));n[r.index]=T}(r,o,n.data[p+o.componentOffset]),n.firstCreatePass||Fi(o,r),Ps(d,r);const T=o.initialInputs;for(let P=p;P<_;P++){const L=n.data[P],K=Qn(r,n,P,o);Ps(K,r),null!==T&&Rh(0,P-p,K,L,0,T),xi(L)&&(Ri(o.index,r)[qe]=Qn(r,n,P,o))}}(n,r,o,Mi(o,r)),64==(64&o.flags)&&Lp(n,r,o))}function Rp(n,r,o=Mi){const d=r.localNames;if(null!==d){let p=r.index+1;for(let _=0;_<d.length;_+=2){const T=d[_+1],P=-1===T?o(r,n):n[T];n[p++]=P}}}function xf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Op(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Op(n,r,o,d,p,_,T,P,L,K){const se=Fe+d,be=se+p,ft=function Pp(n,r){const o=[];for(let d=0;d<r;d++)o.push(d<n?null:Rr);return o}(se,be),Tt="function"==typeof K?K():K;return ft[cn]={type:n,blueprint:ft,template:o,queries:null,viewQuery:P,declTNode:r,data:ft.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:L,consts:Tt,incompleteFirstPass:!1}}function Rf(n,r,o,d){const p=Hp(r);null===o?p.push(d):(p.push(o),n.firstCreatePass&&Gp(n).push(d,p.length-1))}function ca(n,r,o,d){for(let p in n)if(n.hasOwnProperty(p)){o=null===o?{}:o;const _=n[p];null===d?Of(o,r,p,_):d.hasOwnProperty(p)&&Of(o,r,d[p],_)}return o}function Of(n,r,o,d){n.hasOwnProperty(o)?n[o].push(r,d):n[o]=[r,d]}function Pf(n,r){const o=Ri(r,n);16&o[Un]||(o[Un]|=32)}function Np(n,r,o,d){if(ja()){const p=null===d?null:{"":-1},_=function Bp(n,r){const o=n.directiveRegistry;let d=null,p=null;if(o)for(let T=0;T<o.length;T++){const P=o[T];if(wg(r,P.selectors,!1))if(d||(d=[]),xi(P))if(null!==P.findHostDirectiveDefs){const L=[];p=p||new Map,P.findHostDirectiveDefs(P,L,p),d.unshift(...L,P),Mh(n,r,L.length)}else d.unshift(P),Mh(n,r,0);else{var _;p=p||new Map,null===(_=P.findHostDirectiveDefs)||void 0===_||_.call(P,P,d,p),d.push(P)}}return null===d?null:[d,p]}(n,o);let T,P;null===_?T=P=null:[T,P]=_,null!==T&&kf(n,r,o,T,p,P),p&&function $p(n,r,o){if(r){const d=n.localNames=[];for(let p=0;p<r.length;p+=2){const _=o[r[p+1]];if(null==_)throw new Ce(-301,!1);d.push(r[p],_)}}}(o,d,p)}o.mergedAttrs=ns(o.mergedAttrs,o.attrs)}function kf(n,r,o,d,p,_){for(let K=0;K<d.length;K++)Bl(Fi(o,r),n,d[K].type);!function Rc(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,d.length);for(let K=0;K<d.length;K++){const se=d[K];se.providersResolver&&se.providersResolver(se)}let T=!1,P=!1,L=hd(n,r,d.length,null);for(let K=0;K<d.length;K++){const se=d[K];o.mergedAttrs=ns(o.mergedAttrs,se.hostAttrs),Vp(n,o,r,L,se),Kd(L,se,p),null!==se.contentQueries&&(o.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=64);const be=se.type.prototype;!T&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),T=!0),!P&&(be.ngOnChanges||be.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),L++}!function kp(n,r,o){const p=r.directiveEnd,_=n.data,T=r.attrs,P=[];let L=null,K=null;for(let se=r.directiveStart;se<p;se++){const be=_[se],ft=o?o.get(be):null,Yt=ft?ft.outputs:null;L=ca(be.inputs,se,L,ft?ft.inputs:null),K=ca(be.outputs,se,K,Yt);const hn=null===L||null===T||yf(r)?null:yy(L,se,T);P.push(hn)}null!==L&&(L.hasOwnProperty("class")&&(r.flags|=8),L.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=P,r.inputs=L,r.outputs=K}(n,o,_)}function Lp(n,r,o){const d=o.directiveStart,p=o.directiveEnd,_=o.index,T=function Lo(){return er.lFrame.currentDirectiveIndex}();try{Ds(_);for(let P=d;P<p;P++){const L=n.data[P],K=r[P];Js(P),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Rg(L,K)}}finally{Ds(-1),Js(T)}}function Rg(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Mh(n,r,o){r.componentOffset=o,(n.components||(n.components=[])).push(r.index)}function Kd(n,r,o){if(o){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)o[r.exportAs[d]]=n;xi(r)&&(o[""]=n)}}function Vp(n,r,o,d,p){n.data[d]=p;const _=p.factory||(p.factory=gs(p.type)),T=new Et(_,xi(p),cd);n.blueprint[d]=T,o[d]=T,function Mg(n,r,o,d,p){const _=p.hostBindings;if(_){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const P=~r.index;(function Fp(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(T)!=P&&T.push(P),T.push(o,d,_)}}(n,r,d,hd(n,o,p.hostVars,Rr),p)}function Ba(n,r,o,d,p,_){const T=Mi(n,r);!function Nf(n,r,o,d,p,_,T){if(null==_)n.removeAttribute(r,p,o);else{const P=null==T?ae(_):T(_,d||"",p);n.setAttribute(r,p,P,o)}}(r[le],T,_,n.value,o,d,p)}function Rh(n,r,o,d,p,_){const T=_[r];if(null!==T){const P=d.setInput;for(let L=0;L<T.length;){const K=T[L++],se=T[L++],be=T[L++];null!==P?d.setInput(o,be,K,se):o[se]=be}}}function yy(n,r,o){let d=null,p=0;for(;p<o.length;){const _=o[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(n.hasOwnProperty(_)){null===d&&(d=[]);const T=n[_];for(let P=0;P<T.length;P+=2)if(T[P]===r){d.push(_,T[P+1],o[p+1]);break}}p+=2}else p+=2;else p+=4}return d}function Og(n,r,o,d){return[n,!0,!1,r,null,0,d,o,null,null]}function Ff(n,r){const o=Ri(r,n);if(Gs(o)){const d=o[cn];48&o[Un]?tu(d,o,d.template,o[qe]):o[ki]>0&&Oh(o)}}function Oh(n){for(let d=Ad(n);null!==d;d=qs(d))for(let p=Kn;p<d.length;p++){const _=d[p];if(Gs(_))if(512&_[Un]){const T=_[cn];tu(T,_,T.template,_[qe])}else _[ki]>0&&Oh(_)}const o=n[cn].components;if(null!==o)for(let d=0;d<o.length;d++){const p=Ri(o[d],n);Gs(p)&&p[ki]>0&&Oh(p)}}function Cm(n,r){const o=Ri(r,n),d=o[cn];(function Dm(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(d,o),Ah(d,o,o[qe])}function Zd(n,r){return n[ht]?n[Dt][ei]=r:n[ht]=r,n[Dt]=r,r}function kl(n){for(;n;){n[Un]|=32;const r=Wa(n);if(Xo(n)&&!r)return n;n=r}return null}function vo(n,r,o,d=!0){const p=r[Mt];p.begin&&p.begin();try{tu(n,r,n.template,o)}catch(T){throw d&&Pg(r,T),T}finally{p.end&&p.end()}}function fd(n,r,o){po(0),r(n,o)}function Hp(n){return n[he]||(n[he]=[])}function Gp(n){return n.cleanup||(n.cleanup=[])}function Pg(n,r){const o=n[pt],d=o?o.get(jd,null):null;d&&d.handleError(r)}function Wp(n,r,o,d,p){for(let _=0;_<o.length;){const T=o[_++],P=o[_++],L=r[T],K=n.data[T];null!==K.setInput?K.setInput(L,p,d,P):L[P]=p}}function Ph(n,r,o){let d=o?n.styles:null,p=o?n.classes:null,_=0;if(null!==r)for(let T=0;T<r.length;T++){const P=r[T];"number"==typeof P?_=P:1==_?p=Ve(p,P):2==_&&(d=Ve(d,P+": "+r[++T]+";"))}o?n.styles=d:n.stylesWithoutHost=d,o?n.classes=p:n.classesWithoutHost=p}function pd(n,r,o,d,p=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&d.push(Zr(_)),Ji(_))for(let P=Kn;P<_.length;P++){const L=_[P],K=L[cn].firstChild;null!==K&&pd(L[cn],L,K,d)}const T=o.type;if(8&T)pd(n,r,o.child,d);else if(32&T){const P=pc(o,r);let L;for(;L=P();)d.push(L)}else if(16&T){const P=Rd(r,o);if(Array.isArray(P))d.push(...P);else{const L=Wa(r[Kt]);pd(L[cn],L,P,d,!0)}}o=p?o.projectionNext:o.next}return d}class Oc{get rootNodes(){const r=this._lView,o=r[cn];return pd(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qe]}set context(r){this._lView[qe]=r}get destroyed(){return 128==(128&this._lView[Un])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Ur];if(Ji(r)){const o=r[qn],d=o?o.indexOf(this):-1;d>-1&&(hl(r,d),Ho(o,d))}this._attachedToViewContainer=!1}Ta(this._lView[cn],this._lView)}onDestroy(r){Rf(this._lView[cn],this._lView,null,r)}markForCheck(){kl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Un]&=-65}reattach(){this._lView[Un]|=64}detectChanges(){vo(this._lView[cn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zh(n,r){mu(n,r,r[le],2,null,null)}(this._lView[cn],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=r}}class gd extends Oc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;vo(r[cn],r,r[qe],!1)}checkNoChanges(){}get context(){return null}}class kg extends Ko{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Bn(r);return new md(o,this.ngModule)}}function kh(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class qp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,d){d=Lt(d);const p=this.injector.get(r,Cc,d);return p!==Cc||o===Cc?p:this.parentInjector.get(r,o,d)}}class md extends Vd{get inputs(){return kh(this.componentDef.inputs)}get outputs(){return kh(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Jl(n){return n.map(Ql).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,d,p){var _;let T=(p=p||this.ngModule)instanceof sd?p:null===(_=p)||void 0===_?void 0:_.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const P=T?new qp(r,T):r,L=P.get(ml,null);if(null===L)throw new Ce(407,!1);const K=P.get(od,null),se=L.createRenderer(null,this.componentDef),be=this.componentDef.selectors[0][0]||"div",ft=d?function Mf(n,r,o){return n.selectRootElement(r,o===Gr.ShadowDom)}(se,d,this.componentDef.encapsulation):Ti(se,be,function Tm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(be)),Tt=this.componentDef.onPush?288:272,Yt=Op(0,null,null,1,0,null,null,null,null,null),hn=xc(null,Yt,null,Tt,null,null,L,se,K,P,null);let Nn,rr;ta(hn);try{const Ar=this.componentDef;let sn,Yr=null;Ar.findHostDirectiveDefs?(sn=[],Yr=new Map,Ar.findHostDirectiveDefs(Ar,sn,Yr),sn.push(Ar)):sn=[Ar];const Us=function Am(n,r){const o=n[cn],d=Fe;return n[d]=r,Mc(o,d,2,"#host",null)}(hn,ft),Mo=function Kp(n,r,o,d,p,_,T,P){const L=p[cn];!function xm(n,r,o,d){for(const p of n)r.mergedAttrs=ns(r.mergedAttrs,p.hostAttrs);null!==r.mergedAttrs&&(Ph(r,r.mergedAttrs,!0),null!==o&&ua(d,o,r))}(d,n,r,T);const K=_.createRenderer(r,o),se=xc(p,xf(o),null,o.onPush?32:16,p[n.index],n,_,K,P||null,null,null);return L.firstCreatePass&&Mh(L,n,d.length-1),Zd(p,se),p[n.index]=se}(Us,ft,Ar,sn,hn,L,se);rr=Do(Yt,Fe),ft&&function Mm(n,r,o,d){if(d)Vi(n,o,["ng-version",Ju.full]);else{const{attrs:p,classes:_}=function Ep(n){const r=[],o=[];let d=1,p=2;for(;d<n.length;){let _=n[d];if("string"==typeof _)2===p?""!==_&&r.push(_,n[++d]):8===p&&o.push(_);else{if(!Xl(p))break;p=_}d++}return{attrs:r,classes:o}}(r.selectors[0]);p&&Vi(n,o,p),_&&_.length>0&&Pd(n,o,_.join(" "))}}(se,Ar,ft,d),void 0!==o&&function Yp(n,r,o){const d=n.projection=[];for(let p=0;p<r.length;p++){const _=o[p];d.push(null!=_?Array.from(_):null)}}(rr,this.ngContentSelectors,o),Nn=function Bf(n,r,o,d,p,_){const T=ze(),P=p[cn],L=Mi(T,p);kf(P,p,T,o,null,d);for(let se=0;se<o.length;se++)Ps(Qn(p,P,T.directiveStart+se,T),p);Lp(P,p,T),L&&Ps(L,p);const K=Qn(p,P,T.directiveStart+T.componentOffset,T);if(n[qe]=p[qe]=K,null!==_)for(const se of _)se(K,r);return Mp(P,T,n),K}(Mo,Ar,sn,Yr,hn,[Fg]),Ah(Yt,hn,null)}finally{ma()}return new Lf(this.componentType,Nn,Pl(rr,hn),hn,rr)}}class Lf extends mp{constructor(r,o,d,p,_){super(),this.location=d,this._rootLView=p,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new gd(p),this.componentType=r}setInput(r,o){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[r])){const _=this._rootLView;Wp(_[cn],_,p,r,o),Pf(_,this._tNode.index)}}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Fg(){const n=ze();_a(w()[cn],n)}function Nh(n){let r=function $f(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const d=[n];for(;r;){let p;if(xi(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ce(903,!1);p=r.\u0275dir}if(p){if(o){d.push(p);const T=n;T.inputs=Pc(n.inputs),T.declaredInputs=Pc(n.declaredInputs),T.outputs=Pc(n.outputs);const P=p.hostBindings;P&&Rm(n,P);const L=p.viewQuery,K=p.contentQueries;if(L&&Lg(n,L),K&&Vf(n,K),me(n.inputs,p.inputs),me(n.declaredInputs,p.declaredInputs),me(n.outputs,p.outputs),xi(p)&&p.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let T=0;T<_.length;T++){const P=_[T];P&&P.ngInherit&&P(n),P===Nh&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Zp(n){let r=0,o=null;for(let d=n.length-1;d>=0;d--){const p=n[d];p.hostVars=r+=p.hostVars,p.hostAttrs=ns(p.hostAttrs,o=ns(o,p.hostAttrs))}}(d)}function Pc(n){return n===ri?{}:n===ut?[]:n}function Lg(n,r){const o=n.viewQuery;n.viewQuery=o?(d,p)=>{r(d,p),o(d,p)}:r}function Vf(n,r){const o=n.contentQueries;n.contentQueries=o?(d,p,_)=>{r(d,p,_),o(d,p,_)}:r}function Rm(n,r){const o=n.hostBindings;n.hostBindings=o?(d,p)=>{r(d,p),o(d,p)}:r}function mt(n){return!!yn(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yn(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Oi(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Du(n,r,o,d){const p=w();return Oi(p,fa(),r)&&(f(),Ba(li(),p,n,r,o,d)),Du}function jg(n,r,o,d,p,_,T,P){const L=w(),K=f(),se=n+Fe,be=K.firstCreatePass?function Ug(n,r,o,d,p,_,T,P,L){const K=r.consts,se=Mc(r,n,4,T||null,Os(K,P));Np(r,o,se,Os(K,L)),_a(r,se);const be=se.tView=Op(2,se,d,p,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,K);return null!==r.queries&&(r.queries.template(r,se),be.queries=r.queries.embeddedTView(se)),se}(se,K,L,r,o,d,p,_,T):K.data[se];Sn(be,!1);const ft=L[le].createComment("");Kl(K,L,ft,be),Ps(ft,L),Zd(L,L[se]=Og(ft,L,ft,be)),As(be)&&xh(K,L,be),null!=T&&Rp(L,be,P)}function Hg(n,r,o){const d=w();return Oi(d,fa(),r)&&function el(n,r,o,d,p,_,T,P){const L=Mi(r,o);let se,K=r.inputs;!P&&null!=K&&(se=K[d])?(Wp(n,o,se,d,p),us(r)&&Pf(o,r.index)):3&r.type&&(d=function Ag(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),p=null!=T?T(p,r.value||"",d):p,_.setProperty(L,d,p))}(f(),li(),d,n,r,d[le],o,!1),Hg}function Xp(n,r,o,d,p){const T=p?"class":"style";Wp(n,o,r.inputs[T],T,d)}function Hf(n,r,o,d){const p=w(),_=f(),T=Fe+n,P=p[le],L=_.firstCreatePass?function jf(n,r,o,d,p,_){const T=r.consts,L=Mc(r,n,2,d,Os(T,p));return Np(r,o,L,Os(T,_)),null!==L.attrs&&Ph(L,L.attrs,!1),null!==L.mergedAttrs&&Ph(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(T,_,p,r,o,d):_.data[T],K=p[T]=Ti(P,r,function va(){return er.lFrame.currentNamespace}()),se=As(L);return Sn(L,!0),ua(P,K,L),32!=(32&L.flags)&&Kl(_,p,K,L),0===function Qs(){return er.lFrame.elementDepthCount}()&&Ps(K,p),function So(){er.lFrame.elementDepthCount++}(),se&&(xh(_,p,L),Mp(_,L,p)),null!==d&&Rp(p,L),Hf}function Gg(){let n=ze();lr()?ti():(n=n.parent,Sn(n,!1));const r=n;!function Ua(){er.lFrame.elementDepthCount--}();const o=f();return o.firstCreatePass&&(_a(o,n),es(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function jr(n){return 0!=(8&n.flags)}(r)&&Xp(o,r,w(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function _r(n){return 0!=(16&n.flags)}(r)&&Xp(o,r,w(),r.stylesWithoutHost,!1),Gg}function Fm(n,r,o,d){return Hf(n,r,o,d),Gg(),Fm}function zg(n,r,o){const d=w(),p=f(),_=n+Fe,T=p.firstCreatePass?function Rv(n,r,o,d,p){const _=r.consts,T=Os(_,d),P=Mc(r,n,8,"ng-container",T);return null!==T&&Ph(P,T,!0),Np(r,o,P,Os(_,p)),null!==r.queries&&r.queries.elementStart(r,P),P}(_,p,d,r,o):p.data[_];Sn(T,!0);const P=d[_]=d[le].createComment("");return Kl(p,d,P,T),Ps(P,d),As(T)&&(xh(p,d,T),Mp(p,T,d)),null!=o&&Rp(d,T),zg}function Lm(){let n=ze();const r=f();return lr()?ti():(n=n.parent,Sn(n,!1)),r.firstCreatePass&&(_a(r,n),es(n)&&r.queries.elementEnd(n)),Lm}function Wg(n,r,o){return zg(n,r,o),Lm(),Wg}function Bm(n){return!!n&&"function"==typeof n.then}function by(n){return!!n&&"function"==typeof n.subscribe}const Cy=by;function qg(n,r,o,d){const p=w(),_=f(),T=ze();return function $m(n,r,o,d,p,_,T){const P=As(d),K=n.firstCreatePass&&Gp(n),se=r[qe],be=Hp(r);let ft=!0;if(3&d.type||T){const hn=Mi(d,r),Nn=T?T(hn):hn,rr=be.length,Ar=T?Yr=>T(Zr(Yr[d.index])):d.index;let sn=null;if(!T&&P&&(sn=function Dy(n,r,o,d){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const T=p[_];if(T===o&&p[_+1]===d){const P=r[he],L=p[_+2];return P.length>L?P[L]:null}"string"==typeof T&&(_+=2)}return null}(n,r,p,d.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=_,sn.__ngLastListenerFn__=_,ft=!1;else{_=Qp(d,r,se,_,!1);const Yr=o.listen(Nn,p,_);be.push(_,Yr),K&&K.push(p,Ar,rr,rr+1)}}else _=Qp(d,r,se,_,!1);const Tt=d.outputs;let Yt;if(ft&&null!==Tt&&(Yt=Tt[p])){const hn=Yt.length;if(hn)for(let Nn=0;Nn<hn;Nn+=2){const Us=r[Yt[Nn]][Yt[Nn+1]].subscribe(_),Mo=be.length;be.push(_,Us),K&&K.push(p,d.index,Mo,-(Mo+1))}}}(_,p,p[le],T,n,r,d),qg}function Vm(n,r,o,d){try{return yr(6,r,o),!1!==o(d)}catch(p){return Pg(n,p),!1}finally{yr(7,r,o)}}function Qp(n,r,o,d,p){return function _(T){if(T===Function)return d;kl(n.componentOffset>-1?Ri(n.index,r):r);let L=Vm(r,o,d,T),K=_.__ngNextListenerFn__;for(;K;)L=Vm(r,o,K,T)&&L,K=K.__ngNextListenerFn__;return p&&!1===L&&(T.preventDefault(),T.returnValue=!1),L}}function wi(n=1){return function na(n){return(er.lFrame.contextLView=function Bo(n,r){for(;n>0;)r=r[Ft],n--;return r}(n,er.lFrame.contextLView))[qe]}(n)}function Sy(n,r){let o=null;const d=function vf(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(n);for(let p=0;p<r.length;p++){const _=r[p];if("*"!==_){if(null===d?wg(n,_,!0):Ef(d,_))return p}else o=p}return o}function Um(n){const r=w()[Kt][ne];if(!r.projection){const d=r.projection=mo(n?n.length:1,null),p=d.slice();let _=r.child;for(;null!==_;){const T=n?Sy(_,n):0;null!==T&&(p[T]?p[T].projectionNext=_:d[T]=_,p[T]=_),_=_.next}}}function Gf(n,r=0,o){const d=w(),p=f(),_=Mc(p,Fe+n,16,null,o||null);null===_.projection&&(_.projection=r),ti(),32!=(32&_.flags)&&function Ka(n,r,o){yu(r[le],0,r,o,Ml(n,o,r),Wo(o.parent||r[ne],o,r))}(p,d,_)}function zf(n,r){return n<<17|r<<2}function Qd(n){return n>>17&32767}function My(n){return 2|n}function Wf(n){return(131068&n)>>2}function _o(n,r){return-131069&n|r<<2}function zm(n){return 1|n}function Oy(n,r,o,d,p){const _=n[o+1],T=null===r;let P=d?Qd(_):Wf(_),L=!1;for(;0!==P&&(!1===L||T);){const se=n[P+1];Lv(n[P],r)&&(L=!0,n[P+1]=d?zm(se):My(se)),P=d?Qd(se):Wf(se)}L&&(n[o+1]=d?My(_):zm(_))}function Lv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&x(n,r)>=0}function qf(n,r){return function ic(n,r,o,d){const p=w(),_=f(),T=function ho(n){const r=er.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}(2);_.firstUpdatePass&&function Zg(n,r,o,d){const p=n.data;if(null===p[o+1]){const _=p[mi()],T=function Yg(n,r){return r>=n.expandoStartIndex}(n,o);(function th(n,r){return 0!=(n.flags&(r?8:16))})(_,d)&&null===r&&!T&&(r=!1),r=function Ly(n,r,o,d){const p=function ga(n){const r=er.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let _=d?r.residualClasses:r.residualStyles;if(null===p)0===(d?r.classBindings:r.styleBindings)&&(o=$h(o=tg(null,n,r,o,d),r.attrs,d),_=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==p)if(o=tg(p,n,r,o,d),null===_){let L=function Bh(n,r,o){const d=o?r.classBindings:r.styleBindings;if(0!==Wf(d))return n[Qd(d)]}(n,r,d);void 0!==L&&Array.isArray(L)&&(L=tg(null,n,r,L[1],d),L=$h(L,r.attrs,d),function By(n,r,o,d){n[Qd(o?r.classBindings:r.styleBindings)]=d}(n,r,d,L))}else _=function $y(n,r,o){let d;const p=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<p;_++)d=$h(d,n[_].hostAttrs,o);return $h(d,r.attrs,o)}(n,r,d)}return void 0!==_&&(d?r.residualClasses=_:r.residualStyles=_),o}(p,_,r,d),function Nv(n,r,o,d,p,_){let T=_?r.classBindings:r.styleBindings,P=Qd(T),L=Wf(T);n[d]=o;let se,K=!1;if(Array.isArray(o)?(se=o[1],(null===se||x(o,se)>0)&&(K=!0)):se=o,p)if(0!==L){const ft=Qd(n[P+1]);n[d+1]=zf(ft,P),0!==ft&&(n[ft+1]=_o(n[ft+1],d)),n[P+1]=function Ks(n,r){return 131071&n|r<<17}(n[P+1],d)}else n[d+1]=zf(P,0),0!==P&&(n[P+1]=_o(n[P+1],d)),P=d;else n[d+1]=zf(L,0),0===P?P=d:n[L+1]=_o(n[L+1],d),L=d;K&&(n[d+1]=My(n[d+1])),Oy(n,se,d,!0),Oy(n,se,d,!1),function Fv(n,r,o,d,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&x(_,r)>=0&&(o[d+1]=zm(o[d+1]))}(r,se,n,d,_),T=zf(P,L),_?r.classBindings=T:r.styleBindings=T}(p,_,r,o,T,d)}}(_,n,T,d),r!==Rr&&Oi(p,T,r)&&function Km(n,r,o,d,p,_,T,P){if(!(3&r.type))return;const L=n.data,K=L[P+1],se=function Ry(n){return 1==(1&n)}(K)?Kf(L,r,o,p,Wf(K),T):void 0;Qg(se)||(Qg(_)||function Pv(n){return 2==(2&n)}(K)&&(_=Kf(L,null,o,p,P,T)),function Qh(n,r,o,d,p){if(r)p?n.addClass(o,d):n.removeClass(o,d);else{let _=-1===d.indexOf("-")?void 0:cl.DashCase;null==p?n.removeStyle(o,d,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=cl.Important),n.setStyle(o,d,p,_))}}(d,T,Hs(mi(),o),p,_))}(_,_.data[mi()],p,p[le],n,p[T+1]=function Jg(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Te(on(n)))),n}(r,o),d,T)}(n,r,null,!0),qf}function tg(n,r,o,d,p){let _=null;const T=o.directiveEnd;let P=o.directiveStylingLast;for(-1===P?P=o.directiveStart:P++;P<T&&(_=r[P],d=$h(d,_.hostAttrs,p),_!==n);)P++;return null!==n&&(o.directiveStylingLast=P),d}function $h(n,r,o){const d=o?1:2;let p=-1;if(null!==r)for(let _=0;_<r.length;_++){const T=r[_];"number"==typeof T?p=T:p===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),io(n,T,!!o||r[++_]))}return void 0===n?null:n}function Kf(n,r,o,d,p,_){const T=null===r;let P;for(;p>0;){const L=n[p],K=Array.isArray(L),se=K?L[1]:L,be=null===se;let ft=o[p+1];ft===Rr&&(ft=be?ut:void 0);let Tt=be?A(ft,d):se===d?ft:void 0;if(K&&!Qg(Tt)&&(Tt=A(L,d)),Qg(Tt)&&(P=Tt,T))return P;const Yt=n[p+1];p=T?Qd(Yt):Wf(Yt)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(P=A(L,d))}return P}function Qg(n){return void 0!==n}function Fc(n,r=""){const o=w(),d=f(),p=n+Fe,_=d.firstCreatePass?Mc(d,p,1,r,null):d.data[p],T=o[p]=function Gl(n,r){return n.createText(r)}(o[le],r);Kl(d,o,T,_),Sn(_,!1)}function oc(n,r,o){const d=w(),p=function Su(n,r,o,d){return Oi(n,fa(),o)?r+ae(o)+d:Rr}(d,n,r,o);return p!==Rr&&function Cu(n,r,o){const d=Hs(r,n);!function Bu(n,r,o){n.setValue(r,o)}(n[le],d,o)}(d,mi(),p),oc}const Vh=void 0;var rv=["en",[["a","p"],["AM","PM"],Vh],[["AM","PM"],Vh,Vh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vh,"{1} 'at' {0}",Vh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xv(n){const o=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===d?1:5}];let Xf={};function ig(n){const r=function Qv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=sv(r);if(o)return o;const d=r.split("-")[0];if(o=sv(d),o)return o;if("en"===d)return rv;throw new Ce(701,!1)}function iv(n){return ig(n)[Cr.PluralCase]}function sv(n){return n in Xf||(Xf[n]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[n]),Xf[n]}var Cr=(()=>((Cr=Cr||{})[Cr.LocaleId=0]="LocaleId",Cr[Cr.DayPeriodsFormat=1]="DayPeriodsFormat",Cr[Cr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Cr[Cr.DaysFormat=3]="DaysFormat",Cr[Cr.DaysStandalone=4]="DaysStandalone",Cr[Cr.MonthsFormat=5]="MonthsFormat",Cr[Cr.MonthsStandalone=6]="MonthsStandalone",Cr[Cr.Eras=7]="Eras",Cr[Cr.FirstDayOfWeek=8]="FirstDayOfWeek",Cr[Cr.WeekendRange=9]="WeekendRange",Cr[Cr.DateFormat=10]="DateFormat",Cr[Cr.TimeFormat=11]="TimeFormat",Cr[Cr.DateTimeFormat=12]="DateTimeFormat",Cr[Cr.NumberSymbols=13]="NumberSymbols",Cr[Cr.NumberFormats=14]="NumberFormats",Cr[Cr.CurrencyCode=15]="CurrencyCode",Cr[Cr.CurrencySymbol=16]="CurrencySymbol",Cr[Cr.CurrencyName=17]="CurrencyName",Cr[Cr.Currencies=18]="Currencies",Cr[Cr.Directionality=19]="Directionality",Cr[Cr.PluralCase=20]="PluralCase",Cr[Cr.ExtraData=21]="ExtraData",Cr))();const sg="en-US";let ty=sg;function c_(n,r,o,d,p){if(n=de(n),Array.isArray(n))for(let _=0;_<n.length;_++)c_(n[_],r,o,d,p);else{const _=f(),T=w();let P=wc(n)?n:de(n.provide),L=Bd(n);const K=ze(),se=1048575&K.providerIndexes,be=K.directiveStart,ft=K.providerIndexes>>20;if(wc(n)||!n.multi){const Tt=new Et(L,p,cd),Yt=h_(P,r,p?se:se+ft,be);-1===Yt?(Bl(Fi(K,T),_,P),d_(_,n,r.length),r.push(P),K.directiveStart++,K.directiveEnd++,p&&(K.providerIndexes+=1048576),o.push(Tt),T.push(Tt)):(o[Yt]=Tt,T[Yt]=Tt)}else{const Tt=h_(P,r,se+ft,be),Yt=h_(P,r,se,se+ft),Nn=Yt>=0&&o[Yt];if(p&&!Nn||!p&&!(Tt>=0&&o[Tt])){Bl(Fi(K,T),_,P);const rr=function OE(n,r,o,d,p){const _=new Et(n,o,cd);return _.multi=[],_.index=r,_.componentProviders=0,e0(_,p,d&&!o),_}(p?RE:ME,o.length,p,d,L);!p&&Nn&&(o[Yt].providerFactory=rr),d_(_,n,r.length,0),r.push(P),K.directiveStart++,K.directiveEnd++,p&&(K.providerIndexes+=1048576),o.push(rr),T.push(rr)}else d_(_,n,Tt>-1?Tt:Yt,e0(o[p?Yt:Tt],L,!p&&d));!p&&d&&Nn&&o[Yt].componentProviders++}}}function d_(n,r,o,d){const p=wc(r),_=function uf(n){return!!n.useClass}(r);if(p||_){const L=(_?de(r.useClass):r).prototype.ngOnDestroy;if(L){const K=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const se=K.indexOf(o);-1===se?K.push(o,[d,L]):K[se+1].push(d,L)}else K.push(o,L)}}}function e0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function h_(n,r,o,d){for(let p=o;p<d;p++)if(r[p]===n)return p;return-1}function ME(n,r,o,d){return f_(this.multi,[])}function RE(n,r,o,d){const p=this.multi;let _;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=Qn(o,o[cn],this.providerFactory.index,d);_=P.slice(0,T),f_(p,_);for(let L=T;L<P.length;L++)_.push(P[L])}else _=[],f_(p,_);return _}function f_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function t0(n,r=[]){return o=>{o.providersResolver=(d,p)=>function xE(n,r,o){const d=f();if(d.firstCreatePass){const p=xi(n);c_(o,d.data,d.blueprint,p,!0),c_(r,d.data,d.blueprint,p,!1)}}(d,p?p(n):n,r)}}class im{}class n0{}function PE(n,r){return new r0(n,null!=r?r:null)}class r0 extends im{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kg(this);const d=$r(r);this._bootstrapComponents=Fa(d.bootstrap),this._r3Injector=Gd(r,o,[{provide:im,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],Te(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class p_ extends n0{constructor(r){super(),this.moduleType=r}create(r){return new r0(this.moduleType,r)}}class kE extends im{constructor(r,o,d){super(),this.componentFactoryResolver=new kg(this),this.instance=null;const p=new pp([...r,{provide:im,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],o||cf(),d,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function g_(n,r,o=null){return new kE(n,r,o).injector}let NE=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const d=qu(0,o.type),p=d.length>0?g_([d],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ot({token:n,providedIn:"environment",factory:()=>new n(Se(sd))}),n})();function s0(n){n.getStandaloneInjector=r=>r.get(NE).getOrCreateStandaloneInjector(n)}function h0(n,r,o,d){return function f0(n,r,o,d,p,_){const T=r+o;return Oi(n,T,p)?function pr(n,r,o){return n[r]=o}(n,T+1,_?d.call(_,p):d(p)):function cy(n,r){const o=n[r];return o===Rr?void 0:o}(n,T+1)}(w(),function ni(){const n=er.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),n,r,o,d)}function y_(n){return r=>{setTimeout(n,void 0,r)}}const ih=class ow extends u.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,d){let p=r,_=o||(()=>null),T=d;if(r&&"object"==typeof r){var P,L,K;const be=r;p=null===(P=be.next)||void 0===P?void 0:P.bind(be),_=null===(L=be.error)||void 0===L?void 0:L.bind(be),T=null===(K=be.complete)||void 0===K?void 0:K.bind(be)}this.__isAsync&&(_=y_(_),p&&(p=y_(p)),T&&(T=y_(T)));const se=super.subscribe({next:p,error:_,complete:T});return r instanceof J.w0&&r.add(se),se}};function aw(){return this._results[Symbol.iterator]()}class v_{get changes(){return this._changes||(this._changes=new ih)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=v_.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=aw)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const d=this;d.dirty=!1;const p=function Xi(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Fr(n,r,o){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let p=n[d],_=r[d];if(o&&(p=o(p),_=o(_)),_!==p)return!1}return!0}(d._results,p,o))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hy=(()=>{class n{}return n.__NG_ELEMENT_ID__=cw,n})();const lw=hy,uw=class extends lw{constructor(r,o,d){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=d}createEmbeddedView(r,o){const d=this._declarationTContainer.tView,p=xc(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,o||null);p[mn]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[ar];return null!==T&&(p[ar]=T.createEmbeddedView(d)),Ah(d,p,r),new Oc(p)}};function cw(){return wv(ze(),w())}function wv(n,r){return 4&n.type?new uw(r,n,Pl(n,r)):null}let Iv=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();function dw(){return E0(ze(),w())}const hw=Iv,v0=class extends hw{constructor(r,o,d){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=d}get element(){return Pl(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){const r=su(this._hostTNode,this._hostLView);if(ra(r)){const o=_i(r,this._hostLView),d=Fs(r);return new Hn(o[cn].data[d+8],o)}return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=_0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-Kn}createEmbeddedView(r,o,d){let p,_;"number"==typeof d?p=d:null!=d&&(p=d.index,_=d.injector);const T=r.createEmbeddedView(o||{},_);return this.insert(T,p),T}createComponent(r,o,d,p,_){const T=r&&!function Nr(n){return"function"==typeof n}(r);let P;if(T)P=o;else{const be=o||{};P=be.index,d=be.injector,p=be.projectableNodes,_=be.environmentInjector||be.ngModuleRef}const L=T?r:new md(Bn(r)),K=d||this.parentInjector;if(!_&&null==L.ngModule){const ft=(T?K:this.parentInjector).get(sd,null);ft&&(_=ft)}const se=L.create(K,p,void 0,_);return this.insert(se.hostView,P),se}insert(r,o){const d=r._lView,p=d[cn];if(function zs(n){return Ji(n[Ur])}(d)){const se=this.indexOf(r);if(-1!==se)this.detach(se);else{const be=d[Ur],ft=new v0(be,be[ne],be[Ur]);ft.detach(ft.indexOf(r))}}const _=this._adjustIndex(o),T=this._lContainer;!function Wl(n,r,o,d){const p=Kn+d,_=o.length;d>0&&(o[p-1][ei]=r),d<_-Kn?(r[ei]=o[p],al(o,Kn+d,r)):(o.push(r),r[ei]=null),r[Ur]=o;const T=r[mn];null!==T&&o!==T&&function Xh(n,r){const o=n[vi];r[Kt]!==r[Ur][Ur][Kt]&&(n[Jt]=!0),null===o?n[vi]=[r]:o.push(r)}(T,r);const P=r[ar];null!==P&&P.insertView(n),r[Un]|=64}(p,d,T,_);const P=Kc(_,T),L=d[le],K=la(L,T[gn]);return null!==K&&function Sa(n,r,o,d,p,_){d[Ci]=p,d[ne]=r,mu(n,d,o,1,p,_)}(p,T[ne],L,d,K,P),r.attachToViewContainerRef(),al(__(T),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=_0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),d=hl(this._lContainer,o);d&&(Ho(__(this._lContainer),o),Ta(d[cn],d))}detach(r){const o=this._adjustIndex(r,-1),d=hl(this._lContainer,o);return d&&null!=Ho(__(this._lContainer),o)?new Oc(d):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function _0(n){return n[qn]}function __(n){return n[qn]||(n[qn]=[])}function E0(n,r){let o;const d=r[n.index];if(Ji(d))o=d;else{let p;if(8&n.type)p=Zr(d);else{const _=r[le];p=_.createComment("");const T=Mi(n,r);Ei(_,la(_,T),p,function fu(n,r){return n.nextSibling(r)}(_,T),!1)}r[n.index]=o=Og(d,r,p,n),Zd(r,o)}return new v0(o,n,r)}class E_{constructor(r){this.queryList=r,this.matches=null}clone(){return new E_(this.queryList)}setDirty(){this.queryList.setDirty()}}class w_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const d=null!==r.contentQueries?r.contentQueries[0]:o.length,p=[];for(let _=0;_<d;_++){const T=o.getByIndex(_);p.push(this.queries[T.indexInDeclarationView].clone())}return new w_(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==x0(r,o).matches&&this.queries[o].setDirty()}}class w0{constructor(r,o,d=null){this.predicate=r,this.flags=o,this.read=d}}class I_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let d=0;d<this.length;d++){const p=null!==o?o.length:0,_=this.getByIndex(d).embeddedTView(r,p);_&&(_.indexInDeclarationView=d,null!==o?o.push(_):o=[_])}return null!==o?new I_(o):null}template(r,o){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class b_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new b_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==o;)d=d.parent;return o===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const _=d[p];this.matchTNodeWithReadOption(r,o,fw(o,_)),this.matchTNodeWithReadOption(r,o,Ia(o,r,_,!1,!1))}else d===hy?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Ia(o,r,d,!1,!1))}matchTNodeWithReadOption(r,o,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===Qu||p===Iv||p===hy&&4&o.type)this.addMatch(o.index,-2);else{const _=Ia(o,r,p,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,d)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function fw(n,r){const o=n.localNames;if(null!==o)for(let d=0;d<o.length;d+=2)if(o[d]===r)return o[d+1];return null}function gw(n,r,o,d){return-1===o?function pw(n,r){return 11&n.type?Pl(n,r):4&n.type?wv(n,r):null}(r,n):-2===o?function mw(n,r,o){return o===Qu?Pl(r,n):o===hy?wv(r,n):o===Iv?E0(r,n):void 0}(n,r,d):Qn(n,n[cn],o,r)}function I0(n,r,o,d){const p=r[ar].queries[d];if(null===p.matches){const _=n.data,T=o.matches,P=[];for(let L=0;L<T.length;L+=2){const K=T[L];P.push(K<0?null:gw(r,_[K],T[L+1],o.metadata.read))}p.matches=P}return p.matches}function C_(n,r,o,d){const p=n.queries.getByIndex(o),_=p.matches;if(null!==_){const T=I0(n,r,p,o);for(let P=0;P<_.length;P+=2){const L=_[P];if(L>0)d.push(T[P/2]);else{const K=_[P+1],se=r[-L];for(let be=Kn;be<se.length;be++){const ft=se[be];ft[mn]===ft[Ur]&&C_(ft[cn],ft,K,d)}if(null!==se[vi]){const be=se[vi];for(let ft=0;ft<be.length;ft++){const Tt=be[ft];C_(Tt[cn],Tt,K,d)}}}}}return d}function b0(n){const r=w(),o=f(),d=fo();po(d+1);const p=x0(o,d);if(n.dirty&&function vs(n){return 4==(4&n[Un])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?C_(o,r,d,[]):I0(o,r,p,d);n.reset(_,mg),n.notifyOnChanges()}return!0}return!1}function C0(n,r,o){const d=f();d.firstCreatePass&&(A0(d,new w0(n,r,o),-1),2==(2&r)&&(d.staticViewQueries=!0)),T0(d,w(),r)}function D0(n,r,o,d){const p=f();if(p.firstCreatePass){const _=ze();A0(p,new w0(r,o,d),_.index),function vw(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}T0(p,w(),o)}function S0(){return function yw(n,r){return n[ar].queries[r].queryList}(w(),fo())}function T0(n,r,o){const d=new v_(4==(4&o));Rf(n,r,d,d.destroy),null===r[ar]&&(r[ar]=new w_),r[ar].queries.push(new E_(d))}function A0(n,r,o){null===n.queries&&(n.queries=new I_),n.queries.track(new b_(r,o))}function x0(n,r){return n.queries.getByIndex(r)}function D_(n){return!!$r(n)}function Cv(...n){}const q0=new gi("Application Initializer");let Dv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Cv,this.reject=Cv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(Bm(_))o.push(_);else if(Cy(_)){const T=new Promise((P,L)=>{_.subscribe({complete:P,error:L})});o.push(T)}}Promise.all(o).then(()=>{d()}).catch(p=>{this.reject(p)}),0===o.length&&d(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Se(q0,8))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K0=new gi("AppId",{providedIn:"root",factory:function Y0(){return`${M_()}${M_()}${M_()}`}});function M_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Z0=new gi("Platform Initializer"),$w=new gi("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Vw=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Sv=new gi("LocaleId",{providedIn:"root",factory:()=>Ue(Sv,qt.Optional|qt.SkipSelf)||function Uw(){return typeof $localize<"u"&&$localize.locale||sg}()}),jw=new gi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Hw{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let Gw=(()=>{class n{compileModuleSync(o){return new p_(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const d=this.compileModuleSync(o),_=Fa($r(o).declarations).reduce((T,P)=>{const L=Bn(P);return L&&T.push(new md(L)),T},[]);return new Hw(d,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qw=(()=>Promise.resolve(0))();function R_(n){typeof Zone>"u"?qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Bc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ih(!1),this.onMicrotaskEmpty=new ih(!1),this.onStable=new ih(!1),this.onError=new ih(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&o,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Kw(){let n=wn.requestAnimationFrame,r=wn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Xw(n){const r=()=>{!function Zw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,P_(n),n.isCheckStableRunning=!0,O_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),P_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,d,p,_,T,P)=>{try{return J0(n),o.invokeTask(p,_,T,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),eE(n)}},onInvoke:(o,d,p,_,T,P,L)=>{try{return J0(n),o.invoke(p,_,T,P,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),eE(n)}},onHasTask:(o,d,p,_)=>{o.hasTask(p,_),d===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,P_(n),O_(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,d,p,_)=>(o.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bc.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(Bc.isInAngularZone())throw new Ce(909,!1)}run(r,o,d){return this._inner.run(r,o,d)}runTask(r,o,d,p){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+p,r,Yw,Cv,Cv);try{return _.runTask(T,o,d)}finally{_.cancelTask(T)}}runGuarded(r,o,d){return this._inner.runGuarded(r,o,d)}runOutsideAngular(r){return this._outer.run(r)}}const Yw={};function O_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function P_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function J0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eE(n){n._nesting--,O_(n)}class Qw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ih,this.onMicrotaskEmpty=new ih,this.onStable=new ih,this.onError=new ih}run(r,o,d){return r.apply(o,d)}runGuarded(r,o,d){return r.apply(o,d)}runOutsideAngular(r){return r()}runTask(r,o,d,p){return r.apply(o,d)}}const tE=new gi(""),nE=new gi("");let k_,Jw=(()=>{class n{constructor(o,d,p){this._ngZone=o,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k_||(function eI(n){k_=n}(p),p.addToWindow(d)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bc.assertNotInAngularZone(),R_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())R_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(o)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,d,p){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),o(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:p})}whenStable(o,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,d,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(Se(Bc),Se(rE),Se(nE))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac}),n})(),rE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,d){this._applications.set(o,d)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,d=!0){var p,_;return null!==(p=null===(_=k_)||void 0===_?void 0:_.findTestabilityInTree(this,o,d))&&void 0!==p?p:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Gh=!1;let np=null;const iE=new gi("AllowMultipleToken"),N_=new gi("PlatformDestroyListeners"),sE=new gi("appBootstrapListener");class rI{constructor(r,o){this.name=r,this.token=o}}function aE(n,r,o=[]){const d=`Platform: ${r}`,p=new gi(d);return(_=[])=>{let T=F_();if(!T||T.injector.get(iE,!1)){const P=[...o,..._,{provide:p,useValue:!0}];n?n(P):function iI(n){if(np&&!np.get(iE,!1))throw new Ce(400,!1);np=n;const r=n.get(uE);(function oE(n){const r=n.get(Z0,null);r&&r.forEach(o=>o())})(n)}(function lE(n=[],r){return wu.create({name:r,providers:[{provide:Ku,useValue:"platform"},{provide:N_,useValue:new Set([()=>np=null])},...n]})}(P,d))}return function oI(n){const r=F_();if(!r)throw new Ce(401,!1);return r}()}}function F_(){var n,r;return null!==(n=null===(r=np)||void 0===r?void 0:r.get(uE))&&void 0!==n?n:null}let uE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,d){const p=function dE(n,r){let o;return o="noop"===n?new Qw:("zone.js"===n?void 0:n)||new Bc(r),o}(null==d?void 0:d.ngZone,function cE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),_=[{provide:Bc,useValue:p}];return p.run(()=>{const T=wu.create({providers:_,parent:this.injector,name:o.moduleType.name}),P=o.create(T),L=P.injector.get(jd,null);if(!L)throw new Ce(402,!1);return p.runOutsideAngular(()=>{const K=p.onError.subscribe({next:se=>{L.handleError(se)}});P.onDestroy(()=>{Av(this._modules,P),K.unsubscribe()})}),function hE(n,r,o){try{const d=o();return Bm(d)?d.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(L,p,()=>{const K=P.injector.get(Dv);return K.runInitializers(),K.donePromise.then(()=>(function Qf(n){et(n,"Expected localeId to be defined"),"string"==typeof n&&(ty=n.toLowerCase().replace(/_/g,"-"))}(P.injector.get(Sv,sg)||sg),this._moduleDoBootstrap(P),P))})})}bootstrapModule(o,d=[]){const p=fE({},d);return function tI(n,r,o){const d=new p_(o);return Promise.resolve(d)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(o){const d=o.injector.get(Tv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new Ce(-403,!1);o.instance.ngDoBootstrap(d)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const o=this._injector.get(N_,null);o&&(o.forEach(d=>d()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Se(wu))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function fE(n,r){return Array.isArray(r)?r.reduce(fE,n):{...n,...r}}let Tv=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,d,p){this._zone=o,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new H.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),T=new H.y(P=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Bc.assertNotInAngularZone(),R_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{Bc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{L.unsubscribe(),K.unsubscribe()}});this.isStable=(0,xe.T)(_,T.pipe((0,Re.B)()))}bootstrap(o,d){const p=o instanceof Vd;if(!this._injector.get(Dv).done){!p&&ii(o);throw new Ce(405,Gh)}let T;T=p?o:this._injector.get(Ko).resolveComponentFactory(o),this.componentTypes.push(T.componentType);const P=function nI(n){return n.isBoundToModule}(T)?void 0:this._injector.get(im),K=T.create(wu.NULL,[],d||T.selector,P),se=K.location.nativeElement,be=K.injector.get(tE,null);return null==be||be.registerApplication(se),K.onDestroy(()=>{this.detachView(K.hostView),Av(this.components,K),null==be||be.unregisterApplication(se)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const d=o;this._views.push(d),d.attachToAppRef(this)}detachView(o){const d=o;Av(this._views,d),d.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const d=this._injector.get(sE,[]);d.push(...this._bootstrapListeners),d.forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Av(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ce(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Se(Bc),Se(sd),Se(jd))},n.\u0275prov=Ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Av(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}function lI(){return!1}function uI(){}let cI=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();function dI(n){return function hI(n,r,o){if(us(n)&&!o){const d=Ri(n.index,r);return new Oc(d,d)}return 47&n.type?new Oc(r[Kt],r):null}(ze(),w(),16==(16&n))}class vE{constructor(){}supports(r){return mt(r)}create(r){return new vI(r)}}const yI=(n,r)=>r;class vI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||yI}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,d=this._removalsHead,p=0,_=null;for(;o||d;){const T=!d||o&&o.currentIndex<EE(d,p,_)?o:d,P=EE(T,p,_),L=T.currentIndex;if(T===d)p--,d=d._nextRemoved;else if(o=o._next,null==T.previousIndex)p++;else{_||(_=[]);const K=P-p,se=L-p;if(K!=se){for(let ft=0;ft<K;ft++){const Tt=ft<_.length?_[ft]:_[ft]=0,Yt=Tt+ft;se<=Yt&&Yt<K&&(_[ft]=Tt+1)}_[T.previousIndex]=se-K}}P!==L&&r(T,P,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!mt(r))throw new Ce(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,_,T,o=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let P=0;P<this.length;P++)_=r[P],T=this._trackByFn(P,_),null!==o&&Object.is(o.trackById,T)?(d&&(o=this._verifyReinsertion(o,_,T,P)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,T,P),d=!0),o=o._next}else p=0,function Vt(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Symbol.iterator]();let d;for(;!(d=o.next()).done;)r(d.value)}}(r,P=>{T=this._trackByFn(p,P),null!==o&&Object.is(o.trackById,T)?(d&&(o=this._verifyReinsertion(o,P,T,p)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,T,p),d=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,d,p){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,p)):r=this._addAfter(new _I(o,d),_,p),r}_verifyReinsertion(r,o,d,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?r=this._reinsertAfter(_,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,_=r._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(r,o,d),this._addToMoves(r,d),r}_moveAfter(r,o,d){return this._unlink(r),this._insertAfter(r,o,d),this._addToMoves(r,d),r}_addAfter(r,o,d){return this._insertAfter(r,o,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,d){const p=null===o?this._itHead:o._next;return r._next=p,r._prev=o,null===p?this._itTail=r:p._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new _E),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,d=r._next;return null===o?this._itHead=d:o._next=d,null===d?this._itTail=o:d._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _E),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class _I{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===o||o<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const o=r._prevDup,d=r._nextDup;return null===o?this._head=d:o._nextDup=d,null===d?this._tail=o:d._prevDup=o,null===this._head}}class _E{constructor(){this.map=new Map}put(r){const o=r.trackById;let d=this.map.get(o);d||(d=new EI,this.map.set(o,d)),d.add(r)}get(r,o){const p=this.map.get(r);return p?p.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EE(n,r,o){const d=n.previousIndex;if(null===d)return d;let p=0;return o&&d<o.length&&(p=o[d]),d+r+p}class wE{constructor(){}supports(r){return r instanceof Map||yn(r)}create(){return new wI}}class wI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||yn(r)))throw new Ce(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,d),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(p,d);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let d=o;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const d=r._prev;return o._next=r,o._prev=d,r._prev=o,d&&(d._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,o);const _=p._prev,T=p._next;return _&&(_._next=T),T&&(T._prev=_),p._next=null,p._prev=null,p}const d=new II(r);return this._records.set(r,d),d.currentValue=o,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(d=>o(r[d],d))}}class II{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IE(){return new U_([new vE])}let U_=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(null!=d){const p=d.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||IE()),deps:[[n,new te,new F]]}}find(o){const d=this.factories.find(p=>p.supports(o));if(null!=d)return d;throw new Ce(901,!1)}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:IE}),n})();function bE(){return new j_([new wE])}let j_=(()=>{class n{constructor(o){this.factories=o}static create(o,d){if(d){const p=d.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:d=>n.create(o,d||bE()),deps:[[n,new te,new F]]}}find(o){const d=this.factories.find(p=>p.supports(o));if(d)return d;throw new Ce(901,!1)}}return n.\u0275prov=Ot({token:n,providedIn:"root",factory:bE}),n})();const DI=aE(null,"core",[]);let SI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Se(Tv))},n.\u0275mod=or({type:n}),n.\u0275inj=Ct({}),n})();function TI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(un,yt,V)=>{"use strict";V.d(yt,{u5:()=>ja,JU:()=>it,a5:()=>Vr,JJ:()=>sr,On:()=>qn,Q7:()=>ys});var u=V(4650),J=V(6895),H=V(8996),xe=V(9751),Re=V(4742),Pe=V(8421),me=V(7669),Te=V(5403),Ve=V(3268),_e=V(1810),de=V(4004);let Ae=(()=>{class m{constructor(f,S){this._renderer=f,this._elementRef=S,this.onChange=W=>{},this.onTouched=()=>{}}setProperty(f,S){this._renderer.setProperty(this._elementRef.nativeElement,f,S)}registerOnTouched(f){this.onTouched=f}registerOnChange(f){this.onChange=f}setDisabledState(f){this.setProperty("disabled",f)}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.Qsj),u.Y36(u.SBq))},m.\u0275dir=u.lG2({type:m}),m})(),je=(()=>{class m extends Ae{}return m.\u0275fac=function(){let w;return function(S){return(w||(w=u.n5z(m)))(S||m)}}(),m.\u0275dir=u.lG2({type:m,features:[u.qOj]}),m})();const it=new u.OlP("NgValueAccessor"),ve={provide:it,useExisting:(0,u.Gpc)(()=>at),multi:!0},lt=new u.OlP("CompositionEventMode");let at=(()=>{class m extends Ae{constructor(f,S,W){super(f,S),this._compositionMode=W,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ae(){const m=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(m.toLowerCase())}())}writeValue(f){this.setProperty("value",null==f?"":f)}_handleInput(f){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(f)}_compositionStart(){this._composing=!0}_compositionEnd(f){this._composing=!1,this._compositionMode&&this.onChange(f)}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(lt,8))},m.\u0275dir=u.lG2({type:m,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(f,S){1&f&&u.NdJ("input",function(ze){return S._handleInput(ze.target.value)})("blur",function(){return S.onTouched()})("compositionstart",function(){return S._compositionStart()})("compositionend",function(ze){return S._compositionEnd(ze.target.value)})},features:[u._Bn([ve]),u.qOj]}),m})();const Ye=!1;const Ne=new u.OlP("NgValidators"),Q=new u.OlP("NgAsyncValidators");function nt(m){return function G(m){return null==m||("string"==typeof m||Array.isArray(m))&&0===m.length}(m.value)?{required:!0}:null}function we(m){return null}function et(m){return null!=m}function He(m){const w=(0,u.QGY)(m)?(0,H.D)(m):m;if(Ye&&!(0,u.CqO)(w)){let f="Expected async validator to return Promise or Observable.";throw"object"==typeof m&&(f+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,f)}return w}function rt(m){let w={};return m.forEach(f=>{w=null!=f?{...w,...f}:w}),0===Object.keys(w).length?null:w}function Ze(m,w){return w.map(f=>f(m))}function Ot(m){return m.map(w=>function Pt(m){return!m.validate}(w)?w:f=>w.validate(f))}function Ct(m){return null!=m?function kt(m){if(!m)return null;const w=m.filter(et);return 0==w.length?null:function(f){return rt(Ze(f,w))}}(Ot(m)):null}function bn(m){return null!=m?function An(m){if(!m)return null;const w=m.filter(et);return 0==w.length?null:function(f){return function ce(...m){const w=(0,me.jO)(m),{args:f,keys:S}=(0,Re.D)(m),W=new xe.y(ze=>{const{length:zt}=f;if(!zt)return void ze.complete();const ln=new Array(zt);let Sn=zt,lr=zt;for(let ti=0;ti<zt;ti++){let $n=!1;(0,Pe.Xf)(f[ti]).subscribe((0,Te.x)(ze,ts=>{$n||($n=!0,lr--),ln[ti]=ts},()=>Sn--,void 0,()=>{(!Sn||!$n)&&(lr||ze.next(S?(0,_e.n)(S,ln):ln),ze.complete())}))}});return w?W.pipe((0,Ve.Z)(w)):W}(Ze(f,w).map(He)).pipe((0,de.U)(rt))}}(Ot(m)):null}function Cn(m,w){return null===m?[w]:Array.isArray(m)?[...m,w]:[m,w]}function gr(m){return m?Array.isArray(m)?m:[m]:[]}function Gn(m,w){return Array.isArray(m)?m.includes(w):m===w}function Ir(m,w){const f=gr(w);return gr(m).forEach(W=>{Gn(f,W)||f.push(W)}),f}function Dn(m,w){return gr(w).filter(f=>!Gn(m,f))}class Dr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(w){this._rawValidators=w||[],this._composedValidatorFn=Ct(this._rawValidators)}_setAsyncValidators(w){this._rawAsyncValidators=w||[],this._composedAsyncValidatorFn=bn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(w){this._onDestroyCallbacks.push(w)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(w=>w()),this._onDestroyCallbacks=[]}reset(w){this.control&&this.control.reset(w)}hasError(w,f){return!!this.control&&this.control.hasError(w,f)}getError(w,f){return this.control?this.control.getError(w,f):null}}class qt extends Dr{get formDirective(){return null}get path(){return null}}class Vr extends Dr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Or{constructor(w){this._cd=w}get isTouched(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.touched)}get isUntouched(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.untouched)}get isPristine(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.pristine)}get isDirty(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.dirty)}get isValid(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.valid)}get isInvalid(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.invalid)}get isPending(){var w,f;return!(null===(w=this._cd)||void 0===w||null===(f=w.control)||void 0===f||!f.pending)}get isSubmitted(){var w;return!(null===(w=this._cd)||void 0===w||!w.submitted)}}let sr=(()=>{class m extends Or{constructor(f){super(f)}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(Vr,2))},m.\u0275dir=u.lG2({type:m,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(f,S){2&f&&u.ekj("ng-untouched",S.isUntouched)("ng-touched",S.isTouched)("ng-pristine",S.isPristine)("ng-dirty",S.isDirty)("ng-valid",S.isValid)("ng-invalid",S.isInvalid)("ng-pending",S.isPending)},features:[u.qOj]}),m})();const dn="VALID",ir="INVALID",zn="PENDING",Wn="DISABLED";function ut(m){return null!=m&&!Array.isArray(m)&&"object"==typeof m}class _t{constructor(w,f){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(w),this._assignAsyncValidators(f)}get validator(){return this._composedValidatorFn}set validator(w){this._rawValidators=this._composedValidatorFn=w}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(w){this._rawAsyncValidators=this._composedAsyncValidatorFn=w}get parent(){return this._parent}get valid(){return this.status===dn}get invalid(){return this.status===ir}get pending(){return this.status==zn}get disabled(){return this.status===Wn}get enabled(){return this.status!==Wn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(w){this._assignValidators(w)}setAsyncValidators(w){this._assignAsyncValidators(w)}addValidators(w){this.setValidators(Ir(w,this._rawValidators))}addAsyncValidators(w){this.setAsyncValidators(Ir(w,this._rawAsyncValidators))}removeValidators(w){this.setValidators(Dn(w,this._rawValidators))}removeAsyncValidators(w){this.setAsyncValidators(Dn(w,this._rawAsyncValidators))}hasValidator(w){return Gn(this._rawValidators,w)}hasAsyncValidator(w){return Gn(this._rawAsyncValidators,w)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(w={}){this.touched=!0,this._parent&&!w.onlySelf&&this._parent.markAsTouched(w)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(w=>w.markAllAsTouched())}markAsUntouched(w={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(f=>{f.markAsUntouched({onlySelf:!0})}),this._parent&&!w.onlySelf&&this._parent._updateTouched(w)}markAsDirty(w={}){this.pristine=!1,this._parent&&!w.onlySelf&&this._parent.markAsDirty(w)}markAsPristine(w={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(f=>{f.markAsPristine({onlySelf:!0})}),this._parent&&!w.onlySelf&&this._parent._updatePristine(w)}markAsPending(w={}){this.status=zn,!1!==w.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!w.onlySelf&&this._parent.markAsPending(w)}disable(w={}){const f=this._parentMarkedDirty(w.onlySelf);this.status=Wn,this.errors=null,this._forEachChild(S=>{S.disable({...w,onlySelf:!0})}),this._updateValue(),!1!==w.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...w,skipPristineCheck:f}),this._onDisabledChange.forEach(S=>S(!0))}enable(w={}){const f=this._parentMarkedDirty(w.onlySelf);this.status=dn,this._forEachChild(S=>{S.enable({...w,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:w.emitEvent}),this._updateAncestors({...w,skipPristineCheck:f}),this._onDisabledChange.forEach(S=>S(!1))}_updateAncestors(w){this._parent&&!w.onlySelf&&(this._parent.updateValueAndValidity(w),w.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(w){this._parent=w}getRawValue(){return this.value}updateValueAndValidity(w={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dn||this.status===zn)&&this._runAsyncValidator(w.emitEvent)),!1!==w.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!w.onlySelf&&this._parent.updateValueAndValidity(w)}_updateTreeValidity(w={emitEvent:!0}){this._forEachChild(f=>f._updateTreeValidity(w)),this.updateValueAndValidity({onlySelf:!0,emitEvent:w.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wn:dn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(w){if(this.asyncValidator){this.status=zn,this._hasOwnPendingAsyncValidator=!0;const f=He(this.asyncValidator(this));this._asyncValidationSubscription=f.subscribe(S=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(S,{emitEvent:w})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(w,f={}){this.errors=w,this._updateControlsErrors(!1!==f.emitEvent)}get(w){let f=w;return null==f||(Array.isArray(f)||(f=f.split(".")),0===f.length)?null:f.reduce((S,W)=>S&&S._find(W),this)}getError(w,f){const S=f?this.get(f):this;return S&&S.errors?S.errors[w]:null}hasError(w,f){return!!this.getError(w,f)}get root(){let w=this;for(;w._parent;)w=w._parent;return w}_updateControlsErrors(w){this.status=this._calculateStatus(),w&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(w)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Wn:this.errors?ir:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zn)?zn:this._anyControlsHaveStatus(ir)?ir:dn}_anyControlsHaveStatus(w){return this._anyControls(f=>f.status===w)}_anyControlsDirty(){return this._anyControls(w=>w.dirty)}_anyControlsTouched(){return this._anyControls(w=>w.touched)}_updatePristine(w={}){this.pristine=!this._anyControlsDirty(),this._parent&&!w.onlySelf&&this._parent._updatePristine(w)}_updateTouched(w={}){this.touched=this._anyControlsTouched(),this._parent&&!w.onlySelf&&this._parent._updateTouched(w)}_registerOnCollectionChange(w){this._onCollectionChange=w}_setUpdateStrategy(w){ut(w)&&null!=w.updateOn&&(this._updateOn=w.updateOn)}_parentMarkedDirty(w){return!w&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(w){return null}_assignValidators(w){this._rawValidators=Array.isArray(w)?w.slice():w,this._composedValidatorFn=function br(m){return Array.isArray(m)?Ct(m):m||null}(this._rawValidators)}_assignAsyncValidators(w){this._rawAsyncValidators=Array.isArray(w)?w.slice():w,this._composedAsyncValidatorFn=function ri(m){return Array.isArray(m)?bn(m):m||null}(this._rawAsyncValidators)}}const Bi=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>bi}),bi="always";function or(m,w,f=bi){var S,W;(function fi(m,w){const f=function xn(m){return m._rawValidators}(m);null!==w.validator?m.setValidators(Cn(f,w.validator)):"function"==typeof f&&m.setValidators([f]);const S=function Ht(m){return m._rawAsyncValidators}(m);null!==w.asyncValidator?m.setAsyncValidators(Cn(S,w.asyncValidator)):"function"==typeof S&&m.setAsyncValidators([S]);const W=()=>m.updateValueAndValidity();wr(w._rawValidators,W),wr(w._rawAsyncValidators,W)})(m,w),w.valueAccessor.writeValue(m.value),(m.disabled||"always"===f)&&(null===(S=(W=w.valueAccessor).setDisabledState)||void 0===S||S.call(W,m.disabled)),function qr(m,w){w.valueAccessor.registerOnChange(f=>{m._pendingValue=f,m._pendingChange=!0,m._pendingDirty=!0,"change"===m.updateOn&&ii(m,w)})}(m,w),function $r(m,w){const f=(S,W)=>{w.valueAccessor.writeValue(S),W&&w.viewToModelUpdate(S)};m.registerOnChange(f),w._registerOnDestroy(()=>{m._unregisterOnChange(f)})}(m,w),function Br(m,w){w.valueAccessor.registerOnTouched(()=>{m._pendingTouched=!0,"blur"===m.updateOn&&m._pendingChange&&ii(m,w),"submit"!==m.updateOn&&m.markAsTouched()})}(m,w),function hi(m,w){if(w.valueAccessor.setDisabledState){const f=S=>{w.valueAccessor.setDisabledState(S)};m.registerOnDisabledChange(f),w._registerOnDestroy(()=>{m._unregisterOnDisabledChange(f)})}}(m,w)}function wr(m,w){m.forEach(f=>{f.registerOnValidatorChange&&f.registerOnValidatorChange(w)})}function ii(m,w){m._pendingDirty&&m.markAsDirty(),m.setValue(m._pendingValue,{emitModelToViewChange:!1}),w.viewToModelUpdate(m._pendingValue),m._pendingChange=!1}function ht(m,w){const f=m.indexOf(w);f>-1&&m.splice(f,1)}function Dt(m){return"object"==typeof m&&null!==m&&2===Object.keys(m).length&&"value"in m&&"disabled"in m}const Ft=class extends _t{constructor(w=null,f,S){super(function pn(m){return(ut(m)?m.validators:m)||null}(f),function Gr(m,w){return(ut(w)?w.asyncValidators:m)||null}(S,f)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(w),this._setUpdateStrategy(f),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ut(f)&&(f.nonNullable||f.initialValueIsDefault)&&(this.defaultValue=Dt(w)?w.value:w)}setValue(w,f={}){this.value=this._pendingValue=w,this._onChange.length&&!1!==f.emitModelToViewChange&&this._onChange.forEach(S=>S(this.value,!1!==f.emitViewToModelChange)),this.updateValueAndValidity(f)}patchValue(w,f={}){this.setValue(w,f)}reset(w=this.defaultValue,f={}){this._applyFormState(w),this.markAsPristine(f),this.markAsUntouched(f),this.setValue(this.value,f),this._pendingChange=!1}_updateValue(){}_anyControls(w){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(w){this._onChange.push(w)}_unregisterOnChange(w){ht(this._onChange,w)}registerOnDisabledChange(w){this._onDisabledChange.push(w)}_unregisterOnDisabledChange(w){ht(this._onDisabledChange,w)}_forEachChild(w){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(w){Dt(w)?(this.value=this._pendingValue=w.value,w.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=w}},Jt={provide:Vr,useExisting:(0,u.Gpc)(()=>qn)},gn=(()=>Promise.resolve())();let qn=(()=>{class m extends Vr{constructor(f,S,W,ze,zt,ln){super(),this._changeDetectorRef=zt,this.callSetDisabledState=ln,this.control=new Ft,this._registered=!1,this.update=new u.vpe,this._parent=f,this._setValidators(S),this._setAsyncValidators(W),this.valueAccessor=function he(m,w){if(!w)return null;let f,S,W;return Array.isArray(w),w.forEach(ze=>{ze.constructor===at?f=ze:function ki(m){return Object.getPrototypeOf(m.constructor)===je}(ze)?S=ze:W=ze}),W||S||f||null}(0,ze)}ngOnChanges(f){if(this._checkForErrors(),!this._registered||"name"in f){if(this._registered&&(this._checkName(),this.formDirective)){const S=f.name.previousValue;this.formDirective.removeControl({name:S,path:this._getPath(S)})}this._setUpControl()}"isDisabled"in f&&this._updateDisabled(f),function ei(m,w){if(!m.hasOwnProperty("model"))return!1;const f=m.model;return!!f.isFirstChange()||!Object.is(w,f.currentValue)}(f,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){or(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(f){gn.then(()=>{var S;this.control.setValue(f,{emitViewToModelChange:!1}),null===(S=this._changeDetectorRef)||void 0===S||S.markForCheck()})}_updateDisabled(f){const S=f.isDisabled.currentValue,W=0!==S&&(0,u.D6c)(S);gn.then(()=>{var ze;W&&!this.control.disabled?this.control.disable():!W&&this.control.disabled&&this.control.enable(),null===(ze=this._changeDetectorRef)||void 0===ze||ze.markForCheck()})}_getPath(f){return this._parent?function Pi(m,w){return[...w.path,m]}(f,this._parent):[f]}}return m.\u0275fac=function(f){return new(f||m)(u.Y36(qt,9),u.Y36(Ne,10),u.Y36(Q,10),u.Y36(it,10),u.Y36(u.sBO,8),u.Y36(Bi,8))},m.\u0275dir=u.lG2({type:m,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Jt]),u.qOj,u.TTD]}),m})(),es=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({}),m})(),ms=(()=>{class m{constructor(){this._validator=we}ngOnChanges(f){if(this.inputName in f){const S=this.normalizeInput(f[this.inputName].currentValue);this._enabled=this.enabled(S),this._validator=this._enabled?this.createValidator(S):we,this._onChange&&this._onChange()}}validate(f){return this._validator(f)}registerOnValidatorChange(f){this._onChange=f}enabled(f){return null!=f}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=u.lG2({type:m,features:[u.TTD]}),m})();const xa={provide:Ne,useExisting:(0,u.Gpc)(()=>ys),multi:!0};let ys=(()=>{class m extends ms{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=f=>nt}enabled(f){return f}}return m.\u0275fac=function(){let w;return function(S){return(w||(w=u.n5z(m)))(S||m)}}(),m.\u0275dir=u.lG2({type:m,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(f,S){2&f&&u.uIk("required",S._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([xa]),u.qOj]}),m})(),Os=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[es]}),m})(),ja=(()=>{class m{static withConfig(f){var S;return{ngModule:m,providers:[{provide:Bi,useValue:null!==(S=f.callSetDisabledState)&&void 0!==S?S:bi}]}}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[Os]}),m})()},1481:(un,yt,V)=>{"use strict";V.d(yt,{Dx:()=>wn,b2:()=>Vr,q6:()=>Ir});var u=V(6895),J=V(4650);class H extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends H{static makeCurrent(){(0,u.HT)(new xe)}onAndCancel(Je,ge,_t){return Je.addEventListener(ge,_t,!1),()=>{Je.removeEventListener(ge,_t,!1)}}dispatchEvent(Je,ge){Je.dispatchEvent(ge)}remove(Je){Je.parentNode&&Je.parentNode.removeChild(Je)}createElement(Je,ge){return(ge=ge||this.getDefaultDocument()).createElement(Je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Je){return Je.nodeType===Node.ELEMENT_NODE}isShadowRoot(Je){return Je instanceof DocumentFragment}getGlobalEventTarget(Je,ge){return"window"===ge?window:"document"===ge?Je:"body"===ge?Je.body:null}getBaseHref(Je){const ge=function Pe(){return Re=Re||document.querySelector("base"),Re?Re.getAttribute("href"):null}();return null==ge?null:function Te(ut){me=me||document.createElement("a"),me.setAttribute("href",ut);const Je=me.pathname;return"/"===Je.charAt(0)?Je:`/${Je}`}(ge)}resetBaseElement(){Re=null}getUserAgent(){return window.navigator.userAgent}getCookie(Je){return(0,u.Mx)(document.cookie,Je)}}let me,Re=null;const Ve=new J.OlP("TRANSITION_ID"),ce=[{provide:J.ip1,useFactory:function _e(ut,Je,ge){return()=>{ge.get(J.CZH).donePromise.then(()=>{const _t=(0,u.q)(),Bt=Je.querySelectorAll(`style[ng-transition="${ut}"]`);for(let nn=0;nn<Bt.length;nn++)_t.remove(Bt[nn])})}},deps:[Ve,u.K0,J.zs3],multi:!0}];let Ae=(()=>{class ut{build(){return new XMLHttpRequest}}return ut.\u0275fac=function(ge){return new(ge||ut)},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const je=new J.OlP("EventManagerPlugins");let it=(()=>{class ut{constructor(ge,_t){this._zone=_t,this._eventNameToPlugin=new Map,ge.forEach(Bt=>{Bt.manager=this}),this._plugins=ge.slice().reverse()}addEventListener(ge,_t,Bt){return this._findPluginFor(_t).addEventListener(ge,_t,Bt)}addGlobalEventListener(ge,_t,Bt){return this._findPluginFor(_t).addGlobalEventListener(ge,_t,Bt)}getZone(){return this._zone}_findPluginFor(ge){const _t=this._eventNameToPlugin.get(ge);if(_t)return _t;const Bt=this._plugins;for(let nn=0;nn<Bt.length;nn++){const Ln=Bt[nn];if(Ln.supports(ge))return this._eventNameToPlugin.set(ge,Ln),Ln}throw new Error(`No event manager plugin found for event ${ge}`)}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(je),J.LFG(J.R0b))},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class bt{constructor(Je){this._doc=Je}addGlobalEventListener(Je,ge,_t){const Bt=(0,u.q)().getGlobalEventTarget(this._doc,Je);if(!Bt)throw new Error(`Unsupported event target ${Bt} for event ${ge}`);return this.addEventListener(Bt,ge,_t)}}let Ce=(()=>{class ut{constructor(){this.usageCount=new Map}addStyles(ge){for(const _t of ge)1===this.changeUsageCount(_t,1)&&this.onStyleAdded(_t)}removeStyles(ge){for(const _t of ge)0===this.changeUsageCount(_t,-1)&&this.onStyleRemoved(_t)}onStyleRemoved(ge){}onStyleAdded(ge){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ge,_t){var Bt;const nn=this.usageCount;let Ln=null!==(Bt=nn.get(ge))&&void 0!==Bt?Bt:0;return Ln+=_t,Ln>0?nn.set(ge,Ln):nn.delete(ge),Ln}ngOnDestroy(){for(const ge of this.getAllStyles())this.onStyleRemoved(ge);this.usageCount.clear()}}return ut.\u0275fac=function(ge){return new(ge||ut)},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),ve=(()=>{class ut extends Ce{constructor(ge){super(),this.doc=ge,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ge){for(const _t of this.hostNodes)this.addStyleToHost(_t,ge)}onStyleRemoved(ge){const _t=this.styleRef,Bt=_t.get(ge);null==Bt||Bt.forEach(nn=>nn.remove()),_t.delete(ge)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const _t of this.getAllStyles())this.addStyleToHost(ge,_t)}removeHost(ge){this.hostNodes.delete(ge)}addStyleToHost(ge,_t){const Bt=this.doc.createElement("style");Bt.textContent=_t,ge.appendChild(Bt);const nn=this.styleRef.get(_t);nn?nn.push(Bt):this.styleRef.set(_t,[Bt])}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(u.K0))},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const ae={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lt=/%COMP%/g,Q=new J.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ke(ut,Je){return Je.flat(100).map(ge=>ge.replace(lt,ut))}function $e(ut){return Je=>{if("__ngUnwrap__"===Je)return ut;!1===ut(Je)&&(Je.preventDefault(),Je.returnValue=!1)}}let nt=(()=>{class ut{constructor(ge,_t,Bt,nn){this.eventManager=ge,this.sharedStylesHost=_t,this.appId=Bt,this.removeStylesOnCompDestory=nn,this.rendererByCompId=new Map,this.defaultRenderer=new We(ge)}createRenderer(ge,_t){if(!ge||!_t)return this.defaultRenderer;const Bt=this.getOrCreateRenderer(ge,_t);return Bt instanceof et?Bt.applyToHost(ge):Bt instanceof we&&Bt.applyStyles(),Bt}getOrCreateRenderer(ge,_t){const Bt=this.rendererByCompId;let nn=Bt.get(_t.id);if(!nn){const Ln=this.eventManager,Pr=this.sharedStylesHost,di=this.removeStylesOnCompDestory;switch(_t.encapsulation){case J.ifc.Emulated:nn=new et(Ln,Pr,_t,this.appId,di);break;case J.ifc.ShadowDom:return new De(Ln,Pr,ge,_t);default:nn=new we(Ln,Pr,_t,di)}nn.onDestroy=()=>Bt.delete(_t.id),Bt.set(_t.id,nn)}return nn}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(it),J.LFG(ve),J.LFG(J.AFp),J.LFG(Q))},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class We{constructor(Je){this.eventManager=Je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Je,ge){return ge?document.createElementNS(ae[ge]||ge,Je):document.createElement(Je)}createComment(Je){return document.createComment(Je)}createText(Je){return document.createTextNode(Je)}appendChild(Je,ge){(Ie(Je)?Je.content:Je).appendChild(ge)}insertBefore(Je,ge,_t){Je&&(Ie(Je)?Je.content:Je).insertBefore(ge,_t)}removeChild(Je,ge){Je&&Je.removeChild(ge)}selectRootElement(Je,ge){let _t="string"==typeof Je?document.querySelector(Je):Je;if(!_t)throw new Error(`The selector "${Je}" did not match any elements`);return ge||(_t.textContent=""),_t}parentNode(Je){return Je.parentNode}nextSibling(Je){return Je.nextSibling}setAttribute(Je,ge,_t,Bt){if(Bt){ge=Bt+":"+ge;const nn=ae[Bt];nn?Je.setAttributeNS(nn,ge,_t):Je.setAttribute(ge,_t)}else Je.setAttribute(ge,_t)}removeAttribute(Je,ge,_t){if(_t){const Bt=ae[_t];Bt?Je.removeAttributeNS(Bt,ge):Je.removeAttribute(`${_t}:${ge}`)}else Je.removeAttribute(ge)}addClass(Je,ge){Je.classList.add(ge)}removeClass(Je,ge){Je.classList.remove(ge)}setStyle(Je,ge,_t,Bt){Bt&(J.JOm.DashCase|J.JOm.Important)?Je.style.setProperty(ge,_t,Bt&J.JOm.Important?"important":""):Je.style[ge]=_t}removeStyle(Je,ge,_t){_t&J.JOm.DashCase?Je.style.removeProperty(ge):Je.style[ge]=""}setProperty(Je,ge,_t){Je[ge]=_t}setValue(Je,ge){Je.nodeValue=ge}listen(Je,ge,_t){return"string"==typeof Je?this.eventManager.addGlobalEventListener(Je,ge,$e(_t)):this.eventManager.addEventListener(Je,ge,$e(_t))}}function Ie(ut){return"TEMPLATE"===ut.tagName&&void 0!==ut.content}class De extends We{constructor(Je,ge,_t,Bt){super(Je),this.sharedStylesHost=ge,this.hostEl=_t,this.shadowRoot=_t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const nn=ke(Bt.id,Bt.styles);for(const Ln of nn){const Pr=document.createElement("style");Pr.textContent=Ln,this.shadowRoot.appendChild(Pr)}}nodeOrShadowRoot(Je){return Je===this.hostEl?this.shadowRoot:Je}appendChild(Je,ge){return super.appendChild(this.nodeOrShadowRoot(Je),ge)}insertBefore(Je,ge,_t){return super.insertBefore(this.nodeOrShadowRoot(Je),ge,_t)}removeChild(Je,ge){return super.removeChild(this.nodeOrShadowRoot(Je),ge)}parentNode(Je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Je)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class we extends We{constructor(Je,ge,_t,Bt,nn=_t.id){super(Je),this.sharedStylesHost=ge,this.removeStylesOnCompDestory=Bt,this.rendererUsageCount=0,this.styles=ke(nn,_t.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Je;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Je=this.onDestroy)||void 0===Je||Je.call(this))}}class et extends we{constructor(Je,ge,_t,Bt,nn){const Ln=Bt+"-"+_t.id;super(Je,ge,_t,nn,Ln),this.contentAttr=function tt(ut){return"_ngcontent-%COMP%".replace(lt,ut)}(Ln),this.hostAttr=function Le(ut){return"_nghost-%COMP%".replace(lt,ut)}(Ln)}applyToHost(Je){this.applyStyles(),this.setAttribute(Je,this.hostAttr,"")}createElement(Je,ge){const _t=super.createElement(Je,ge);return super.setAttribute(_t,this.contentAttr,""),_t}}let He=(()=>{class ut extends bt{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,_t,Bt){return ge.addEventListener(_t,Bt,!1),()=>this.removeEventListener(ge,_t,Bt)}removeEventListener(ge,_t,Bt){return ge.removeEventListener(_t,Bt)}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(u.K0))},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const rt=["alt","control","meta","shift"],Ze={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pt={alt:ut=>ut.altKey,control:ut=>ut.ctrlKey,meta:ut=>ut.metaKey,shift:ut=>ut.shiftKey};let Ot=(()=>{class ut extends bt{constructor(ge){super(ge)}supports(ge){return null!=ut.parseEventName(ge)}addEventListener(ge,_t,Bt){const nn=ut.parseEventName(_t),Ln=ut.eventCallback(nn.fullKey,Bt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(ge,nn.domEventName,Ln))}static parseEventName(ge){const _t=ge.toLowerCase().split("."),Bt=_t.shift();if(0===_t.length||"keydown"!==Bt&&"keyup"!==Bt)return null;const nn=ut._normalizeKey(_t.pop());let Ln="",Pr=_t.indexOf("code");if(Pr>-1&&(_t.splice(Pr,1),Ln="code."),rt.forEach(Bi=>{const bi=_t.indexOf(Bi);bi>-1&&(_t.splice(bi,1),Ln+=Bi+".")}),Ln+=nn,0!=_t.length||0===nn.length)return null;const di={};return di.domEventName=Bt,di.fullKey=Ln,di}static matchEventFullKeyCode(ge,_t){let Bt=Ze[ge.key]||ge.key,nn="";return _t.indexOf("code.")>-1&&(Bt=ge.code,nn="code."),!(null==Bt||!Bt)&&(Bt=Bt.toLowerCase()," "===Bt?Bt="space":"."===Bt&&(Bt="dot"),rt.forEach(Ln=>{Ln!==Bt&&(0,Pt[Ln])(ge)&&(nn+=Ln+".")}),nn+=Bt,nn===_t)}static eventCallback(ge,_t,Bt){return nn=>{ut.matchEventFullKeyCode(nn,ge)&&Bt.runGuarded(()=>_t(nn))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(u.K0))},ut.\u0275prov=J.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const Ir=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:u.bD},{provide:J.g9A,useValue:function xn(){xe.makeCurrent()},multi:!0},{provide:u.K0,useFactory:function gr(){return(0,J.RDi)(document),document},deps:[]}]),Dn=new J.OlP(""),Dr=[{provide:J.rWj,useClass:class de{addToWindow(Je){J.dqk.getAngularTestability=(_t,Bt=!0)=>{const nn=Je.findTestabilityInTree(_t,Bt);if(null==nn)throw new Error("Could not find testability for element.");return nn},J.dqk.getAllAngularTestabilities=()=>Je.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>Je.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(_t=>{const Bt=J.dqk.getAllAngularTestabilities();let nn=Bt.length,Ln=!1;const Pr=function(di){Ln=Ln||di,nn--,0==nn&&_t(Ln)};Bt.forEach(function(di){di.whenStable(Pr)})})}findTestabilityInTree(Je,ge,_t){if(null==ge)return null;const Bt=Je.getTestability(ge);return null!=Bt?Bt:_t?(0,u.q)().isShadowRoot(ge)?this.findTestabilityInTree(Je,ge.host,!0):this.findTestabilityInTree(Je,ge.parentElement,!0):null}},deps:[]},{provide:J.lri,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]}],qt=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function Ht(){return new J.qLn},deps:[]},{provide:je,useClass:He,multi:!0,deps:[u.K0,J.R0b,J.Lbi]},{provide:je,useClass:Ot,multi:!0,deps:[u.K0]},{provide:nt,useClass:nt,deps:[it,ve,J.AFp,Q]},{provide:J.FYo,useExisting:nt},{provide:Ce,useExisting:ve},{provide:ve,useClass:ve,deps:[u.K0]},{provide:it,useClass:it,deps:[je,J.R0b]},{provide:u.JF,useClass:Ae,deps:[]},[]];let Vr=(()=>{class ut{constructor(ge){}static withServerTransition(ge){return{ngModule:ut,providers:[{provide:J.AFp,useValue:ge.appId},{provide:Ve,useExisting:J.AFp},ce]}}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(Dn,12))},ut.\u0275mod=J.oAB({type:ut}),ut.\u0275inj=J.cJS({providers:[...qt,...Dr],imports:[u.ez,J.hGG]}),ut})(),wn=(()=>{class ut{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return ut.\u0275fac=function(ge){return new(ge||ut)(J.LFG(u.K0))},ut.\u0275prov=J.Yz7({token:ut,factory:function(ge){let _t=null;return _t=ge?new ge:function sr(){return new wn((0,J.LFG)(u.K0))}(),_t},providedIn:"root"}),ut})();typeof window<"u"&&window},2435:(un,yt,V)=>{"use strict";V.d(yt,{gz:()=>wo,y6:()=>Ns,OD:()=>Ft,eC:()=>Ht,wm:()=>Hn,wN:()=>At,F0:()=>ro,rH:()=>Qn,Bz:()=>cr,Hx:()=>Lt});var u=V(4650),J=V(8996),H=V(9646),xe=V(1135),Re=V(6805),Pe=V(9751),me=V(4742),Te=V(4671),Ve=V(3268),_e=V(7669),ce=V(1810),de=V(5403),Ae=V(9672);function je(...A){const x=(0,_e.yG)(A),b=(0,_e.jO)(A),{args:O,keys:U}=(0,me.D)(A);if(0===O.length)return(0,J.D)([],x);const ee=new Pe.y(function it(A,x,b=Te.y){return O=>{bt(x,()=>{const{length:U}=A,ee=new Array(U);let re=U,Xe=U;for(let St=0;St<U;St++)bt(x,()=>{const an=(0,J.D)(A[St],x);let En=!1;an.subscribe((0,de.x)(O,In=>{ee[St]=In,En||(En=!0,Xe--),Xe||O.next(b(ee.slice()))},()=>{--re||O.complete()}))},O)},O)}}(O,x,U?re=>(0,ce.n)(U,re):Te.y));return b?ee.pipe((0,Ve.Z)(b)):ee}function bt(A,x,b){A?(0,Ae.f)(b,A,x):x()}var Ce=V(7272),ve=V(8421);function ae(A){return new Pe.y(x=>{(0,ve.Xf)(A()).subscribe(x)})}var lt=V(9635),at=V(576);function Ye(A,x){const b=(0,at.m)(A)?A:()=>A,O=U=>U.error(b());return new Pe.y(x?U=>x.schedule(O,0,U):O)}var G=V(515),Me=V(727),Ne=V(4482);function Q(){return(0,Ne.e)((A,x)=>{let b=null;A._refCount++;const O=(0,de.x)(x,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const U=A._connection,ee=b;b=null,U&&(!ee||U===ee)&&U.unsubscribe(),x.unsubscribe()});A.subscribe(O),O.closed||(b=A.connect())})}class tt extends Pe.y{constructor(x,b){super(),this.source=x,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Ne.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Me.w0;const b=this.getSubject();x.add(this.source.subscribe((0,de.x)(b,void 0,()=>{this._teardown(),b.complete()},O=>{this._teardown(),b.error(O)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Me.w0.EMPTY)}return x}refCount(){return Q()(this)}}var Le=V(7579),ke=V(6895),$e=V(4004),nt=V(3900),We=V(5698),gt=V(8675),ot=V(9300),Ie=V(5577),De=V(590);function we(A,x){return(0,at.m)(x)?(0,Ie.z)(A,x,1):(0,Ie.z)(A,1)}var et=V(8505);function He(A){return(0,Ne.e)((x,b)=>{let ee,O=null,U=!1;O=x.subscribe((0,de.x)(b,void 0,void 0,re=>{ee=(0,ve.Xf)(A(re,He(A)(x))),O?(O.unsubscribe(),O=null,ee.subscribe(b)):U=!0})),U&&(O.unsubscribe(),O=null,ee.subscribe(b))})}var rt=V(5026);function Ze(A){return A<=0?()=>G.E:(0,Ne.e)((x,b)=>{let O=[];x.subscribe((0,de.x)(b,U=>{O.push(U),A<O.length&&O.shift()},()=>{for(const U of O)b.next(U);b.complete()},void 0,()=>{O=null}))})}var Pt=V(8068),Ot=V(6590);function kt(A,x){const b=arguments.length>=2;return O=>O.pipe(A?(0,ot.h)((U,ee)=>A(U,ee,O)):Te.y,Ze(1),b?(0,Ot.d)(x):(0,Pt.T)(()=>new Re.K))}function bn(A){return(0,Ne.e)((x,b)=>{try{x.subscribe(b)}finally{b.add(A)}})}var Cn=V(8189),xn=V(1481);const Ht="primary",gr=Symbol("RouteTitle");class Gn{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const b=this.params[x];return Array.isArray(b)?b[0]:b}return null}getAll(x){if(this.has(x)){const b=this.params[x];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Ir(A){return new Gn(A)}function Dn(A,x,b){const O=b.path.split("/");if(O.length>A.length||"full"===b.pathMatch&&(x.hasChildren()||O.length<A.length))return null;const U={};for(let ee=0;ee<O.length;ee++){const re=O[ee],Xe=A[ee];if(re.startsWith(":"))U[re.substring(1)]=Xe;else if(re!==Xe.path)return null}return{consumed:A.slice(0,O.length),posParams:U}}function qt(A,x){const b=A?Object.keys(A):void 0,O=x?Object.keys(x):void 0;if(!b||!O||b.length!=O.length)return!1;let U;for(let ee=0;ee<b.length;ee++)if(U=b[ee],!Vr(A[U],x[U]))return!1;return!0}function Vr(A,x){if(Array.isArray(A)&&Array.isArray(x)){if(A.length!==x.length)return!1;const b=[...A].sort(),O=[...x].sort();return b.every((U,ee)=>O[ee]===U)}return A===x}function Or(A){return Array.prototype.concat.apply([],A)}function hr(A){return A.length>0?A[A.length-1]:null}function sr(A,x){for(const b in A)A.hasOwnProperty(b)&&x(A[b],b)}function wn(A){return(0,u.CqO)(A)?A:(0,u.QGY)(A)?(0,J.D)(Promise.resolve(A)):(0,H.of)(A)}const fn=!1,vn={exact:function Sr(A,x,b){if(!Ge(A.segments,x.segments)||!Ii(A.segments,x.segments,b)||A.numberOfChildren!==x.numberOfChildren)return!1;for(const O in x.children)if(!A.children[O]||!Sr(A.children[O],x.children[O],b))return!1;return!0},subset:Gi},Vn={exact:function Gt(A,x){return qt(A,x)},subset:function oi(A,x){return Object.keys(x).length<=Object.keys(A).length&&Object.keys(x).every(b=>Vr(A[b],x[b]))},ignored:()=>!0};function mr(A,x,b){return vn[b.paths](A.root,x.root,b.matrixParams)&&Vn[b.queryParams](A.queryParams,x.queryParams)&&!("exact"===b.fragment&&A.fragment!==x.fragment)}function Gi(A,x,b){return Er(A,x,x.segments,b)}function Er(A,x,b,O){if(A.segments.length>b.length){const U=A.segments.slice(0,b.length);return!(!Ge(U,b)||x.hasChildren()||!Ii(U,b,O))}if(A.segments.length===b.length){if(!Ge(A.segments,b)||!Ii(A.segments,b,O))return!1;for(const U in x.children)if(!A.children[U]||!Gi(A.children[U],x.children[U],O))return!1;return!0}{const U=b.slice(0,A.segments.length),ee=b.slice(A.segments.length);return!!(Ge(A.segments,U)&&Ii(A.segments,U,O)&&A.children[Ht])&&Er(A.children[Ht],x,ee,O)}}function Ii(A,x,b){return x.every((O,U)=>Vn[b](A[U].parameters,O.parameters))}class Yn{constructor(x=new Oe([],{}),b={},O=null){this.root=x,this.queryParams=b,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return dn.serialize(this)}}class Oe{constructor(x,b){this.segments=x,this.children=b,this.parent=null,sr(b,(O,U)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ir(this)}}class Be{constructor(x,b){this.path=x,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Ir(this.parameters)),this._parameterMap}toString(){return Je(this)}}function Ge(A,x){return A.length===x.length&&A.every((b,O)=>b.path===x[O].path)}let Lt=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return new Qt},providedIn:"root"}),A})();class Qt{parse(x){const b=new bi(x);return new Yn(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(x){const b=`/${zn(x.root,!0)}`,O=function _t(A){const x=Object.keys(A).map(b=>{const O=A[b];return Array.isArray(O)?O.map(U=>`${pn(b)}=${pn(U)}`).join("&"):`${pn(b)}=${pn(O)}`}).filter(b=>!!b);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${b}${O}${"string"==typeof x.fragment?`#${function br(A){return encodeURI(A)}(x.fragment)}`:""}`}}const dn=new Qt;function ir(A){return A.segments.map(x=>Je(x)).join("/")}function zn(A,x){if(!A.hasChildren())return ir(A);if(x){const b=A.children[Ht]?zn(A.children[Ht],!1):"",O=[];return sr(A.children,(U,ee)=>{ee!==Ht&&O.push(`${ee}:${zn(U,!1)}`)}),O.length>0?`${b}(${O.join("//")})`:b}{const b=function Ue(A,x){let b=[];return sr(A.children,(O,U)=>{U===Ht&&(b=b.concat(x(O,U)))}),sr(A.children,(O,U)=>{U!==Ht&&(b=b.concat(x(O,U)))}),b}(A,(O,U)=>U===Ht?[zn(A.children[Ht],!1)]:[`${U}:${zn(O,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Ht]?`${ir(A)}/${b[0]}`:`${ir(A)}/(${b.join("//")})`}}function Wn(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pn(A){return Wn(A).replace(/%3B/gi,";")}function Gr(A){return Wn(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ri(A){return decodeURIComponent(A)}function ut(A){return ri(A.replace(/\+/g,"%20"))}function Je(A){return`${Gr(A.path)}${function ge(A){return Object.keys(A).map(x=>`;${Gr(x)}=${Gr(A[x])}`).join("")}(A.parameters)}`}const Bt=/^[^\/()?;=#]+/;function nn(A){const x=A.match(Bt);return x?x[0]:""}const Ln=/^[^=?&#]+/,di=/^[^&#]+/;class bi{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(x.length>0||Object.keys(b).length>0)&&(O[Ht]=new Oe(x,b)),O}parseSegment(){const x=nn(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new u.vHH(4009,fn);return this.capture(x),new Be(ri(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const b=nn(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const U=nn(this.remaining);U&&(O=U,this.capture(O))}x[ri(b)]=ri(O)}parseQueryParam(x){const b=function Pr(A){const x=A.match(Ln);return x?x[0]:""}(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const re=function Bi(A){const x=A.match(di);return x?x[0]:""}(this.remaining);re&&(O=re,this.capture(O))}const U=ut(b),ee=ut(O);if(x.hasOwnProperty(U)){let re=x[U];Array.isArray(re)||(re=[re],x[U]=re),re.push(ee)}else x[U]=ee}parseParens(x){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=nn(this.remaining),U=this.remaining[O.length];if("/"!==U&&")"!==U&&";"!==U)throw new u.vHH(4010,fn);let ee;O.indexOf(":")>-1?(ee=O.slice(0,O.indexOf(":")),this.capture(ee),this.capture(":")):x&&(ee=Ht);const re=this.parseChildren();b[ee]=1===Object.keys(re).length?re[Ht]:new Oe([],re),this.consumeOptional("//")}return b}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new u.vHH(4011,fn)}}function Pi(A){return A.segments.length>0?new Oe([],{[Ht]:A}):A}function or(A){const x={};for(const O of Object.keys(A.children)){const ee=or(A.children[O]);(ee.segments.length>0||ee.hasChildren())&&(x[O]=ee)}return function kr(A){if(1===A.numberOfChildren&&A.children[Ht]){const x=A.children[Ht];return new Oe(A.segments.concat(x.segments),x.children)}return A}(new Oe(A.segments,x))}function wr(A){return A instanceof Yn}const hi=!1;function Br(A,x,b,O,U){var ee;if(0===b.length)return Kr(x.root,x.root,x.root,O,U);const re=function Ci(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Qi(!0,0,A);let x=0,b=!1;const O=A.reduce((U,ee,re)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Xe={};return sr(ee.outlets,(St,an)=>{Xe[an]="string"==typeof St?St.split("/"):St}),[...U,{outlets:Xe}]}if(ee.segmentPath)return[...U,ee.segmentPath]}return"string"!=typeof ee?[...U,ee]:0===re?(ee.split("/").forEach((Xe,St)=>{0==St&&"."===Xe||(0==St&&""===Xe?b=!0:".."===Xe?x++:""!=Xe&&U.push(Xe))}),U):[...U,ee]},[]);return new Qi(b,x,O)}(b);return re.toRoot()?Kr(x.root,x.root,new Oe([],{}),O,U):function Xe(an){var En;const In=function Ur(A,x,b,O){if(A.isAbsolute)return new cn(x.root,!0,0);if(-1===O)return new cn(b,b===x.root,0);return function ei(A,x,b){let O=A,U=x,ee=b;for(;ee>U;){if(ee-=U,O=O.parent,!O)throw new u.vHH(4005,hi&&"Invalid number of '../'");U=O.segments.length}return new cn(O,!1,U-ee)}(b,O+(ii(A.commands[0])?0:1),A.numberOfDoubleDots)}(re,x,null===(En=A.snapshot)||void 0===En?void 0:En._urlSegment,an),zr=In.processChildren?he(In.segmentGroup,In.index,re.commands):ne(In.segmentGroup,In.index,re.commands);return Kr(x.root,In.segmentGroup,zr,O,U)}(null===(ee=A.snapshot)||void 0===ee?void 0:ee._lastPathIndex)}function ii(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function $r(A){return"object"==typeof A&&null!=A&&A.outlets}function Kr(A,x,b,O,U){let re,ee={};O&&sr(O,(St,an)=>{ee[an]=Array.isArray(St)?St.map(En=>`${En}`):`${St}`}),re=A===x?b:ls(A,x,b);const Xe=Pi(or(re));return new Yn(Xe,ee,U)}function ls(A,x,b){const O={};return sr(A.children,(U,ee)=>{O[ee]=U===x?b:ls(U,x,b)}),new Oe(A.segments,O)}class Qi{constructor(x,b,O){if(this.isAbsolute=x,this.numberOfDoubleDots=b,this.commands=O,x&&O.length>0&&ii(O[0]))throw new u.vHH(4003,hi&&"Root segment cannot have matrix parameters");const U=O.find($r);if(U&&U!==hr(O))throw new u.vHH(4004,hi&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cn{constructor(x,b,O){this.segmentGroup=x,this.processChildren=b,this.index=O}}function ne(A,x,b){if(A||(A=new Oe([],{})),0===A.segments.length&&A.hasChildren())return he(A,x,b);const O=function qe(A,x,b){let O=0,U=x;const ee={match:!1,pathIndex:0,commandIndex:0};for(;U<A.segments.length;){if(O>=b.length)return ee;const re=A.segments[U],Xe=b[O];if($r(Xe))break;const St=`${Xe}`,an=O<b.length-1?b[O+1]:null;if(U>0&&void 0===St)break;if(St&&an&&"object"==typeof an&&void 0===an.outlets){if(!Qe(St,an,re))return ee;O+=2}else{if(!Qe(St,{},re))return ee;O++}U++}return{match:!0,pathIndex:U,commandIndex:O}}(A,x,b),U=b.slice(O.commandIndex);if(O.match&&O.pathIndex<A.segments.length){const ee=new Oe(A.segments.slice(0,O.pathIndex),{});return ee.children[Ht]=new Oe(A.segments.slice(O.pathIndex),A.children),he(ee,0,U)}return O.match&&0===U.length?new Oe(A.segments,{}):O.match&&!A.hasChildren()?pt(A,x,b):O.match?he(A,0,U):pt(A,x,b)}function he(A,x,b){if(0===b.length)return new Oe(A.segments,{});{const O=function ki(A){return $r(A[0])?A[0].outlets:{[Ht]:A}}(b),U={};return!O[Ht]&&A.children[Ht]&&1===A.numberOfChildren&&0===A.children[Ht].segments.length?he(A.children[Ht],x,b):(sr(O,(ee,re)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(U[re]=ne(A.children[re],x,ee))}),sr(A.children,(ee,re)=>{void 0===O[re]&&(U[re]=ee)}),new Oe(A.segments,U))}}function pt(A,x,b){const O=A.segments.slice(0,x);let U=0;for(;U<b.length;){const ee=b[U];if($r(ee)){const St=Mt(ee.outlets);return new Oe(O,St)}if(0===U&&ii(b[0])){O.push(new Be(A.segments[x].path,le(b[0]))),U++;continue}const re=$r(ee)?ee.outlets[Ht]:`${ee}`,Xe=U<b.length-1?b[U+1]:null;re&&Xe&&ii(Xe)?(O.push(new Be(re,le(Xe))),U+=2):(O.push(new Be(re,{})),U++)}return new Oe(O,{})}function Mt(A){const x={};return sr(A,(b,O)=>{"string"==typeof b&&(b=[b]),null!==b&&(x[O]=pt(new Oe([],{}),0,b))}),x}function le(A){const x={};return sr(A,(b,O)=>x[O]=`${b}`),x}function Qe(A,x,b){return A==b.path&&qt(x,b.parameters)}const ht="imperative";class Dt{constructor(x,b){this.id=x,this.url=b}}class Ft extends Dt{constructor(x,b,O="imperative",U=null){super(x,b),this.type=0,this.navigationTrigger=O,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kt extends Dt{constructor(x,b,O){super(x,b),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends Dt{constructor(x,b,O,U){super(x,b),this.reason=O,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jn extends Dt{constructor(x,b,O,U){super(x,b),this.reason=O,this.code=U,this.type=16}}class ar extends Dt{constructor(x,b,O,U){super(x,b),this.error=O,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xr extends Dt{constructor(x,b,O,U){super(x,b),this.urlAfterRedirects=O,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class st extends Dt{constructor(x,b,O,U){super(x,b),this.urlAfterRedirects=O,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fe extends Dt{constructor(x,b,O,U,ee){super(x,b),this.urlAfterRedirects=O,this.state=U,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vt extends Dt{constructor(x,b,O,U){super(x,b),this.urlAfterRedirects=O,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends Dt{constructor(x,b,O,U){super(x,b),this.urlAfterRedirects=O,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jt{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gn{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qn{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vi{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ai{constructor(x,b,O){this.routerEvent=x,this.position=b,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let us=(()=>{class A{createUrlTree(b,O,U,ee,re,Xe){return Br(b||O.root,U,ee,re,Xe)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})(),xi=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(x){return us.\u0275fac(x)},providedIn:"root"}),A})();class Xo{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const b=this.pathFromRoot(x);return b.length>1?b[b.length-2]:null}children(x){const b=Qo(x,this._root);return b?b.children.map(O=>O.value):[]}firstChild(x){const b=Qo(x,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(x){const b=Is(x,this._root);return b.length<2?[]:b[b.length-2].children.map(U=>U.value).filter(U=>U!==x)}pathFromRoot(x){return Is(x,this._root).map(b=>b.value)}}function Qo(A,x){if(A===x.value)return x;for(const b of x.children){const O=Qo(A,b);if(O)return O}return null}function Is(A,x){if(A===x.value)return[x];for(const b of x.children){const O=Is(A,b);if(O.length)return O.unshift(x),O}return[]}class Di{constructor(x,b){this.value=x,this.children=b}toString(){return`TreeNode(${this.value})`}}function xs(A){const x={};return A&&A.children.forEach(b=>x[b.value.outlet]=b),x}class Eo extends Xo{constructor(x,b){super(x),this.snapshot=b,bs(this,x)}toString(){return this.snapshot.toString()}}function Ro(A,x){const b=function da(A,x){const re=new zi([],{},{},"",{},Ht,x,null,A.root,-1,{});return new Io("",new Di(re,[]))}(A,x),O=new xe.X([new Be("",{})]),U=new xe.X({}),ee=new xe.X({}),re=new xe.X({}),Xe=new xe.X(""),St=new wo(O,U,re,Xe,ee,Ht,x,b.root);return St.snapshot=b.root,new Eo(new Di(St,[]),b)}class wo{constructor(x,b,O,U,ee,re,Xe,St){var an,En;this.url=x,this.params=b,this.queryParams=O,this.fragment=U,this.data=ee,this.outlet=re,this.component=Xe,this.title=null!==(an=null===(En=this.data)||void 0===En?void 0:En.pipe((0,$e.U)(In=>In[gr])))&&void 0!==an?an:(0,H.of)(void 0),this._futureSnapshot=St}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$e.U)(x=>Ir(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$e.U)(x=>Ir(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fs(A,x="emptyOnly"){const b=A.pathFromRoot;let O=0;if("always"!==x)for(O=b.length-1;O>=1;){const U=b[O],ee=b[O-1];if(U.routeConfig&&""===U.routeConfig.path)O--;else{if(ee.component)break;O--}}return function Ms(A){return A.reduce((x,b)=>{var O;return{params:{...x.params,...b.params},data:{...x.data,...b.data},resolve:{...b.data,...x.resolve,...null===(O=b.routeConfig)||void 0===O?void 0:O.data,...b._resolvedData}}},{params:{},data:{},resolve:{}})}(b.slice(O))}class zi{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[gr]}constructor(x,b,O,U,ee,re,Xe,St,an,En,In){this.url=x,this.params=b,this.queryParams=O,this.fragment=U,this.data=ee,this.outlet=re,this.component=Xe,this.routeConfig=St,this._urlSegment=an,this._lastPathIndex=En,this._resolve=In}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ir(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ir(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Io extends Xo{constructor(x,b){super(b),this.url=x,bs(this,b)}toString(){return bo(this._root)}}function bs(A,x){x.value._routerState=A,x.children.forEach(b=>bs(A,b))}function bo(A){const x=A.children.length>0?` { ${A.children.map(bo).join(", ")} } `:"";return`${A.value}${x}`}function ps(A){if(A.snapshot){const x=A.snapshot,b=A._futureSnapshot;A.snapshot=b,qt(x.queryParams,b.queryParams)||A.queryParams.next(b.queryParams),x.fragment!==b.fragment&&A.fragment.next(b.fragment),qt(x.params,b.params)||A.params.next(b.params),function Dr(A,x){if(A.length!==x.length)return!1;for(let b=0;b<A.length;++b)if(!qt(A[b],x[b]))return!1;return!0}(x.url,b.url)||A.url.next(b.url),qt(x.data,b.data)||A.data.next(b.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function js(A,x){const b=qt(A.params,x.params)&&function Se(A,x){return Ge(A,x)&&A.every((b,O)=>qt(b.parameters,x[O].parameters))}(A.url,x.url);return b&&!(!A.parent!=!x.parent)&&(!A.parent||js(A.parent,x.parent))}function Co(A,x,b){if(b&&A.shouldReuseRoute(x.value,b.value.snapshot)){const O=b.value;O._futureSnapshot=x.value;const U=function cs(A,x,b){return x.children.map(O=>{for(const U of b.children)if(A.shouldReuseRoute(O.value,U.value.snapshot))return Co(A,O,U);return Co(A,O)})}(A,x,b);return new Di(O,U)}{if(A.shouldAttach(x.value)){const ee=A.retrieve(x.value);if(null!==ee){const re=ee.route;return re.value._futureSnapshot=x.value,re.children=x.children.map(Xe=>Co(A,Xe)),re}}const O=function Oo(A){return new wo(new xe.X(A.url),new xe.X(A.params),new xe.X(A.queryParams),new xe.X(A.fragment),new xe.X(A.data),A.outlet,A.component,A)}(x.value),U=x.children.map(ee=>Co(A,ee));return new Di(O,U)}}const gs="ngNavigationCancelingError";function Rs(A,x){const{redirectTo:b,navigationBehaviorOptions:O}=wr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,U=Wi(!1,0,x);return U.url=b,U.navigationBehaviorOptions=O,U}function Wi(A,x,b){const O=new Error("NavigationCancelingError: "+(A||""));return O[gs]=!0,O.cancellationCode=x,b&&(O.url=b),O}function ds(A){return ks(A)&&wr(A.url)}function ks(A){return A&&A[gs]}class ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ns,this.attachRef=null}}let Ns=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(b,O){const U=this.getOrCreateContext(b);U.outlet=O,this.contexts.set(b,U)}onChildOutletDestroyed(b){const O=this.getContext(b);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let O=this.getContext(b);return O||(O=new ms,this.contexts.set(b,O)),O}getContext(b){return this.contexts.get(b)||null}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Xr=!1;let uo=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Ns),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(b){if(b.name){const{firstChange:O,previousValue:U}=b.name;if(O)return;this.isTrackedInParentContexts(U)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(U)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){var O;return(null===(O=this.parentContexts.getContext(b))||void 0===O?void 0:O.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);null!=b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,Xr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,Xr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,Xr);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,O){this.activated=b,this._activatedRoute=O,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,O){if(this.isActivated)throw new u.vHH(4013,Xr);this._activatedRoute=b;const U=this.location,re=b.snapshot.component,Xe=this.parentContexts.getOrCreateContext(this.name).children,St=new Xs(b,Xe,U.injector);if(O&&function xa(A){return!!A.resolveComponentFactory}(O)){const an=O.resolveComponentFactory(re);this.activated=U.createComponent(an,U.length,St)}else this.activated=U.createComponent(re,{index:U.length,injector:St,environmentInjector:null!=O?O:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275dir=u.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),A})();class Xs{constructor(x,b,O){this.route=x,this.childContexts=b,this.parent=O}get(x,b){return x===wo?this.route:x===Ns?this.childContexts:this.parent.get(x,b)}}let yr=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=u.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(b,O){1&b&&u._UZ(0,"router-outlet")},dependencies:[uo],encapsulation:2}),A})();function ys(A,x){var b;return A.providers&&!A._injector&&(A._injector=(0,u.MMx)(A.providers,x,`Route: ${A.path}`)),null!==(b=A._injector)&&void 0!==b?b:x}function Ri(A){const x=A.children&&A.children.map(Ri),b=x?{...A,children:x}:{...A};return!b.component&&!b.loadComponent&&(x||b.loadChildren)&&b.outlet&&b.outlet!==Ht&&(b.component=yr),b}function vs(A){return A.outlet||Ht}function Gs(A,x){const b=A.filter(O=>vs(O)===x);return b.push(...A.filter(O=>vs(O)!==x)),b}function zs(A){var x;if(!A)return null;if(null!==(x=A.routeConfig)&&void 0!==x&&x._injector)return A.routeConfig._injector;for(let b=A.parent;b;b=b.parent){const O=b.routeConfig;if(null!=O&&O._loadedInjector)return O._loadedInjector;if(null!=O&&O._injector)return O._injector}return null}class ko{constructor(x,b,O,U){this.routeReuseStrategy=x,this.futureState=b,this.currState=O,this.forwardEvent=U}activate(x){const b=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,O,x),ps(this.futureState.root),this.activateChildRoutes(b,O,x)}deactivateChildRoutes(x,b,O){const U=xs(b);x.children.forEach(ee=>{const re=ee.value.outlet;this.deactivateRoutes(ee,U[re],O),delete U[re]}),sr(U,(ee,re)=>{this.deactivateRouteAndItsChildren(ee,O)})}deactivateRoutes(x,b,O){const U=x.value,ee=b?b.value:null;if(U===ee)if(U.component){const re=O.getContext(U.outlet);re&&this.deactivateChildRoutes(x,b,re.children)}else this.deactivateChildRoutes(x,b,O);else ee&&this.deactivateRouteAndItsChildren(b,O)}deactivateRouteAndItsChildren(x,b){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,b):this.deactivateRouteAndOutlet(x,b)}detachAndStoreRouteSubtree(x,b){const O=b.getContext(x.value.outlet),U=O&&x.value.component?O.children:b,ee=xs(x);for(const re of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[re],U);if(O&&O.outlet){const re=O.outlet.detach(),Xe=O.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:re,route:x,contexts:Xe})}}deactivateRouteAndOutlet(x,b){const O=b.getContext(x.value.outlet),U=O&&x.value.component?O.children:b,ee=xs(x);for(const re of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[re],U);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(x,b,O){const U=xs(b);x.children.forEach(ee=>{this.activateRoutes(ee,U[ee.value.outlet],O),this.forwardEvent(new hs(ee.value.snapshot))}),x.children.length&&this.forwardEvent(new vi(x.value.snapshot))}activateRoutes(x,b,O){const U=x.value,ee=b?b.value:null;if(ps(U),U===ee)if(U.component){const Xe=O.getOrCreateContext(U.outlet);this.activateChildRoutes(x,b,Xe.children)}else this.activateChildRoutes(x,b,O);else if(U.component){const Xe=O.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const St=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),Xe.children.onOutletReAttached(St.contexts),Xe.attachRef=St.componentRef,Xe.route=St.route.value,Xe.outlet&&Xe.outlet.attach(St.componentRef,St.route.value),ps(St.route.value),this.activateChildRoutes(x,null,Xe.children)}else{var re;const St=zs(U.snapshot),an=null!==(re=null==St?void 0:St.get(u._Vd))&&void 0!==re?re:null;Xe.attachRef=null,Xe.route=U,Xe.resolver=an,Xe.injector=St,Xe.outlet&&Xe.outlet.activateWith(U,Xe.injector),this.activateChildRoutes(x,null,Xe.children)}}else this.activateChildRoutes(x,null,O)}}class ea{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class er{constructor(x,b){this.component=x,this.route=b}}function Ma(A,x,b){const O=A._root;return So(O,x?x._root:null,b,[O.value])}function Qs(A,x){const b=Symbol(),O=x.get(A,b);return O===b?"function"!=typeof A||(0,u.Z0I)(A)?x.get(A):A:O}function So(A,x,b,O,U={canDeactivateChecks:[],canActivateChecks:[]}){const ee=xs(x);return A.children.forEach(re=>{(function Ua(A,x,b,O,U={canDeactivateChecks:[],canActivateChecks:[]}){const ee=A.value,re=x?x.value:null,Xe=b?b.getContext(A.value.outlet):null;if(re&&ee.routeConfig===re.routeConfig){const St=function ja(A,x,b){if("function"==typeof b)return b(A,x);switch(b){case"pathParamsChange":return!Ge(A.url,x.url);case"pathParamsOrQueryParamsChange":return!Ge(A.url,x.url)||!qt(A.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!js(A,x)||!qt(A.queryParams,x.queryParams);default:return!js(A,x)}}(re,ee,ee.routeConfig.runGuardsAndResolvers);St?U.canActivateChecks.push(new ea(O)):(ee.data=re.data,ee._resolvedData=re._resolvedData),So(A,x,ee.component?Xe?Xe.children:null:b,O,U),St&&Xe&&Xe.outlet&&Xe.outlet.isActivated&&U.canDeactivateChecks.push(new er(Xe.outlet.component,re))}else re&&co(x,Xe,U),U.canActivateChecks.push(new ea(O)),So(A,null,ee.component?Xe?Xe.children:null:b,O,U)})(re,ee[re.value.outlet],b,O.concat([re.value]),U),delete ee[re.value.outlet]}),sr(ee,(re,Xe)=>co(re,b.getContext(Xe),U)),U}function co(A,x,b){const O=xs(A),U=A.value;sr(O,(ee,re)=>{co(ee,U.component?x?x.children.getContext(re):null:x,b)}),b.canDeactivateChecks.push(new er(U.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,U))}function m(A){return"function"==typeof A}function lr(A){return A instanceof Re.K||"EmptyError"===(null==A?void 0:A.name)}const ti=Symbol("INITIAL_VALUE");function $n(){return(0,nt.w)(A=>je(A.map(x=>x.pipe((0,We.q)(1),(0,gt.O)(ti)))).pipe((0,$e.U)(x=>{for(const b of x)if(!0!==b){if(b===ti)return ti;if(!1===b||b instanceof Yn)return b}return!0}),(0,ot.h)(x=>x!==ti),(0,We.q)(1)))}function Fo(A){return(0,lt.z)((0,et.b)(x=>{if(wr(x))throw Rs(0,x)}),(0,$e.U)(x=>!0===x))}const Js={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ga(A,x,b,O,U){const ee=fo(A,x,b);return ee.matched?function Lo(A,x,b,O){const U=x.canMatch;if(!U||0===U.length)return(0,H.of)(!0);const ee=U.map(re=>{const Xe=Qs(re,A);return wn(function zt(A){return A&&m(A.canMatch)}(Xe)?Xe.canMatch(x,b):A.runInContext(()=>Xe(x,b)))});return(0,H.of)(ee).pipe($n(),Fo())}(O=ys(x,O),x,b).pipe((0,$e.U)(re=>!0===re?ee:{...Js})):(0,H.of)(ee)}function fo(A,x,b){var O;if(""===x.path)return"full"===x.pathMatch&&(A.hasChildren()||b.length>0)?{...Js}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const ee=(x.matcher||Dn)(b,A,x);if(!ee)return{...Js};const re={};sr(ee.posParams,(St,an)=>{re[an]=St.path});const Xe=ee.consumed.length>0?{...re,...ee.consumed[ee.consumed.length-1].parameters}:re;return{matched:!0,consumedSegments:ee.consumed,remainingSegments:b.slice(ee.consumed.length),parameters:Xe,positionalParamSegments:null!==(O=ee.posParams)&&void 0!==O?O:{}}}function po(A,x,b,O){if(b.length>0&&function ta(A,x,b){return b.some(O=>eo(A,x,O)&&vs(O)!==Ht)}(A,b,O)){const ee=new Oe(x,function $i(A,x,b,O){const U={};U[Ht]=O,O._sourceSegment=A,O._segmentIndexShift=x.length;for(const ee of b)if(""===ee.path&&vs(ee)!==Ht){const re=new Oe([],{});re._sourceSegment=A,re._segmentIndexShift=x.length,U[vs(ee)]=re}return U}(A,x,O,new Oe(b,A.children)));return ee._sourceSegment=A,ee._segmentIndexShift=x.length,{segmentGroup:ee,slicedSegments:[]}}if(0===b.length&&function iu(A,x,b){return b.some(O=>eo(A,x,O))}(A,b,O)){const ee=new Oe(A.segments,function ru(A,x,b,O,U){const ee={};for(const re of O)if(eo(A,b,re)&&!U[vs(re)]){const Xe=new Oe([],{});Xe._sourceSegment=A,Xe._segmentIndexShift=x.length,ee[vs(re)]=Xe}return{...U,...ee}}(A,x,b,O,A.children));return ee._sourceSegment=A,ee._segmentIndexShift=x.length,{segmentGroup:ee,slicedSegments:b}}const U=new Oe(A.segments,A.children);return U._sourceSegment=A,U._segmentIndexShift=x.length,{segmentGroup:U,slicedSegments:b}}function eo(A,x,b){return(!(A.hasChildren()||x.length>0)||"full"!==b.pathMatch)&&""===b.path}function Yi(A,x,b,O){return!!(vs(A)===O||O!==Ht&&eo(x,b,A))&&("**"===A.path||fo(x,A,b).matched)}function lc(A,x,b){return 0===x.length&&!A.children[b]}const ma=!1;class na{constructor(x){this.segmentGroup=x||null}}class Bo{constructor(x){this.urlTree=x}}function mi(A){return Ye(new na(A))}function Ds(A){return Ye(new Bo(A))}class Fl{constructor(x,b,O,U,ee){this.injector=x,this.configLoader=b,this.urlSerializer=O,this.urlTree=U,this.config=ee,this.allowRedirects=!0}apply(){const x=po(this.urlTree.root,[],[],this.config).segmentGroup,b=new Oe(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,b,Ht).pipe((0,$e.U)(ee=>this.createUrlTree(or(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe(He(ee=>{if(ee instanceof Bo)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof na?this.noMatchError(ee):ee}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,Ht).pipe((0,$e.U)(U=>this.createUrlTree(or(U),x.queryParams,x.fragment))).pipe(He(U=>{throw U instanceof na?this.noMatchError(U):U}))}noMatchError(x){return new u.vHH(4002,ma)}createUrlTree(x,b,O){const U=Pi(x);return new Yn(U,b,O)}expandSegmentGroup(x,b,O,U){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(x,b,O).pipe((0,$e.U)(ee=>new Oe([],ee))):this.expandSegment(x,O,b,O.segments,U,!0)}expandChildren(x,b,O){const U=[];for(const ee of Object.keys(O.children))"primary"===ee?U.unshift(ee):U.push(ee);return(0,J.D)(U).pipe(we(ee=>{const re=O.children[ee],Xe=Gs(b,ee);return this.expandSegmentGroup(x,Xe,re,ee).pipe((0,$e.U)(St=>({segment:St,outlet:ee})))}),(0,rt.R)((ee,re)=>(ee[re.outlet]=re.segment,ee),{}),kt())}expandSegment(x,b,O,U,ee,re){return(0,J.D)(O).pipe(we(Xe=>this.expandSegmentAgainstRoute(x,b,O,Xe,U,ee,re).pipe(He(an=>{if(an instanceof na)return(0,H.of)(null);throw an}))),(0,De.P)(Xe=>!!Xe),He((Xe,St)=>{if(lr(Xe))return lc(b,U,ee)?(0,H.of)(new Oe([],{})):mi(b);throw Xe}))}expandSegmentAgainstRoute(x,b,O,U,ee,re,Xe){return Yi(U,b,ee,re)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(x,b,U,ee,re):Xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,b,O,U,ee,re):mi(b):mi(b)}expandSegmentAgainstRouteUsingRedirect(x,b,O,U,ee,re){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,O,U,re):this.expandRegularSegmentAgainstRouteUsingRedirect(x,b,O,U,ee,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,b,O,U){const ee=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Ds(ee):this.lineralizeSegments(O,ee).pipe((0,Ie.z)(re=>{const Xe=new Oe(re,{});return this.expandSegment(x,Xe,b,re,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,b,O,U,ee,re){const{matched:Xe,consumedSegments:St,remainingSegments:an,positionalParamSegments:En}=fo(b,U,ee);if(!Xe)return mi(b);const In=this.applyRedirectCommands(St,U.redirectTo,En);return U.redirectTo.startsWith("/")?Ds(In):this.lineralizeSegments(U,In).pipe((0,Ie.z)(zr=>this.expandSegment(x,b,O,zr.concat(an),re,!1)))}matchSegmentAgainstRoute(x,b,O,U,ee){return"**"===O.path?(x=ys(O,x),O.loadChildren?(O._loadedRoutes?(0,H.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(x,O)).pipe((0,$e.U)(Xe=>(O._loadedRoutes=Xe.routes,O._loadedInjector=Xe.injector,new Oe(U,{})))):(0,H.of)(new Oe(U,{}))):ga(b,O,U,x).pipe((0,nt.w)(({matched:re,consumedSegments:Xe,remainingSegments:St})=>{var an;return re?(x=null!==(an=O._injector)&&void 0!==an?an:x,this.getChildConfig(x,O,U).pipe((0,Ie.z)(In=>{var zr;const F=null!==(zr=In.injector)&&void 0!==zr?zr:x,j=In.routes,{segmentGroup:te,slicedSegments:fe}=po(b,Xe,St,j),dt=new Oe(te.segments,te.children);if(0===fe.length&&dt.hasChildren())return this.expandChildren(F,j,dt).pipe((0,$e.U)(Fn=>new Oe(Xe,Fn)));if(0===j.length&&0===fe.length)return(0,H.of)(new Oe(Xe,{}));const It=vs(O)===ee;return this.expandSegment(F,dt,j,fe,It?Ht:ee,!0).pipe((0,$e.U)(en=>new Oe(Xe.concat(en.segments),en.children)))}))):mi(b)}))}getChildConfig(x,b,O){return b.children?(0,H.of)({routes:b.children,injector:x}):b.loadChildren?void 0!==b._loadedRoutes?(0,H.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function pa(A,x,b,O){const U=x.canLoad;if(void 0===U||0===U.length)return(0,H.of)(!0);const ee=U.map(re=>{const Xe=Qs(re,A);return wn(function f(A){return A&&m(A.canLoad)}(Xe)?Xe.canLoad(x,b):A.runInContext(()=>Xe(x,b)))});return(0,H.of)(ee).pipe($n(),Fo())}(x,b,O).pipe((0,Ie.z)(U=>U?this.configLoader.loadChildren(x,b).pipe((0,et.b)(ee=>{b._loadedRoutes=ee.routes,b._loadedInjector=ee.injector})):function ya(A){return Ye(Wi(ma,3))}())):(0,H.of)({routes:[],injector:x})}lineralizeSegments(x,b){let O=[],U=b.root;for(;;){if(O=O.concat(U.segments),0===U.numberOfChildren)return(0,H.of)(O);if(U.numberOfChildren>1||!U.children[Ht])return x.redirectTo,Ye(new u.vHH(4e3,ma));U=U.children[Ht]}}applyRedirectCommands(x,b,O){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),x,O)}applyRedirectCreateUrlTree(x,b,O,U){const ee=this.createSegmentGroup(x,b.root,O,U);return new Yn(ee,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(x,b){const O={};return sr(x,(U,ee)=>{if("string"==typeof U&&U.startsWith(":")){const Xe=U.substring(1);O[ee]=b[Xe]}else O[ee]=U}),O}createSegmentGroup(x,b,O,U){const ee=this.createSegments(x,b.segments,O,U);let re={};return sr(b.children,(Xe,St)=>{re[St]=this.createSegmentGroup(x,Xe,O,U)}),new Oe(ee,re)}createSegments(x,b,O,U){return b.map(ee=>ee.path.startsWith(":")?this.findPosParam(x,ee,U):this.findOrReturn(ee,O))}findPosParam(x,b,O){const U=O[b.path.substring(1)];if(!U)throw new u.vHH(4001,ma);return U}findOrReturn(x,b){let O=0;for(const U of b){if(U.path===x.path)return b.splice(O),U;O++}return x}}class Ll{}class N{constructor(x,b,O,U,ee,re,Xe){this.injector=x,this.rootComponentType=b,this.config=O,this.urlTree=U,this.url=ee,this.paramsInheritanceStrategy=re,this.urlSerializer=Xe}recognize(){const x=po(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,Ht).pipe((0,$e.U)(b=>{if(null===b)return null;const O=new zi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new Di(O,b),ee=new Io(this.url,U);return this.inheritParamsAndData(ee._root),ee}))}inheritParamsAndData(x){const b=x.value,O=fs(b,this.paramsInheritanceStrategy);b.params=Object.freeze(O.params),b.data=Object.freeze(O.data),x.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(x,b,O,U){return 0===O.segments.length&&O.hasChildren()?this.processChildren(x,b,O):this.processSegment(x,b,O,O.segments,U)}processChildren(x,b,O){return(0,J.D)(Object.keys(O.children)).pipe(we(U=>{const ee=O.children[U],re=Gs(b,U);return this.processSegmentGroup(x,re,ee,U)}),(0,rt.R)((U,ee)=>U&&ee?(U.push(...ee),U):null),function Ct(A,x=!1){return(0,Ne.e)((b,O)=>{let U=0;b.subscribe((0,de.x)(O,ee=>{const re=A(ee,U++);(re||x)&&O.next(ee),!re&&O.complete()}))})}(U=>null!==U),(0,Ot.d)(null),kt(),(0,$e.U)(U=>{if(null===U)return null;const ee=Ee(U);return function q(A){A.sort((x,b)=>x.value.outlet===Ht?-1:b.value.outlet===Ht?1:x.value.outlet.localeCompare(b.value.outlet))}(ee),ee}))}processSegment(x,b,O,U,ee){return(0,J.D)(b).pipe(we(re=>{var Xe;return this.processSegmentAgainstRoute(null!==(Xe=re._injector)&&void 0!==Xe?Xe:x,re,O,U,ee)}),(0,De.P)(re=>!!re),He(re=>{if(lr(re))return lc(O,U,ee)?(0,H.of)([]):(0,H.of)(null);throw re}))}processSegmentAgainstRoute(x,b,O,U,ee){if(b.redirectTo||!Yi(b,O,U,ee))return(0,H.of)(null);let re;if("**"===b.path){var Xe,St;const an=U.length>0?hr(U).parameters:{},En=Pn(O)+U.length,In=new zi(U,an,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Mr(b),vs(b),null!==(Xe=null!==(St=b.component)&&void 0!==St?St:b._loadedComponent)&&void 0!==Xe?Xe:null,b,$t(O),En,jr(b));re=(0,H.of)({snapshot:In,consumedSegments:[],remainingSegments:[]})}else re=ga(O,b,U,x).pipe((0,$e.U)(({matched:an,consumedSegments:En,remainingSegments:In,parameters:zr})=>{var F,j;if(!an)return null;const te=Pn(O)+En.length;return{snapshot:new zi(En,zr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Mr(b),vs(b),null!==(F=null!==(j=b.component)&&void 0!==j?j:b._loadedComponent)&&void 0!==F?F:null,b,$t(O),te,jr(b)),consumedSegments:En,remainingSegments:In}}));return re.pipe((0,nt.w)(an=>{var En,In;if(null===an)return(0,H.of)(null);const{snapshot:zr,consumedSegments:F,remainingSegments:j}=an;x=null!==(En=b._injector)&&void 0!==En?En:x;const te=null!==(In=b._loadedInjector)&&void 0!==In?In:x,fe=function B(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(b),{segmentGroup:dt,slicedSegments:It}=po(O,F,j,fe.filter(en=>void 0===en.redirectTo));if(0===It.length&&dt.hasChildren())return this.processChildren(te,fe,dt).pipe((0,$e.U)(en=>null===en?null:[new Di(zr,en)]));if(0===fe.length&&0===It.length)return(0,H.of)([new Di(zr,[])]);const jt=vs(b)===ee;return this.processSegment(te,fe,dt,It,jt?Ht:ee).pipe((0,$e.U)(en=>null===en?null:[new Di(zr,en)]))}))}}function ie(A){const x=A.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Ee(A){const x=[],b=new Set;for(const O of A){if(!ie(O)){x.push(O);continue}const U=x.find(ee=>O.value.routeConfig===ee.value.routeConfig);void 0!==U?(U.children.push(...O.children),b.add(U)):x.push(O)}for(const O of b){const U=Ee(O.children);x.push(new Di(O.value,U))}return x.filter(O=>!b.has(O))}function $t(A){let x=A;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Pn(A){var x;let b=A,O=null!==(x=b._segmentIndexShift)&&void 0!==x?x:0;for(;b._sourceSegment;){var U;b=b._sourceSegment,O+=null!==(U=b._segmentIndexShift)&&void 0!==U?U:0}return O-1}function Mr(A){return A.data||{}}function jr(A){return A.resolve||{}}function ns(A){return"string"==typeof A.title||null===A.title}function rs(A){return(0,nt.w)(x=>{const b=A(x);return b?(0,J.D)(b).pipe((0,$e.U)(()=>x)):(0,H.of)(x)})}const Fs=new u.OlP("ROUTES");let Xt=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,H.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const O=wn(b.loadComponent()).pipe((0,$e.U)(Ea),(0,et.b)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=ee}),bn(()=>{this.componentLoaders.delete(b)})),U=new tt(O,()=>new Le.x).pipe(Q());return this.componentLoaders.set(b,U),U}loadChildren(b,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,H.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const ee=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,$e.U)(Xe=>{this.onLoadEndListener&&this.onLoadEndListener(O);let St,an,En=!1;Array.isArray(Xe)?an=Xe:(St=Xe.create(b).injector,an=Or(St.get(Fs,[],u.XFs.Self|u.XFs.Optional)));return{routes:an.map(Ri),injector:St}}),bn(()=>{this.childrenLoaders.delete(O)})),re=new tt(ee,()=>new Le.x).pipe(Q());return this.childrenLoaders.set(O,re),re}loadModuleFactoryOrRoutes(b){return wn(b()).pipe((0,$e.U)(Ea),(0,Ie.z)(O=>O instanceof u.YKP||Array.isArray(O)?(0,H.of)(O):(0,J.D)(this.compiler.compileModuleAsync(O))))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Ea(A){return function _i(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let Tn=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Le.x,this.configLoader=(0,u.f3M)(Xt),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Lt),this.rootContexts=(0,u.f3M)(Ns),this.navigationId=0,this.afterPreactivation=()=>(0,H.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=U=>this.events.next(new gn(U)),this.configLoader.onLoadStartListener=U=>this.events.next(new Jt(U))}complete(){var b;null===(b=this.transitions)||void 0===b||b.complete()}handleNavigationRequest(b){var O;const U=++this.navigationId;null===(O=this.transitions)||void 0===O||O.next({...this.transitions.value,...b,id:U})}setupNavigations(b){return this.transitions=new xe.X({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ht,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ot.h)(O=>0!==O.id),(0,$e.U)(O=>({...O,extractedUrl:b.urlHandlingStrategy.extract(O.rawUrl)})),(0,nt.w)(O=>{let U=!1,ee=!1;return(0,H.of)(O).pipe((0,et.b)(re=>{this.currentNavigation={id:re.id,initialUrl:re.rawUrl,extractedUrl:re.extractedUrl,trigger:re.source,extras:re.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,nt.w)(re=>{var Xe;const St=b.browserUrlTree.toString(),an=!b.navigated||re.extractedUrl.toString()!==St||St!==b.currentUrlTree.toString(),En=null!==(Xe=re.extras.onSameUrlNavigation)&&void 0!==Xe?Xe:b.onSameUrlNavigation;if(!an&&"reload"!==En){const In="";return this.events.next(new jn(re.id,b.serializeUrl(O.rawUrl),In,0)),b.rawUrlTree=re.rawUrl,re.resolve(null),G.E}if(b.urlHandlingStrategy.shouldProcessUrl(re.rawUrl))return Xn(re.source)&&(b.browserUrlTree=re.extractedUrl),(0,H.of)(re).pipe((0,nt.w)(In=>{var zr,F;const j=null===(zr=this.transitions)||void 0===zr?void 0:zr.getValue();return this.events.next(new Ft(In.id,this.urlSerializer.serialize(In.extractedUrl),In.source,In.restoredState)),j!==(null===(F=this.transitions)||void 0===F?void 0:F.getValue())?G.E:Promise.resolve(In)}),function _s(A,x,b,O){return(0,nt.w)(U=>function Zi(A,x,b,O,U){return new Fl(A,x,b,O,U).apply()}(A,x,b,U.extractedUrl,O).pipe((0,$e.U)(ee=>({...U,urlAfterRedirects:ee}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,et.b)(In=>{this.currentNavigation={...this.currentNavigation,finalUrl:In.urlAfterRedirects},O.urlAfterRedirects=In.urlAfterRedirects}),function _r(A,x,b,O,U){return(0,Ie.z)(ee=>function wl(A,x,b,O,U,ee,re="emptyOnly"){return new N(A,x,b,O,U,re,ee).recognize().pipe((0,nt.w)(Xe=>null===Xe?function _a(A){return new Pe.y(x=>x.error(A))}(new Ll):(0,H.of)(Xe)))}(A,x,b,ee.urlAfterRedirects,O.serialize(ee.urlAfterRedirects),O,U).pipe((0,$e.U)(re=>({...ee,targetSnapshot:re}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,et.b)(In=>{if(O.targetSnapshot=In.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!In.extras.skipLocationChange){const F=b.urlHandlingStrategy.merge(In.urlAfterRedirects,In.rawUrl);b.setBrowserUrl(F,In)}b.browserUrlTree=In.urlAfterRedirects}const zr=new xr(In.id,this.urlSerializer.serialize(In.extractedUrl),this.urlSerializer.serialize(In.urlAfterRedirects),In.targetSnapshot);this.events.next(zr)}));if(an&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:In,extractedUrl:zr,source:F,restoredState:j,extras:te}=re,fe=new Ft(In,this.urlSerializer.serialize(zr),F,j);this.events.next(fe);const dt=Ro(zr,this.rootComponentType).snapshot;return O={...re,targetSnapshot:dt,urlAfterRedirects:zr,extras:{...te,skipLocationChange:!1,replaceUrl:!1}},(0,H.of)(O)}{const In="";return this.events.next(new jn(re.id,b.serializeUrl(O.extractedUrl),In,1)),b.rawUrlTree=re.rawUrl,re.resolve(null),G.E}}),(0,et.b)(re=>{const Xe=new st(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot);this.events.next(Xe)}),(0,$e.U)(re=>O={...re,guards:Ma(re.targetSnapshot,re.currentSnapshot,this.rootContexts)}),function ts(A,x){return(0,Ie.z)(b=>{const{targetSnapshot:O,currentSnapshot:U,guards:{canActivateChecks:ee,canDeactivateChecks:re}}=b;return 0===re.length&&0===ee.length?(0,H.of)({...b,guardsResult:!0}):function Cs(A,x,b,O){return(0,J.D)(A).pipe((0,Ie.z)(U=>function To(A,x,b,O,U){const ee=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,H.of)(!0);const re=ee.map(Xe=>{var St;const an=null!==(St=zs(x))&&void 0!==St?St:U,En=Qs(Xe,an);return wn(function ze(A){return A&&m(A.canDeactivate)}(En)?En.canDeactivate(A,x,b,O):an.runInContext(()=>En(A,x,b,O))).pipe((0,De.P)())});return(0,H.of)(re).pipe($n())}(U.component,U.route,b,x,O)),(0,De.P)(U=>!0!==U,!0))}(re,O,U,A).pipe((0,Ie.z)(Xe=>Xe&&function w(A){return"boolean"==typeof A}(Xe)?function ni(A,x,b,O){return(0,J.D)(x).pipe(we(U=>(0,Ce.z)(function No(A,x){return null!==A&&x&&x(new qn(A)),(0,H.of)(!0)}(U.route.parent,O),function Ki(A,x){return null!==A&&x&&x(new Kn(A)),(0,H.of)(!0)}(U.route,O),function ho(A,x,b){const O=x[x.length-1],ee=x.slice(0,x.length-1).reverse().map(re=>function Va(A){const x=A.routeConfig?A.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:A,guards:x}:null}(re)).filter(re=>null!==re).map(re=>ae(()=>{const Xe=re.guards.map(St=>{var an;const En=null!==(an=zs(re.node))&&void 0!==an?an:b,In=Qs(St,En);return wn(function W(A){return A&&m(A.canActivateChild)}(In)?In.canActivateChild(O,A):En.runInContext(()=>In(O,A))).pipe((0,De.P)())});return(0,H.of)(Xe).pipe($n())}));return(0,H.of)(ee).pipe($n())}(A,U.path,b),function fa(A,x,b){const O=x.routeConfig?x.routeConfig.canActivate:null;if(!O||0===O.length)return(0,H.of)(!0);const U=O.map(ee=>ae(()=>{var re;const Xe=null!==(re=zs(x))&&void 0!==re?re:b,St=Qs(ee,Xe);return wn(function S(A){return A&&m(A.canActivate)}(St)?St.canActivate(x,A):Xe.runInContext(()=>St(x,A))).pipe((0,De.P)())}));return(0,H.of)(U).pipe($n())}(A,U.route,b))),(0,De.P)(U=>!0!==U,!0))}(O,ee,A,x):(0,H.of)(Xe)),(0,$e.U)(Xe=>({...b,guardsResult:Xe})))})}(this.environmentInjector,re=>this.events.next(re)),(0,et.b)(re=>{if(O.guardsResult=re.guardsResult,wr(re.guardsResult))throw Rs(0,re.guardsResult);const Xe=new Fe(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(re.urlAfterRedirects),re.targetSnapshot,!!re.guardsResult);this.events.next(Xe)}),(0,ot.h)(re=>!!re.guardsResult||(b.restoreHistory(re),this.cancelNavigationTransition(re,"",3),!1)),rs(re=>{if(re.guards.canActivateChecks.length)return(0,H.of)(re).pipe((0,et.b)(Xe=>{const St=new vt(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(St)}),(0,nt.w)(Xe=>{let St=!1;return(0,H.of)(Xe).pipe(function Ni(A,x){return(0,Ie.z)(b=>{const{targetSnapshot:O,guards:{canActivateChecks:U}}=b;if(!U.length)return(0,H.of)(b);let ee=0;return(0,J.D)(U).pipe(we(re=>function ur(A,x,b,O){const U=A.routeConfig,ee=A._resolve;return void 0!==(null==U?void 0:U.title)&&!ns(U)&&(ee[gr]=U.title),function Vi(A,x,b,O){const U=function to(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===U.length)return(0,H.of)({});const ee={};return(0,J.D)(U).pipe((0,Ie.z)(re=>function si(A,x,b,O){var U;const ee=null!==(U=zs(x))&&void 0!==U?U:O,re=Qs(A,ee);return wn(re.resolve?re.resolve(x,b):ee.runInContext(()=>re(x,b)))}(A[re],x,b,O).pipe((0,De.P)(),(0,et.b)(Xe=>{ee[re]=Xe}))),Ze(1),function An(A){return(0,$e.U)(()=>A)}(ee),He(re=>lr(re)?G.E:Ye(re)))}(ee,A,x,O).pipe((0,$e.U)(re=>(A._resolvedData=re,A.data=fs(A,b).resolve,U&&ns(U)&&(A.data[gr]=U.title),null)))}(re.route,O,A,x)),(0,et.b)(()=>ee++),Ze(1),(0,Ie.z)(re=>ee===U.length?(0,H.of)(b):G.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,et.b)({next:()=>St=!0,complete:()=>{St||(b.restoreHistory(Xe),this.cancelNavigationTransition(Xe,"",2))}}))}),(0,et.b)(Xe=>{const St=new Ut(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(St)}))}),rs(re=>{const Xe=St=>{var an;const En=[];null!==(an=St.routeConfig)&&void 0!==an&&an.loadComponent&&!St.routeConfig._loadedComponent&&En.push(this.configLoader.loadComponent(St.routeConfig).pipe((0,et.b)(In=>{St.component=In}),(0,$e.U)(()=>{})));for(const In of St.children)En.push(...Xe(In));return En};return je(Xe(re.targetSnapshot.root)).pipe((0,Ot.d)(),(0,We.q)(1))}),rs(()=>this.afterPreactivation()),(0,$e.U)(re=>{const Xe=function Zs(A,x,b){const O=Co(A,x._root,b?b._root:void 0);return new Eo(O,x)}(b.routeReuseStrategy,re.targetSnapshot,re.currentRouterState);return O={...re,targetRouterState:Xe}}),(0,et.b)(re=>{b.currentUrlTree=re.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(re.urlAfterRedirects,re.rawUrl),b.routerState=re.targetRouterState,"deferred"===b.urlUpdateStrategy&&(re.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,re),b.browserUrlTree=re.urlAfterRedirects)}),((A,x,b)=>(0,$e.U)(O=>(new ko(x,O.targetRouterState,O.currentRouterState,b).activate(A),O)))(this.rootContexts,b.routeReuseStrategy,re=>this.events.next(re)),(0,et.b)({next:re=>{var Xe;U=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Kt(re.id,this.urlSerializer.serialize(re.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),null===(Xe=b.titleStrategy)||void 0===Xe||Xe.updateTitle(re.targetRouterState.snapshot),re.resolve(!0)},complete:()=>{U=!0}}),bn(()=>{var re;U||ee||this.cancelNavigationTransition(O,"",1),(null===(re=this.currentNavigation)||void 0===re?void 0:re.id)===O.id&&(this.currentNavigation=null)}),He(re=>{if(ee=!0,ks(re)){ds(re)||(b.navigated=!0,b.restoreHistory(O,!0));const St=new mn(O.id,this.urlSerializer.serialize(O.extractedUrl),re.message,re.cancellationCode);if(this.events.next(St),ds(re)){const an=b.urlHandlingStrategy.merge(re.url,b.rawUrlTree),En={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||Xn(O.source)};b.scheduleNavigation(an,ht,null,En,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{var Xe;b.restoreHistory(O,!0);const St=new ar(O.id,this.urlSerializer.serialize(O.extractedUrl),re,null!==(Xe=O.targetSnapshot)&&void 0!==Xe?Xe:void 0);this.events.next(St);try{O.resolve(b.errorHandler(re))}catch(an){O.reject(an)}}return G.E}))}))}cancelNavigationTransition(b,O,U){const ee=new mn(b.id,this.urlSerializer.serialize(b.extractedUrl),O,U);this.events.next(ee),b.resolve(!1)}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Xn(A){return A!==ht}let rl=(()=>{class A{buildTitle(b){let O,U=b.root;for(;void 0!==U;){var ee;O=null!==(ee=this.getResolvedTitleForRoute(U))&&void 0!==ee?ee:O,U=U.children.find(re=>re.outlet===Ht)}return O}getResolvedTitleForRoute(b){return b.data[gr]}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(_n)},providedIn:"root"}),A})(),_n=(()=>{class A extends rl{constructor(b){super(),this.title=b}updateTitle(b){const O=this.buildTitle(b);void 0!==O&&this.title.setTitle(O)}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(xn.Dx))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),At=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(Fi)},providedIn:"root"}),A})();class Zt{shouldDetach(x){return!1}store(x,b){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,b){return x.routeConfig===b.routeConfig}}let Fi=(()=>{class A extends Zt{}return A.\u0275fac=function(){let x;return function(O){return(x||(x=u.n5z(A)))(O||A)}}(),A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const bl=new u.OlP("",{providedIn:"root",factory:()=>({})});let su=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:function(){return(0,u.f3M)(Bl)},providedIn:"root"}),A})(),Bl=(()=>{class A{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,O){return b}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function ou(A){throw A}function xu(A,x,b){return x.parse("/")}const wa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},au={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ro=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var b;this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(bl,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ou,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xu,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(su),this.routeReuseStrategy=(0,u.f3M)(At),this.urlCreationStrategy=(0,u.f3M)(xi),this.titleStrategy=(0,u.f3M)(rl),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Or(null!==(b=(0,u.f3M)(Fs,{optional:!0}))&&void 0!==b?b:[]),this.navigationTransitions=(0,u.f3M)(Tn),this.urlSerializer=(0,u.f3M)(Lt),this.location=(0,u.f3M)(ke.Ye),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Yn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ro(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(O=>{this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ht,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const O="popstate"===b.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,O,b.state)},0)}))}navigateToSyncWithBrowser(b,O,U){const ee={replaceUrl:!0},re=null!=U&&U.navigationId?U:null;if(U){const St={...U};delete St.navigationId,delete St.\u0275routerPageId,0!==Object.keys(St).length&&(ee.state=St)}const Xe=this.parseUrl(b);this.scheduleNavigation(Xe,O,re,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(Ri),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,O={}){const{relativeTo:U,queryParams:ee,fragment:re,queryParamsHandling:Xe,preserveFragment:St}=O,an=St?this.currentUrlTree.fragment:re;let En=null;switch(Xe){case"merge":En={...this.currentUrlTree.queryParams,...ee};break;case"preserve":En=this.currentUrlTree.queryParams;break;default:En=ee||null}return null!==En&&(En=this.removeEmptyProps(En)),this.urlCreationStrategy.createUrlTree(U,this.routerState,this.currentUrlTree,b,En,null!=an?an:null)}navigateByUrl(b,O={skipLocationChange:!1}){const U=wr(b)?b:this.parseUrl(b),ee=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(ee,ht,null,O)}navigate(b,O={skipLocationChange:!1}){return function Ia(A){for(let x=0;x<A.length;x++){const b=A[x];if(null==b)throw new u.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,O),O)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let O;try{O=this.urlSerializer.parse(b)}catch(U){O=this.malformedUriErrorHandler(U,this.urlSerializer,b)}return O}isActive(b,O){let U;if(U=!0===O?{...wa}:!1===O?{...au}:O,wr(b))return mr(this.currentUrlTree,b,U);const ee=this.parseUrl(b);return mr(this.currentUrlTree,ee,U)}removeEmptyProps(b){return Object.keys(b).reduce((O,U)=>{const ee=b[U];return null!=ee&&(O[U]=ee),O},{})}scheduleNavigation(b,O,U,ee,re){if(this.disposed)return Promise.resolve(!1);let Xe,St,an,En;if(re?(Xe=re.resolve,St=re.reject,an=re.promise):an=new Promise((F,j)=>{Xe=F,St=j}),"computed"===this.canceledNavigationResolution)if(U&&U.\u0275routerPageId)En=U.\u0275routerPageId;else if(ee.replaceUrl||ee.skipLocationChange){var In;En=null!==(In=this.browserPageId)&&void 0!==In?In:0}else{var zr;En=(null!==(zr=this.browserPageId)&&void 0!==zr?zr:0)+1}else En=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:En,source:O,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:ee,resolve:Xe,reject:St,promise:an,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),an.catch(F=>Promise.reject(F))}setBrowserUrl(b,O){const U=this.urlSerializer.serialize(b),ee={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.isCurrentPathEqualTo(U)||O.extras.replaceUrl?this.location.replaceState(U,"",ee):this.location.go(U,"",ee)}restoreHistory(b,O=!1){if("computed"===this.canceledNavigationResolution){var U,ee;const re=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(U=this.getCurrentNavigation())||void 0===U?void 0:U.finalUrl)||0===re?this.currentUrlTree===(null===(ee=this.getCurrentNavigation())||void 0===ee?void 0:ee.finalUrl)&&0===re&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(re)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,O){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:O}:{navigationId:b}}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Qn=(()=>{class A{constructor(b,O,U,ee,re,Xe){var St;this.router=b,this.route=O,this.tabIndexAttribute=U,this.renderer=ee,this.el=re,this.locationStrategy=Xe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Le.x;const an=null===(St=re.nativeElement.tagName)||void 0===St?void 0:St.toLowerCase();this.isAnchorElement="a"===an||"area"===an,this.isAnchorElement?this.subscription=b.events.subscribe(En=>{En instanceof Kt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,u.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,u.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,u.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,O,U,ee,re){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||O||U||ee||re||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var b;null===(b=this.subscription)||void 0===b||b.unsubscribe()}updateHref(){var b;this.href=null!==this.urlTree&&this.locationStrategy?null===(b=this.locationStrategy)||void 0===b?void 0:b.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const O=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(b,O){const U=this.renderer,ee=this.el.nativeElement;null!==O?U.setAttribute(ee,b,O):U.removeAttribute(ee,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(b){return new(b||A)(u.Y36(ro),u.Y36(wo),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(ke.S$))},A.\u0275dir=u.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&u.NdJ("click",function(ee){return O.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&b&&u.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),A})();class pi{}let Hn=(()=>{class A{preload(b,O){return O().pipe(He(()=>(0,H.of)(null)))}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Qr=(()=>{class A{constructor(b,O,U,ee,re){this.router=b,this.injector=U,this.preloadingStrategy=ee,this.loader=re}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)(b=>b instanceof Kt),we(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,O){const U=[];for(const St of O){var ee,re;St.providers&&!St._injector&&(St._injector=(0,u.MMx)(St.providers,b,`Route: ${St.path}`));const an=null!==(ee=St._injector)&&void 0!==ee?ee:b,En=null!==(re=St._loadedInjector)&&void 0!==re?re:an;if(St.loadChildren&&!St._loadedRoutes&&void 0===St.canLoad||St.loadComponent&&!St._loadedComponent)U.push(this.preloadConfig(an,St));else if(St.children||St._loadedRoutes){var Xe;U.push(this.processRoutes(En,null!==(Xe=St.children)&&void 0!==Xe?Xe:St._loadedRoutes))}}return(0,J.D)(U).pipe((0,Cn.J)())}preloadConfig(b,O){return this.preloadingStrategy.preload(O,()=>{let U;U=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(b,O):(0,H.of)(null);const ee=U.pipe((0,Ie.z)(re=>{var Xe;return null===re?(0,H.of)(void 0):(O._loadedRoutes=re.routes,O._loadedInjector=re.injector,this.processRoutes(null!==(Xe=re.injector)&&void 0!==Xe?Xe:b,re.routes))}));if(O.loadComponent&&!O._loadedComponent){const re=this.loader.loadComponent(O);return(0,J.D)([ee,re]).pipe((0,Cn.J)())}return ee})}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(ro),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(pi),u.LFG(Xt))},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Dl=new u.OlP("");let Li=(()=>{class A{constructor(b,O,U,ee,re={}){this.urlSerializer=b,this.transitions=O,this.viewportScroller=U,this.zone=ee,this.options=re,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},re.scrollPositionRestoration=re.scrollPositionRestoration||"disabled",re.anchorScrolling=re.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Ft?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Kt&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof ai&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ai(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){var b,O;null===(b=this.routerEventsSubscription)||void 0===b||b.unsubscribe(),null===(O=this.scrollEventsSubscription)||void 0===O||O.unsubscribe()}}return A.\u0275fac=function(b){u.$Z()},A.\u0275prov=u.Yz7({token:A,factory:A.\u0275fac}),A})();var rn=(()=>((rn=rn||{})[rn.COMPLETE=0]="COMPLETE",rn[rn.FAILED=1]="FAILED",rn[rn.REDIRECTING=2]="REDIRECTING",rn))();const $o=!1;function Vo(A,x){return{\u0275kind:A,\u0275providers:x}}const sl=new u.OlP("",{providedIn:"root",factory:()=>!1});function gi(){const A=(0,u.f3M)(u.zs3);return x=>{var b,O;const U=A.get(u.z2F);if(x!==U.components[0])return;const ee=A.get(ro),re=A.get(Mu);1===A.get(jo)&&ee.initialNavigation(),null===(b=A.get(go,null,u.XFs.Optional))||void 0===b||b.setUpPreloading(),null===(O=A.get(Dl,null,u.XFs.Optional))||void 0===O||O.init(),ee.resetRootComponentType(U.componentTypes[0]),re.closed||(re.next(),re.unsubscribe())}}const Mu=new u.OlP($o?"bootstrap done indicator":"",{factory:()=>new Le.x}),jo=new u.OlP($o?"initial navigation":"",{providedIn:"root",factory:()=>1});function Sl(){let A=[];return A=$o?[{provide:u.Xts,multi:!0,useFactory:()=>{const x=(0,u.f3M)(ro);return()=>x.events.subscribe(b=>{var O,U,ee,re;null===(O=(U=console).group)||void 0===O||O.call(U,`Router Event: ${b.constructor.name}`),console.log(function Ji(A){var x,b,O,U;if(!("type"in A))return`Unknown Router Event: ${A.constructor.name}`;switch(A.type){case 14:return`ActivationEnd(path: '${(null===(x=A.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(b=A.snapshot.routeConfig)||void 0===b?void 0:b.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(O=A.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(U=A.snapshot.routeConfig)||void 0===U?void 0:U.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state}, shouldActivate: ${A.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 2:return`NavigationCancel(id: ${A.id}, url: '${A.url}')`;case 16:return`NavigationSkipped(id: ${A.id}, url: '${A.url}')`;case 1:return`NavigationEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${A.id}, url: '${A.url}', error: ${A.error})`;case 0:return`NavigationStart(id: ${A.id}, url: '${A.url}')`;case 6:return`ResolveEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 5:return`ResolveStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 10:return`RouteConfigLoadEnd(path: ${A.route.path})`;case 9:return`RouteConfigLoadStart(path: ${A.route.path})`;case 4:return`RoutesRecognized(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 15:return`Scroll(anchor: '${A.anchor}', position: '${A.position?`${A.position[0]}, ${A.position[1]}`:null}')`}}(b)),console.log(b),null===(ee=(re=console).groupEnd)||void 0===ee||ee.call(re)})}}]:[],Vo(1,A)}const go=new u.OlP($o?"router preloader":"");function Id(A){return Vo(0,[{provide:go,useExisting:Qr},{provide:pi,useExisting:A}])}const ui=!1,Nr=new u.OlP(ui?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Fr=[ke.Ye,{provide:Lt,useClass:Qt},ro,Ns,{provide:wo,useFactory:function Ca(A){return A.routerState.root},deps:[ro]},Xt,ui?{provide:sl,useValue:!0}:[]];function Xi(){return new u.PXZ("Router",ro)}let cr=(()=>{class A{constructor(b){}static forRoot(b,O){return{ngModule:A,providers:[Fr,ui&&null!=O&&O.enableTracing?Sl().\u0275providers:[],{provide:Fs,multi:!0,useValue:b},{provide:Nr,useFactory:is,deps:[[ro,new u.FiY,new u.tp0]]},{provide:bl,useValue:O||{}},null!=O&&O.useHash?{provide:ke.S$,useClass:ke.Do}:{provide:ke.S$,useClass:ke.b0},{provide:Dl,useFactory:()=>{const A=(0,u.f3M)(ke.EM),x=(0,u.f3M)(u.R0b),b=(0,u.f3M)(bl),O=(0,u.f3M)(Tn),U=(0,u.f3M)(Lt);return b.scrollOffset&&A.setOffset(b.scrollOffset),new Li(U,O,A,x,b)}},null!=O&&O.preloadingStrategy?Id(O.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:Xi},null!=O&&O.initialNavigation?Si(O):[],[{provide:Zn,useFactory:gi},{provide:u.tb,multi:!0,useExisting:Zn}]]}}static forChild(b){return{ngModule:A,providers:[{provide:Fs,multi:!0,useValue:b}]}}}return A.\u0275fac=function(b){return new(b||A)(u.LFG(Nr,8))},A.\u0275mod=u.oAB({type:A}),A.\u0275inj=u.cJS({imports:[yr]}),A})();function is(A){if(ui&&A)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Si(A){return["disabled"===A.initialNavigation?Vo(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const x=(0,u.f3M)(ro);return()=>{x.setUpLocationChangeListener()}}},{provide:jo,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Vo(2,[{provide:jo,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:x=>{const b=x.get(ke.V_,Promise.resolve());return()=>b.then(()=>new Promise(O=>{const U=x.get(ro),ee=x.get(Mu);(function Oa(A,x){A.events.pipe((0,ot.h)(b=>b instanceof Kt||b instanceof mn||b instanceof ar||b instanceof jn),(0,$e.U)(b=>b instanceof Kt||b instanceof jn?rn.COMPLETE:b instanceof mn&&(0===b.code||1===b.code)?rn.REDIRECTING:rn.FAILED),(0,ot.h)(b=>b!==rn.REDIRECTING),(0,We.q)(1)).subscribe(()=>{x()})})(U,()=>{O(!0)}),x.get(Tn).afterPreactivation=()=>(O(!0),ee.closed?(0,H.of)(void 0):ee),U.initialNavigation()}))}}]).\u0275providers:[]]}const Zn=new u.OlP(ui?"Router Initializer":"")},3942:(un,yt,V)=>{"use strict";V.d(yt,{Z:()=>it});var u=V(2090),J=V(4859),H=V(9681),xe=V(1877);class Re{constructor(Ce,ve){this._delegate=Ce,this.firebase=ve,(0,H._addComponent)(Ce,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService(Ce,ve=H._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(Ce);return!lt.isInitialized()&&"EXPLICIT"===(null===(ae=lt.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:ve})}_removeServiceInstance(Ce,ve=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(ve)}_addComponent(Ce){(0,H._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,H._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_e=function Ve(){const bt=function Te(bt){const Ce={},ve={__esModule:!0,initializeApp:function at(Ne,Q={}){const tt=H.initializeApp(Ne,Q);if((0,u.r3)(Ce,tt.name))return Ce[tt.name];const Le=new bt(tt,ve);return Ce[tt.name]=Le,Le},app:lt,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function G(Ne){const Q=Ne.name,tt=Q.replace("-compat","");if(H._registerComponent(Ne)&&"PUBLIC"===Ne.type){const Le=(ke=lt())=>{if("function"!=typeof ke[tt])throw me.create("invalid-app-argument",{appName:Q});return ke[tt]()};void 0!==Ne.serviceProps&&(0,u.ZB)(Le,Ne.serviceProps),ve[tt]=Le,bt.prototype[tt]=function(...ke){return this._getService.bind(this,Q).apply(this,Ne.multipleInstances?ke:[])}}return"PUBLIC"===Ne.type?ve[tt]:null},removeApp:function ae(Ne){delete Ce[Ne]},useAsService:function Me(Ne,Q){return"serverAuth"===Q?null:Q},modularAPIs:H}};function lt(Ne){if(!(0,u.r3)(Ce,Ne=Ne||H._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Ne});return Ce[Ne]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Ye(){return Object.keys(Ce).map(Ne=>Ce[Ne])}}),lt.App=bt,ve}(Re);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function Ce(ve){(0,u.ZB)(bt,ve)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),bt}(),ce=new xe.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=_e;!function je(bt){(0,H.registerVersion)("@firebase/app-compat","0.1.30",bt)}()},9681:(un,yt,V)=>{"use strict";V.r(yt),V.d(yt,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>xn,_DEFAULT_ENTRY_NAME:()=>De,_addComponent:()=>rt,_addOrOverwriteComponent:()=>Ze,_apps:()=>et,_clearComponents:()=>Ct,_components:()=>He,_getProvider:()=>Ot,_registerComponent:()=>Pt,_removeServiceInstance:()=>kt,deleteApp:()=>Ir,getApp:()=>gr,getApps:()=>Gn,initializeApp:()=>Ht,onLog:()=>qt,registerVersion:()=>Dr,setLogLevel:()=>Vr});var u=V(5861),J=V(4859),H=V(1877),xe=V(2090),Re=V(8766);class Pe{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function me(Se){const Ge=Se.getComponent();return"VERSION"===(null==Ge?void 0:Ge.type)}(Ue)){const Lt=Ue.getImmediate();return`${Lt.library}/${Lt.version}`}return null}).filter(Ue=>Ue).join(" ")}}const Te="@firebase/app",_e=new H.Yd("@firebase/app"),De="[DEFAULT]",we={[Te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,He=new Map;function rt(Se,Ge){try{Se.container.addComponent(Ge)}catch(Ue){_e.debug(`Component ${Ge.name} failed to register with FirebaseApp ${Se.name}`,Ue)}}function Ze(Se,Ge){Se.container.addOrOverwriteComponent(Ge)}function Pt(Se){const Ge=Se.name;if(He.has(Ge))return _e.debug(`There were multiple attempts to register component ${Ge}.`),!1;He.set(Ge,Se);for(const Ue of et.values())rt(Ue,Se);return!0}function Ot(Se,Ge){const Ue=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),Se.container.getProvider(Ge)}function kt(Se,Ge,Ue=De){Ot(Se,Ge).clearInstance(Ue)}function Ct(){He.clear()}const bn=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Cn{constructor(Ge,Ue,Lt){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=Lt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}const xn="9.9.1";function Ht(Se,Ge={}){"object"!=typeof Ge&&(Ge={name:Ge});const Ue=Object.assign({name:De,automaticDataCollectionEnabled:!1},Ge),Lt=Ue.name;if("string"!=typeof Lt||!Lt)throw bn.create("bad-app-name",{appName:String(Lt)});const Qt=et.get(Lt);if(Qt){if((0,xe.vZ)(Se,Qt.options)&&(0,xe.vZ)(Ue,Qt.config))return Qt;throw bn.create("duplicate-app",{appName:Lt})}const dn=new J.H0(Lt);for(const zn of He.values())dn.addComponent(zn);const ir=new Cn(Se,Ue,dn);return et.set(Lt,ir),ir}function gr(Se=De){const Ge=et.get(Se);if(!Ge)throw bn.create("no-app",{appName:Se});return Ge}function Gn(){return Array.from(et.values())}function Ir(Se){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(Se){const Ge=Se.name;et.has(Ge)&&(et.delete(Ge),yield Promise.all(Se.container.getProviders().map(Ue=>Ue.delete())),Se.isDeleted=!0)})).apply(this,arguments)}function Dr(Se,Ge,Ue){var Lt;let Qt=null!==(Lt=we[Se])&&void 0!==Lt?Lt:Se;Ue&&(Qt+=`-${Ue}`);const dn=Qt.match(/\s|\//),ir=Ge.match(/\s|\//);if(dn||ir){const zn=[`Unable to register library "${Qt}" with version "${Ge}":`];return dn&&zn.push(`library name "${Qt}" contains illegal characters (whitespace or "/")`),dn&&ir&&zn.push("and"),ir&&zn.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void _e.warn(zn.join(" "))}Pt(new J.wA(`${Qt}-version`,()=>({library:Qt,version:Ge}),"VERSION"))}function qt(Se,Ge){if(null!==Se&&"function"!=typeof Se)throw bn.create("invalid-log-argument");(0,H.Am)(Se,Ge)}function Vr(Se){(0,H.Ub)(Se)}const Or="firebase-heartbeat-database",hr=1,yi="firebase-heartbeat-store";let sr=null;function wn(){return sr||(sr=(0,Re.X3)(Or,hr,{upgrade:(Se,Ge)=>{0===Ge&&Se.createObjectStore(yi)}}).catch(Se=>{throw bn.create("storage-open",{originalErrorMessage:Se.message})})),sr}function vn(){return(vn=(0,u.Z)(function*(Se){var Ge;try{return(yield wn()).transaction(yi).objectStore(yi).get(Gt(Se))}catch(Ue){throw bn.create("storage-get",{originalErrorMessage:null===(Ge=Ue)||void 0===Ge?void 0:Ge.message})}})).apply(this,arguments)}function Vn(Se,Ge){return mr.apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(Se,Ge){var Ue;try{const Qt=(yield wn()).transaction(yi,"readwrite");return yield Qt.objectStore(yi).put(Ge,Gt(Se)),Qt.done}catch(Lt){throw bn.create("storage-set",{originalErrorMessage:null===(Ue=Lt)||void 0===Ue?void 0:Ue.message})}})).apply(this,arguments)}function Gt(Se){return`${Se.name}!${Se.options.appId}`}class Gi{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new Yn(Ue),this._heartbeatsCachePromise=this._storage.read().then(Lt=>(this._heartbeatsCache=Lt,Lt))}triggerHeartbeat(){var Ge=this;return(0,u.Z)(function*(){const Lt=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qt=Er();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==Qt&&!Ge._heartbeatsCache.heartbeats.some(dn=>dn.date===Qt))return Ge._heartbeatsCache.heartbeats.push({date:Qt,agent:Lt}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(dn=>{const ir=new Date(dn.date).valueOf();return Date.now()-ir<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,u.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const Ue=Er(),{heartbeatsToSend:Lt,unsentEntries:Qt}=function Ii(Se,Ge=1024){const Ue=[];let Lt=Se.slice();for(const Qt of Se){const dn=Ue.find(ir=>ir.agent===Qt.agent);if(dn){if(dn.dates.push(Qt.date),Oe(Ue)>Ge){dn.dates.pop();break}}else if(Ue.push({agent:Qt.agent,dates:[Qt.date]}),Oe(Ue)>Ge){Ue.pop();break}Lt=Lt.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:Lt}}(Ge._heartbeatsCache.heartbeats),dn=(0,xe.L)(JSON.stringify({version:2,heartbeats:Lt}));return Ge._heartbeatsCache.lastSentHeartbeatDate=Ue,Qt.length>0?(Ge._heartbeatsCache.heartbeats=Qt,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),dn})()}}function Er(){return(new Date).toISOString().substring(0,10)}class Yn{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,u.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function fn(Se){return vn.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var Ue=this;return(0,u.Z)(function*(){var Lt;if(yield Ue._canUseIndexedDBPromise){const dn=yield Ue.read();return Vn(Ue.app,{lastSentHeartbeatDate:null!==(Lt=Ge.lastSentHeartbeatDate)&&void 0!==Lt?Lt:dn.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var Ue=this;return(0,u.Z)(function*(){var Lt;if(yield Ue._canUseIndexedDBPromise){const dn=yield Ue.read();return Vn(Ue.app,{lastSentHeartbeatDate:null!==(Lt=Ge.lastSentHeartbeatDate)&&void 0!==Lt?Lt:dn.lastSentHeartbeatDate,heartbeats:[...dn.heartbeats,...Ge.heartbeats]})}})()}}function Oe(Se){return(0,xe.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function Be(Se){Pt(new J.wA("platform-logger",Ge=>new Pe(Ge),"PRIVATE")),Pt(new J.wA("heartbeat",Ge=>new Gi(Ge),"PRIVATE")),Dr(Te,"0.7.29",Se),Dr(Te,"0.7.29","esm2017"),Dr("fire-js","")}("")},4859:(un,yt,V)=>{"use strict";V.d(yt,{H0:()=>Te,wA:()=>H,zt:()=>Re});var u=V(5861),J=V(2090);class H{constructor(_e,ce,de){this.name=_e,this.instanceFactory=ce,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}const xe="[DEFAULT]";class Re{constructor(_e,ce){this.name=_e,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const ce=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(ce)){const de=new J.BH;if(this.instancesDeferred.set(ce,de),this.isInitialized(ce)||this.shouldAutoInitialize())try{const Ae=this.getOrInitializeService({instanceIdentifier:ce});Ae&&de.resolve(Ae)}catch(Ae){}}return this.instancesDeferred.get(ce).promise}getImmediate(_e){var ce;const de=this.normalizeInstanceIdentifier(null==_e?void 0:_e.identifier),Ae=null!==(ce=null==_e?void 0:_e.optional)&&void 0!==ce&&ce;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(je){if(Ae)return null;throw je}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,this.shouldAutoInitialize()){if(function me(Ve){return"EAGER"===Ve.instantiationMode}(_e))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(ce){}for(const[ce,de]of this.instancesDeferred.entries()){const Ae=this.normalizeInstanceIdentifier(ce);try{const je=this.getOrInitializeService({instanceIdentifier:Ae});de.resolve(je)}catch(je){}}}}clearInstance(_e=xe){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}delete(){var _e=this;return(0,u.Z)(function*(){const ce=Array.from(_e.instances.values());yield Promise.all([...ce.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...ce.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_e=xe){return this.instances.has(_e)}getOptions(_e=xe){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:ce={}}=_e,de=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ae=this.getOrInitializeService({instanceIdentifier:de,options:ce});for(const[je,it]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(je)&&it.resolve(Ae);return Ae}onInit(_e,ce){var de;const Ae=this.normalizeInstanceIdentifier(ce),je=null!==(de=this.onInitCallbacks.get(Ae))&&void 0!==de?de:new Set;je.add(_e),this.onInitCallbacks.set(Ae,je);const it=this.instances.get(Ae);return it&&_e(it,Ae),()=>{je.delete(_e)}}invokeOnInitCallbacks(_e,ce){const de=this.onInitCallbacks.get(ce);if(de)for(const Ae of de)try{Ae(_e,ce)}catch(je){}}getOrInitializeService({instanceIdentifier:_e,options:ce={}}){let de=this.instances.get(_e);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=_e,Ve===xe?void 0:Ve),options:ce}),this.instances.set(_e,de),this.instancesOptions.set(_e,ce),this.invokeOnInitCallbacks(de,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,de)}catch(Ae){}var Ve;return de||null}normalizeInstanceIdentifier(_e=xe){return this.component?this.component.multipleInstances?_e:xe:_e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const ce=this.getProvider(_e.name);if(ce.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);ce.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const ce=new Re(_e,this);return this.providers.set(_e,ce),ce}getProviders(){return Array.from(this.providers.values())}}},1877:(un,yt,V)=>{"use strict";V.d(yt,{Am:()=>Ve,Ub:()=>Te,Yd:()=>me,in:()=>J});const u=[];var J=(()=>{return(_e=J||(J={}))[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",J;var _e})();const H={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},xe=J.INFO,Re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Pe=(_e,ce,...de)=>{if(ce<_e.logLevel)return;const Ae=(new Date).toISOString(),je=Re[ce];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[je](`[${Ae}]  ${_e.name}:`,...de)};class me{constructor(ce){this.name=ce,this._logLevel=xe,this._logHandler=Pe,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in J))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?H[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ce),this._logHandler(this,J.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ce),this._logHandler(this,J.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ce),this._logHandler(this,J.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ce),this._logHandler(this,J.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ce),this._logHandler(this,J.ERROR,...ce)}}function Te(_e){u.forEach(ce=>{ce.setLogLevel(_e)})}function Ve(_e,ce){for(const de of u){let Ae=null;ce&&ce.level&&(Ae=H[ce.level]),de.userLogHandler=null===_e?null:(je,it,...bt)=>{const Ce=bt.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(ae){return null}}).filter(ve=>ve).join(" ");it>=(null!=Ae?Ae:je.logLevel)&&_e({level:J[it].toLowerCase(),message:Ce,args:bt,type:je.name})}}}},8766:(un,yt,V)=>{"use strict";V.d(yt,{Lj:()=>at,X3:()=>lt});var u=V(5861);const J=(Q,tt)=>tt.some(Le=>Q instanceof Le);let H,xe;const me=new WeakMap,Te=new WeakMap,Ve=new WeakMap,_e=new WeakMap,ce=new WeakMap;let je={get(Q,tt,Le){if(Q instanceof IDBTransaction){if("done"===tt)return Te.get(Q);if("objectStoreNames"===tt)return Q.objectStoreNames||Ve.get(Q);if("store"===tt)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return ve(Q[tt])},set:(Q,tt,Le)=>(Q[tt]=Le,!0),has:(Q,tt)=>Q instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in Q};function Ce(Q){return"function"==typeof Q?function bt(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...tt){return Q.apply(ae(this),tt),ve(me.get(this))}:function(...tt){return ve(Q.apply(ae(this),tt))}:function(tt,...Le){const ke=Q.call(ae(this),tt,...Le);return Ve.set(ke,tt.sort?tt.sort():[tt]),ve(ke)}}(Q):(Q instanceof IDBTransaction&&function Ae(Q){if(Te.has(Q))return;const tt=new Promise((Le,ke)=>{const $e=()=>{Q.removeEventListener("complete",nt),Q.removeEventListener("error",We),Q.removeEventListener("abort",We)},nt=()=>{Le(),$e()},We=()=>{ke(Q.error||new DOMException("AbortError","AbortError")),$e()};Q.addEventListener("complete",nt),Q.addEventListener("error",We),Q.addEventListener("abort",We)});Te.set(Q,tt)}(Q),J(Q,function Re(){return H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,je):Q)}function ve(Q){if(Q instanceof IDBRequest)return function de(Q){const tt=new Promise((Le,ke)=>{const $e=()=>{Q.removeEventListener("success",nt),Q.removeEventListener("error",We)},nt=()=>{Le(ve(Q.result)),$e()},We=()=>{ke(Q.error),$e()};Q.addEventListener("success",nt),Q.addEventListener("error",We)});return tt.then(Le=>{Le instanceof IDBCursor&&me.set(Le,Q)}).catch(()=>{}),ce.set(tt,Q),tt}(Q);if(_e.has(Q))return _e.get(Q);const tt=Ce(Q);return tt!==Q&&(_e.set(Q,tt),ce.set(tt,Q)),tt}const ae=Q=>ce.get(Q);function lt(Q,tt,{blocked:Le,upgrade:ke,blocking:$e,terminated:nt}={}){const We=indexedDB.open(Q,tt),gt=ve(We);return ke&&We.addEventListener("upgradeneeded",ot=>{ke(ve(We.result),ot.oldVersion,ot.newVersion,ve(We.transaction))}),Le&&We.addEventListener("blocked",()=>Le()),gt.then(ot=>{nt&&ot.addEventListener("close",()=>nt()),$e&&ot.addEventListener("versionchange",()=>$e())}).catch(()=>{}),gt}function at(Q,{blocked:tt}={}){const Le=indexedDB.deleteDatabase(Q);return tt&&Le.addEventListener("blocked",()=>tt()),ve(Le).then(()=>{})}const Ye=["get","getKey","getAll","getAllKeys","count"],G=["put","add","delete","clear"],Me=new Map;function Ne(Q,tt){if(!(Q instanceof IDBDatabase)||tt in Q||"string"!=typeof tt)return;if(Me.get(tt))return Me.get(tt);const Le=tt.replace(/FromIndex$/,""),ke=tt!==Le,$e=G.includes(Le);if(!(Le in(ke?IDBIndex:IDBObjectStore).prototype)||!$e&&!Ye.includes(Le))return;const nt=function(){var We=(0,u.Z)(function*(gt,...ot){const Ie=this.transaction(gt,$e?"readwrite":"readonly");let De=Ie.store;return ke&&(De=De.index(ot.shift())),(yield Promise.all([De[Le](...ot),$e&&Ie.done]))[0]});return function(ot){return We.apply(this,arguments)}}();return Me.set(tt,nt),nt}!function it(Q){je=Q(je)}(Q=>({...Q,get:(tt,Le,ke)=>Ne(tt,Le)||Q.get(tt,Le,ke),has:(tt,Le)=>!!Ne(tt,Le)||Q.has(tt,Le)}))},5861:(un,yt,V)=>{"use strict";function u(H,xe,Re,Pe,me,Te,Ve){try{var _e=H[Te](Ve),ce=_e.value}catch(de){return void Re(de)}_e.done?xe(ce):Promise.resolve(ce).then(Pe,me)}function J(H){return function(){var xe=this,Re=arguments;return new Promise(function(Pe,me){var Te=H.apply(xe,Re);function Ve(ce){u(Te,Pe,me,Ve,_e,"next",ce)}function _e(ce){u(Te,Pe,me,Ve,_e,"throw",ce)}Ve(void 0)})}}V.d(yt,{Z:()=>J})}},un=>{un(un.s=3292)}]);